Tralics User Manual
===================
This manual consolidates Tralics-specific documentation from the files under `docs/`.
Source files are embedded verbatim below for completeness.

----

docs/index.rst
--------------

==================================
Tralics: a LaTeX to XML translator
==================================

.. note::

   This is the main documentation page from the previous website. Most of the
   contents are still relevant, but some of it is outdated.

|APICS| |MARELLE|

Introduction
------------

Tralics is a free software whose purpose is to convert a LaTeX document
into an XML file. It is used since 2002 for instance to produce the
Inria's annual `activitity
report <http://www.inria.fr/rapportsactivite>`__. It is developped by
the `Apics Team <https://team.inria.fr/apics/>`__ (and `Marelle
Team <https://team.inria.fr/marelle>`__ since 2011) of
`Inria <http://www.inria.fr>`__.

Send questions, comments, bug reports, etc, to tralics@inria.fr.

Printed Documentation and Examples
----------------------------------

-  The :download:`paper </pdf/tralics-euro2003.pdf>` presented at Eurotex2003 and
   `published in TUGboat
   <http://www.tug.org/TUGboat/Contents/contents24-3.html>`__.
   :cite:`Grimm2003a`
-  The following two reports describe some features of the software.
   These versions are updated for *Tralics* 2.12: :download:`Part I
   </pdf/tralics-rr1.pdf>`,
   :download:`Part II </pdf/tralics-rr2.pdf>` :cite:`Grimm2005,Grimm2005a`.
-  Example of math formulas :download:`here </pdf/testmath.pdf>` and
   `here <mml_ex.html>`__.

Online Documentation
--------------------

HTML documentation of all TeX commands, in alphabetic order:
`Symbols <doc-symbols.html>`__ `A <doc-a.html>`__ `B <doc-b.html>`__
`C <doc-c.html>`__ `D <doc-d.html>`__ `E <doc-e.html>`__
`F <doc-f.html>`__ `G <doc-g.html>`__ `H <doc-h.html>`__
`I <doc-i.html>`__ `J <doc-j.html>`__ `K <doc-k.html>`__
`L <doc-l.html>`__ `M <doc-m.html>`__ `N <doc-n.html>`__
`O <doc-o.html>`__ `P <doc-p.html>`__ `Q <doc-q.html>`__
`R <doc-r.html>`__ `S <doc-s.html>`__ `T <doc-t.html>`__
`U <doc-u.html>`__ `V <doc-v.html>`__ `W <doc-w.html>`__
`X <doc-x.html>`__ `Y <doc-y.html>`__ `Z <doc-z.html>`__
`Characters <doc-chars.html>`__ `Arrays <doc-array.html>`__
`Unimplemented <doc-un.html>`__

`List of all known packages <packages.html>`__

`The errror messages of Tralics <err.html>`__

`Options of the tralics command <options.html>`__

`Tralics and LaTeX3 <doc-latex3.html>`__

This `web page <doc-start.html>`__ explains some concepts used in other
pages and gives some starting examples.

`Getting started <doc-step.html>`__ shows trivial examples, as well as a
full document with title, index, bibliography, etc.

`Tralics and the raweb <raweb.html>`__ explains in details how the
translator can be used.

`New features of the RA2007 <changes2007.html>`__ explains in French
some changes in the handling of the Ra2007, updated for
`2008 <changes2008.html>`__

`Example: \\primes macro, TeXbook, Chapter 20 <doc-loop.html>`__.

`Parameterisation <titlepage.html>`__

`Notes on bibliographical references <raweb.html#rabib>`__

`Computing pi (tex file) <comp_pi.tex>`__

See also: :download:`EuroTeX slides </pdf/tr.pdf>` (pdf)

Status of the Software
----------------------

What's new ? you can consult the `ChangeLog <ChangeLog.html>`__ file.

| Current version is 3.0.0 released 23-february-2026.
| version 2.15.3 released 06-august-2015
| version 2.15.2 released 22-jan-2015
| version 2.15.1 released 25-july-2013
| version 2.15.0 released 31-august-2012
| version 2.14.5 released 06-july-2012
| version 2.14.4 released 07-nov-2011
| version 2.14.3 released 02-may-2011
| version 2.14.2 released 11-apr-2011
| Previous version 2.13 released 20-jul-2008
| Previous version 2.12 released 21-apr-2008
| Previous version 2.11 released 29-11-2007
| Previous version 2.10 released 02-05-2007,
| Previous version 2.9 released 26-10-2006.

Source
------

| Source is available.
| `current version 3.0.0 (dated
  23-february-2026) <https://github.com/tralics/tralics/archive/refs/tags/v3.0.0.tar.gz>`__
| `version 2.15.3 (dated
  06-august-2015) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.15.3.tar.gz>`__
| `version 2.15.2 (dated
  22-jan-2015) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.15.2.tar.gz>`__
| `version 2.15.1 (dated
  25-july-2013) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.15.1.tar.gz>`__
| `version 2.15.0 (dated
  31-august-2012) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.15.0.tar.gz>`__
| `version 2.14.5 (dated
  6-july-2012) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.14.5.tar.gz>`__
| `version 2.14.4 (dated
  07-nov-2011) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.14.4.tar.gz>`__
| `version 2.14.3 (dated
  02-may-2011) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.14.3.tar.gz>`__
| `version 2.14.2 (dated
  11-april-2011) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.14.2.tar.gz>`__
| `version 2.14.1 (dated
  27-january-2011) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-src-2.14.1.tar.gz>`__
| `version 2.13.7 (dated
  26-october-2010) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.7.tar.gz>`__
| `version 2.13.6 (dated
  24-november-2009) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.6.tar.gz>`__
| `version 2.13.5 (dated
  24-november-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.5.tar.gz>`__
| `version 2.13.3 (dated
  27-october-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.3.tar.gz>`__
| `version 2.13.0 (dated
  20-july-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.0.tar.gz>`__
| `version 2.13.2 (dated
  16-october-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.2.tar.gz>`__
| `version 2.13.1 (dated
  03-october-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.13.1.tar.gz>`__
| `version 2.12.8 (dated
  18-july-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.12.8.tar.gz>`__
| `version 2.12 (dated
  5-may-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.12.tar.gz>`__
| `version 2.11.8 (dated
  15-apr-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.8.tar.gz>`__
| `version 2.11 (released
  29-11-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.tar.gz>`__
| `version 2.10 (released
  04-05-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.10.tar.gz>`__
| (see below for other versions)

Binaries
--------

| You can get some binaries:
| `tralics 2.13.6 for Linux (fedora
  10) <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.13.6-linux>`__
| `tralics 2.13.6 for MacOS 10.5
  (Intel) <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.13.6-macintel>`__
| `tralics 2.13.3 for Windows (compiled on cygwin using
  gcc3.4.4) <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2-13-3-win.exe>`__
| `tralics 2.13.3 for Macos 10.4
  PPC <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.13-osxppc>`__
| `tralics 2.11 for Macos 10.4
  PPC <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.11-osxppc>`__
| `tralics 2.11 for linux
  FC5 <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.11-linux>`__
| `tralics 2.10 for linux
  Fedora <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.10-linux>`__
| `tralics 2.10 for Macos
  PPC <ftp://ftp-sop.inria.fr/marelle/tralics/bin/tralics-2.10-osxppc>`__
| (see below for other versions)

Extra files
-----------

| Since version 2.12.7, tralics-src-x.y.tar.gz contains only the
  sources, and tralics-extra-x.y.tar.gz contains the extra files needed
  for the raweb.
| `extra files for version 2.13.4 (dated
  13-november-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/src/tralics-extra-2.13.4.tar.gz>`__
| `extra files for version 2.12.7 (dated
  8-july-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-extra-2.12.7.tar.gz>`__

License
-------

This software is governed by the CeCILL license that can be found at the
following URL http://www.cecill.info

Bibliography
------------

*The LaTeX Companion*, Goossens, Mittelbach and Samarin, Addison-Wesley,
1994.

*The LaTeX Companion*, Mittelbach, Goosens and others, Addison-Wesley,
2004. (second edition, abbreviated as TLC2).

*The TeXbook*, Knuth, Addison-Wesley, 1984. (page numbers correspond to
the 1993 edition).

*LaTeX, A Documentation Preparation System*, Lamport, Addison-Wesley,
1985. Second edition 1994. (page numbers correspond to 7th printing
1998).

Old versions
------------

| Source code of other versions: `version 2.12.6 (dated
  4-july-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.12.6.tar.gz>`__
| `version 2.12.4 (dated
  20-june-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.12.4.tar.gz>`__
| `version 2.12.3 (dated
  6-june-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.12.3.tar.gz>`__
| `version 2.12.2 (dated
  29-may-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.12.2.tar.gz>`__
| `version 2.11.7 (dated
  4-apr-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.7.tar.gz>`__
| `version 2.11.6 (released
  22-feb-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.6.tar.gz>`__
| `version 2.11.5 (released
  18-feb-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.5.tar.gz>`__
| `version 2.11.4 (released
  07-feb-2008) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.4.tar.gz>`__
| `version 2.11.2 (released
  19-12-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.11.2.tar.gz>`__
| `version 2.10.8 (released
  20-11-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.10.8.tar.gz>`__
| `version 2.10.5 (released
  02-08-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.10.5.tar.gz>`__
| `version 2.9.4 (released
  18-02-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.9.4.tar.gz>`__
| `version 2.9.3 (released
  17-01-2007) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.9.3.tar.gz>`__
| `version 2.9.1 (released
  16-11-2006) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.9.1.tar.gz>`__
| `version 2.9 (released
  26-10-2006) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.9.tar.gz>`__
| `version 2.8.1 (temporary
  version) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics-src-2.8.1.tar.gz>`__
| `version 2.8, released
  01-08-2006 <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src28.tar.gz>`__
| `version 2.7 patch level 6, released
  05-07-2006. <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src27p8.tar.gz>`__
| `version 2.7 patch level 5, released
  27-06-2006. <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src27p5.tar.gz>`__
| `version 2.7 patch level 4, released
  26-06-2006. <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src27p4.tar.gz>`__
| `for version 2.6 patch level 7, released
  30-01-2006. <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src26p7.tar.gz>`__
| `for version 2.6 released
  10-08-2005. <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src26.tar.gz>`__
| `for version 2.4 released
  30-11-2004. <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src24.tar.gz>`__
| `(version 2.3 released
  05-10-2004.) <ftp://ftp-sop.inria.fr/marelle/tralics/old-src/tralics_src23.tar.gz>`__

| Binary code, old versions
| `linux version
  2.9 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-29-linux>`__
| `linux fedora Core5, version
  2.9 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-29-fc5>`__
| `windows version 2.9 (compiled on Cygwin, using gcc
  3.4.4) <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-29-win.exe>`__
| `Macos version
  2.8 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-28-osx>`__
| `linux version
  2.8 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-28-linux>`__
| `windows version 2.8 (compiled on Cygwin, using gcc
  3.4.4) <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-28-win.exe>`__
| `linux
  2.6 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-26-linux>`__
| `linux 2.7pl6(compiled on Cygwin, using gcc
  2.91.57 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-27p8-linux>`__
| `windows (cygwin) 2.7
  (pl5) <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-27p5-linux>`__
| `linux 2.6(pl7) compiled on
  fedora <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-26p7-linux-fedora>`__
| `linux 2.6 (statically
  compiled) <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-26-linux-static>`__
| `Windows, 2.6 (compiled on Cygwin, using gcc
  2.91.57) <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-26-windows>`__
| `MacOS X,
  2.6 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-26-osx>`__
| `MacOS 10.4, 2.6pl7, with
  gcc4.0.0 <ftp://ftp-sop.inria.fr/marelle/tralics-bin/tralics-26p7-osx>`__

| Other binary versions
| `linux
  2.6(pl2) <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-26p2-linux>`__
| `Windows, 2.3 (pl4) (compiled on Cygwin, using gcc
  2.91.57) <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-23p4-windows>`__
| `linux
  2.3(pl4) <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-22p4-linux>`__
| `solaris6,
  2.2 <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-22p3-sunsolaris6>`__
| `solaris8,
  2.2 <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-22p3-sunsolaris8>`__
| `linux 2.2 (statically
  compiled) <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-22p3-linux-static>`__
| `MacOS X,
  1.5c <ftp://ftp-sop.inria.fr/marelle/tralics-obin/tralics-15-macos>`__

Notes
~~~~~

The development of the *Tralics* software started while the author was
in a team named Miaou. This research team is called
\`\ `Apics <http://www-sop.inria.fr/apics>`__' since 01-01-2004. The
official home page of *Tralics* is now
http://www-sop.inria.fr/marelle/tralics. Author:
`José.Grimm@inria.fr <mailto:Jose.Grimm@inria.fr>`__.

| The motivations for this translator can be found in the `research
  report number RT-0265 <http://www.inria.fr/rrrt/rt-0265.html>`__ (in
  french).
| The translator (in its Perl version) was used to convert Inria's
  \``Rapport d'activité'' 2001 into XML and Pdf.
| The tralics documentation is also available on hal.inria.fr, through
  the following links
  `inria-00000198 <http://hal.inria.fr/inria-00000198>`__ and
  `inria-0069870 <http://hal.inria.fr/inria-00069870>`__. It is unlikely
  that these files are up to date.

.. |APICS| image:: /img/apics.gif
   :target: http://team.inria.fr/apics
.. |MARELLE| image:: /img/logoMarelle_v2.png
   :target: https://team.inria.fr/marelle


.. toctree::
   :maxdepth: 1
   :caption: Using tralics
   :hidden:

   options
   titlepage
   packages
   array
   chars
   err
   latex3
   loop
   start
   step
   mml_ex
   fp
   laux
   raweb
   raweb_examples
   raweb_cfg
   auxdoc
   cmds/index
   Changelog <changelog>

.. toctree::
   :maxdepth: 1
   :caption: Examples
   :hidden:

   titlepage-conf
   titlepage-ex1
   titlepage-ex2
   titlepage-ex3

.. toctree::
   :maxdepth: 1
   :caption: Code documentation
   
References
----------

.. bibliography:: tralics.bib
   :style: unsrtalpha

----

docs/start.rst
--------------

Documentation of Tralics
========================

Content: A first `example <#ex1>`__, a second `example <#ex2>`__,
interpretation of the `transcript file <#trans>`__ and
`parameterisation <#parm>`__.

Introduction
------------

This web page is assumed to explain how to read the *Tralics*
documentation, and gives some examples. In general, LaTeX input is
written ``\like{this}`` and the XML output ``<like>that</like>``. You
run *Tralics* on a file myfile.tex via the command tralics myfile. You
can provide some options, before or after the file name. This may
produce *errors* or other *messages*.

Standard example
----------------

Let's consider a TeX file, named hello1.tex that consists of the
following lines.

.. container:: ltx-source

   ::

      \documentclass{article}
      \begin{document}
      Hello, world!
      \end{document}

You compile this file by saying tralics hello1.tex; the extension may be
omitted. If you think that the output is too verbose, you can use the
silent option: say tralics hello1 -silent. Then you will see the
following 8 lines on the terminal

.. container:: tty_out

   ::

      This is tralics 2.15.4, a LaTeX to XML translator, running on maclaurin
      Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file hello1.tex.
      Document class: article 2011/05/09 v1.2 Article document class for Tralics
      Output written on hello1.xml (176 bytes).
      No error found.
      (For more information, see transcript file hello1.log)

The fifth line might be *Dummy default configuration file used*; this
indicates that *Tralics* is unable to find the configuration. The fifth
line may be missing; this means that the article.clt file was not found.
Note that *Tralics* never reads the file article.cls, and does not
complain if class files or packages are missing. You can use the option
-confdir=bar to indicates that the configuration file or class file is
located in the bar directory; this option can be given more than once,
in order to specify more than one location.

In some cases, when *Tralics* thinks you are compiling the Raweb, a
fatal error may be signaled before the transcript file is opened. In all
other cases, it writes some information on the transcript file (in the
example above, the file hello1.log has 186 lines; in verbose mode, this
could be 1071). In particular all errors appear in this file. In some
cases, a file foo.img is created: it holds some information about
graphic files when ``\includegraphics`` is used. Generally, an XML file
is produced, it looks like the following

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='UTF-8'?>
      <!DOCTYPE std SYSTEM 'classes.dtd'>
      <!-- Translated from latex by tralics 2.15.4, date: 2015/08/20-->
      <std>
      <p>Hello, world!
      </p>
      </std>

Small example
-------------

Assume that your document source contains the lines that follow.

.. container:: ltx-source

   ::

      % Example file tralics-ex1.tex $Revision: 1.1 $
      \begin{xmlelement}{preview}
      This is a test. An \unknown command. A math formula $a^$.
      \def\test#1#2?{#1,#2.}\test ok?\typeout{A message}
      \end{xmlelement}
      % EOF

If you run *Tralics* on the document, you will see the following on the
terminal:

.. container:: tty_out

   ::

      This is tralics 2.2 (pl2), a LaTeX to XML translator
      % (some lines omitted here) 
      Error signaled at line 3 of file tralics-ex1.tex:
      Undefined command \unknown.
      Error signaled at line 3 of file tralics-ex1.tex:
      Math formula should not finish with ^.
      A message
      % (lines omitted here) 
      (For more information, see transcript file tralics-ex1.log)

We indicated with colors some omissions. We left the identification line
(this is a very old version), the error messages, the result of
``\typeout``, and the last line. Note that everything that is printed on
the screen is also printed in the transcript file.

Four lines are printed because *Tralics* noticed two errors on the third
line. The fourth line is OK, but the ``\test`` macro has a weird syntax.
There is no ``\documentclass``, no ``\begin{document}`` and no
``\end{document}``: these commands are useful, but there absence is not
an error. The ``xmlelement`` environment allows you to put XML elements
of any name in the result file.

The XML code generated by *Tralics* is the following:

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- translated from latex by tralics 2.2 (pl2)-->
      <unknown>
      <p><preview>This is a test. An <error l='3' c='Undefined command '/>command. % CR added
      A math formula <formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>% CR added
      <mi>a</mi></math></formula>.
      o,k.
      </preview>
      </p></unknown>

Some comments: in TeX, a newline character is equivalent to a space
(unless followed by another newline character, the result being
``\par``). In some cases, spaces disappear (in particular after a
space); if a line is terminated by a space and a new line, and the next
line starts with a space, the translator sees only one space, the
newline character; its translation is a newline character. As a result
most line breaks are the same in the input file and in the resulting XML
document. On the other hand, spaces are ignored in math mode, and all
math formulas produce long lines. In our examples, we have edited all
these formulas, but for the example above, we have indicated (via blue
comments) the places where new line characters have been added.

By default, every error produces an error element in the XML file; for
the current version of *Tralics*, the first element is
``<error n='\unknown' l='3' c='Undefined command'/>`` and the second is
``<error n='$' l='3' c='Math formula should not     finish with ^'/>``.
You can invoke *Tralics* with the -noxmlerror flag, case where no such
elements are generated. You can invoke *Tralics* with the -noundefmac
flag, in the case, the XML file will contain ``\unknown`` instead of the
``<error>`` element. You can invoke *Tralics* with the -nomathml flag,
in the case, the XML file will not contain MathML elements. Using
-nomathml -noxmlerror yields the following file (as the math expression
is not fully converted, there is one less error).

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- translated from latex by tralics 2.7 (pl5)-->
      <unknown>
      <p><preview>This is a test. An command. A math formula 
      <texmath type='inline'>a^</texmath>.
      o,k.
      </preview>
      </p></unknown>

We have designed an XSLT style sheet (named preview.xsl) whose purpose
is to remove from the XML output everything but the ``<preview>``
elements. It is possible to process the resulting document like any
other XML document, in this case, we convert it to XSL-fo, via the
simplefo.xsl style sheet then to dvi and PostScript. We hacked the
fotex.sty file, so that the following command
``\RequirePackage[active]{preview}`` (preview package by David Kastrup)
is activated. As a result, lots of code inserted by the simplefo.xsl
style sheet becomes useless, and only ``<preview>`` elements are used.
As a consequence, the PostScript contains only the translation of the
two lines of code. Converting to an image, it is |preview example| In
the documentation, all images are obtained in this fashion.

.. _trans:

The transcript file
-------------------

The transcript file contains more or less lines, depending on whether
``\tracingall`` and friends are used. You can also use the option
-verbose, this will trace everything, including the bootstrap phase.

The format of the file is like that of TeX. A line of the form
*{\catcode}* says that the ``\catcode`` command has been seen; the line
*+scanint for \\catcode->38* says that ``\catcode`` has fetched the
integer 38 (such information is missing in the TeX transcript); a line
of the form *{begin-group character}* or *{math shift character}* says
that a character was interpreted as a command (TeX indicates which one,
open brace or dollar, but this information is less useful), a line of
the form *\\foo #1#2#3->#2* explains that a macro is about to be
expanded, it is followed by the values of the arguments.

When TeX sees a character, for instance when handling ``Hello, world!``,
it traces it as *{the letter H}*; in order to reduce the size of the
transcript, only the first letter of a group is printed, so you will see
*{horizontal mode: the letter H}*, then *{blank space }*, and *{the
letter w}* and finally *{blank space }*. On the other hand, *Tralics*
shows all characters, in the form *Character sequence: Hello, world! .*
The period here is not part of the sequence, it makes the space that
precedes visible (this space is the end-of-line character). These
characters are kept in a buffer, and later on transferred to the current
XML element, you will see *{Text:Hello, word!^^J}*. Note that ^^J stands
for a newline character (generally, a line break in the source gives a
line break in the XML file). If a letter, like H, is seen in vertical
mode, then TeX starts a new paragraph and switches to horizontal mode;
this is indicated in some cryptic manner. On the other hand, when
*Tralics* creates a new paragraph it says so via: *{Push p 1}* (the
number says how many elements are on the XML stack). At the end of the
paragraph you will see *{Pop 1: document_v p_v}*; after popping, the
stack holds only the document element; you can see that both elements
were entered in vertical mode (*Tralics* does indicate the switch to
horizontal mode).

The trace holds also lines of the form *++ Input stack empty at end of
file* that explain interaction with the file system, lines of the form
*+stack: level + 2 for brace entered on line 13* whenever a new slot in
the save stack is allocated, and *+stack: level - 2 for brace from line
13* when the slot is deallocated; you may also see *+stack: restoring
integer value 4 for \\catcode38* before deallocation.

We shall comment now (a part of) the full trace of the previous example.

.. container:: log_out

   ::

      Transcript file of tralics 2.15.4 for file tralics-ex1.tex 
      Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      Tralics is licensed under the CeCILL Free Software Licensing Agreement
      Start compilation: 2015/08/20 13:25:44 
      OS: Apple, machine maclaurin

The first line indicates the *Tralics* version and the name of the file
to be compiled; this is followed by the Copyright notice. Then comes the
compilation date and time, followed by the operating system and the name
of the computer.

.. container:: log_out

   ::

      Starting translation of file tralics-ex1.tex. 
      Output encoding: UTF8  (idem transcript).
      Left quote is ` right quote is '
      ++ Input encoding is 1 (iso-8859-1) for the main file

You can see that that the XML file, as well as the transcript file will
be encoded in UTF-8, while the input file is, by default, assumed to be
latin1 (the file can say how it is encoded, but the file is not yet
interpreted). The example is all ASCII, so this is irrelevant here.
Moreover, left and right code have there default value.

.. container:: log_out

   ::

      ++ file .tralics_rc does not exist.
      ++ file ../confdir/.tralics_rc exists.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file ../confdir/.tralics_rc.
      Configuration file has type \documentclass
      No \documentclass in source file
      Using some default type
      dtd is unknown from unknown.dtd (standard mode) 
      OK with the configuration file, dealing with the TeX file... 
      There are 6 lines 
      Starting translation

You see where *Tralics* searches for its configuration file, .tralics_rc
and where it is found. This configuration file says that the document
type to use comes from the ``\documentclass`` command of the main file;
however there is no ``\documentclass`` command in this file, so a
default DTD will be used. For explanations see
`here <titlepage.html#explanations>`__. After that, *Tralics* is ready
to translate the six lines of the file. But, before this, there is a
bootstrap phase.

.. container:: log_out

   ::

      {\countdef \count@=\count255}

The transcript file contains many line of this form; this one says that
``\count@`` is the counter 255. (note: this is the largest counter in
plain TeX; however ``\newcounter`` never allocates this one).

.. container:: log_out

   ::

      {\countdef \c@enumi=\count22}
      {globally changing \theenumi=undefined}
      {into \theenumi=macro:->\number \c@enumi }

Whenever a counter is created, here ``enumi``, a command is defined; you
can see here that this globally changes an undefined command into a
macro.

.. container:: log_out

   ::

      {\countdef \c@section=\count46}
      {globally changing \thesection=undefined}
      {into \thesection=macro:->\number \c@section }
      {newcounter->\cl@chapter}
      +stack: level + 2 for brace entered on line 0
      {\let \@elt \relax}
      {changing \@elt=undefined}
      {into \@elt=\relax}
      \cl@chapter ->
      +stack: killing \@elt
      +stack: level - 2 for brace from line 0
      {globally changing \cl@chapter=macro:->}
      {into \cl@chapter=macro:->\@elt {section}}

Here we define a counter that depends on another counter. This results
into redefining ``\cl@chapter``. Inside a group, ``\@elt`` is redefined
by be ``\relax``. Whenever a group is opened or closed, *Tralics*
indicates the line number; here this is still zero. We shall omit most
of the bootstrap phase, and focus on a single line.

.. container:: log_out

   ::

      [13] {\catcode`\&=13\global\def&{\char38 }}%
      {begin-group character}
      +stack: level + 2 for brace entered on line 13
      {\catcode}
      +scanint for \catcode->38
      +scanint for \catcode->13
      {changing \catcode38=4 into \catcode38=13}
      {\global}
      {\global\def}
      {globally changing &=undefined}
      {into &=macro:->\char 38 }
      {end-group character}
      +stack: restoring integer value 4 for \catcode38
      +stack: level - 2 for brace from line 13

Whenever a line is read, it is printed in the transcript file, preceded
by the line number in square brackets. Here we define the value of the
ampersand character as an active character. For this, we start changing
its category code in a group; when the closing brace is seen, the old
value is restored. Since the ampersand is globally defined, it will not
be restored. Note that ``\char38`` could have been replaced by
:literal:`\\char`\&`.

.. container:: log_out

   ::

      [73] %% End bootstrap commands for latex
      ++ Input stack empty at end of file

All the bootstrap commands were in a virtual file; *Tralics* says here
that the input stack is empty. This means the real start of the
translation.

.. container:: log_out

   ::

      [1] % Example file tralics-ex1.tex $Revision: 1.16 $
      [2] \begin{xmlelement}{preview}
      {\begin}
      {\begin xmlelement}
      +stack: level + 2 for environment entered on line 2
      {\xmlelement}
      {Push argument 1}
      Character sequence: preview.
      {Text:preview}
      {Pop 1: document_v argument_v}
      {Push p 1}
      {Push ELT 2}

The first token in the file is the ``\begin`` command. This command
reads an environment name, which is indicated on the next line. A new
level of grouping is entered and an item is pushed on the save stack
(this holds the name of the environment). Then ``\xmlelement`` is
executed, thus logged. This command reads a name, but using a different
algorithm than ``\begin``. The idea is to translate the next argument
into a temporary element, and convert it into a string; the line
*{Text:preview}* shows what is put in the temporary, this will be the
name of the box. The XML stack is used for this purpose, the temporary
is named “argument” in this context.

Once ``\xmlelement`` has found the name of the box to create, it leaves
vertical mode (i.e., starts a new paragraph), then starts a new XML
element with the given name. So two objects are push on the XML stack.

.. container:: log_out

   ::

      [3] This is a test. An \unknown command. A math formula $a^$.
      Character sequence: This is a test. An .
      {Text:This is a test. An }
      Error signaled at line 3 of file tralics-ex1.tex:
      Undefined command \unknown.
      Character sequence: command. A math formula .
      {math shift character}
      {Text:command. A math formula }
      {reassigning \@curmathfont=0}
      +stack: level + 3 for math entered on line 3
      +stack: level - 3 for math from line 3
      Math: $a^$
      {Inline formula
      1 ME 11 - char a - 0
      2 ME 7 - char ^ - 0
      }
      Error signaled at line 3 of file tralics-ex1.tex:
      Math formula should not finish with ^.
      Character sequence: . .

The third line holds some letters, a command, some letters, a formula
and more letters. Since the command is undefined, no line is added to
the transcript (except the two error lines). Now comes the math formula.
There are two passes; for the first pass, you can see that everything
happens in a group, and that the current math font is set to zero; after
that comes a cryptic description of the formula; the second pass signals
an error.

.. container:: log_out

   ::

      [4] \def\test#1#2?{#1,#2.}\test ok?\typeout{A message}
      {\def}
      {changing \test=undefined}
      {into \test=macro:#1#2?->#1,#2.}
      \test #1#2?->#1,#2.
      #1<-o
      #2<-k
      Character sequence: o,k..
      {\typeout}
      A message
      Character sequence:  .

Here is a macro definition, followed by by a macro expansion. There are
two character sequences: one comes from the body of the macro, and one
from the end-of-line character.

.. container:: log_out

   ::

      [5] \end{xmlelement}
      {\end}
      {Text:.
      o,k.
      }

When the ``\end`` command is seen, all characters gathered so far are
put into the current XML element; there is a dot from line 3, four
characters from line 4, and two newline characters.

.. container:: log_out

   ::

      {\end xmlelement}
      {\endxmlelement}
      {Pop 2: document_v p_v ELT_h}
      {\endgroup (for env)}
      +stack: killing \test
      +stack: ending environment xmlelement; resuming document.
      +stack: level - 2 for environment from line 2
      Character sequence:  .

The ``\end`` command grabs its argument, then executes
``\endxmlelement``. This command closes the current paragraph (assuming
one has been opened, which is not the case here) then closes the current
element, and pops the XML stack. After that the ``\end`` command pops
the save stack; the ``\test`` command is restored to its previous value
(undefined) and the current environment is shown.

.. container:: log_out

   ::

      [6] % EOF
      ++ Input stack empty at end of file
      {Text:
      }

Line 6 is ignored, as it is commented out. Since this is the last line
of the file, *Tralics* checks if there is another file on its stack;
since the stack is empty, this is the end of the job. The characters
gathered so far (the newline corresponding to the end of line 5) are
inserted in the current XML element.

.. container:: log_out

   ::

      Bib stats: seen 0 entries.
      Math stats: formulas 1, kernels 0, trivial 0, \mbox 0, large 0, small 0.
      Buffer realloc 1, string 1353, size 12379, merge 0
      Macros created 178, deleted 8; hash size 2400; foonotes 0.
      Save stack +18 -18.
      Attribute list search 1528(1509) found 1083 in 1129 elements (1120 at boot).
      Number of ref 0, of used labels 0, of defined labels 0, of ext. ref. 0.
      Output written on tralics-ex1.xml (453 bytes).
      There were 2 errors.
      (For more information, see transcript file tralics-ex1.log)

Finally *Tralics* shows some statistics, they are explained
`here <doc-step.html#stats>`__.

.. _parm:

Parameterisation
----------------

You can change the name of some elements. For instance, consider the
following input.

.. container:: ltx-source

   ::

      \documentclass{article}
      % Example file tralics-ex2.tex $Revision: 1.1 $
      \begin{document}
      \begin{itemize} \item [A] B \end{itemize}
      \begin{glossaire} \glo{x}{y}\end{glossaire}
      \part{A}\chapter{B}\section{C} \subsection{D}
      \subsubsection{E}\paragraph{F} \subparagraph{G}
      \begin{motscle}first,second \end{motscle}
      \mbox{$a$}
      \declaretopic{10}{foo}\caption[opt]{ok}
      \footnote{anote} \includegraphics{x.ps}
      \begin{figure}\includegraphics{y.ps}\end{figure}
      \end{document}

It will be translated into

.. container:: xml_out

   ::

      <list type='simple'><label>A</label>
      <item id='uid25'><p>B </p>
      </item></list>
      <list type='gloss'><head>Glossary</head><label>x</label><item><p>y</p>
      </item></list></div3></div2></div1></div0>
      <div0 id='uid26'><head>A</head>
      </div0>
      <div0 id='uid27'><head>B</head>
      </div0>
      <div0 id='uid28'><head>C</head>
      <div1 id='uid29'><head>D</head>
      <div2 id='uid30'><head>E</head>
      <div3 id='uid31'><head>F</head>
      <div4 id='uid32'><head>G</head>
      <keywords><term>first</term>
      <term>second</term>
      </keywords><p><mbox><formula type='inline'><simplemath>a</simplemath></formula></mbox>
      <topic num='10'><t_titre>foo</t_titre></topic>
      <caption>ok</caption>
      <note id='uid33' place='foot'>anote</note> <figure file='x'/>
      </p>
      <figure file='y' id='uid34'></figure>
      </div4></div3></div2></div1></div0>

The commands in blue are specific to the raweb; they are no longer
defined. Without them, the current translation is the following. Note
that ``\part``, ``\chapter`` and ``\section`` are considered equivalent
by the article class: they generate a ``div0`` element, and are no
nested. However the ``id-text`` attributes are different (translation of
``\thepart``, ``\thechapter``, etc).

.. container:: xml_out

   ::

      <list type='simple'>
        <label>A</label>
        <item id-text='1' id='uid1'><p noindent='true'>B</p></item>
      </list>
      <div0 id-text='I' id='cid1'><head>A</head></div0>
      <div0 id-text='1' id='cid2'><head>B</head></div0>
      <div0 id-text='1' id='cid3'><head>C</head>
        <div1 id-text='1.1' id='uid2'><head>D</head>
          <div2 id-text='1.1.1' id='uid3'><head>E</head>
            <div3 id-text='1.1.1.1' id='uid4'><head>F</head>
              <div4 id-text='1.1.1.1.1' id='uid5'><head>G</head>
                <keywords>
                  <term>first</term>
                  <term>second</term>
                </keywords>
                <p>
                  <mbox><formula type='inline'><simplemath>a</simplemath></formula></mbox>
                  <caption>ok</caption>
                  <alt_head>opt</alt_head>
                  <note id-text='1' id='uid6' place='foot'>anote</note> 
                  <figure rend='inline' file='x' extension='ps'/>
                </p>
                <figure file='y' extension='ps' id-text='1' id='uid7' rend='figure'/>
              </div4>
            </div3>
          </div2>
        </div1>
      </div0>

Consider the following file (it is called unused.tcf).

.. container:: ltx-source

   ::

      ## This is an example of a configuration file for tralics
      ## Copyright 2006 Inria/apics, Jose' Grimm
      ##  $Id: unused.tcf,v 1.1 2006/07/17 09:09:06 grimm Exp  $
      ## tralics ident rc=unused.tcf  $Revision: 1.1  $

        xml_labelitem_name = "Xlabel"
        xml_gloitem_name = "Xglolabel"
        xml_item_name = "Xitem"
        xml_div0_name = "Xdiv0"
        xml_div1_name = "Xdiv1"
        xml_div2_name = "Xdiv2"
        xml_div3_name = "Xdiv3"
        xml_div4_name = "Xdiv4"
        xml_div5_name = "Xdiv5"
        xml_div6_name = "Xdiv6"
        xml_subfigure_name = "Xsubfigure"
        xml_row_name = "Xrow"
        xml_cell_name = "Xcell"
        xml_keywords_name = "Xkeywords"
        xml_term_name = "Xterm"
        xml_mbox_name = "Xmbox"
        xml_topic_name = "Xtopic"
        xml_caption_name = "Xcaption"
        xml_footnote_name = "Xnote"
        xml_fbox_name = "Xfbox"
        xml_box_name = "Xbox"
        xml_picture_name = "Xpicture"
        xml_graphics_name = "Xgraphics"
        xml_figure_name = "Xfigure"
        xml_table_name = "Xtable"
        xml_Table_name = "XTable"
        xml_bezier_name = "Xbezier"
        xml_put_name = "Xput"
        xml_line_name = "Xline"
        xml_vector_name = "Xvector"
        xml_oval_name = "Xoval"
        xml_dashline_name = "Xdashline"
        xml_drawline_name = "Xdrawline"
        xml_dottedline_name = "Xdottedline"
        xml_circle_name = "Xcircle"

Compile with tralics tralics-ex2 -type unused -trivialmath=2, you get

.. container:: xml_out

   ::

      <unknown>
      <list type='simple'><Xlabel>A</Xlabel>
      <Xitem id-text='1' id='uid1'><p noindent='true'>B</p>
      </Xitem></list>
      <Xdiv0 id-text='I' id='cid1'><head>A</head>
      </Xdiv0>
      <Xdiv0 id-text='1' id='cid2'><head>B</head>
      </Xdiv0>
      <Xdiv0 id-text='1' id='cid3'><head>C</head>
      <Xdiv1 id-text='1.1' id='uid2'><head>D</head>
      <Xdiv2 id-text='1.1.1' id='uid3'><head>E</head>
      <Xdiv3 id-text='1.1.1.1' id='uid4'><head>F</head>
      <Xdiv4 id-text='1.1.1.1.1' id='uid5'><head>G</head>
      <Xkeywords>
      <Xterm>first</Xterm>
      <Xterm>second</Xterm>
      </Xkeywords><p><Xmbox><formula type='inline'><simplemath>a</simplemath></formula></Xmbox>
      <caption>ok</caption><alt_head>opt</alt_head>
      <Xnote id-text='1' id='uid6' place='foot'>anote</Xnote> 
      <Xfigure rend='inline' file='x' extension='ps'/></p>
      <figure file='y' extension='ps' id-text='1' id='uid7' rend='Xfigure'/>
      </Xdiv4></Xdiv3></Xdiv2></Xdiv1></Xdiv0></unknown>

.. |preview example| image:: /img/img_5.png

----

docs/step.rst
-------------

Getting started with Tralics
============================

| `The first document <#first-doc>`__
| `Our second document <#second-doc>`__
| `Our third document <#third-doc>`__
| `Our fourth document <#fourth-doc>`__
| `Statistics <#stats>`__
| `A complete example <#last-doc>`__

This file is a primer for Tralics, a LaTeX to XML translator. We explain
how to use it. First, we consider a `trivial <#first-doc>`__ example,
that contains only text, then the same one, `with latex
markup <#second-doc>`__. After that, we give a small example `with a
configuration file <#third-doc>`__ and a last one `with another
configuration file <#fourth-doc>`__. We also explain `near the
end <#stats>`__ the meaning of all those numbers printed by *Tralics* at
the end of the job. Finally we give a complete non trivial document.

Introduction
------------

This document was written in 2006 for Tralics version 2.9; since then
the syntax changed a bit. The following demonstrates some features

.. container:: tty_out

   ::

      grimm@macarthur$ tralics -inputfile=../hello5.xml -o Hello
      This is tralics 2.11.5, a LaTeX to XML translator, running on macarthur
      Copyright INRIA/MIAOU/APICS 2002-2008, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Fatal error: Cannot open input file ../hello5.tex

If you say tralics hello, the effect is to convert hello.tex into
hello.xml. The program takes some arguments; in the example above, there
are three arguments separated by spaces. An argument that start with a
dash is an option, these are described in `options of the tralics
command <options.html>`__. Some options (like -verbose) take no
argument; some take two arguments, and some take a single argument. The
following forms are equivalent: -o Hello (a space), -o=Hello (no space,
but an equals sign), or -o = Hello (an equals sign, two spaces). You can
also say "-o= Hello" (an equal sign optional spaces), provided that the
shell removes the doubles quotes and presents this to *Tralics* as a
single string.

All options start with a dash, and all arguments that are not options
are input files; unless the -interactivemath option is used, exactly one
input file must be given. If you want to convert a file whose name
starts with a dash, you must use the -inputfile option. The extension
.tex is added to the input file name when missing. You can change the
name of the output file into result.xml via the -o result option. Note
also that if the input file is foo.xml *Tralics* will not attempt to
convert foo.xml.tex into foo.xml.xml; it makes the assumption that you
want foo.xml from foo.tex. This explains the previous error message.

The first document
------------------

The simplest document you can give to *Tralics* has the following form.

.. container:: ltx-source

   ::

      Hello, world!

Assume that the file is called hello.tex and you call *Tralics* on it.
You can say tralics hello -noconfig or tralics -noconfig hello.tex to
compile it, the result will be the same. If you just say tralics hello,
the default configuration file is loaded, but the resulting XML file is
the same.

This is what you will see on the terminal.

.. container:: tty_out

   ::

         maclaurin@grimm$ tralics hello
      1  This is tralics 2.15.4, a LaTeX to XML translator, running on maclaurin
      2  Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      3  Licensed under the CeCILL Free Software Licensing Agreement
      4  Starting translation of file hello.tex.
      5  Configuration file identification: standard $ Revision: 2.24 $
      6  Read configuration file ../confdir/.tralics_rc.
      7  Bib stats: seen 0 entries.
      9  Math stats: formulas 0, kernels 0, trivial 0, \mbox 0, large 0, small 0.
      10 Buffer realloc 1, string 1336, size 11986, merge 0
      11 Macros created 177, deleted 7; hash size 2398; foonotes 0.
      12 Save stack +14 -14.
      13 Attribute list search 1517(1509) found 1077 in 1122 elements (1120 at boot).
      14 Number of ref 0, of used labels 0, of defined labels 0, of ext. ref. 0.
      17 Output written on hello.xml (187 bytes).
      18 No error found.
      19 (For more information, see transcript file hello.log)

Let's try to understand all these lines. Lines 1 to 3 identify the
software and its release number (here 2.15.4) and the name of the
computer. You may have a different version, that produces a different
output. In particular, the third line of the XML result is a comment
line that holds the version number, and since version 2.9, the
compilation date. Thus, the size of XML output can depend on the
version.

Line 4 indicates what *Tralics* will do (before version 2.13, there was
an option telling *Tralics* to check the file for the Raweb, or call
LaTeX). Default is to translate the source file in to XML. Lines 5 and 6
say that some configuration file has been read. If the option -noconfig
is given, you see *No configuration file* instead. For details about
configuration files, see `Configuration files of
Tralics <titlepage.html>`__ .

Everything starting at line 7 is printed after translation is complete.
Lines 7 to 16 will be explained in detail later. In earlier versions,
you could see on line 8: Seen 0 bibliographic entries (this follows
logically from line7); on line 15 Modules with 0, without 0, sections
with 0, without 0 (Modules were once used for the raweb), and on line 16
There was no image (however, if images were used, then *Tralics* says
so). Line 11 says that 2398 multiletter control sequences were in use,
and 177 macros were created; line 13 says that 1120 elements are
constructed at bootstrap time (for instance, ``\empty`` and ``\alpha``
both occupy a slot in the hash table, one is a macro, and the other is
associated to an XML element).

The last three lines indicate that *Tralics* was happy (no errors found)
and generated an XML file. If you call *Tralics* with option -silent,
you will see only the first four lines, and the last three ones. We can
look at the result:

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- Translated from latex by tralics 2.9, date: 2006/09/20-->
      <unknown>
      <p>Hello, world!
      </p></unknown>

or

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='UTF-8'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- Translated from latex by tralics 2.15.4, date: 2015/08/21-->
      <unknown>
      <p>Hello, world!
      </p></unknown>

*Tralics* has generated another file, named hello.log. In this case, the
content is more or less the same as what is printed on the terminal. As
a general rule, everything printed on the terminal is also printed on
the transcript file. In what follows we have marked with -- the lines
that differs (the banner line “This is tralics...” is printed in the
terminal before options are parsed, the transcript file is generated
after its name has been found). We have marked with ++ some lines that
are not printed on the terminal. Three lines are marked \*\*, they
indicate some omitted stuff, namely the statistics (same as above),
*File info* and *Bootstrap info*, these are 46 lines starting with
``\countdef``, 43 with ``\dimendef``, 16 with ``\chardef`` or
``\mathchardef``, and 23 with ``\skipdef``. These lines explain, for
instance, that the chapter counter is the counter number 45.

.. container:: log_out

   ::

      -- Transcript file of tralics 2.15.4 for file hello.tex
         Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      -- Tralics is licensed under the CeCILL Free Software Licensing Agreement
      ++ Start compilation: 2015/08/22 11:14:51
      ++ OS: Apple, machine maclaurin
         Starting translation of file hello.tex.
      ++ Output encoding: UTF8  (idem transcript).
      ++ Left quote is ` right quote is '
      ++ \notrivialmath=1
      ++ ++ Input encoding is 1 (iso-8859-1) for the main file
      ** File info
         Configuration file identification: standard $ Revision: 2.24 $
         Read configuration file ../confdir/.tralics_rc.
      ++ Configuration file has type \documentclass
      ++ No \documentclass in source file
      ++ Using some default type
      ++ dtd is unknown from unknown.dtd (standard mode)
      ++ OK with the configuration file, dealing with the TeX file...
      ++ There is a single line
      ++ Starting translation
      ** Bootstrap info
      ** Statistics

Our second document
-------------------

The second example looks a bit more like a LaTeX document. The file is
called hello1.tex; its content is:

.. container:: ltx-source

   ::

      \documentclass{article}
      \begin{document}
      Hello, world!
      \end{document}

The result of the compilation can be found
`here <%0A%20%20doc-start.html#ex1>`__. Using an older version of
*Tralics* gives:

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE std SYSTEM 'classes.dtd'>
      <!-- Translated from latex by tralics 2.13.0, date: 2008/07/22-->
      <std><p>Hello, world!
      </p>
      </std>

The difference between the two compilations is the third line (it holds
the *Tralics* version and the compilation date) and the first: the
default file encoding is now UTF-8.

The essential difference between hello.xml and hello1.xml is the DTD and
the name of the root element. Here it is ``<std>``; this follows from
the following assumptions: *Tralics* finds a configuration file that,
like the standard one, with revision 2.24, maps “article” to “std”, and
there is no article.tcf file in the search path.

If you compile the file with tralics hello1 -noconfig, the result XML
file will be independent of any configuration or tcf file. Translation
is the same as above. The transcript file starts as follows:

.. container:: log_out

   ::

      1  Transcript file of tralics 2.15.4 for file hello1.tex
         Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      3  Tralics is licensed under the CeCILL Free Software Licensing Agreement
         Start compilation: 2015/08/22 12:26:05
      5  OS: Apple, machine maclaurin
         Starting translation of file hello1.tex.
      7  Output encoding: UTF8  (idem transcript).
         Left quote is ` right quote is '
      9  \notrivialmath=1
         ++ Input encoding is 1 (iso-8859-1) for the main file
      11 No configuration file.
         No type in configuration file
      13 Seen \documentclass article
         Potential type is article
      15 Using some default type
         dtd is std from classes.dtd (standard mode)
      17 OK with the configuration file, dealing with the TeX file...
         There are 4 lines

The start of the transcript file is the same as above, except for the
file name and the compilation date. Line 11 says that no configuration
file is found (in fact, none is searched); line 12 says that no “type”
was found (obviously). In such a case, the “type” defaults to the
current documentclass (this behavior is the same as the standard
configuration file). In the case of hello.tex the main file did not have
a ``\documentclass`` command; here there is one, as shown on line 13. As
a consequence *Tralics* is ready to read the article.tcf (this is the
meaning of “potential”); but this is inhibited by the -noconfig option.
So a default type is used (line 15). This type is std, meaning the the
root element is named ``<std>`` (it would have been ``<unknown>`` in the
absence of a ``\documentclass`` command).

This is the start of transcript file, without the option

.. container:: log_out

   ::

      10 ++ Input encoding is 1 (iso-8859-1) for the main file
      11 ++ file .tralics_rc does not exist.
      12 ++ file ../confdir/.tralics_rc exists.
      13 Configuration file identification: standard $ Revision: 2.24 $
      14 Read configuration file ../confdir/.tralics_rc.
      15 Configuration file has type \documentclass
      16 Seen \documentclass article
      17 Potential type is article
      18 Defined type: std
      19 ++ file article.tcf does not exist.
      20 ++ file ../confdir/article.tcf does not exist.
      21 Alias torture does not match article
      22 Potential type article aliased to std
      23 Using type std
      24 dtd is std from classes.dtd (standard mode)
      25 OK with the configuration file, dealing with the TeX file...

On line 11 and 12, you can see that the configuration file (by default,
it is named .tralics_rc) is search in the current directory then in the
../confdir directory, this can be changed via an option. On line 15, you
can see that the potential type is, as above, the current document
class, thus “article”, and the configuration file defines only “std”
(with some aliases). On lines 19 and 20 you can see where the
article.tcf file is searched; if such a file is found it is interpreted.
Lines 20 and 21 show that “article” is aliases to “std” which becomes
the “type”. Finally, line 25 says that the DTD is “std”.

.. container:: log_out

   ::

      158 ++ file hello1.ult does not exist.
          ++ file article.clt does not exist.
      160 ++ file ../confdir/article.clt exists.
          ++ Made @ a letter
      162 ++ Opened file ../confdir/article.clt; it has 34 lines
          Document class: article 2011/05/09 v1.2 Article document class for Tralics
      164 ++ file std.clt does not exist.
          ++ file ../confdir/std.clt exists.
      166 ++ Made @ a letter
          ++ Opened file ../confdir/std.clt; it has 91 lines
      168 File: std 2008/10/23 v1.1 Standard LaTeX document class, for Tralics
          ++ End of file ../confdir/std.clt
      170 ++ cur_file_pos restored to 1
          {Options to execute->letterpaper,10pt,oneside,onecolumn,final}
      172 {Options to execute->}
          ++ End of file ../confdir/article.clt
      174 ++ cur_file_pos restored to 0
          ++ End of virtual file.
      176 ++ cur_file_pos restored to 0

Lines 28 to 157 in the transcript file show register allocation, they
are omitted here. You can see a lots of lines starting with ++. They are
printed by the I/O manager. Whenever *Tralics* tries to open a file, it
print a line in the transcript file. For instance, you can see where the
configuration file is searched. You can also see that the @ character is
made a letter while reading some files; and you can see that
“cur_file_pos” is restored (this variable is used by the class/package
mechanism). You can see the action at the end of some files (the virtual
file contains the documenthook token list).

After the bootstrap phase, *Tralics* executes the instructions that come
from the configuration file, then those of the main file. In the case of
a LaTeX document (i.e., if a document class is found, as indicated on
line 16), the file hello1.ult is loaded, when present; line 158 show
that this file is search only in the current directory.

When the ``\documentclass`` command is seen, the class file is loaded.
As you can see, *Tralics* uses article.clt instead of article.cls. Since
the standard classes (book, report and article) share some options, the
common code is in std.clt. Instead of foo.sty, a file named foo.plt is
used for packages. What you can see in the transcript file is: the
second argument of ``\ProvidesClass``, which is also printed on the
terminal (line 163), and of ``\ProvidesFile`` (line 168), the default
options (argument of ``\ExecuteOptions``, line 171) and the actual
options (optional argument of ``\documentclass``, empty in this example,
line 172). Lines 177 to 186, omitted here, are similar to those shown
above.

Our third document
------------------

Assume that we have a file, named hello.tcf that contains the following
lines.

.. container:: ltx-source

   ::

      ## This is an example of a configuration file for tralics
      ## Copyright 2006 Inria/apics, Jose' Grimm
      ## $Id: hello.tcf,v 1.1 2006/07/17 09:09:06 grimm Exp $
      ## tralics ident rc=hello.tcf $Revision: 1.1 $


      DocType = Article classes.dtd
      DocAttrib =Foo \World
      DocAttrib =A \specialyear
      DocAttrib =B  \tralics
      DocAttrib =C  \today
      BeginCommands
        \def\World{world}
        \def\today{\the\year/\the\month/\the\day}
      End

The file defines, in order, the doctype to use in the XML file, four
attributes to the document element, and two commands ``\World``, and
``\today``. The ``\tralics`` pseudo-command produces
``Tralics version 2.9`` (your mileage may vary), and the
``\specialyear`` pseudo-command returns the value of the option -year
(for more info, see `Tralics options <options.html#rayear>`__ and
`configuration file <titlepage.html#specialyear>`__).

Consider the following source file, named hello2.tex:

.. container:: ltx-source

   ::

      \newcommand\hello{\uppercase {h}ello}
      \documentclass{article}
      \begin{document}
      \hello, \World!
      \end{document}

Compile with tralics hello2.tex -config=hello.tcf -oe8. As mentioned
above, the -oe8 option tells *Tralics* to use UTF-8 encoding for the XML
file, this now the default, but was not for version 2.13.0. We assume
that the hello.tcf file is found `(according to these
rules) <titlepage.html#potential-type>`__. The translation is the
following (for some strange reason the day is shown as 21 and 22).

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='UTF-8'?>
      <!DOCTYPE Article SYSTEM 'classes.dtd'>
      <!-- Translated from latex by tralics 2.13.0, date: 2008/07/22-->
      <Article  C='2008/7/21' Foo='world' B='Tralics version 2.13.0' A='2008'>
      <p>Hello, world!
      </p>
      </Article>

If we use the following invocation tralics hello2 -config=hello -verbose
the transcript file contains much more lines. We give here some of them.

.. container:: log_out

   ::

         1 Transcript file of tralics 2.15.4 for file hello2.tex
         2 Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
         3 Tralics is licensed under the CeCILL Free Software Licensing Agreement
         4 Start compilation: 2015/08/23 11:45:38
        11 Trying config file from user specs: hello
        12 ++ file ../confdir/hello.tcf exists.
        13 Configuration file identification: hello.tcf $ Revision: 1.1 $ 
        14 Read configuration file ../confdir/hello.tcf.
        15 Using tcf type hello
        16 dtd is Article from classes.dtd (standard mode)
        17 OK with the configuration file, dealing with the TeX file...
        18 There are 8 lines
        19 Starting translation

What you can see is where *Tralics* is searching for the configuration
file, and what it found, in particular the DTD.

.. container:: log_out

   ::

       664 [73] %% End bootstrap commands for latex
       665 ++ Input stack empty at end of file
       666 [1] \newcommand\hello{\uppercase {h}ello}
       671 [13]   \def\World{world}
       675 [14]   \def\today{\the\year/\the\month/\the\day}
       679 [17] \addattributestodocument{Foo}{\World}
       686 \World ->world
       690 [17] \addattributestodocument{C}{\today}
       697 \today ->\the \year /\the \month /\the \day 
       702 {\the}
       703 {\the \month}
       704 \the->8.
       706 {\the}
       707 {\the \day}
       708 \the->23.
       712 [1] \InputIfFileExists*+{hello2.ult}{}{}
       718 ++ file hello2.ult does not exist.
       719 [2] \documentclass{article}
       720 {\documentclass}
       721 [3] \begin{document}

We have shown on lines 686, 697, 702 to 708, the trace of evaluation of
TeX command; you can consult this `document <doc-start.html#trans>`__
for explanations. Line 704 shows that the month is an ordinary number,
and the ``\today`` command has to be rewritten if its expansion is
assumed to give 2015/08/23. Line 708 shows that the day is correct.

Lines 664, 666, 671 are formed of a number in square brackets and some
text; the number is the current line number and the text is the content
of the line to evaluate. On line 664, you see the last line of the
bootstrap code, on line 666 the first line of the main file, on line 719
the second line of the main file. This line contains the
``\documentclass`` command that may be used to find the type (in this
case the type is given in the configuration file). The lines inserted
from the configuration file are inserted before this one (671, 675, 679,
690, 712), or at the start, in case where no document class is given.
Lines 679 and 690 correspond to the two “DocAttrib” lines of the
configuration file that could not have been evaluated earlier. As you
can see on line 712, the hello2.ult file is inserted after the code from
the configuration file, and before the document class. Line 721 says
that the line following the ``\documentclass`` has been read, because
this command has an optional argument.

.. container:: log_out

   ::

      1056 ++ Input stack -- 1 ../confdir/article.clt
      1057 {\begin}
      1058 {\begin document}
      1061 +stack: ending environment document; resuming document.
      1063 +stack: level set to 1
      1064 ++ Input stack ++ 1 (AtBeginDocument hook)
      1065 [1] \let\do\noexpand\ignorespaces
      1069 atbegindocumenthook= \let \AtBeginDocument \@notprerr 
            \let \do \noexpand \ignorespaces 

Lines 722 to 1056 correspond to the loading of the class file. Line 1056
says that we are finished with article.clt and we continue with the main
file. Recall line 721; the first token is ``\begin``, it is not an
opening bracket, thus not the start of an optional argument, hence is
executed now. This command reads an argument, the name of the
environment, pushes a new stack level, and executes the command
associated to the start of the environment, here ``\document``. There is
a hack here, see lines 1061 and 1063: the stack is popped. Everything
happens outside an environment; however *Tralics* still pretends that it
is inside “document”. (Normally, at the end of the environment, all
commands that were modified are restored; however, at the end of the
document, these commands become useless, so there is no need to save and
restore). Line 1064 explains that the ``\AtBeginDocument`` hook is about
to be evaluated. The next line shows some additional code. Line 1069
shows all tokens to be evaluated; in order: the ``\AtBeginDocument``
(empty in this example), the redefinitions implies by ``\@onlypreamble``
(the ``\AtBeginDocument``) and the line shown above.

.. container:: log_out

   ::

      1088 [5] \end{document}
      1089 {\end}
      1092 {\end document}
      1093 +stack: level + 2 for environment entered on line 5
      1094 {\enddocument}
      1095 {\endallinput}
      1096 atenddocumenthook: \real-enddocument \endenv
      1097 {\real-enddocument}
      1098 Pop (module) 1: document_v p_v}
      1100 {\endenv}
      1103 +stack: ending environment document; resuming document.
      1104 +stack: level - 2 for environment from line 5
      1105 ++ Input stack empty at end of file
      1106 Bib stats: seen 0 entries.

We omit the trace of the document hook and line 4 of the main document.
What comes now is ``\end{document}``. The effect is first to execute
``\enddocument`` (line 1094) and then ``\endenv`` (this is an internal
command that pops the stack, its effect can be seen on lines 1100, 1103,
1104). However, the stack should be empty, so we artificially push a new
element on the stack (line 1093). Since this is the end of the job, all
remaining text is ignored (lines 1095 and 1105). Since version 2.15.4,
all text after ``\end{document}``, on the same line is also ignored. All
tokens gathered by the ``\AtEndDocument`` command are inserted in the
current input stream in order to be evaluated (there are none in this
example). Line 1096 shows what remains to be executed. The purpose of
the first command is to close all chapters, sections, paragraphs, etc,
so that, if an index has be generated, it is not inside a paragraph.

Note: when line 1106 is printed the job is not complete, as *Tralics*
the bibliography is not yet handled. Our example file has no
bibliography, so nothing special happens.

Our fourth document
-------------------

We assume now that we have a configuration file hello3.tcf containing
this:

.. container:: ltx-source

   ::

      ## This is an example of a configuration file for tralics
      ## Copyright 2006 Inria/apics, Jose' Grimm
      ## $Id: hello3.tcf,v 2.3 2006/07/24 12:09:34 grimm Exp $
      ## tralics ident rc=helloconf3!

      BeginCommands
        \def\World{world}
      End

      BeginTitlePage
       \maketitle <Title> "" ""
      End

      DocType = Article classes.dtd
      att_language = "language"
      xml_stylesheet = "my_stylesheet.css"
      xml_stylesheettype = "text/xsl"

      BeginCommands
      \newcommand\hello{\uppercase {h}ello}
      End

      BeginTitlePage
       \abstract <abstract> "No abstract given" 
       \author <author> "No author given"
      End

A standard configuration file would consist of a single block
BeginCommands ... End and a single block BeginTitlePage ... End, instead
of two blocks. Nevertheless, you have the right to split your commands
as shown here. This configuration file defines five commands. There is
no restriction on ``\hello`` and ``\World``, but the ``\maketitle``
command can be used only once. Moreover, the ``\abstract`` and
``\author`` commands have to be used before the ``\maketitle`` command,
they have a default value.

Consider a source file hello3.tex that contains the following lines

.. container:: ltx-source

   ::

      % -*- latex -*- encoding: utf-8
      % tralics configuration file 'hello3'
      % The previous line magically defines the commands used in this file
      \documentclass{book}
      \begin{document}
      \author{José Grimm}
      \maketitle \normalsize
      \hello, \World!
      \end{document}

The second line of the document tells *Tralics* to use hello3.tcf as
configuration file rather than the default. Since the document class is
``book``, the main element of the XML output has ``part='true'`` in its
attribute list. It has also ``language='english'``, because the default
language is language number 0, namely english and the configuration file
provides the attribute name to use (value of att_language). Finally,
there is a style sheet declaration.

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='UTF-8'?>
      <?xml-stylesheet href="my_stylesheet.css" type="text/xsl"?>
      <!DOCTYPE Article SYSTEM 'classes.dtd'>
      <!-- Translated from latex by tralics 2.15.4, date: 2015/08/24-->
      <Article language='english' part='true'>
      <Title><abstract>No abstract given</abstract>
      <author>José Grimm</author>
      </Title>
      <p>Hello, world!
      </p>
      </Article>

Line 10 of the transcript of the second document says: “Input encoding
is 1 (iso-8859-1) for the main file”. In fact, *Tralics* maintains a
table of transcriptions, zero is for UTF-8, 1 for iso-8859-1, the file
inputenc.plt defines ansinew, applemac, etc. A command of the form
``\usepackage[latin9]{inputenc}`` tells *Tralics* to use the encoding
associated to latin9, after the ``\begin{document}``. This means that
the current file can have more than one encoding; at any point in the
file, you can say\ ``\input@encoding=1`` in order to switch to latin1.
This feature is only available for TeX files: all other files
(configuration files, package file, bibliographic files, etc) have a
fixed encoding. The default encoding is given by an option (-utf8,
-latin1, default is latin1). This can be overwritten, if the document
contains a line of the form ``encoding: utf-8`` near its beginning.

Assume that your file contains a line with
``\show ©A\show éabB\show ó©©©C``, this is latin1 encoded, and let's
pretend it is UTF8. You will get some error messages, see below. At the
end of the run, *Tralics* shows the number of lines converted, the
number of lines that caused trouble, and the number of error. For each
wrong line, the transcript file will contain something like \\show
\\251A\show \\351abB\show \\363\251\251\251C (non-ASCII character are
printed in base 8).

.. container:: tty_out

   ::

      UTF-8 parsing error (line 55, file txtb.tex, first byte)
      UTF-8 parsing error (line 55, file txtb.tex, continuation byte)
      UTF-8 parsing error (line 55, file txtb.tex, continuation byte)
      UTF-8 parsing overflow (char U+E9A69, line 55, file txtb.tex)
      the letter A.
      the letter B.
      the letter C.
      Input conversion errors: 1 line, 4 chars.
      Input conversion: 6 lines converted.

Statistics
----------

The *Tralics* distribution contains a lot of test files, some of them
should compile without error, o

.. container:: tty_out

   ::

       1 This is tralics 2.13.0, a LaTeX to XML translator, running on medee
       2 Copyright INRIA/MIAOU/APICS 2002-2008, Jos\'e Grimm

       3 Licensed under the CeCILL Free Software Licensing Agreement
       4 Starting translation of file torture.tex.
       5 Configuration file identification: standard $ Revision: 2.24 $
       6 Read configuration file /user/grimm/home/cvs/tralics/confdir/.tralics_rc.
       7 Configuration file identification: torture.tcf $ Revision: 1.5 $
       8 Read tcf file for type: ../confdir/torture.tcf
       9 Document class: article 2006/08/19 v1.0 article document class for Tralics
      10 File `taux2.tex' already exists on the system.
      11 Not generating it from this source
      12 Translating section command div0: W.
      13 \show: 0
      14 Translating section command div0: A.
      15 Translating section command div0: B.
      15 Translating section command div0: C.
      17 Translating section command div0: A.
      18 Translating section command div0: B.
      19 Translating section command div0: C.
      20 Warning: junk in table
      21 detected on line 3613 of file torture.tex.
      22 END OF FILE
      23 Bib stats: seen 5(2) entries
      24 Seen 3 bibliographic entries
      25 Math stats: formulas 751, kernels 167, trivial 5, \mbox 19, large 1, small 59.
      ?? List stats: short 0, inc 33, alloc 90238.
      27 Buffer realloc 28, string 12981, size 247367, merge 232
      28 Macros created 1986, deleted 1463; hash size 3062; foonotes 5.
      29 Save stack +5189 -5189.
      30 Attribute list search 6965(1484) found 2667 in 6419 elements (1117 at boot).
      31 Number of ref 31, of used labels 23, of defined labels 31, of ext. ref. 25.
      ?? Modules with 0, without 0, sections with 2, without 29
      33 Input conversion: 49 lines converted.
      34 There were 9 images.
      35 Following images not defined: x, y, Logo-INRIA-couleur, ../../a_b:c, x_, figure1a, figure1b, figure1c.
      36 Output written on torture.xml (164989 bytes).
      37 No error found.
      38 (For more information, see transcript file torture.log)

Line 4, 5 and 6 show that the standard configuration file has been read,
lines 7 and 8 that torture.tcf has been included because of the aliasing
mechanism of the standard configuration file.

Lines 10 and 11 show the output of a ``filecontents`` environment.

Line 12, and 14 to 29 show progress: each time a toplevel section is
translated, its name is printed.

Line 13 is a test of the ``\show`` command.

Line 20-21 is printed when a non-tabular appears in a table.

Line 22 is a result of ``\typeout`` command, placed at the end of the
document: It tests that every line until the last one have been read.

The different statistics have to be interpreted as follows

-  Line 23 says that 5 citations in the document, two of them defined
   with the ``\bibitem`` command, thus three unsolved that are looked
   for in the bibliography data files. Line 24 says that 3 bibliographic
   entries have been found in the data base.
-  Line 25 indicates some math statistics. In fact, 751 math formulas
   are constructed. They were 167 cases in which a non-trivial kernel
   was used (case where an index or an exponent has to be constructed).
   There were 5 *trivial* formulas, such as ``$^{i\grave {e}me}$``,
   ``$23$``, ``$x$`` that were translate in a special manner (Say
   tralics -notrivialmath if you do not like this behavior.) There were
   ten cases where something like ``\mbox`` appeared in a math formula.
   In fact, *Tralics* has created three ``<mtext>`` elements. There was
   1 large and 59 small objects: these are explained elsewhere. It has
   to do with how the command ``\big``, and similar ones are translated.
-  Line ?? says that you used a total of 90238 list cells and the global
   free list was incremented 33 times, decremented 0 times. The figures
   for the testfp file are 953556 cells, 755 increments, and 33
   decrements. Whenever a cell is needed, one is taken from the free
   list; if the free list is empty, 100 cells are allocated; when a cell
   becomes useless, it is added to the free list; when the size of the
   free list exceeds 1000, the whole free list is recycled. In version
   2.13, memory allocation changed, list cells are no more counted.
-  Line 27 gives buffer statistics. Initially buffers can contain 512
   characters. Only once has the size to be increased. All these buffers
   used to create 12981 strings, with a total of 247367 bytes.
   If you say something like ``{foo}{bar}``, when *Tralics* sees the
   first closing brace, it creates an XML element (generally a ``<p>``
   element) with the string foo, and when it sees the second closing
   brace it creates a second element with the string bar (this is
   because strange things can happen when a closing brace is seen). More
   than often, these two elements can be merged. This happened 232
   times.
-  Line 28 says that *Tralics* has created 1986 macros and deleted 1463
   ones. For the fptest, these numbers are much larger, namely 7703
   creations and 5401 deletions; this is a big number, this is because
   lots of tests are done, and each test uses a local macro. Moreover
   3062 slots are used in the hash table by multiletter control
   sequences (it is 2225 at start of document). This number has to be
   compared with the 925 commands of PlainTeX and the 3216 of standard
   LaTeX. Finally, five footnotes and no index are defined in the
   document.
-  Line 29 says that *Tralics* has seen 5189 open braces (or
   ``\begingroup`` command, or environment) that made it increase the
   save stack pointer. Good news is that the same number of closing
   braces has been seen.
-  Line 30 says that *Tralics* has created 6419 elements. 1117 elements
   were created by the bootstrap phase (essentially for the math
   formulas). There is a special hash table for elements and attributes.
   1484 strings were added to this table by the bootstrap phase, and a
   total of 2667 at the end of the run. There were however 6965 access
   to this table.
-  Line 31 says that *Tralics* has defined 31 labels (a label is
   associated to each section, footnote, item in a list, table and
   figure environments, and some math formulas). Of these 31 labels, 23
   were used via a ``\ref`` command (some labels were used more than
   once, since the number of ``\ref`` commnds was 31). Moreover, 25
   references to an external document, via ``\href.``
-  Line ?? explains that there are some modules and some sections with
   (and without) some information useful only for the RAweb. This
   information is not printed anymore.
-  Line 33 says that 49 lines containing non-ASCII characters were
   converted to UTF-8.
-  Lines 34 says that 9 images were included via the
   ``\includegraphics`` commands, only one of them exists. In fact, the
   file torture.img contains the following

   .. container:: log_out

      ::

         # images info, 1=ps, 2=eps, 4=epsi, 8=epsf, 16=pdf, 32=png, 64=gif
         see_image("x",0,33);
         see_image("y",0,2);
         see_image("Logo-INRIA-couleur",0,8);
         see_image("../../tralics/Test/a_b",1,1);
         see_image("../../a_b:c",0,1);
         see_image("x_",0,1);
         see_image("figure1a",0,2);
         see_image("figure1b",0,2);
         see_image("figure1c",0,1);

   The second number (e.g., 33) is the number of times the file is
   included, and the first is the sum of the types, for instance 17=1+16
   means postscript and pdf. Here only a_b is found in PostScript
   format.
-  Line 36 says that *Tralics* has printed a given number of bytes in
   the resulting XML file. This good news.
-  Line 37 says that no error was detected. This is even better news.

A complete example
------------------

We give here an example of a full document. This uses the RR package,
that defines the commands ``\RRetitle``, ``\RRauthor`` ``\RRabstract``
(this make a non-trivial title page), the fancyvrb package (there is a
\`pre=pre' somewhere in the text, the associated action is in the
package) and natbib, for the citations.

The document was translated using the following invocation: tralics txtc
-noentnames -nostraightquotes -nozerowidthspace -trivialmath. We then
converted the XML in HTML, it is given `here <txtc.html>`__.

The file has been slightly modified: the first line is the correct
invocation to tell emacs and *Tralics* that it is latin1 encoded. The
URLs shown here are the ones to use. Starting with version 2.10.7, the
line marked COMPATIBILITY PROBLEM finishes the verbatim environment; the
one that follows has to be used.

.. note::

   This is file ``txtc.tex`` in the tests.

.. container:: ltx-source

   ::

      \documentclass{article}   % -*- coding: iso-8859-1 -*-
      \usepackage{fancyvrb}
      \usepackage{natbib}
      \usepackage{RR}

      \RRetitle{A sample file for Tralics}
      \RRauthor{José Grimm}
      \RRabstract{This document shows some commands of \textit{Tralics}.
      We use it also to show that characters are converted into the right encoding
      in a lot of situations, including commands, titles, indices etc.
      The \textit{XML} result is translated via \textsl{XSLT} into \textbf{HTML} 
      and available  on the web
      \url{http://www-sop.inria.fr/marelle/tralics/txtc.html}.
      Source document can be found at
      \url{http://www-sop.inria.fr/marelle/tralics/doc-step.html}.} 

      \keyword{Latex, XML, HTML, UTF8, Hàn}
      \begin{document}


      % This is à còmment

      \tableofcontents
      \section{Who is Hàn}
      If you call tralics with options -te1a ou -te8a, the terminal should show 
      \verb=^^e0=\index{verb}\footnote{Index here} for the section title; 
      if you say -te1, there is a single byte, if you say
      -te8, there are two bytes. If you say -e1a or -e8a, the XML file should
      contain \verb=&#E0;=, in the case -oe1 ou -oe8, the XML file contains the
      characters shown on the terminal.

      \def\gobble#1{} %% Used later


      The following lines try to demonstrate that Tralics handles 16bit characters.
      An error will be signaled because the argument is out of range; but the
      character with hex value 312 should be valid; the command defined here
      by csname has two characters in its name, it must be followed by an
      exclamation point (a space is allowed between the command an the exclamation
      point).
      \expandafter\def\csname féé\endcsname!{123}
      \expandafter\def\csname f^^^^0123\endcsname!{312}
      \catcode`\é 11 \catcode"123=11 \catcode65536=11
      \féé !! \f^^e9^^^^00e9 !! \f^^^^0123 !!

      This is standard verbatim: \verb+a _bç+, \verb*=a _bç=, \verbèa _bçè,
      \verb-\verb+ { } $$-, \verb +x+ . Think about this last example.
      We index here a word\index{vérb}. Location is just before period.
      This is a verbatim environment
      \begin{verbatim}
      {\let\rm\bf \bf totoé}
      <!--this is a comment -->
      &Dollar; not &Equals; &Euro;
        \end{verbatim}
      % See comment below
      \begin{rawxml}
      {\let\rm\bf \bf totoé}
      <!--this is a comment -->
      &Dollar; not &Equals; &Euro;
      \end{rawxml}

      Note. A verbatim environment neutralises meaning of some commands.
      The last line of the verbatim environment should start with an ampersand 
      character; since this is a special character in XML, it is represented as
      \verb=&amp;= or \verb=&#x26;=. Lines can be numbered; spaces can be replaced
      by non-breaking ones; lines can use special fonts; paragraphs can be
      no-indented, etc.\index{verb@verb}% same as \index{verb}

      On the other hand, a rawxml environment is left unchanged. Remember however
      that end-of-line characters and spaces are removed from the end of the line; a
      new line character is added at the end of the line. If you remove the comment
      between the two environments, replacing it by an empty line, then the second 
      environment will be in vertical mode. Otherwise, the end of the verbatim
      environment inserts a \verb=\noindent=, and the environment that follows is in
      horizontal mode. As a consequence, there will be a P element on the first
      line of the raw xml; moreover, since the final space in a paragraph is
      removed, you will find the end-P element at the end of the line.%
      \index{vérb@verb}% this a new index entry

      The translation of the environment contains e-acute (its representation
      depends on the output encoding), three ampersand characters, a less than sign,
      a greater than sign. The second line is a valid XML comment, the third line is
      well-formed XML (it contains three entities, so that the XML is valid only if
      the DTD defines these entities); it is very easy to produce invalid and
      ill-formed XML.\index{vérb@vérb}% this one alreedy seen

      The xmllatex command is to be used with care. It can produce
      \xmllatex{Hàn Th&\#x1ebf; Thành}{unused}\footnote{Hàn is the author of
      pdftex}. The second argument is meant to be translated by \LaTeX, it is
      ignored by Tralics. Instead of \verb=\xmllatex{foo}{bar}=, define a command,
      use it in the text, and overwrite it in a ult file (user configuratin file).%
      \index{vérb@vérb|bf}% Note that encap is ignored

      In the current version, you can say \'{\^e} because the double-accent 
      mechanism is implemented, or ^^^^1ebf, this is a character, as valid as the
      other ones. This is possible and dangerous too \xmllatex{<TeX/>}{tex}.%
      \index{vérb!vèrb} %subitem in index

      A verbatim test. We put some stuff in English and French before, in order
      to show how it is translated differently. The end of the environment can
      contain spaces (see example above), but nothing else.
      \language=0
      test ligatures: <<>>``''-- et --- !
      \language=1
      test ligatures: <<>>``''-- et --- !
      \numberedverbatim
      \begin{verbatim}
      test : !@#$%^&*()_$
      test : {\foo\} et zxcvbnm,./
      \end{verbatim}
      \begin{verbatim}
      test ZXVBNM<>? ~
      test \verb+\verb-xx-+
      test ligatures: <<>>``''-- et --- !
       \end{verbatim} Not this one COMPATIBILITY PROBLEM
       \end+{verbatim} Not this one %% + added in version 2.11 WORKS
      \end{notverbatim}
      \end{verbatim}

      \gobble{
      \end{verbatim}
      }

      \unnumberedverbatim
      Verbatim without line numbers. 
      \begin{verbatim}
      test : !@#$%^&*()_$
      test : {\foo\} et zxcvbnm,./
      test ZXVBNM<>? ~
      test \verb+\verb-xx-+
      test ligatures: <<>>``''-- et --- !
      test BL : \\738! et \\838!.
      \end{verbatim}
      The BL test is funny; why should it fail? a long long time ago, before
      it was called Tralics, our translator was written in Perl, and such a line 
      was illegal; the math was converted by Omega, see \cite{place99}. We cite also
      \citeyear{mKay}, and \citefullauthor{mathml2}.

      We now test the verbatim extensions. We start with Verbatim
      and demonstrate the counting possibilities
      \begin{Verbatim}                   [numbers=true]
      test line 1a
      test line 1b
      \end{Verbatim}
      and without numbers
      \begin{Verbatim}
      [numbers=true]test line 2a
      [numbers=true]test line 2b
      \end{Verbatim}
      \begin{Verbatim} %
      [numbers=true] this text is ignored
      The environment has an optional argument; spaces but no newlines are allowed
      between brace and bracket; what follows the argument on the line is ignored
      \end{Verbatim}

      We put here the first character of the line in italics
      \def\verbatimfont#1{{\it #1}}
      \def\verbatimnumberfont{\large}
      \count3=4
      \begin{Verbatim}[counter=3]
      5 we use here counter number 3
      6 for counting lines
      \end{Verbatim}
      Define our Verbatim hook now.
      \expandafter\def\csname Verbatim@hook\endcsname{pre=pre,style=latex}
      \begin{Verbatim}[counter=03]
      7 we use here counter number 03 (the same)
      8 but the HTML output differs a lot.
      \end{Verbatim}
      \newcounter{vbcounter}
      \setcounter{vbcounter}{\count3}
      \begin{Verbatim}[counter=vbcounter]
      9 we use here counter named vbcounter
      10 initialised to the value of the previous counter
      \end{Verbatim}
      \begin{Verbatim}[counter=vbcounter]
      11 yet another verbatim line (ok with é^^e9?)
      \end{Verbatim}

      \let\verbatimfont\tt
      \def\verbatimnumberfont#1{\xbox{vbnumber}{#1}}

      \DefineVerbatimEnvironment{xverbatim}{Verbatim}{pre=pre,style=latex}
      \begin{xverbatim}[numbers=left]
      note that, if no counter is specified, it is FancyVerbLine
      \end{xverbatim}
      \begin{xverbatim}[numbers=left,firstnumber=last,style=log]
      and that the first line is numbered one by default.
      Of course, options given on the line have precedence over options
      inherited from the definition.
      \end{xverbatim}

      \newenvironment{centré}{\centering}{}
      \begin{centré}
      In French, centré means centered.
      \end{centré}

      \DefineShortVerb{\|}
      \SaveVerb{DU}|$_|\def\DU{\UseVerb{DU}} %$
      \section{Short  Verb, as in \DU}
      \let\verbatimfont\sffamily
      Test of |\DefineShortVerb| and |\UndefineShortVerb|. Normally
      the bar is used, but 16bit characters are possible. Example, with itrema:
      \DefineShortVerb{\ï}
      |toto| ïxï |+x-| ï|t|ï,
      \UndefineShortVerb{\ï}
      and without:
      |toto| ïxï |+x-| ï|t|ï
      Spaces: like this |+ +| or that \fvset{showspaces=true}|+ +|
      Verbatimfoo: \verb|+ foo +*foo*foo*|.

      \def\verbatimfont#1{{#1}}
      \def\verbprefix#1{A#1A}
      \def\verbatimprefix#1{B#1B}

      \SaveVerb{Ç}|}|\def\FE{\UseVerb{Ç}}
      \DefineShortVerb{\+}
      \SaveVerb{VE}+|+\def\VE{\UseVerb{VE}}
      \UndefineShortVerb{\+}
      \UndefineShortVerb{\|}

      Test of useverb \UseVerb{Ç}, \FE,\VE, \DU.
      \begin{verbatim}
      We have changed the font, and added a prefix
      Spaces are special
      \end{verbatim}

      Switch to English, for colons in URLs \language=0

      \bibliography{tralics}

      \end{document}

----

docs/options.rst
----------------

====================
Command-line options
====================

*Tralics* knows about many options, that start with a single or double
hyphen. Some options take an argument, that is placed just after the
option, the syntax option=argument, without spaces is allowed. You can
also use spaces (option, space, equals, space, argument). Some options
are shown with an underscore, it is optional. They are the following, in
alphabetic order:

-confdir=\ *prefix*
   This is a prefix for an alternate location of tcf, ult, plt, and clt
   files. More than one prefix can be given, all will be used (latest
   first). Since version 2.11.4, the configuration file .tralics_rc is
   searched in this list, if not found in the current directory.

-compatibility
   Keeps compatibility with older versions.

-config=\ *FILE*
   Use FILE instead of default configuration file. This can be an
   absolute or relative pathname.

-config_file=\ *FILE*
   Same as -config=FILE.

-default_class=\ *CLASS*
   Assume that you compile a file that has ``\documentclass{foo}``; in
   this case, *Tralics* tries to read the file foo.clt. No error is
   signaled if the file cannot be opened. If you call *Tralics* with
   option -default_class=bar, then bar.clt is loaded in the case foo.clt
   does not exists; the command ``\CurrentClass`` will hold the name of
   the document class (here “foo”), so that bar.clt knows how it was
   called.

-distinguish_refer_in_rabib=true/false
   This indicates whether, for the raweb, the “refer” bibliography
   database should be considered a normal file, or a subfile for the
   year database. Values other than yes, no, true, false, are ignored.
   Default is yes. The configuration may also specify
   distinguish_refer_in_rabib=xx. In case of conflit, the parameter is
   used. Values other than yes, no, true and false are ignored. Details
   are explained in section `2.8 Bibliography <raweb.html#rabib>`__.

-doctype=\ *A-B*
   This specifies the DOCTYPE of the resulting XML document. Here A is
   the name of the root element, B is the name of the DTD file. The two
   quantities A and B are separated by a dash or a space (in this case,
   quotes are needed, so that "A B" read as a single argument).

-dualmath
   The LaTeX source of math formulas is added to the MathML expression.
   This is the same as using ``\@nomathml=-3`` in the document (see
   `documentation <doc-n.html#cmd-nomathml>`__)

-entnames=yes/no
   This tells *Tralics* to put ``&alpha;`` or ``&#x3B1;`` in the XML
   output. If entity names are used, the resulting XML file can be used
   only if the DTD explains how they are defined. Since version 2.9,
   this option applies only to math characters, that are described in
   the MathMM DTD.

-etex
   This option enables e-TeX extensions. Options are enabled by default.

-find_words
   The list of all words of the XML tree will be printed on the file
   words, after translation is complete.

-help
   The list of main options are printed, and the program stops.

-input_data =\ *VALUE*
   In this case *Tralics* translates the content of the argument VALUE
   and prints the translation of all math formulas it sees (and nothing
   else). No XML file is generated. No error is printed. The transcript
   file is texput.log.

-input_dir =\ *DIR*
   Specifies where source files are to be found. This is a colon
   separated list of directories; current directory is defined by an
   empty slot, or a single dot. It will be added to the end of the list,
   unless present.

-input_path = *DIR*
   Same as input-dir=DIR

-input_file =\ *FILE*
   This tells *Tralics* to compile file FILE (.tex suffix added if
   needed)

-interactivemath, -i
   Special interactive mode, in which characters are read from the
   terminal, instead a file, and math formulas are printed on the
   screen. Input encoding is UTF-8 (it will be latin1 if option -latin1
   comes after option -i).

-latin1
   This option means that input files are by default encoded in
   iso-8859-1 mode (if the first line of the file contains
   ``-*-  coding: utf-8`` it is read in UTF-8 mode).

-leftquote=\ *xxx*
   Defines translation of left quote (or backquote); see below under
   rightquote.

-log_file =\ *FILE*
   This tells *Tralics* to put all messages and warnings in FILE
   (extension .log added if not given); the file is locate in the
   directory specified by output_dir. Defaut value is the name of the
   input file.

-math_variant
   If you say -math_variant then ``$\mathfrak B$`` translates into
   ``<mi mathvariant='fraktur' >B</mi>``. If you say -no_math_variant
   then ``$\mathcal A$`` translates into ``<mi>&#x1D49C;</mi>`` or
   ``<mi>&Ascr;</mi>``. Before version 2.9.4, the result depended on the
   font. The default is to use Unicode characters rather than
   attributes.

-multi_math_label
   This option sets the counter ``\multi@math@label`` to 1. By default
   the counter is zero, and a math formula has at most one equation
   number, so at most one label, anchored to the ``<formula>`` element.
   If the counter is 1, then a math formula , for instance defined by
   the ``split`` environment, has an equation number per row, and one
   label is allowed for each ``<mrow>`` element. New in version 2.15.4

-noconfig
   No configuration file will be used.

-noentnames
   This is the same as entnames=no. This tells *Tralics* to put
   ``&#x3B1;`` rather than ``&alpha;`` in the XML output. See option
   -entnames above.

-noetex
   This option disables e-TeX extensions. Options are enabled by
   default.

-no_float_hack
   This option disables the postprocessor for tables and figures.

-nomathml
   Math formulas are output à la TeX, rather than using MathML. This is
   the same as using ``\@nomathml=-1`` in the document. (see
   `documentation <doc-n.html#cmd-nomathml>`__)

-no_math_variant
   This is the converse of -math_variant described above.

-no_multi_math_label
   This is the converse of -multi_math_label described above.

-notrivialmath
   Inhibits trivial math hacks; see option trivialmath below. Since
   version 2.8.5 the default is trivialmath=1.

-noundefmac
   If you issue this option, all commands will be magically defined
   after the first error message saying that the command is undefined.

-nostraightquotes
   If you issue this option, the apostrophe translates into character
   U+B4, as ``\textasciiacute``. However, the normal value is used in
   verbatim mode, when reading a file name, in an URL, or in a construct
   like ``\char'``.

-noxmlerror
   This option inhibits creation of ``<error/>`` elements in case of
   error. These elements can be useful for debugging, since they
   indicate the current position in the tree; on the other hand, they
   could generate a second error, of the form: *expected element error*.

-nozerowidthelt
   In order to inhibit ligatures when converting XML to Pdf some action
   is required: a special character (zero width space) is added. This
   character appears sometimes as a normal-width-space. As a
   consequence, the ``<zws/>`` is used (and the style sheet that
   converts XML to HTML can ignore this element); If this switch is
   used, character entity ``#x200B;`` is used instead of an element.

-nozerowidthspace
   Translation of ``\verb=--=`` is
   ``<hi rend='xml_in'>-&#x200B;-&#x200B;</hi>``. The ZeroWidthSpace
   character (or some element, see above) is added so that, in case the
   XML file is interpreted by a software like TeX, no en-dash ligature
   is created. This behavior is inhibited by the switch.

-oe8, -oe1, -oe8a, -oe1a
   This specifies output encoding, one of UTF8 or latin1. Interpretation
   of the XML file is independent of the encoding. If the letter a is
   given, then all non-7 bits characters are printed as character
   references. Thus, the only difference between option e8a and oe1a is
   the XML header line. Defaut encoding is UTF8.

-oldphi
   This is a compatiblity option, which gives a wrong translation for
   ``\phi \varphi``.

-output_dir =\ *DIR*
   Specifies the directory in which output files are to be stored (this
   concerns the main XML file, the transcript file, and other files). By
   default, this is the directory containing the input file.

-output_file =\ *FILE*
   This tells *Tralics* to put the result in FILE (extension .xml added
   if not given). [In the case of the raweb, this option is ignored]

-param=\ *FOO=BAR*
   The effect is the same as if FOO="BAR" were in the configuration
   file, after all other values. Syntax is a bit special: both equal
   signs can be replaced by a space.

-raw-bib
   If this option is givem, *Tralics* considers all bibtex entry types
   alike. Otherwise, it may ignore irrelevant fields (for instance,
   editor for a phdthesis).

-rightquote= *xxx*
   Defines translation of right quote (or apostrophe). Characters
   \`(left quote) and ' (right quote) must have category code 12 (other)
   otherwise some constructions fail. In verbatim mode, (as well as in
   Urls) these characters behave normally; if doubled, translation is
   U+201C and U+201D (“ and ”). Otherwise you can change. If you say
   -leftquote=2018 and -rightquote=2019 then characters U+2018 and
   U+2019 are used (‘ and ’). Only base16 digits are allowed; the value
   should be a number between 1 and 2^16 (otherwise default value is
   used).

-shell-escape
   If you issue this command, ``\write18{pwd}`` will execute the \`pwd'
   command.

-silent
   This makes *Tralics* less verbose (prints the title of a \`div0'
   instead of \`div0' or \`div1'; prints less statistics; omits image
   info).

-te8, -te1, -te8a, -te1a
   This specifies encoding used in transcript files. In the case of te8
   or te8a, characters are printed using UTF-8 format; in the case of
   te1 ot te1a, characters are printed using latin1 encoding. Characters
   are printed using the ^^^^abcd notation in case: the value if greater
   than 255, and one of -te8a, -te1a is given, or the character is not
   in proper range (32-126 plus 160-155) and te1 is given, the character
   is smaller then 32. Note: horizontal tabulation, line-feed and
   carriage return do not use the ^^ notation. Default: same as output
   encoding.

-tpa_status=\ *XX*
   This flags controls what is to be translated if the configuration
   file specifies a titlepage (see `description <titlepage.html>`__). If
   the value is \`all', then the whole document is translated; if the
   value is \`title', only the titlepage is translated; if the value is
   \`config', action depends on the configuration file (details can be
   found `here <titlepage.html#titlepage-action>`__). Otherwise,
   translation stops in case of an error, continues otherwise. Only the
   first character of the value is tested. Capital letters are allowed.

-trivialmath=\ *N*
   This sets the counter ``notrivialmath`` to N. If N is 7, *Tralics*
   replaces ``$12^{th}$`` by ``12\textsuperscript{th}``, and handles
   formulas like ``$x$`` as \`trivial math' formulas. Translation is
   ``<formula type='inline'>  <simplemath>x</simplemath> </formula>``
   instead of a more complicated MathML expression. No MathML expression
   is created in the case of ``$\alpha$`` or ``$_{foo}$``. Default value
   of the counter is 1.

-type=\ *FOO*
   Uses FOO instead of the \\documentclass value for the document type.
   If you say tralics -type ra hello, this will read the ra.tcf file,
   enter Raweb mode and fail; on the other hand, if miaou2003.tex is a
   raweb file, tralics -type ra2007 miaou2003 may fail because the
   configuration file for year 2007 may be incompatible with that of
   2003.

-usequotes
   This option converts double quotes into a pair of single quotes,
   either left quotes, or right quotes.

-utf8
   This option means that input files are by default encoded in UTF-8 mode (if
   the first line of the file contains ``-*- coding: iso-8859-1`` it is read in
   latin1 mode).

-utf8output
   Same as option -oe8 -te8.

-verbose, -v
   This makes *Tralics* more verbose. In particular, you will see how
   *Tralics* determines the DTD. It executes ``\tracingall`` (in the
   example of miaou, this prints 9233 lines instead of 142 in the
   transcript file).

-verbose-doc, -V
   The effect of this switch is to execute ``\tracingall`` when
   ``\begin{document}`` is seen; this is like the ``verbose`` switch,
   but you won't see all details of classes and packages.

-version
   Version number is printed; program stops.

-year=\ *XXXX*
   This option sets an internal count register, accessible via the
   command ```ra@year`` <doc-r.html#cmd-rayear>`__. The default value is
   the current year, with an offset: (for this purpose year 2005 starts
   at May, 1st, and terminates at the last of April 2006). You cannot
   use the option when compiling the Raweb, and the year is extracted
   from the file name.

--------------

The following options were once used for the Raweb; they have been
removed in version 2.13.

-all
   Is the same as -xml -xmlfo -xmlhtml -xmltex -xmllint.

-check
   This checks the syntax, but produces nothing (no XML, no LaTeX). Does
   nothing outside Raweb mode.

-dir=\ *RADIR*
   This explains that RADIR is the directory containing lots of stuff
   for the Raweb mode. In particular, it contains a subdirectory confdir
   with the configuration file. If this option is not used, the value of
   the shell variable ``TRALICSDIR`` will be used instead.

-external_prog=\ *XXX*
   In this case XXX will be used instead of rahandler.pl as interpreter
   for the raweb actions defined by the xmlXXX switches.

-hacknotitle
   If you give this option, *Tralics* may replace ``\section{}`` by
   ``\section{Introduction}``. This is implied in raweb mode until 2006.
   The option was withdrawn in 2007: using it has no effect on the
   translation.

-interactivebib
   Withdrawn option.

-nobibyearerror
   Useful in Raweb mode only. No error is signaled if you cite a paper
   of year X in year Y when X and Y are not the same.

-nobibyearmodify
   Useful in Raweb mode only. No modification done if an entry is in the
   refer section instead of being in the year section. Details are
   explained in section `2.8 Bibliography <raweb.html#rabib>`__.

-ps
   This checks the syntax, creates a TeX file instead of XML, and calls
   an external program to convert the TeX into PostScript. Does nothing
   outside Raweb mode.

-radebug
   This option tells the Raweb checker to continue checking after the
   first error instead of stopping immediately; note that the translator
   is not called if the Raweb checker sees an error.

-xml
   This option asks *Tralics* to convert the TeX source into an XML
   result. Is incompatible with options -check or -ps. Is selected, when
   compiling the Raweb, if neither -ps nor -check is given.

-xmlall
   Is the same as -xml -xmlfo -xmlhtml -xmltex -xmllint.

-xmlfo
   This asks for the creation, via an external program, of a xsl-fo
   file. It implies the -xml option. Is meaningful only in Raweb mode,
   where an external program is launched.

-xmlhtml
   This asks for the creation, via an external program, of a set of HTML
   files. It implies the -xml option. Is meaningful only in Raweb mode,
   where an external program is launched.

-xmllint
   This checks, via an external program, the validity of the XML against
   the DTD. It implies the -xml option. Is meaningful only in Raweb
   mode, where an external program is launched.

-xmltex
   This asks for the conversion, via an external program, of the xsl-fo
   file to a Pdf file. Implies -xml and -xmlfo. Is meaningful only in
   Raweb mode, where an external program is launched.

----

docs/packages.rst
-----------------

===============================================
All packages known by Tralics, alphabetic order
===============================================

| This page contains the description of the following packages
  `12many <#p12many>`__, `abstract <#abstract>`__, `ae <#ae>`__,
  `aecompl <#aecompl>`__, `aeguill <#aeguill>`__, `alltt <#alltt>`__,
  `amsbsy <#amsbsy>`__, `amscd <#amscd>`__, `amsfonts <#amsfonts>`__,
  `amsgen <#amsgen>`__, `amsmath <#amsmath>`__, `amsopn <#amsopn>`__,
  `amssymb <#amssymb>`__, `amstext <#amstext>`__, `amsthm <#amsthm>`__,
  `amsxtra <#amsxtra>`__, `array <#array>`__, `bbding <#bbding>`__,
  `braket <#braket>`__, `calc <#calc>`__, `cgloss4e <#cgloss4e>`__,
  `checkend <#checkend>`__, `color <#color>`__, `comma <#comma>`__,
  `comment <#comment>`__, `coollist <#cool>`__, `coolstr <#cool>`__,
  `curves <#curves>`__, `datenumber <#datenumber>`__,
  `decimal <#decimal>`__, `delarray <#delarray>`__,
  `epigraph <#epigraph>`__, `esdiff <#esdiff>`__, `etex <#etex>`__,
  `eucal <#eucal>`__, `eufrak <#eufrak>`__, `fancyvrb <#fancyvrb>`__,
  `fix-cm <#fix-cm>`__, `fixfoot <#fixfoot>`__, `fixme <#fixme>`__,
  `fixltx2e <#fixltx2e>`__, `flafter <#flafter>`__, `float <#float>`__,
  `fp <#fp>`__, `fontenc <#fontenc>`__, `forloop <#forloop>`__,
  `gb4e <#gb4e>`__, `graphics, graphicx <#graphicx>`__,
  `graphpap <#graphpap>`__, `html <#html>`__, `ifpdf <#ifpdf>`__,
  `ifthen <#ifthen>`__, `index <#index>`__, `inputenc <#inputenc>`__,
  `keyval <#keyval>`__, `kvoptions <#voptionsl>`__,
  `latexsym <#latexsym>`__, `lipsum <#lipsum>`__,
  `makeidx <#makeidx>`__, `maple2e <#maple>`__, `mapleenv <#maple>`__,
  `mapleplots <#maple>`__, `maplestyle <#maple>`__,
  `mapletab <#maple>`__, `maple2util <#maple>`__,
  `minimal <#minimal>`__, `mml <#mml>`__, `natbib <#natbib>`__,
  `newlfont <#newlfont>`__, `nopageno <#nopageno>`__,
  `oldlfont <#oldlfont>`__, `overword <#overword>`__,
  `remreset <#remreset>`__, `ra <#ra>`__, `RR <#RR>`__,
  `shortvrb <#shortvrb>`__, `showidx <#showidx>`__, `soul <#soul>`__,
  `suffix <#suffix>`__, `syntonly <#syntonly>`__,
  `textcase <#textcase>`__, `textcomp <#textcomp>`__, `tipa,
  tipx <#tipa>`__ , `tloop <#tloop>`__, `theorem <#theorem>`__,
  `tracefnt <#tracefnt>`__, `tralics-iso <#tralics-iso>`__,
  `upref <#upref>`__, `xkeyval <#xkeyval>`__,
| and classes `article <#article>`__, `book <#book>`__,
  `report <#report>`__, `std <#std>`__,
| Click on DL in order to get the source.

--------------

.. _p12many:

12many
------

This package by Ulrich Schwarz, allows to type set intervals like 1..n
in different ways. The funny style ``laue`` is only partially
implemented. Exemple. You configure as
``\setOTMstyle[var=\iota, naturals=\mathbb{N},where=:] {set}`` and use
it as ``$\nto{12}{233}$``. Translation is
:math:`\left\{ \iota \in {\mathbb{N}}:12 \leq \iota \leq 233 \right\}`

.. _abstract:

abstract
--------

This package defines the ``abstract`` and ``onecolabstract``
environments, that translate into an XML element whose name is stored in
``\abstractname``. Options ``original``, ``addtotoc``, ``number``
``runin`` are currently ignored.

.. _ae:

ae
--

Dummy package, with one option ``slides``, that selects the Almost
European Computer Modern font in LaTeX.

.. _aecompl:

aecompl
-------

This package provides some additional character from the cmr font to the
ae font. Does nothing in Tralics.

.. _aeguill:

aeguill
-------

Dummy package, with options ``ec, cm, cyr, pl, lm``, whose purpose is to
add French guillements to the AE fonts, taken from the font given as
option.

.. _alltt:

alltt
-----

This package defines the environment shown in the example below. It is
like verbatim, but braces an backslashes have their default meaning.

.. container:: ltx-source

   ::

      \begin{alltt}
       $x=&#^_%~
       \textit{x=&#^_}$%
      \end{alltt}

.. _amsbsy:

amsbsy
------

The package provides two commands\ ``\boldsymbol`` and ``\pmb``, that
typeset their argument normally. Maybe, one day, a bold version will be
used.

.. _amscd:

amscd
-----

The package defines the CD environment, see example below. The
environment makes the atsign character active, it reads three identical
characters: less than, greater than for horizontal arrows, A, V for
vertical arrows, or a single one (vertical bar, equals sign, dot, or
``\vert``). Each atsign construct gives a double cell in the table.

.. container:: ltx-source

   ::

      \DeclareMathOperator\add{add}
      \DeclareMathOperator\cf {cf}
      \DeclareMathOperator\cov{cov}
      \DeclareMathOperator\non{non}
      \DeclareMathOperator\End{End}
      \[ \begin{CD}
           \cov (L) @>>> \non (K) @>>> \cf (K)  \\
             @VVV          @AAA          @AAA   \\
           \add (L) @>>> \add (K) @>>> \cov (K) \\
         \end{CD} \]

.. container:: ltx-source

   ::

      \[ \begin{CD}
           S^{W_\Lambda}\otimes T @>j>>      T       \\
            @VVV                        @VV{\End P}V \\
          (S \otimes T)/I         @=   (Z\otimes T)/J
         \end{CD} \]

.. _amsfonts:

amsfonts
--------

This package has an option psamsfonts, but does nothing.

.. _amsgen:

amsgen
------

This package is included in a lot of other ams packages. It defines some
short cuts ``\@xp``, ``\DN@``, ``\FN@`` ``\nx@``, and a command
``\@ifnotempty``.

.. _amsmath:

amsmath
-------

This package provides the following options: leqno, reqno, fleqn,
centertags, tbtags, intlimits, nointlimits, sumlimits, nosumlimits,
namelimits, nonamelimits, centertags, tbtags, cmex. The first five
options have as effect to add an attribute to the document. Other ones
have no effect.

Using this package defines a lot of unimplemented symbols. For instance
``\bbslash`` is a command taken from the LaTeX companion that should
provide a blackboard slash character. Some useful math commands that are
not in the kernel are given by this file.

.. _amsopn:

amsopn
------

This package provides the following options: namelimits and
nonamelimits. All commands defined by the LateX style file are in the
*Tralics* kernel.

.. _amssymb:

amssymb
-------

This package has an option amsfonts, but does nothing.

.. _amstext:

amstext
-------

This package does nothing.

.. _amsthm:

amsthm
------

This package does nothing.

.. _amsxtra:

amsxtra
-------

This package provides ``\sphat``, ``\spcheck``, ``\sptilde``,
``\spdot``, ``\spddot``, ``\spdddot``, ``\spbreve``, ``\spbreve``, as
well as the unimplemented command ``\accentedsymbol``.

array
-----

This is virtual package: this means that the following example works out
of the box.

.. container:: ltx-source

   ::

      \newcolumntype{L} {>{\large\bfseries 2}l <{y}|}
      \newcolumntype{+} {>{B}l <{D}|}
      \newcolumntype{_}{rlc<{x}}
      \newcolumntype{x}{>{b}c<{a}}
      \begin{tabular*}{10pc}[b]{lrc}
      \hline
      a&b&c\\[2pt]
      \multicolumn{1}{l}{A}&B&C\\\hline
      \end{tabular*}

.. _article:

article
-------

Standard article class.

.. _bbding:

bbding
------

This package defines some names for some Ding characters. For instance
``\PhoneHandset`` for ✆, ``\FiveStarCenterOpen`` for ✫,
``\FiveStarOpenDotted`` for ✬, and so on.

.. _book:

book
----

Standard article class.

.. _braket:

braket
------

This package provides ``\bra``, ``\ket``, ``\braket``, ``\set``, and a
large version (with capital initial letters). In the example that
follows, ``\left`` and ``\right`` delimiters are used, the vertical bars
are large in the case of the braket, but only the first one in the case
of the set.

.. container:: ltx-source

   ::

      $ \Braket{ \phi | \frac{\partial^2}{\partial t^2} | \psi } $
      $   \Set{ x\in\mathbf{R}^2 | 0<{|x|}<5 } $

calc
----

The calc package is built-in. The following example shows some
computations. In each case, the numbers on the left and right of the
equals signs are the same.

.. container:: ltx-source

   ::

      \newcounter{Ac}
      \setcounter{Ac}{(1+2)*(3+4)-20}\theAc=1
      \addtocounter{Ac}{(1*2)+(3*-4)+(34/7)}\theAc=-5

      \newlength{\Bc}
      \setlength{\Bc}{(1cm+2cm)*(3+4)-200mm} \the\Bc=28.4526pt
      \setlength\Bc{\the\Bc*\ratio{25.4pt}{722.7pt}} \the\Bc=0.99985pt
      \Bc=1in \setlength\Bc{\the\Bc * 100 / 7227} \the\Bc=0.99998pt
      \Bc=1in \setlength\Bc{\the\Bc * \real{ 0.01383700013837}} \the\Bc=1.00018pt
      \Bc=1cm \setlength\Bc{\the\Bc / \real{28.452755}} \the\Bc=0.99985pt
      \Bc=1cm \setlength\Bc{\the\Bc * \ratio{254pt}{7227pt}} \the\Bc=0.99985pt
      \Bc=1in \setlength\Bc{\the\Bc / \ratio{7227pt}{100pt}} \the\Bc=1.00018pt
      \Bc=1IN \setlength\Bc{\the\Bc / \ratio{7227PT}{100pT}} \the\Bc=1.00018pt  

.. _cgloss4e:

cgloss4e
--------

Experimental package. All the code is in reality in the kernel

.. _checkend:

checkend
--------

If some closing braces and the like are missing, *Tralics* will print a
line of the form *Save stack +40 -23* at the end of the job. A new item
is pushed whenever a variable must be restored (in particular the name
of an environment), and a new item is pushed for each boundary. Thus,
the previous indication does not tell how many errors are in the
document. The checkend package adds a special command (provided by
Tralics 2.11.1) to the ``\end{document}`` hook that pops the save stack,
and prints an error message whenever a boundary is found. It could be
like this.

.. container:: tty_out

   ::

      Error signaled at line 34 of file txt15.tex:
      Non-closed environment `aaa' started at line 28.
      Non-closed environment `ccc' started at line 27.
      Non-closed brace started at line 26.

.. _color:

color
-----

Support for colors in Tralics. Options debugshow, usenames, monochrome
are ignored. There are some driver options (dvips, xdvi, etc), all
ignored. Options dvipsnames or nodvipsnames tell whether some color like
Red are defined. Default depends on the driver.

.. _comma:

comma
-----

This package provides a command ``\commaform`` that typesetsthe content
of a counter with a comma very three digits; in fact it uses the content
of ``\commaformtoken``. The internal command ``\@commaform`` takes as
argument a number (or a reference to counter register). Example

.. container:: ltx-source

   ::

      \makeatletter\let\Commaform\@commaform\makeatother
      \countdef\CT0

      \setcounter{page}{12345}\commaform{page}
      \setcounter{page}{123456}\commaform{page}
      \setcounter{page}{1234567}\commaform{page}
      \CT=12345678 \Commaform\CT
      \def\commaformtoken{ }
      \Commaform{1234567890123456789012345678901234567890}

Translation

.. container:: xml_out

   ::

      12,345
      123,456
      1,234,567
      12,345,678
      1 234 567 890 123 456 789 012 345 678 901 234 567 890

.. _comment:

comment
-------

Implements ``\includecomment`` and ``\excludecomment`` as provided by
the html package.

.. _cool:

coollist
--------

coolstr
-------

These packages provide some functionalities for strings and lists

.. container:: ltx-source

   ::

      \ifstrleneq{abc}{3}{OK}{\error}
      \ifstrleneq{abc}{4}{\error}{OK}
      \strlen{abc} % typesets 3 
      \strlenstore{abc}{chapter} % stores 3 in the chapter counter
      \strchar{abcd}{3} % typesets third char of string, namely c 
      \substr{abcdefgh}{2}{3}  % typesets cde 
      \isdecimal{-2.345}{T} % sets boolean T to true 
      \isdecimal{2.345e6}{T} % sets boolean T to false 
      \isnumeric{2.345e6}{T} % sets boolean T to true 
      \isint{2.345e6}{T} % sets boolean T to false 
      \isint{-2345}{T} % sets boolean T to true 

      \listlen{1,2,3,4,5,6}% typesets 6 
      \listlenstore{chapter}{1,2,3,4}% stores 3 in the chapter counter
      \listval{11,22,33,44}{3}% typesets 33 
      \liststore{1,2,3,4}{temp}% fills \tempi;\tempii;\tempiii;\tempiv. 

.. _curves:

curves
------

The package defines commands like ``\curve``, ``\tagcurve`` etc.

.. _datenumber:

datenumber
----------

Provides functionalities on dates. You can set a date, for instance the
first of March 2008 by ``\setdatenumber{2008}{3}{1}``, manipulate it, so
that ``\prevdate\datedate`` gives 29th February 2008. The default
language is selected by a package option, but you can change it, for
instance ``\dateselectlanguage {USenglish} \datedate`` gives February
29, 2008.

.. _decimal:

decimal
-------

This package makes a dot active in math mode, transted as ``\cdot``. Use
``\.`` as a normal dot. Example
``$\left(  1.25 >0\.\right. \hbox{text\.s.}$``.

.. _delarray:

delarray
--------

The package defines the environment used in the example below. In LaTeX,
it redefines the array environment, but this is currently impossible in
Tralics.

.. container:: ltx-source

   ::

      $
      \begin{delarray}({cc})
      a&b\\c&d
      \end{delarray}
      $

.. _epigraph:

epigraph
--------

This package implements the ``\epigraph`` command and the ``epigraphs``
environment.

.. container:: ltx-source

   ::

      \epigraph{Example is the school of mankind, and they will learn at no other}
      {\textit{Letters on a Regicide Peace}\\ \textsc{Edmond Burke}}
      \begin{epigraphs}
      \qitem{A text}{An author}
      \qitem{A second text}{An author}
      \end{epigraphs}

Translation

.. container:: xml_out

   ::

      <epigraph>
        <epitext rend='flushleft'>
          Example is the school of mankind, and they will learn at no other
        </epitext>
        <episource rend='flushright'>
          <hi rend='it'>Letters on a Regicide Peace</hi>
          <newline/> 
         <hi rend='sc'>Edmond Burke</hi>
       </episource>
      </epigraph>
      <epigraphs>
        <epitext rend='flushleft'>A text</epitext>
        <episource rend='flushright'>An author</episource>
        <epitext rend='flushleft'>A second text</epitext>
        <episource rend='flushright'>An author</episource>
      </epigraphs>

.. _esdiff:

esdiff
------

This package lets you say ``$\diff{f}{x}$``, ``$\diff*[2]{g}{y}{0}}$``
and ``$\diffp{f}{{x}{y^2}}$``.

.. _etex:

etex
----

The etex package is a basic interface to some primitives provided by
eTeX. It provides some commands like ``\globcount``, ``\loccount``,
``\globcountblk``, and ``\loccountblk`` that are not yet implemented in
*Tralics*, and options ``localalloclog`` ``localallocnolog``,
``localallocshow`` that can be used for debugging purposes. The option
``noalloc`` is specific to *Tralics*, it inhibits the creation of these
commands that you cannot use. The package also redefines the way how
registers are allocated (not done in *Tralics*, since ``\newdimen`` and
the like can use 1024 registers.

The package provides ``\loggingall`` that is the same as
``\tracingall``, but without printing anything on the terminal, and
``\tracingnone`` that removes tracing; note that these three commands
change the counters associated to tracing: macros, output, commands,
restores, assigns, math, but nothing else (not used by *Tralics*). The
package provides a ``\eTeX`` command, and symbolic names for grouptypes,
interactionmodes, nodetypes, and iftypes provided that the option is
selected.

In the example that follows, the last call to ``\F`` is likely to
produce an error message, because *Tralics* handles all boxes alike.

.. container:: ltx-source

   ::

      %\usepackage[grouptypes,iftypes]{etex}
      \def\F#1{\ifnum\currentgrouptype=#1\else\typeout{Bug \string#1}\fi}
      \F\bottomleveltype{\F\simplegrouptype\begingroup\F\semisimplegrouptype
      \hbox{\F\hboxgrouptype}\endgroup}

      \def\G#1{\edef\x{\the\currentiftype}\ifnum\x=#1\else\typeout{Bug \string#1}\fi}
      \if00\G\charif\fi\ifx00\G\xif\fi \ifnum0=0 \G\numif\fi

.. _eucal:

eucal
-----

This package defines options psamsfonts, mathcal and mathsrc. It defines
``\EuScript`` as a synonym to ``\mathcal``.

.. _eufrak:

eufrak
------

This package defines option psamsfonts. It defines ``\EuFrak`` as a
synonym to ``\mathfrak``.

.. _fancyvrb:

fancyvrb
--------

This package provides ``\DefineVerbatimEnvironment`` and some keywords
used for the *Tralics* documentation. The real code is defined in the
kernel.

.. _fix-cm:

fix-cm
------

Dummy package.

.. _fixfoot:

fixfoot
-------

Provides command ``\DeclareFixedFootnote``.

.. _fixme:

fixme
-----

Provides commands like ``\fixme``.

.. _fixltx2e:

fixltx2e
--------

Dummy package.

.. _flafter:

flafter
-------

Dummy package.

.. _float:

float
-----

This package provides the ``\newfloat`` command.

.. _fp:

fp
--

All operations defined by the fp package are implemented in C++. The two
options ``nomessages`` and ``debug`` do nothing. In the example below
``\foo`` and ``\xfoo`` contain -84, assuming that ``\mthree`` holds -3,
and ``\yfoo`` has the value indicated.

.. container:: ltx-source

   ::

      \FPupn\foo{ 3 abs mthree abs 3 sgn 10 * mthree sgn 100 * + + +}\testeq\foo{-84.}
      \FPeval\xfoo{abs(3) + abs(-3) + (sgn(3)* 10) + (sgn(-3) * 100)}\testeq\xfoo{-84.
      \def\yfoo{1}
      \def\xbar#1 #2{\FPmul\yfoo{\yfoo}{#1}%
         \let\next\xbar\ifx#2\relax\let\next\relax\fi\next#2}
      \xbar 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \relax
      %\yfoo is 121645100408832000.

.. _fontenc:

fontenc
-------

Dummy package.

.. _forloop:

forloop
-------

Provides ``\forloop``.

.. _gb4e:

gb4e
----

Experimental package. Loads cgloss4e

.. _graphicx:

graphics
--------

The ``\includegraphics`` command is built-in in *Tralics* with the
semantics of the graphicx package. A few related commands
(``\resizebox``, ``\reflectbox``, ``\resizebox``) are defined by the
graphics package. The three commands ``\graphicspath``,
``\DeclareGraphicsExtensions`` and ``\DeclareGraphicsRule`` are also
defined but their arguments are ignored. The graphicx package loads
keyval if needed, it defines ``\rotatebox`` and allows declarations as
``\setkeys{Gin}{width=20pt}``.

.. _graphpap:

graphpap
--------

Dummy package.

.. _html:

html
----

This package provides some commands like ``\htmladdfnormallink`` that
are variants of ``\href``, environments like ``htmlonly`` that behave as
comments, and a lot of other functions that do nothing.

.. _ifpdf:

ifpdf
-----

Provides a boolean ``\iffpdf`` whose value is false.

.. _ifthen:

ifthen
------

The ``\ifthenelse`` command is builtin. This package provides a variant
``\Ifthenelse`` that redefines ``\value`` in a strange way (the same as
the LaTeX code).

.. container:: ltx-source

   ::

      \newcommand{\QU}[2]{%
      \ifthenelse {
        \(\equal{#1}{ENG} \and \equal{#2}{yes} \)
           \or
        \(\equal{#1}{FRE} \and \equal{#2}{oui} \)
      }{``OK''}{``not OK''}}
      You agree \QU{ENG}{yes} or don't \QU{ENG}{no}. 
      D'accord \QU{FRE}{oui} ou pas \QU{FRE}{non}. 

.. _index:

index
-----

This package provides a multiple index mechanism. You can declare a new
index via ``\newindex``, add an attribute to the index via
``\addattributetoindex``, and use the commands ``\printindex`` or
``\index`` with an optional argument.

.. container:: ltx-source

   ::

      \newindex{A}{}{}{Second Index}
      \addattributetoindex[A]{head}{Second Index}
      \printindex[A]
      Text\index[A]{Foo} 
      and more text\index[A]{FOO!Bar}

.. _inputenv:

inputenc
--------

This package recognises options utf8, latin1, ascii, ansinew, applemac,
cp1250, cp1252, cp1257, cp437, cp437de, cp865, cp850, cp852, cp858,
decmulti, latin10, latin2, latin3, latin4, latin5, latin9, macce, next.
It defines ``\IeC``, and a command ``\inputencoding`` a command that
takes as argument an encoding name defined as an option, and uses this
as enconding for the current file.

.. _keyval:

keyval
------

This package implements a system of defining and using sets of
parameters, which are set using the syntax ``key=value``. It requires at
lest version 2.11.1, since the ``\define@key`` command is written in
C++. It takes 3 arguments (plus an optional one), see example below. The
parser of ``\setkeys`` is also builtin. It splits a sequence of tokens
at commas, and for each subsequence, splits into a key=val pair. Spaces
are removed around the key and the value, as well as a pair of braces,
as shown be the example. The package has an option that says wether an
undefined key is an error (default) or just a warning.

.. container:: ltx-source

   ::

      \makeatletter
      \define@key{kv}{foo}{\Foo{#1}} %% foo=x calls \Foo{x}
      \define@key{kv}{bar}[dbar]{\Bar{#1}} %% bar,bar=y calls \Bar with dbar or y.
      \makeatother 

      \def\Foo#1{{seen#1in Foo}}
      \def\Bar#1{seen#1in Bar}
      \setkeys{kv}{foo = 1, bar = 2, bar}
      \setkeys{kv}{ foo = {\it x }, foo = {{\it y} }, }

Translation

.. container:: xml_out

   ::

      <p>seen1in Fooseen2in Barseendbarin Bar
      seen<hi rend='it'>x in Foo</hi>seen<hi rend='it'>y</hi> in Foo</p>

.. _kvoptions:

kvoptions
---------

This package defines ``\DeclareBoolOption``,
``\DeclareComplementaryOption``, ``\DeclareStringOption``,
``\DeclareVoidOptions`` that can be used in a package. There is also a
command ``\DisableKeyvalOption`` that allows you to disable an option.

.. _latexsym:

latexsym
--------

Dummy package.

.. _lipsum:

lipsum
------

This package provides a command that can be used as ``\lipsum``,
``\lipsum[10-14]``, or ``\lipsum[12]``, and produces some paragraphs
from a dummy text. The command ``\setlipsumdefault`` can be used to set
the range if no argument is given (default is 1-7), valid range is 1 to
150.

.. _makeidx:

makeidx
-------

This package defines ``\see``, ``\seealso``, ``\seename``, and
``\alsoname``.

.. _maple:

maple2e, mapleenv, mapleplots, maplestyle, mapletab, mapleutil
--------------------------------------------------------------

A bunch of experimental packages that can be used to typeset code
generated by maple

.. _minimal:

minimal
-------

This is a dummy class.

.. _mml:

mml
----

This package provides a lot of commands, for instance ``\mmlIntegers``
that produces <integers> it can be used in math mode, for content markup
MathML.

.. _natbib:

natbib
------

Provides features of natbib.sty

.. container:: ltx-source

   ::

      \citeyear{xml} \citeauthor{xml} \citefullauthor{xml}
      \cite{xml}\cite{xml}

.. _newlfont:

newlfont
--------

Provides redefinition of commands like ``\rm``.

.. _nopageno:

nopageno
--------

This adds the attribute pair ``page-numbering='false'`` to the root
element.

.. _oldlfont:

oldlfont
--------

Dummy package.

.. _overword:

overword
--------

This package provides two macros which can be used as building blocks
for the parsing of text. It forms part of the Calendar package, but is
written as a discrete module that may be used in other packages as well.
An example of use is given at the end of the package.

.. _ra:

ra
--

Files needed for typeseting Inria's Activity Report. Since 2007, there
is a class file for each year, named ``ra2007``, etc. It has no option.
This class loads the ``ra`` package, with some options, depending on the
year. The package defines ``\persA``, ``\persB``, see documentation, and
make ``\pers`` equivalent to ``\persB``, unless option ``old`` is given,
case where ``\persA`` is used. The option ``catperso`` defines a
catperso environment. Four environments ``participantXXX`` are defined
(see `documentation <doc-p.html#env-participant>`__) where XXX is empty,
or ``s`` or ``e`` or ``es``. By default, they are identical, producing a
``participants`` element; using option ``participant`` changes this: the
name of the XML element is the name of the environment.

.. _report:

report
------

Standard article class.

.. _remreset:

remreset
--------

If you say ``\newcounter{C}[A]`` then counter C is reset whenever
counter A is stepped. The package provides the construction
``\@removefromreset{C}{A}``, that removes C from the list of counters to
be reset. Note the invsere construction ``\@addtoreset{C}{A}`` is
implemented by default.

.. _RR:

RR
--

The package needed for typeseting Inria's Research Reports

.. _shortvrb:

shortvrb
--------

Defines ``\MakeShortVerb`` and ``\DeleteShortVerb\`` in terms of
primitives ``\DefineShortVerb`` and ``\UndefineShortVerb``.

.. _showidx:

showidx
-------

Dummy package.

soul
----

Some commands from this package are built-in.

.. _std:

std
----

This is not a class/package, but a file shared between different classes

.. _suffix:

suffix
------

Package by D. Kastrup. It allows to construct macros with suffixes; in
the example that follows, we have a ``\snarf`` command, and extend it
twice. We use it, put the content in a box, and print the box. We then
show the command, so as to see how it is redefined. The last two lines
contain two macros that can be used to get the name of the commands that
do the real job.

.. container:: ltx-source

   ::

      \def\snarf#1{A#1}
      \WithSuffix\long\def\snarf[#1]{B#1}
      \WithSuffix\long\def\snarf(#1){C#1}
      \setbox0\hbox{\snarf{1}\snarf[2]\snarf(3)\snarf=4}
      \showbox0
      \show\snarf
      \expandafter\show\csname\SuffixName\snarf[\endcsname
      \expandafter\show\csname\NoSuffixName\snarf\endcsname

This is what *Tralics* prints on the terminal. Note the funny names.

.. container:: tty_out

   ::

      A1B2C3A=4=
      \snarf=\protected macro: ->\WSF@suffixcheck \snarf .
      \WSF:\snarf the character [=\long macro: #1]->B#1.
      \WSF:\snarf=macro: #1->A#1.

.. _syntonly:

syntonly
--------

Dummy package.

.. _textcase:

textcase
--------

This package implements ``\MakeTextUppercase`` and
``\MakeTexLowercase``, as well as ``\NoCaseChange``. In the example that
follows, the first line should be translated as ``foo Bar $Xy$``. The
package has a single option: overload, when used, it redefines
``\MakeUppercase`` and ``\MakeLowercase``. Without the option, the
second math formula is in uppercase, with it, it is lowercase.

.. container:: ltx-source

   ::

      \MakeTextLowercase{Foo \NoCaseChange{Bar} $Xy$ }
      \MakeUppercase{Foo $Xy$ }

.. _textcomp:

textcomp
--------

This package declares options: full, almostfull, euro, safe, force, and
warn. It does defines some commans like ``\textsevenoldstyle`` to
translate into ``<char name='sevenoldstyle'/>``. There is no Unicode
characters for these TeX characters.

.. _tipa:

tipa
----

The tipa package provides some characters and accents used for IPA
(International Phonetic Alphabet). The tipx package contains additional
commands. In LaTeX, two font encodings T3 and TS3 are associated to
these package, and ``\textipa{SO""}`` produces the same as
``\textesh\textopeno\textsecstress``. This mechanism is not yet
implemented. See `HERE <doc-a.html#accents>`__ for some examples.
Options extra, tone, T1, noenc, do nothing. Option safe is used by
default. If you want unsafe mode, use the command ``\tipaunsafemode``.

.. _tloop:

tloop
-----

This package provides the function ``\tloop`` with two arguments, range
and code. The range is fully expanded, should be of the form a-b; The
internal counter ``\tloop@ctr`` ranges from a to b inclusive (at least
one iteration is performed). The loop in the following example produces
``3=iii 4=iv 5=v``.

.. container:: ltx-source

   ::

      \count0=3 \count1=5 
      \def\range{\the\count0-\the\count1}
      \makeatletter
      \tloop\range{\the\tloop@ctr=\romannumeral\tloop@ctr\space}
      \tloop{1-3}{{\Tloop{1-3}{\the\tloop@ctr\the\Tloop@ctr\space }}}

The package provides also ``\Tloop`` that is similar; this allows you to
put loops into loops. The example that follows creates a 3x3 table with
ij at row i column j.

.. container:: ltx-source

   ::

      \def\x{}
      \def\addtox#1{\xdef\x{\x#1}}
      \tloop{1-3}{\ifnum\tloop@ctr>1\addtox{\\}\fi
                 {\Tloop{1-3}{\ifnum\Tloop@ctr>1\addtox{&}\fi
                  \addtox{\the\tloop@ctr\the\Tloop@ctr}}}}
      \begin{tabular}{ccc}\x\end{tabular}

.. _theorem:

theorem
-------

This is a virtual package. The example that follows requires no package
at all.

.. container:: ltx-source

   ::

      \theorembodyfont{\sl}
      \theoremstyle{break}
      \newtheorem{Cor}{Corollary}
      \setcounter{section}{17}
      \newtheorem{Exa}{Example}[section]
      \begin{Cor}
       This is a sentence typeset in the theorem environment \texttt{Cor}.
      \end{Cor}
      \begin{Exa}
       This is a sentence typeset in the theorem environment \texttt{Exa}.
      \end{Exa}

.. _titlepage:

titlepage
---------

This package implements some commands that can be used for a thesis
title page.

.. _tracefnt:

tracefnt
--------

This package declares options: errorshow, warningshow, infoshow,
debugshow, loading, infoshow, and pausing. It does nothing.

.. _tralics-iso:

tralics-iso
-----------

This package defines a lot of commands like ``\mathslarr`` that should
be used in math mode; translation is something like &#x2190; This
character is called \`Leftwards arrow' in the Unicode documentation and
\`short left arrow' in the iso9573-13, hence the command name. Your
browser may show the character as ←.

.. _upref:

upref
-----

Dummy package.

.. _xkeyval:

xkeyval
-------

Dummy package.

----

docs/array.rst
--------------

Arrays in Tralics
=================

We describe here the implementation of the arrays in *Tralics*. One has
to distinguish between ``table`` which is an environment in which you
can put some objects (in general tables) with a caption; like the
``figure`` environment, this generates a floating object. On the other
hand, the ``array`` and ``tabular`` environments can be used to create
table: the first one is designed for math only, the second for non-math
material.

.. _tabular:

The tabular environment
-----------------------

You can say ``\begin{tabular}`` followed by pos, cols, tabular material
and ``\end{tabular}`` or: ``\begin{tabular*}`` followed by size, pos,
cols, tabular material and ``\end{tabular*}``.

In both cases, the result is a ``<table>`` element, with attribute
``rend='inline'``. In the second case, size has to be a dimension, for
instance ``{.3pt}``, whose effect is to add the attribute pair
``width='0.3pt'`` to the table. The pos argument should be one of
``[t]``, ``[b]``, ``[c]``, or omitted. (No error is signaled otherwise;
in particular, macros are neither expanded not evaluated). If not
omitted, the element has a ``vpos`` attribute whose value is ``t``,
``b`` or ``c``. The translation of tabular material fills the element
with some ``<row>`` elements, each of which contains some ``<cell>``
elements. Each cell has a position in the row; its translation depends
on the position and the cols specification. Example

.. container:: ltx-source

   ::

      \begin{tabular*}{10pc}[b]{lrc}
      \hline
      a&b&c\\[2pt]
      \multicolumn{1}{l}{A}&B&C\\\hline
      \end{tabular*}

The translation is the following.

.. container:: xml_out

   ::

      <table vpos='b' width='120.0pt' rend='inline'>
       <row  spaceafter='2.0pt' top-border='true'>
        <cell halign='left'>a</cell>
        <cell halign='right'>b</cell>
        <cell halign='center'>c</cell>
       </row>
       <row bottom-border='true'>
        <cell halign='left' cols='1'>A</cell>
        <cell halign='right'>B</cell>
        <cell halign='center'>C</cell>
       </row>
      </table>

Preview |some table|

Not all names are hard-coded. If the configuration file contains the
following lines,

.. container:: ltx-source

   ::

        att_vpos = "Vpos"
        att_halign = "Halign"
        att_cols = "Cols"
        att_table_width = "Width"
        xml_table_name = "Table" 
        xml_row_name = "Row"
        att_row_spaceafter = "Spaceafter"
        xml_cell_name = "Cell"
        att_cell_left =  "Left"
        att_cell_right =  "Right"
        att_cell_center =  "Center"
        att_cell_leftborder = "Leftborder"
        att_cell_rightborder = "Rightborder"
        att_cell_topborder = "Topborder"
        att_cell_bottomborder = "Bottomborder"
        att_rend = "Rend"

then the translation is the following.

.. container:: xml_out

   ::

      <Table Vpos='b' Width='120.0pt' Rend='inline'>
       <Row Spaceafter='2.0pt' Topborder='true'>
        <Cell Halign='Left'>a</Cell>
        <Cell Halign='Right'>b</Cell>
        <Cell Halign='Center'>c</Cell>
       </Row>
       <Row Bottomborder='true'>
        <Cell Halign='Left' Cols='1'>A</Cell>
        <Cell Halign='Right'>B</Cell>
        <Cell Halign='Center'>C</Cell>
       </Row>
      </Table>

.. _preamble:

Interpreting the preamble
-------------------------

The preamble of the array is the quantity marked cols in the description
above. This is a specification for columns. It specifies how the columns
should be formatted. In standard LaTeX, you cannot use more columns than
specified; in *Tralics*, this is not relevant.

As the previous example shows, there are three standard column types:
``c``, ``l`` and ``r``, (centered, left-aligned, right-aligned). The
effect is to add an attribute pair of the form ``halign='center'``. If a
row contains more cells than in the specification, these extra cells
have no ``halign`` attribute. You can also say ``p{dim}``. This should
typeset the column in a ``\parbox[t]{dim}``. This feature is not
implemented: the argument is ignored, and ``p`` is replaced by ``c``.

The array.sty package adds two options: ``m`` and ``b``. The ``b``
option is like the ``p`` option, but bottom-aligned. The ``m`` option
should be used only in math mode (i.e. for the ``array`` environment,
and not ``tabular``). In *Tralics*, there is no difference between
``b``, ``m`` and ``p``.

There is an ``@{text}`` option. It inserts *text* in every row, where
*text* is processed in math mode in the ``array`` environment and in LR
mode in the ``tabular`` and ``tabular*`` environments. Such an
expression suppresses the space that LaTeX normally inserts between
columns. For instance, an array specification like
``{l@{\hspace{1cm}}l}`` says that the two columns of text should be
separated by exactly one centimeter. A specification like ``{@{}c@{}}``
says that no additional space should be added neither of the left not
the right of the column. An ``\extracolsep{wd}`` command can be used
inside such an expression. It causes an extra space to appear to the
left of all subsequent columns. Note that ``\extracolsep`` expands to
``\tabskip``; this TeX primitive is not implemented in *Tralics*. In
fact, *Tralics* ignores an ``@`` and its argument.

You can use a ``|`` for specifying a vertical rule. However, in
*Tralics* you cannot use double or triple rules. Sorry. There is also a
``!{...}`` option that is not implemented.

Every specification (``l``, ``r``, ``c``, ``b``, ``p``, ``m``) can be
preceded by a ``>{xx}`` declaration and followed by a ``<{yy}``
declaration, where xx and yy are arbitrary (see comments below),
respectively called the *u*-part and *v*-part of the template. In case
of multiple declarations, the last will be executed first. Said
otherwise, ``>{3}>{b}c<{a}<{z}`` is the same as ``>{b3}c<{za}``. The
effect is to insert ``b3`` before the cell in the current position, and
``za`` after the cell. Note that the cell is finished when a token is
sensed that indicates either a new cell, a new row or the end of the
array. Technically, this means a ``&``, a ``\\``, or an ``\end`` (the
end of the environment) after “full” expansion. A special marker is
pushed back after the *v*-part. This is ``\endtemplate`` in the case of
a cell, and ``\cr`` in the case of ``\\``. You should not use ``\cr`` or
``\crcr`` outside an array defined by ``\halign`` (this is not yet
implemented). You must be careful that the *v*-part does not contain
something that reads the special end marker. For instance
``\def\x#1{}\halign{#\x&#\cr 1&2\cr}`` is an error.

Finally, ``*{N}{text}`` can be used instead of N occurrences of
``text``.

Note. At the end of Chapter 22 of the `TeXbook <index.html#texbook>`__,
Knuth gives an example of a table where the preamble is
``\centerline{#}``. Such a construction cannot be done in *Tralics*,
since ``>{\centerline?}c<{?}`` would transform into ``\centerline?#?``
and question marks cannot be replaced by braces; you could try
``>{\expandafter\centerline?}`` and replace the question mark by
something that expands to an open brace but contains as many open braces
as closing ones, for instance ``\expandafter{\iffalse}\fi``. This fails
as *Tralics* finds some invalid command; it also fails without the
``\expandafter``, (the closing ``\fi`` is not found). Finally, this
fails also: ``>{\centerline\bgroup}c<{\egroup}``.

Knuth says that an entry of the form ``a}b{c`` is legitimate, with
respect to this template. This cannot be the case in *Tralics*, but it
would be valid for a template like ``>{\bgroup\bf}c<{\egroup}``. This
justifies that a table has to be terminated by ``\cr`` or ``\crcr``. In
the case of *Tralics*, this is not needed.

.. _mathpreamble:

Math shift characters in a preamble
-----------------------------------

Inserting the *v*-part of the template at the right moment is not a
trivial task, and before November 2015, *Tralics* failed to do it in
math mode. The following example now compiles.

.. container:: ltx-source

   ::

        
      \newenvironment{tab}{Table \begin{tabular}{>{\before} c<{\after}c}}{\end{tabular}}
      \def\before{Before}\def\after{After}%
      \begin{tab}x\end{tab}%
      \def\before{$\bgroup}\def\after{\egroup$}%
      \tracingall
      \begin{tab}c&math before amp brace \end{tab}
      \begin{tab}x\end{tab}
      \newenvironment{xtab}{\begin{tabular}{>{\before} cc}}{\after\end{tabular}}
      \begin{xtab}ww\end{xtab}

We give here part of the trace for the second array. When the line
marked “Hack1” is sensed, the situation is the following. The save stack
holds: the ``document`` environment, the ``tab`` environment, the
``tabular`` environment, a cell group, a math group, and a brace group
(watch for stack: level). The XML stack holds the document, the table, a
row, a cell (watch for Push and Pop); note that the current paragraph
was ended, and another one will be started after the array. *Tralics*
sees an ampersand character whose meaning is: finish the current cell
and start a new one. This is not possible, since a closing brace is
expected. The hack is the following: if *Tralics* is scanning a math
formula and sees ``&`` or ``\\``, if the save stack holds a cell below
the math (ignoring brace groups), if the top of the XML stack holds a
cell, with a non-empty *v*-part, then the *v*-part is inserted, and the
``&`` or ``\\`` is marked to be read again. If the first two conditions
hold but not the last (no *v*-part to insert) an error is signaled and
parsing of the math formula stops. In this example the conditions are
fulfilled and ``\after`` is inserted. Expanding this yields the closing
brace and the closing dollar. On line “Hack2”, you can see all tokens
(after full expansion) that were read as part of the math formula; there
is an &, but it is not part of the formula. It is read again (as
“alignment tab character” ) and evaluates to ``\endtemplate``. This
finishes the cell and starts a new one. Note: we have simplified the
remaining of the trace by showing only the modifications to the save
stack and XML stack.

.. container:: log_out

   ::

      [6] \begin{tab}c&math before amp brace \end{tab}
      {\begin}
      {\begin tab}
      +stack: level + 2 for environment entered on line 6
      \tab ->Table \begin {tabular}{>{\before } c<{\after }c}
      Character sequence: Table .
      {\begin}
      {Text:Table }
      {\begin tabular}
      +stack: level + 3 for environment entered on line 6
      {\tabular}
      {Pop 1: document_v p_v}
      {Push tabular 1}
      % Array preamble parsing omitted
      {Push row 2}
      {Push cell 3}
      +stack: level + 4 for cell entered on line 6
      {template u-part \before }
      \before ->$\bgroup 
      {math shift character}
      +stack: level + 5 for math entered on line 6
      +stack: level + 6 for brace entered on line 6
      {template v-part \after }  % Hack1
      \after ->\egroup $
      +stack: level - 6 for brace from line 6
      +stack: level - 5 for math from line 6
      Math: $\bgroup c&\egroup$  % Hack2
      {Inline formula ...} % details omitted
      {alignment tab character}
      {\endtemplate}
      {Pop 3: document_v tabular_v row_a cell_a}
      +stack: level - 4 for cell from line 6
      {Push cell 3}
      % more lines omitted
      +stack: level + 4 for cell entered on line 6
      {Pop 3: document_v tabular_v row_a cell_a}
      +stack: level - 4 for cell from line 6
      {Pop 2: document_v tabular_v row_a}
      {Pop 1: document_v tabular_v}
      {Push p 1}
      +stack: level - 3 for environment from line 6
      +stack: level - 2 for environment from line 6

The next example is similar to the previous one. When the line marked
“Hack3” is seen we are in exactly the same situation as described above
but instead of an ampersand character we have ``\end``. The same
algorithm is applied. However no error is signaled if there is no
*v*-part on the stack (this is needed in order to make the last example
work). After the formula has been translated, *Tralics* sees the
``\end`` command, and interprets it; it expands to ``\end {tabular}``.
At this moment (marked “Hack4”), the *v*-part of the template is
inserted (as at was already inserted, nothing happens here), as well as
the ``\cr`` token. Its effect is to pop the XML stack as well as the
save stack: this finishes the current cell. The XML stack is popped
again (there is nothing to pop on the save stack): this finishes the
current row. Then ``\end {tabular}`` is evaluated again. This pops the
XML stack and finishes the array. After that, the save stack is popped
twice: once for each ``\end`` command.

.. container:: log_out

   ::

      [7] \begin{tab}x\end{tab}
      % Some lines omitted (same as above)
      {Push row 2}
      {Push cell 3}
      +stack: level + 4 for cell entered on line 7
      +stack: level + 5 for math entered on line 7
      +stack: level + 6 for brace entered on line 7
      {template v-part \after } % Hack3
      \after ->\egroup $
      +stack: level - 6 for brace from line 7
      +stack: level - 5 for math from line 7
      Math: $\bgroup x\end\egroup$
      {Inline formula ...} % details omitted
      {\end}
      {\end tab}
      \endtab ->\end {tabular}
      {\end}
      {\end tabular}  % Hack4
      {\cr}
      {Pop 3: document_v tabular_v row_a cell_a}
      +stack: level - 4 for cell from line 7
      {Pop 2: document_v tabular_v row_a}
      {\end}
      {\end tabular}
      {\endtabular}
      {Pop 1: document_v tabular_v}
      {Push p 1}
      {\endenv}
      +stack: restoring \par=\par.
      +stack: ending environment tabular; resuming tab.
      +stack: level - 3 for environment from line 7
      {\endenv}
      +stack: ending environment tab; resuming document.
      +stack: level - 2 for environment from line 7

.. _columntypes:

New column types
----------------

You can say things like these

.. container:: ltx-source

   ::

        
      \newcolumntype{C}{>{$}c<{$}}
      \newcolumntype{L}{>{$}l<{$}}
      \newcolumntype{R}{>{$}r<{$}}
      \newcolumntype{d}[1]{>{\rightdots{#1}}r<{\endrightdots}}
      \newcolumntype{X}{CLR}

      \begin{tabular}{*{3}{|c|}d{23}X}
      \end{tabular}

In this case, the transcript file will contains

.. container:: log_out

   ::

       
      array preamble at start: |c||c||c|d{23}X
      array preamble after X: |c||c||c|d{23}CLR
      array preamble after d: |c||c||c|>{\rightdots {23}}r<{\endrightdots }CLR
      array preamble after C: |c||c||c|>{\rightdots {23}}r<{\endrightdots }>{$}c<{$}LR
      array preamble after L: |c||c||c|>{\rightdots {23}}r<{\endrightdots }>{$}c<{$}>{$}l<{$}R
      array preamble after R: |c||c||c|>{\rightdots {23}}r<{\endrightdots }>{$}c<{$}>{$}l<{$}>{$}r<{$}
      array preamble parse: | c | | c 1| | c 2| >3>{} r <<{} >4>{} c <<{} >5>{} l <<{} >6>{} r <<{} 7

The first line is printed after evaluation of the ``*`` arguments.

After that, the preamble contains, at toplevel (outside braces) two
characters ``d`` and ``X`` that are defined to be new column types.
These are evaluated one after the other (the order is irrelevant, here
alphabetic order is used so that ``X`` is expanded first). Since the
expansion was non trivial, a second try is made. Note that only a finite
numbers of tries are executed. In case of recursion, strange things can
happen. Note how you can use commands with arguments (here ``d`` takes
one argument, it is ``23``).

The last line of the transcript indicates parsing of standard options.
In the case of ``p{...}``, you will see a ``p`` first, followed by a
``p{}``. Whenever a new cell is started, a number is printed. Hence
``c 1`` indicates that cell 0 was finished, cell 1 started, and cell is
is centered; ``>5>{}`` means that cell 5 was started because of the >
sign. The final number just says that the seventh cell information were
stored. [**Note:** these numbers are not printed anymore in the current
version].

.. _example2:

Another example
---------------

We consider here the following new column types. As you can see, one of
them is the character ``+`` , another is the character ``_`` . The fact
that these characters have special catcodes is irrelevant (they cannot
be of catcode 1 and 2, because this would interfere with brace matching,
and they cannot be of catcode 10, because space characters should be
ignored in the preamble).

.. container:: ltx-source

   ::

       
      \newcolumntype{L} {>{\large\bfseries 2}l <{y}|}
      \newcolumntype{+} {>{B}l <{D}|}
      \newcolumntype{_}{rlc<{x}}
      \newcolumntype{x}{>{b}c<{a}}

Consider the four following tables

.. container:: ltx-source

   ::

       
      \begin{tabular*}{5cm}[b]{*{4}{_c|}}
      a1&a2&a3&a4  & b1&b2&b3&b4 & c1&c2&c3&c4& d1&d2&d3&d4\\
      Wa1&Wa2&Wa3&Wa4  & Wb1&Wb2&Wb3&Wb4 & Wc1&Wc2&Wc3&Wc4& Wd1&Wd2&Wd3&Wd4\\
      \end{tabular*}

      \begin{tabular}{|ll|rr|cc|}
      \hline a&b&c&d&e&f\\
      aaa&bbb&ccc&ddd&eee&fff\\
      \hline
      A&\multicolumn{3}{+}{C}&E&F\\
      \multicolumn{2}{|l}{ab}&c&d&e&f\\
      \cline{1-3}\cline{6-6}
      aaa&bbb&ccc&ddd  &eee&fff\\\hline
      \end{tabular}

      \begin{tabular} {| >{\large 1}c <{x}| L > {\large\itshape 3}c <{z}|}
      \hline A&B&C\\\hline 100&10 &1\\\hline
      \end{tabular}


      \begin{tabular} {| >{\large 1}c <{x}| L > {\large\itshape 3}x <{z}|}
      \hline A&B&C\\\hline 100&10 &1
      \end{tabular}

Preview is below. Currently, each table is as wide as the current page.
This is a bad thing, it should be arranged in a future version.

|four tables|

This is the XML translation of the first table. Note how the first two
arguments ``{5cm}[b]`` are translated. Note also the preamble:
``*{4}{_c|}``. This means a sequence, repeated for times, of a
right-aligned cell, a left-aligned cell, a centered cell and a cell with
a vertical rule after it. The table is terminated by a ``\\``, this one
is not necessary.

.. container:: xml_out

   ::

      <table vpos='b' width='142.26378pt' rend='inline'>
      <row><cell halign='right'>a1</cell>
      <cell halign='left'>a2</cell>
      <cell halign='center'>a3x</cell>
      <cell halign='center' right-border='true'>a4</cell>
      <cell halign='left'>b1</cell>
      <cell halign='center'>b2x</cell>
      <cell halign='center' right-border='true'>b3</cell>
      <cell halign='right'>b4</cell>
      <cell halign='left'>c1</cell>
      <cell halign='center'>c2x</cell>
      <cell halign='center' right-border='true'>c3</cell>
      <cell halign='right'>c4</cell>
      <cell halign='left'>d1</cell>
      <cell halign='center'>d2x</cell>
      <cell halign='center' right-border='true'>d3</cell>
      <cell>d4</cell>
      </row><row><cell halign='right'>Wa1</cell>
      <cell halign='left'>Wa2</cell>
      <cell halign='center'>Wa3x</cell>
      <cell halign='center' right-border='true'>Wa4</cell>
      <cell halign='left'>Wb1</cell>
      <cell halign='center'>Wb2x</cell>
      <cell halign='center' right-border='true'>Wb3</cell>
      <cell halign='right'>Wb4</cell>
      <cell halign='left'>Wc1</cell>
      <cell halign='center'>Wc2x</cell>
      <cell halign='center' right-border='true'>Wc3</cell>
      <cell halign='right'>Wc4</cell>
      <cell halign='left'>Wd1</cell>
      <cell halign='center'>Wd2x</cell>
      <cell halign='center' right-border='true'>Wd3</cell>
      <cell>Wd4</cell>
      </row></table>

This is the translation of the third table. The preamble of the table is
something like ``|c|l|c|``, indicating a centered row, a left-aligned
row and a centered row. There are four vertical rules, the first two
ones are attached to the first cell, and after that, there is a rule on
the right of each cell. The specification of the second cell is ``L``,
and, after expansion, ``>{\large\bfseries 2}l <{y}``, so that a ``B`` is
replaced by ``\large\bfseries 2By``. Remember that each cell is
translated in a group, so that the scope of the ``\large\bfseries`` is
limited to a single cell.

In the example we can see that ``\hline`` produces an horizontal rule by
adding an attribute to the row that precedes it (the ``\hline`` at the
start of the table induces a second rule for the first row).

.. container:: xml_out

   ::

      <table rend='inline'>
       <row bottom-border='true' top-border='true'>
        <cell left-border='true' halign='center' right-border='true'><hi rend='large1'>1Ax</hi></cell>
        <cell halign='left' right-border='true'><hi rend='large1'></hi><hi rend='large1'><hi rend='bold'>2By</hi></hi></cell>
        <cell halign='center' right-border='true'><hi rend='large1'></hi><hi rend='large1'><hi rend='it'>3Cz</hi></hi></cell>
       </row>
       <row bottom-border='true'>
        <cell left-border='true' halign='center' right-border='true'><hi rend='large1'>1100x</hi></cell>
        <cell halign='left' right-border='true'><hi rend='large1'></hi><hi rend='large1'><hi rend='bold'>210y</hi></hi></cell>
        <cell halign='center' right-border='true'><hi rend='large1'></hi><hi rend='large1'><hi rend='it'>31z</hi></hi></cell>
      </row></table>

This is the fourth table. It is like the table above, without the final
``\\\hline``. As you can see, the end of a cell is obtained when the
next character is either ``&`` (and the cell is followed by another
cell), or a ``\\`` command (and this means the end of a complete row),
or, as in this case, a ``\\end`` command. In this case, we have to
insert the ``<{}`` material, and the ``\end`` token.

The specifications of the last column are
``>{\large\itshape 3}x <{z}|``. If we replace ``x`` by its value, we get
``>{\large\itshape 3}>{b}c<{a}<{z}|`` and this is the same as
``>{b\large\itshape 3}c<{za}|``. This strange behavior is explained in
the array.sty documentation.

.. container:: xml_out

   ::

      <table rend='inline'>
       <row bottom-border='true' top-border='true'>
        <cell left-border='true' halign='center' right-border='true'><hi rend='large1'>1Ax</hi></cell>
        <cell halign='left' right-border='true'><hi rend='large1'></hi><hi rend='large1'><hi rend='bold'>2By</hi></hi></cell>
        <cell halign='center' right-border='true'>b<hi rend='large1'></hi><hi rend='large1'><hi rend='it'>3Cza</hi></hi></cell>
       </row>
       <row>
        <cell left-border='true' halign='center' right-border='true'><hi rend='large1'>1100x</hi></cell>
        <cell halign='left' right-border='true'><hi rend='large1'></hi><hi rend='large1'><hi rend='bold'>210y</hi></hi></cell>
        <cell halign='center' right-border='true'>b<hi rend='large1'></hi><hi rend='large1'><hi rend='it'>31za</hi></hi></cell>
       </row>
      </table>

This is now the second table. Its preamble is\ ``|ll|rr|cc|``, this
means two left-align columns, two right-aligned columns, and two
centered columns, with four vertical rules. The table contains three
``\hline``, hence three horizontal rules.

The table contains ``\multicolumn{2}{|l}{ab}`` at the start of row 4.
This means that a cell spans two columns. The preamble ``|ll|`` is
replaced by ``|l``, this means an interruption of the second vertical
rule. The quantity ``ab`` is translated (inside a group), an put in this
cell.

The table contains ``\multicolumn{3}{+}{C}`` in row 3. We have something
that spans three rows, thus removing ``l|rr|`` from the preamble,
replacing it by ``+``. This is handled like a normal preamble (but for
one column only), and here is ``>{B}l <{D}|``. In fact, since the cell
contains ``C``, it is as if you said ``\multicolumn{3}{l|}{BCD}``.
Normally, the vertical rule implied by the bar should span the whole
table. The hole is strange.

The table contains also a ``\cline{1-3}\cline{6-6}`` instead of a
``\hline``. This indicates a horizontal rule that spans columns 1, 2, 3
and 6 (hence column 4 and 5 are omitted). In the translation, a
``bottom-border`` attribute is used for each cell, instead of a unique
attribute for the row. Note that, in the example, there is a cell that
spans columns 1 and 2, so that only three cells are marked.

.. container:: xml_out

   ::

      <table rend='inline'>
       <row top-border='true'>
        <cell left-border='true' halign='left'>a</cell>
        <cell halign='left' right-border='true'>b</cell>
        <cell halign='right'>c</cell>
        <cell halign='right' right-border='true'>d</cell>
        <cell halign='center'>e</cell>
        <cell halign='center' right-border='true'>f</cell>
       </row>
       <row bottom-border='true'>
        <cell left-border='true' halign='left'>aaa</cell>
        <cell halign='left' right-border='true'>bbb</cell>
        <cell halign='right'>ccc</cell>
        <cell halign='right' right-border='true'>ddd</cell>
        <cell halign='center'>eee</cell>
        <cell halign='center' right-border='true'>fff</cell>
       </row>
       <row>
        <cell left-border='true' halign='left'>A</cell>
        <cell halign='left' right-border='true' cols='3'>BCD</cell>
        <cell halign='center'>E</cell>
        <cell halign='center' right-border='true'>F</cell>
       </row>
       <row>
        <cell bottom-border='true' left-border='true' halign='left' cols='2'>ab</cell>
        <cell bottom-border='true' halign='right'>c</cell>
        <cell halign='right' right-border='true'>d</cell>
        <cell halign='center'>e</cell>
        <cell bottom-border='true' halign='center' right-border='true'>f</cell>
       </row>
       <row bottom-border='true'>
        <cell left-border='true' halign='left'>aaa</cell>
        <cell halign='left' right-border='true'>bbb</cell>
        <cell halign='right'>ccc</cell>
        <cell halign='right' right-border='true'>ddd</cell>
        <cell halign='center'>eee</cell>
        <cell halign='center' right-border='true'>fff</cell>
       </row>
      </table>

The implementation of ``\cline`` is the following; assume that the
arguments are *A* and *B*. If the command is placed after a row contains
cells *c1*, *c2*, etc, if there are integers *i* and *j*, such that the
total span of rows less than *i* is *A-1* and the total span of rows
with index between *i* and *j* is *B-A+1* then a
``bottom-border='true'`` attribute is added to these cells. If the total
span *c* of the row is at most *A-1*, then *Tralics* inserts an empty
cell whose span is *A-1-c* (unless this quantity is zero), then an empty
cell with span *B-A+1* and a ``bottom-border='true'`` attribute. If this
fails, the current row is ignored if it contains an empty cell, followed
by a possible newline marker; a new row is added, and the previous rule
is applied, with *c=0*. The span attribute has the form ``cols='3'``, it
is omitted when the value is one. In the example that follows, the
effect of the ``\\`` command between the two ``\cline`` is to start a
new row, and a left aligned cell with a vertical rule on the left. Such
a cell is considered empty, thus removed; as a consequence this ``\\``
has no effect at all.

.. container:: ltx-source

   ::

       
      \begin{tabular}{|ll|rr|cc|}
      A&\multicolumn{3}{l}{BCD}&E&F\cline{1-3}\\\cline{6-6}  
      A&\multicolumn{3}{l}{BCD}&E&F\\\cline{1-3}\\\cline{6-6}  
      z&t\\ \cline{3-3}
      \end{tabular}

.. container:: xml_out

   ::


      <table rend='inline'>
        <row>
          <cell halign='left' left-border='true'>A</cell>
          <cell halign='left' cols='3'>BCD</cell>
          <cell halign='center'>E</cell>
          <cell right-border='true' halign='center'>F</cell>
        </row>
        <row>
          <cell bottom-border='true' cols='3'/>
          <cell cols='2'/>
          <cell bottom-border='true'/>
        </row>
        <row>
          <cell halign='left' left-border='true'>A</cell>
          <cell halign='left' cols='3'>BCD</cell>
          <cell halign='center'>E</cell>
          <cell right-border='true' halign='center'>F</cell>
        </row>
        <row>
          <cell bottom-border='true' cols='3'/>
        </row>
        <row>
          <cell halign='left' left-border='true'/>
          <cell cols='4'/>
          <cell bottom-border='true'/>
        </row>
        <row>
          <cell halign='left' left-border='true'>z</cell>
          <cell right-border='true' halign='left'>t</cell>
          <cell bottom-border='true'/>
        </row>
      </table>

.. _booktab:

The booktabs extension
----------------------

This package introduces some commands that control the width of
horizontal rules in tables. Here is an example from the documentation

.. container:: ltx-source

   ::

       
      \begin{tabular}{@{}llr@{}} \toprule
      \multicolumn{2}{c}{Item}\\ \cmidrule(r){1-2}
      Animal& Description & Price (\$) \\ \midrule
      Gnat & per gram & 13.63 \\
              & each & 0.01\\
      Gnu  & stuffed& 92.50 \\
      Emu & stuffed & 33.33\\
      Armadillo& frozen &8.99 \\ \bottomrule
      \end{tabular}

The following three commands ``\toprule``, ``\midrule`` and
``\bottomrule`` are assumed to be the first rule, an inner rule, or the
last rule of the table. There effect is to add to the table some
vertical space, a rule, and some other vertical space. The spaces are
``\aboverulesep`` and ``\belowrulesep``, except that above the first
rule there is ``\abovetopsep``, and below the last rule there is
``\belowbottomsep``. The thickness of a normal rule is
``\lightrulewidth``, but the first and last rules have thickness
``\heavyrulewidth``. The three commands take an optional parameter, the
thickness of the rule. The command ``\specialrule`` take three
arguments: width, space above, and space below. Below is the XML
translation; you can see that the default space above the first rule and
below the last rule are zero, such zero values are not indicated.

The package provides also ``\cmidrule``. This command takes an optional
argument (a width; default is ``\cmidrulewidth``), a trim argument and a
column specification. The column specification is an interval, ``1-2``,
in the example above; it says that a rule spanning columns 1 to 2 should
be used. The trim argument explains how this rule has to be trimmed on
the left, or right, this argument is ignored by *Tralics*. We use the
same algorithm as for `\\cline <doc-c.html#cmd-cline>`__. In the case of
``\cmidrule[3pt](){1-3}\cmidrule[2pt](){3-4}``, cell number 3 has a
width of 2pt. You can use the command ``\morecmidrules`` in order to
avoid this. This is implemented as ``\\``.

.. container:: xml_out

   ::

      <table rend='inline'>
        <row top_rule_space_below='2.76247pt' border-top-width='0.80002pt' top-border='true'>
          <cell bottom_rule_space_below='2.76247pt'
           bottom_rule_space_above='1.69997pt' border-bottom-width='0.29999pt'
          bottom-border='true' halign='right' cols='2'>Item  
          </cell>
        </row>
        <row bottom_rule_space_below='2.76247pt'
          bottom_rule_space_above='1.69997pt'  border-bottom-width='0.50003pt' 
          bottom-border='true'>
          <cell halign='left'>Animal</cell>
          <cell halign='left'>Description</cell>
          <cell>Price ($)</cell>
        </row>
        <row>
          <cell halign='left'>Gnat</cell>
          <cell halign='left'>per gram</cell>
          <cell>13.63</cell>
        </row>
        <row>
          <cell halign='left'/>
          <cell halign='left'>each</cell>
          <cell>0.01</cell>
        </row>
        <row>
          <cell halign='left'>Gnu</cell>
          <cell halign='left'>stuffed</cell>
          <cell>92.50</cell>
        </row>
        <row>
          <cell halign='left'>Emu</cell>
          <cell halign='left'>stuffed</cell>
          <cell>33.33</cell>
        </row>
        <row bottom_rule_space_above='1.69997pt' 
          border-bottom-width='0.80002pt' bottom-border='true'>
          <cell halign='left'>Armadillo</cell>
         <cell halign='left'>frozen</cell>
         <cell>8.99</cell>
        </row>
      </table>

An example that shows how ``\morecmidrules`` works.

.. container:: ltx-source

   ::

      \setlength\aboverulesep{6pt}
      \setlength\belowrulesep{4pt}
      \setlength\cmidrulewidth{5pt}
      \begin{tabular}{llll}
      a&b&c&d\\ \cmidrule[3pt](rl){1-3}\cmidrule[2pt](lr){3-4}
      A&B&C&D\\ \cmidrule[3pt](){1-3}\morecmidrules\cmidrule[2pt](){3-4}
      \end{tabular}

.. container:: xml_out

   ::

      <table rend='inline'>  
        <row>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='3.0pt' bottom-border='true' halign='left'>a</cell>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='3.0pt' bottom-border='true' halign='left'>b</cell>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='2.0pt' bottom-border='true' halign='left'>c</cell>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='2.0pt' bottom-border='true' halign='left'>d</cell>
        </row>
        <row>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='3.0pt' bottom-border='true' halign='left'>A</cell>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='3.0pt' bottom-border='true' halign='left'>B</cell>
          <cell bottom_rule_space_below='4.0pt'
            bottom_rule_space_above='6.0pt'
            border-bottom-width='3.0pt' bottom-border='true' halign='left'>C</cell>
          <cell halign='left'>D</cell>
        </row>
        <row>
          <cell cols='2'/>
          <cell top_rule_space_below='4.0pt' top_rule_space_above='6.0pt'
            border-top-width='2.0pt' top-border='true' cols='2'/>
        </row>
      </table>

.. |some table| image:: /img/img_73.png
.. |four tables| image:: /img/img_74.png

----

docs/chars.rst
--------------

=====================
Characters in Tralics
=====================

Table of contents
-----------------

| `Introduction <#introduction>`__
| `ASCII characters <#ascii>`__ (between U+0020 and U+007F)
| `Latin one <#latin1>`__ (between U+00A0 and U+00FF)
| `Latin extended-A <#ext-latin>`__ (between U+0100 and U+017F)
| `Latin extended-B <#not-done>`__ (between U+0180 and U+024F) [todo]
| `IPA Extensions <#not-done>`__ (between U+0250 and U+02AF) [todo]
| `Greek, etc <#not-done>`__ (between U+0370 and U+03FF) [todo]
| `Cyrillic, etc <#not-done>`__ (between U+0400 and U+04FF) [todo]
| `Latin Extended Additional <#latin-extended>`__ (between U+1E00 and
  U+1EFF)
| `Arrows <#arrows>`__ (between U+2190 and U+21FF)
| `Mathematical Operators <#mathop>`__ (between U+2200 and U+22FF)
| `Miscellaneous Technical <#misc-tech>`__ (between U+2300 and U+23FF)
  [with holes]
| `Miscellaneous Symbols <#misc-tech>`__ (between U+2600 and U+26FF)
  [with holes]
| `Dingbats <#ding>`__ (between U+2700 and U+27BF)
| `Mathematical Alphanumeric Symbols <#math-char>`__ (between U+1D400
  and U+1D5FF)
| `The T1 encoding <#T1-char>`__

Introduction
============

This file explains how to produce all characters defined by the Unicode
standard, and even more. In earlier versions; *Tralics* used internally
the iso-8859-1 encoding, and this is the default input encoding; you
could tell *Tralics* that the text is encoded in UTF-8 format, this
meant that some characters were converted into a sequence of the form
``\char567{}`` (this is read as a sequence of six tokens). The internal
encoding is now Unicode.

UTF-8 is a variable length format; each character consists in one to
four bytes, A, AB, ABC, or ABCD, depending of the first byte. If the
first bit of A is zero, so that A is an integer between 0 and 127, then
one byte is used, and the value is A. Thus, an ASCII character
represents itself in UTF8. Otherwise, A starts with 2, 3 or 4 bits equal
to 1, and is followed by a zero bit, followed by some useful bits (say
\`a'). The total number of bytes is 2, 3 or 4, respectively, each byte
B, C, D starts with a bit equal to 1 , and a bit equal to 0, and is
followed by 6 useful bits, say \`b', or \`c', or \`d'; the value of the
character is \`ab', \`abc' or \`abcd'. Thus, using 2, 3 or 4 bytes, we
can represent 11, 16, or 21 bits. When a line of text is read from a
file, it is converted to UTF8; at the end of the run, you may see
something like *Input conversion: 14 lines converted.* This means that
almost all lines contained only ASCII characters.

A construction like ``\char1000`` means: insert the character number
1000 in the XML tree. The character must fit on 27 bits. A construction
like ``^^ab`` (two lower case hex chars) can be used to represent a 8bit
character, and a construction like ``^^^^abcd`` (four lower case hex
chars) can be used to represent a 16bit character. You can also use five
hats as in ``^^^^^1d7e0`` (this is Unicode Mathematical Double-struck
Digit Eight). An hex char is a digit or a lower case letter between \`a'
and \`f'. You can say ``^^Z``, where \`Z' can be replaced by any 7bit
character, except a hat or a hex char; if this case *Tralics* adds or
subtracts 64, the result is a 7bit character. For instance ``^^Z`` is
the character with code 26, ``^^@`` is the null character, ``^^?`` the
delete character, ``^^M`` is the end of line character (in the input
stream), ``^^J`` is the end of line character (in the output stream).

An important property of a character is its category code. In plain
*TeX* some characters have category code “ignore” or “invalid”, this
explains why the constructions ``^^?`` and ``^^@`` are so useful. When
*Tralics* parses a control sequence like ``\foo``, then either the
character that follows the backslash has category “letter” and all
letters that follow are scanned and a following space is usually
ignored, or the command name has only one character. In the case of
``\fée``, the result is a 1-character command (it tries to put an accent
on the character that follows). You can say
:literal:`\\catcode`é=11\def\fée{fairy}`, and then use the command
``\fée``. All tables that hold character properties are of size 65536;
this excludes characters that need 4 UTF8 bytes, but includes all
characters that can be constructed via the double-hat or four-hat
construction. In particular :literal:`\\catcode`^^^^^1d7e0=11` is an
error. What the command really gets is the following sequence of tokens:
``\char"1D7E0``, a command followed by 6 character tokens category 12.
If you say ``\def\f^^^^^1d7e0{xx}\def\^^^^^1d7e0{xx}``, the hat
conversion algorithm is applied; in the first definition, you get a
command named ``\f``, that has to be followed by some character (note
that ``\f\char"1D7E0`` is an error, since the category code of the
letteres are 11, but 12 is expected). The second definition confuses the
parser: what follows the backslash has no category code, so the name of
the command is empty, and this empty command has to be followed the
character; so ``\^^^^^1d7e1``, provokes the following error *Use of
\\csname\endcsname doesn't match its definition*.

You can use one of -oe8, -oe1, -oe8a, -oe1a as option to *Tralics* for
controlling the encoding used in the XML file. If the option is -oe8 or
-oe8a, then the declaration is ``encoding='UTF-8'``, otherwise it is
``encoding='iso-8859-1'``. Assume that the input is
``\char16\char65\char233\char378\char1064\char10774\char120587``. The
translation is ``AéźШ⨖𝜋`` (the first character being illegal in HTLK, it
is not shown here). If the option is -oe8 (the default), the first and
last characters are encoded as ``&#x10;`` and ``&#x1D70B;``, the others
are in UTF8; the transcript file will contain the same string. If the
option is -oe8a, all characters but ASCII ones will be output in the
form ``&#xE9;``, the transcript file will contain
``&#x10;A^^e9^^^^017a^^^^0428^^^^2a16&#x1D70B;``. If the option is
-oe1a, the contents will be the same, except for the encoding of the
file. Finally, if the option is -oe1, the output is the same, except for
characters whose code is between 128 and 255, that will be printed on
one byte.

You can use one of -te8, -te1, -te8a, -te1a as option for controlling
the encoding used in the transcript file, without the XML file. This
encoding also used when *Tralics* prints something on the terminal. For
instance, this is the output of ``\show``, with the option te1a:
``\f^^e9e=macro: ->fairy.``

You can use one of -utf8, -latin1 for indicating the default input encoding. In
LaTeX, you can use the inputenc package for specifying alternate encodings, this
is not yet implemented. All files are converted into UTF-8 while they are read;
there is an exception: the main file is converted only after the configuration
file has been read (this means that the configuration file could contain the
definition of the encoding). You can declare the encoding of the current file,
by putting near the head of the file a line that contains ``-*-`` followed by
coding: iso-8859-1 or coding: utf8. This works whatever the type of the file:
configuration file, bibliography data base, or TeX file.

A given character can appear in one of three modes: typesetting text,
typesetting maths, and other cases (in general, when creating the name
of an element, of an attribute, the name of a file to be opened, etc).
In the case of ``\input{xx}``, the characters that are valid are system
dependent, and *Tralics* accepts only latin1 characters, without further
tests. In the same fashion, ``\xbox{á b}{\AddAttToCurrent{x=}{y}z}``
generates an XML element that contains a space in its name, and an
attribute name that contains an equals sign. This is illegal, but not
refused. If you say ``\xbox{x\xmllatex{\&\#x5678;}{}y}{}`` the result is
an empty XML with a funny name: ``<x&#x5678;y/>``.

In math mode, each character is classified as an identifier, a number,
or an operator (such an element can consist of more than one character).
Hence the translation of ``$x=1$`` is:
``<mi>x</mi><mo>=</mo><mn>1</mn>``. There is a built-in table that
explains the type of every ASCII character. Non-ASCII latin1 characters
are all considered as operators if their code is between 128 and 191, as
identifiers otherwise. Thus, the translation of ``$±á$`` is
``<mo>±</mo><mi>á</mi>``. There is a large number of commands whose
translation is a Unicode character. LaTeX makes a distinction between
those that can be used in math, or outside math; this restriction has
sometimes been removed. For instance ``\textohm`` is the same as
``^^^^2126``, and the following expression
``\xbox{\textohm b}{\textohm$\textohm$}`` is valid. The math formula
contains an identifier.

If you say ``\mathchardef\foo1234``, then TeX interprets ``\foo`` as
``\mathchar1234``. See the TeX book for what character this produces.
For simplicity, *Tralics* interprets this as ``\char1234``; this is the
character number 1234 (Unicode U+4D2, some Cyrillic character. Any 27
bit character can be used in this way. A command like ``\Omega`` can be
used only in math mode. The translation is an identifier (but most math
symbols are operators), the value is ``&Omega;``. If the option
``-noentnames`` has been given, then translation is ``&#x3A9;``.
Translation of ``\mathbb A`` is ``&Aopf;`` or ``&#x1D358;``. If you
specify the ``mathvariant`` option, then translation changes to
``<mi mathvariant='double-struck'>A</mi>``.

In text mode, there are different ways to obtain a character, and they
are all valid. For instance, if you want a acute, you can say ``á``
(latin1 or UTF8 input) or :literal:`\\char`\á  \char"E1` (two variants
of the ``\char`` command) or ``\'a  \a'a`` (two variants of the accent
command) or ``\xmllatex{\&\#xE1;}{}  \xmllatex{\&aacute;}{}`` (two
variants of the ``\xmllatex`` command that refers to a Unicode character
via an entity).

ASCII characters
----------------

Printing characters with code between 33 and 126 is not complicated.
Character 32 is space, it is impossible to tell the difference between a
cell that contains only space and an empty space. Character 127 is
delete, it cannot be printed. For some strange reason, LaTeX provides no
way for printing a hat or a tilde. This is why ``\char`` is used in the
table below.

.. container:: ltx-source

   ::

      \begin{tabular}{cccccccccccccccc}
      &!&"&\#&\$&\%&\&&'&(&)&*&+&,&-&.&/\\
      0&1&2&3&4&5&6&7&8&9&:&;&<&=&>&?\\
      @&A&B&C&D&E&F&G&H&I&J&K&L&M&N&O\\
      P&Q&R&S&T&U&V&W&X&Y&Z&[&\textbackslash&]&\char`\^&\_\\
      `&a&b&c&d&e&f&g&h&i&j&k&l&m&n&o\\
      p&q&r&s&t&u&v&w&x&y&z&\{&|&\}&\char`\~&
      \end{tabular}

The translation is trivial. We only show the preview (LaTeX image) and
the HTML characters. |Ascii Table|

== == = = = = = = = = == == == = = ==
\   ! " # $ % & ' ( ) \* +  ,  - . /
0  1  2 3 4 5 6 7 8 9  :  ; <  = >  ?
@  A  B C D E F G H I J  K  L  M N O
P  Q  R S T U V W X Y Z  [  \\ ] ^ \_
\` a  b c d e f g h i j  k  l  m n o
p  q  r s t u v w x y z  {  \| } ~ 
== == = = = = = = = = == == == = = ==

Latin1 characters
-----------------

These are all the characters with code between x80 and xFF. In fact,
characters in the range x80 and x9F are not printable. Character A0 is a
space, character AD is a discretionary hyphen.

.. container:: ltx-source

   ::

      \begin{tabular}{cccccccccccccccc}
      ~&¡&¢&£&¤&¥&¦&§&¨&©&ª&«&¬&&®&¯\\
      °&±&²&³&´&µ&¶&·&¸&¹&º&»&¼&½&¾&¿\\
      À&Á&Â&Ã&Ä&Å&Æ&Ç&È&É&Ê&Ë&Ì&Í&Î&Ï\\
      Ð&Ñ&Ò&Ó&Ô&Õ&Ö&×&Ø&Ù&Ú&Û&Ü&Ý&Þ&ß\\
      à&á&â&ã&ä&å&æ&ç&è&é&ê&ë&ì&í&î&ï\\
      ð&ñ&ò&ó&ô&õ&ö&÷&ø&ù&ú&û&ü&ý&þ&ÿ\\
      \end{tabular}

|latin 1, non ascii|

= = = = = = = = = = = == = = = =
  ¡ ¢ £ ¤ ¥ ¦ § ¨ © ª «  ¬ ­ ® ¯
° ± ² ³ ´ µ ¶ · ¸ ¹ º  » ¼ ½ ¾ ¿
À Á Â Ã Ä Å Æ Ç È É Ê Ë  Ì Í Î Ï
Ð Ñ Ò Ó Ô Õ Ö × Ø Ù Ú Û  Ü Ý Þ ß
à á â ã ä å æ ç è é ê ë  ì í î ï
ð ñ ò ó ô õ ö ÷ ø ù ú û  ü ý þ ÿ
= = = = = = = = = = = == = = = =

Seven bit input for the same characters.

.. container:: ltx-source

   ::

       
      \begin{tabular}{cccccccccccccccc}
      \nobreakspace&\textexclamdown&\textcent&\textsterling&\textcurrency&\textyen&
         \textbrokenbar&\textsection&\textasciidieresis&\textcopyright&
         \textordfeminine&\guillemotleft&\textlnot&\textsofthyphen&
         \textregistered&\textasciimacron\\
      \textdegree&\textpm&\texttwosuperior&\textthreesuperior&\textasciiacute&
        \textmu&\textparagraph&\textperiodcentered&\textasciicedilla&
        \textonesuperior&\textordmasculine&\guillemotright&\textonequarter&
        \textonehalf&\textthreequarters&\textquestiondown\\
      \`A&\'A&\^A&\~A&\quot;A&\AA&\AE&\c C&\`E&\'E&\^E&\"E&\`I&\'I&\^I&\"I\\
      \DH&\~N&\`O&\'O&\^O&\~O&\"O&\texttimes&\O&\`U&\'U&\^U&\"U&\'Y&\TH&\ss\\
      \`a&\'a&\^a&\~a&\"a&\aa&\ae&\c c&\`e&\'e&\^e&\"e&\`i&\'i&\^i&\"i\\
      \dh&\~n&\`o&\'o&\^o&\~o&\"o&\textdiv&\o&\`u&\'u&\^u&\"u&\'y&\th&\"y\\
      \end{tabular}

Notes: ``\textsection=\S``, ``\textparagraph=\P``,
``\textcopyright =\copyright``. Concerning French guillemets, you can
use ``\og``, that produces a guillemet and a space, or
``\guillemotleft`` that produces only the guillemet, or ``«`` or (if the
current language is French) ``<<`` that produce intelligent guillemets:
a space is removed if there is one, then another one is added. Example

.. container:: ltx-source

   ::

      {\language=1 a\fg{}b\og{}c\guillemotleft{}d\guillemotright{}e}
      {\language=0 a\fg{}b\og{}c\guillemotleft{}d\guillemotright{}e}
      {\language=1 a<<b<< c<<~d<<\,e\,>>f~>>g >>h>>i}
      {\language=0 a<<b<< c<<~d<<\,e\,>>f~>>g >>h>>i}
      {\language=1 a«b« c«~d«\,e\,»f~»g »h»i}
      {\language=0 a«b« c«~d«\,e\,»f~»g »h»i}

Translation (we replaced character U+A0 by an entity, in order to
distinguish it from a space).

.. container:: xml_out

   ::

      a&#xA0;»b«&#xA0;c«&#xA0;d&#xA0;»e
      a&#xA0;»b«&#xA0;c«d»e
      a«&#xA0;b«&#xA0;c«&#xA0;&#xA0;d«&#xA0;e&#xA0;&#xA0;»f&#xA0;&#xA0;»g&#xA0;»h&#xA0;»i
      a&lt;&lt;b&lt;&lt; c&lt;&lt;&#xA0;d&lt;&lt;&#xA0;e&#xA0;&gt;&gt;f&#xA0;&gt;&gt;g &gt;&gt;h&gt;&gt;i
      a«&#xA0;b«&#xA0;c«&#xA0;&#xA0;d«&#xA0;e&#xA0;&#xA0;»f&#xA0;&#xA0;»g&#xA0;»h&#xA0;»i
      a«b« c«&#xA0;d«&#xA0;e&#xA0;»f&#xA0;»g »h»i

Latin1 extended characters
--------------------------

These are all the characters with code between U+100 and U+17F.

.. container:: ltx-source

   ::

      \def\nument#1{\xmllatex{\&\#x#1;}{}}
      \begin{tabular}{cccccccccccccccc}
      \=A&\=a& \u A&\u a&\k A&\k a&\'C&\'c&\^C&\^c&\.C&\.c&\v C&\v c&\v D&\v d \\
      \DJ&\dj&\=E&\=e&\u E&\u e&\.E&\.e&\k E&\k e&\v E&\v e&\^G&\^g&\u G&\u g\\
      \.G&\.g&\c G&\c g&\^H&\^h&\=H&\=h&\~I&\~i&\=I&\=i&\u I&\u i&\k I&\k i\\
      \.I&\i&\IJ&\ij&\^J&\^j&\c K&\c k&\nument{138}&\'L&\'l&\c L&\c l&\v L&\v l&\.L\\
      \.l&\L&\l&\'N&\'n&\c N&\c n&\v N&\v n&\nument{149}&\NG&\ng&\=O&\=o&\u O&\u o\\
      \H O&\H o&\OE&\oe&\'R&\'r&\c R&\c r&\v R&\v r&\'S&\'s&\^S&\^s&\c S&\c s&\\
      \v S&\v s&\c T&\c t&\v T&\v t&\=T&\=t&\~U&\~u&\=U&\=u&\u U&\u u&\r U&\r u\\
      \H U&\H u&\k U&\k u&\^W&\^w&\^Y&\^y&\"Y&\'Z&\'z&\.Z&\.z&\v Z&\v z&\nument{17F}\\
      \end{tabular}

Characters U+138, U+149 and U+17F have no name in *Tralics*. The first
one is: \`latin small letter kra', the second is \`latin small letter n
preceded by apostrophe', and the last is \`latin small letter long s'.

This is the XML translation, without the \`tabular'.

.. container:: xml_out

   ::

      &#x100; &#x101; &#x102; &#x103; &#x104; &#x105; &#x106; &#x107;
      &#x108; &#x109; &#x10A; &#x10B; &#x10C; &#x10D; &#x10E; &#x10F; 
      &#x110; &#x111; &#x112; &#x113; &#x114; &#x115; &#x116; &#x117; 
      &#x118; &#x119; &#x11A; &#x11B; &#x11C; &#x11D; &#x11E; &#x11F; 
      &#x120; &#x121; &#x122; &#x123; &#x124; &#x125; &#x126; &#x127;
      &#x128; &#x129; &#x12A; &#x12B; &#x12C; &#x12D; &#x12E; &#x12F;
      &#x130; &#x131; &#x132; &#x133; &#x134; &#x135; &#x136; &#x137;
      &#x138; &#x139; &#x13A; &#x13B; &#x13C; &#x13D; &#x13E; &#x13F;
      &#x140; &#x141; &#x142; &#x143; &#x144; &#x145; &#x146; &#x147; 
      &#x148; &#x149; &#x14A; &#x14B; &#x14C; &#x14D; &#x14E; &#x14F;
      &#x150; &#x151; &#x152; &#x153; &#x154; &#x155; &#x156; &#x157;
      &#x158; &#x159; &#x15A; &#x15B; &#x15C; &#x15D; &#x15E; &#x15F; 
      &#x160; &#x161; &#x162; &#x163; &#x164; &#x165; &#x166; &#x167;
      &#x168; &#x169; &#x16A; &#x16B; &#x16C; &#x16D; &#x16E; &#x16F;
      &#x170; &#x171; &#x172; &#x173; &#x174; &#x175; &#x176; &#x177;
      &#x178; &#x179; &#x17A; &#x17B; &#x17C; &#x17D; &#x17E; &#x17F;

As you can see, translation is trivial. In the initial version of the
software, there was a possibility to obtain entity names.

= = = = = = = = = = = = = = = =
Ā ā Ă ă Ą ą Ć ć Ĉ ĉ Ċ ċ Č č Ď ď 
Đ đ Ē ē Ĕ ĕ Ė ė Ę ę Ě ě Ĝ ĝ Ğ ğ 
Ġ ġ Ģ ģ Ĥ ĥ Ħ ħ Ĩ ĩ Ī ī Ĭ ĭ Į į 
İ ı Ĳ ĳ Ĵ ĵ Ķ ķ ĸ Ĺ ĺ Ļ ļ Ľ ľ Ŀ 
ŀ Ł ł Ń ń Ņ ņ Ň ň ŉ Ŋ ŋ Ō ō Ŏ ŏ 
Ő ő Œ œ Ŕ ŕ Ŗ ŗ Ř ř Ś ś Ŝ ŝ Ş ş 
Š š Ţ ţ Ť ť Ŧ ŧ Ũ ũ Ū ū Ŭ ŭ Ů ů 
Ű ű Ų ų Ŵ ŵ Ŷ ŷ Ÿ Ź ź Ż ż Ž ž ſ 
= = = = = = = = = = = = = = = =

|latin extended A|

Latin extended additional characters
------------------------------------

We explain here how to obtain all characters between U+1E00 and U+1EFF.
Character U+1e9a (latin small letter a with right half ring) is not
implemented. There are two holes in the tables: of 4 and 6 characters
respectively.

.. container:: ltx-source

   ::

      \def\xx#1{\xmllatex{\&\#x#1;}{}}
      \catcode`\&13\def&{ }
      \D A &\D a&\.B&\.b &\d B&\d b&\b B&\b b& \'{\c C} &\'{\c c}&
      \.D &\.d &\d D& \d d &\b D &\b d\\
      \c D &\c d& \V D& \V d &\`{\=E}& \`{\=e} &\'{\=E}&\'{\=e}&
      \V E &\V e &\T E& \T e& \u{\c E}& \u{\c e}& \.F &\.f\\
      \=G &\=g& \.H &\.h& \d H&\d h&\"H &\" h&\c H&\c h&\xx{1e2a}&\xx{1e2b}
      &\T I&\T i&\'{\"I}&\'{\"i}\\
      \'K&\'k&\d K&\d k& \b K&\b k&\d L&\d l&\={\d L}&\={\d l}&\b L&\b l&\V L
      &\V l&\'M&\'m \\
      \.M&\.m&\d M&\d m&\.N&\.n&\d N&\d n&\b N&\b n&\V N&\V n&\~{\'O}&\~{\'o}
      &\~{\"O}&\~{\"o}\\
      \`{\=O}&\`{\=o}&\'{\=O}&\'{\=o}&\'P&\'p&\.P&\.p&\. R&\. r&\d R&\d r&
      \={\d R}&\={\d r}&\b R&\b r\\
      \.S&\.s&\d S&\d s&\.{\'S}&\.{\'s}&\v{\.S}&\v{\.s}&\d{\.S}&\d{\.s}
      &\.T&\. t&\d T&\d t&\b T&\b t\\
      \V T&\V t&\xx{1e72}&\xx{1e73}&\T U&\T u&\V U&\V u&\~{\'U}&\~{\'u}&
      \={\"U}&\={\"u}&\~V&\~v&\d V&\d v\\

Translation

.. container:: xml_out

   ::

      <p>&#7680; &#7681; &#7682; &#7683; &#7684; &#7685; &#7686; &#7687;  
         &#7688; &#7689; &#7690; &#7691; &#7692; &#7693; &#7694; &#7695;</p><p noindent='true'>
         &#7696; &#7697; &#7698; &#7699; &#7700; &#7701; &#7702; &#7703; 
         &#7704; &#7705; &#7706; &#7707; &#7708; &#7709; &#7710; &#7711;</p><p noindent='true'>
         &#7712; &#7713; &#7714; &#7715; &#7716; &#7717; &#7718; &#7719;
         &#7720; &#7721; &#x1e2a;&#x1e2b;&#7724; &#7725; &#7726; &#7727;</p><p noindent='true'>
         &#7728; &#7729; &#7730; &#7731; &#7732; &#7733; &#7734; &#7735;
         &#7736; &#7737; &#7738; &#7739; &#7740; &#7741; &#7742; &#7743;</p><p noindent='true'>
         &#7744; &#7745; &#7746; &#7747; &#7748; &#7749; &#7750; &#7751; 
         &#7752; &#7753; &#7754; &#7755; &#7756; &#7757; &#7758; &#7759;</p><p noindent='true'>
         &#7760; &#7761; &#7762; &#7763; &#7764; &#7765; &#7766; &#7767; 
         &#7768; &#7769; &#7770; &#7771; &#7772; &#7773; &#7774; &#7775;</p><p noindent='true'>
         &#7776; &#7777; &#7778; &#7779; &#7780; &#7781; &#7782; &#7783; 
         &#7784; &#7785; &#7786; &#7787; &#7788; &#7789; &#7790; &#7791;</p><p noindent='true'>
         &#7792; &#7793; &#x1e72;&#x1e73;&#7796; &#7797; &#7798; &#7799; 
         &#7800; &#7801; &#7802; &#7803; &#7804; &#7805; &#7806; &#7807;</p>

|latin extended additional|

= = = = = = = = = = = = = = = =
Ḁ ḁ Ḃ ḃ Ḅ ḅ Ḇ ḇ Ḉ ḉ Ḋ ḋ Ḍ ḍ Ḏ ḏ
Ḑ ḑ Ḓ ḓ Ḕ ḕ Ḗ ḗ Ḙ ḙ Ḛ ḛ Ḝ ḝ Ḟ ḟ
Ḡ ḡ Ḣ ḣ Ḥ ḥ Ḧ ḧ Ḩ ḩ Ḫ ḫ Ḭ ḭ Ḯ ḯ
Ḱ ḱ Ḳ ḳ Ḵ ḵ Ḷ ḷ Ḹ ḹ Ḻ ḻ Ḽ ḽ Ḿ ḿ
Ṁ ṁ Ṃ ṃ Ṅ ṅ Ṇ ṇ Ṉ ṉ Ṋ ṋ Ṍ ṍ Ṏ ṏ
Ṑ ṑ Ṓ ṓ Ṕ ṕ Ṗ ṗ Ṙ ṙ Ṛ ṛ Ṝ ṝ Ṟ ṟ
Ṡ ṡ Ṣ ṣ Ṥ ṥ Ṧ ṧ Ṩ ṩ Ṫ ṫ Ṭ ṭ Ṯ ṯ
Ṱ ṱ Ṳ ṳ Ṵ ṵ Ṷ ṷ Ṹ ṹ Ṻ ṻ Ṽ ṽ Ṿ ṿ
= = = = = = = = = = = = = = = =

.. container:: ltx-source

   ::

      \catcode`\&13\def&{ }
      \`W&\`w&\'W&\'w&\"W&\"w&\.W&\.w&\d W&\d w&\. X&\. x&\"X&\"x&\. Y&\.y\\
      \^Z&\^z&\d Z&\d z&\b Z&\b z&\b h&\" t&\r
      w&\r y&?&\xx{1e9b}\\ 
      \d A&\d a&\h A&\h a&\^{\'A}&\^{\'a}&\^{\`A}&\^{\`a}&{\^{\h A}}&\^{\h a}&
      \~{\^A}&\~{\^a}&\d{\^A}&\d{\^a}&\'{\u A}&\'{\u a}\\
      \`{\u A}&\`{\u a}&\h{\u A}&\h{\u a}&\~{\u A}&\~{\u a}&\d{\u A}&\d{\u a}&\d E&
      \d e&\h E&\h e&\~ E&\~e&\'{\^E}&\'{\^e}\\
      \^{\`E}&\^{\`e}&\^{\h E}&\^{\h e}&\~{\^E}&\~{\^e}&\^{\d E}&\^{\d e}&\h I&
      \h i&\d I&\d i& \d O &\d o&\h O&\h o\\
      \'{\^O}&\'{\^o}&\`{\^O}&\`{\^o}&\^{\h O}&\^{\h o}&\~{\^O}&\~{\^o}&
      \^{\d O}&\^{\d o}&\'{\H O}&\'{\H o}&\`{\H O}&\`{\H o}&\h{\H O}&\h{\H o}\\
      \~{\H O}&\~{\H o}&\d{\H O}&\d{\H o}&\d U&\d u&\h U&\h u&\'{\H U}&\'{\H u}&
      \`{\H U}&\`{\H u}&\h{\H U}&\h{\H u}&\~{\H U}&\~{\H u}\\
      \H{\d U}&\H{\d u}&\` Y&\` y&\d Y&\d y&\h Y&\h y&\~ Y&\~y

.. container:: xml_out

   ::

      <p>
       &#7808; &#7809; &#7810; &#7811; &#7812; &#7813; &#7814; &#7815; 
       &#7816; &#7817; &#7818; &#7819; &#7820; &#7821; &#7822; &#7823;</p><p noindent='true'>
       &#7824; &#7825; &#7826; &#7827; &#7828; &#7829; &#7830; &#7831; 
       &#7832; &#7833; ? &#x1e9b;</p><p noindent='true'>
       &#7840; &#7841; &#7842; &#7843; &#7844; &#7845; &#7846; &#7847; 
       &#7848; &#7849; &#7850; &#7851; &#7852; &#7853; &#7854; &#7855;</p><p noindent='true'>
       &#7856; &#7857; &#7858; &#7859; &#7860; &#7861; &#7862; &#7863; 
       &#7864; &#7865; &#7866; &#7867; &#7868; &#7869; &#7870; &#7871;</p><p noindent='true'>
       &#7872; &#7873; &#7874; &#7875; &#7876; &#7877; &#7878; &#7879; 
       &#7880; &#7881; &#7882; &#7883; &#7884; &#7885; &#7886; &#7887;</p><p noindent='true'>
       &#7888; &#7889; &#7890; &#7891; &#7892; &#7893; &#7894; &#7895; 
       &#7896; &#7897; &#7898; &#7899; &#7900; &#7901; &#7902; &#7903;</p><p noindent='true'>
       &#7904; &#7905; &#7906; &#7907; &#7908; &#7909; &#7910; &#7911; 
       &#7912; &#7913; &#7914; &#7915; &#7916; &#7917; &#7918; &#7919;</p><p noindent='true'>
       &#7920; &#7921; &#7922; &#7923; &#7924; &#7925; &#7926; &#7927; 
       &#7928; &#7929;</p>

|latin extended additional 2|

= = = = = = = = = = == = = = = =
Ẁ ẁ Ẃ ẃ Ẅ ẅ Ẇ ẇ Ẉ ẉ Ẋ  ẋ Ẍ ẍ Ẏ ẏ
Ẑ ẑ Ẓ ẓ Ẕ ẕ ẖ ẗ ẘ ẙ  ? ẛ       
Ạ ạ Ả ả Ấ ấ Ầ ầ Ẩ ẩ Ẫ  ẫ Ậ ậ Ắ ắ
Ằ ằ Ẳ ẳ Ẵ ẵ Ặ ặ Ẹ ẹ Ẻ  ẻ Ẽ ẽ Ế ế
Ề ề Ể ể Ễ ễ Ệ ệ Ỉ ỉ Ị  ị Ọ ọ Ỏ ỏ
Ố ố Ồ ồ Ổ ổ Ỗ ỗ Ộ ộ Ớ  ớ Ờ ờ Ở ở
Ỡ ỡ Ợ ợ Ụ ụ Ủ ủ Ứ ứ Ừ  ừ Ử ử Ữ ữ
Ự ự Ỳ ỳ Ỵ ỵ Ỷ ỷ Ỹ ỹ            
= = = = = = = = = = == = = = = =

Dingbats characters
-------------------

You can use the ``\ding`` command in order to access one character of
the Zapf Dingbats fonts. The command takes one argument, an integer (it
is parsed by the ``scanint`` routine, see
`scanint <doc-s.html#fct-scanint>`__ for details, so that
:literal:`\\ding{`\A}` is as valid as :literal:`\\char`\A`). If the
number is between 33 and 126, or between 161 and 239, or between 241 and
254, then you get one of the characters listed below. Otherwise, the
translation is ``bad!``

Example that shows the complete list.

.. container:: ltx-source

   ::

       
      {\LARGE
      \begin{tabular}{cccccccccccccccc}
      %\catcode`\&13\def&{ }
      &\ding{"21}&\ding{"22}&\ding{"23}&\ding{"24}&\ding{"25}&\ding{"26}&\ding{"27}& 
      \ding{"28}&\ding{"29}&\ding{"2A}&\ding{"2B}&\ding{"2C}&\ding{"2D}&\ding{"2E}&\ding{"2F}\\
      \ding{"30}&\ding{"31}&\ding{"32}&\ding{"33}&\ding{"34}&\ding{"35}&\ding{"36}&\ding{"37}&
      \ding{"38}&\ding{"39}&\ding{"3A}&\ding{"3B}&\ding{"3C}&\ding{"3D}&\ding{"3E}&\ding{"3F}\\
      \ding{"40}&\ding{"41}&\ding{"42}&\ding{"43}&\ding{"44}&\ding{"45}&\ding{"46}&\ding{"47}&
      \ding{"48}&\ding{"49}&\ding{"4A}&\ding{"4B}&\ding{"4C}&\ding{"4D}&\ding{"4E}&\ding{"4F}\\
      \ding{"50}&\ding{"51}&\ding{"52}&\ding{"53}&\ding{"54}&\ding{"55}&\ding{"56}&\ding{"57}&
      \ding{"58}&\ding{"59}&\ding{"5A}&\ding{"5B}&\ding{"5C}&\ding{"5D}&\ding{"5E}&\ding{"5F}\\
      \ding{"60}&\ding{"61}&\ding{"62}&\ding{"63}&\ding{"64}&\ding{"65}&\ding{"66}&\ding{"67}&
      \ding{"68}&\ding{"69}&\ding{"6A}&\ding{"6B}&\ding{"6C}&\ding{"6D}&\ding{"6E}&\ding{"6F}\\
      \ding{"70}&\ding{"71}&\ding{"72}&\ding{"73}&\ding{"74}&\ding{"75}&\ding{"76}&\ding{"77}&
      \ding{"78}&\ding{"79}&\ding{"7A}&\ding{"7B}&\ding{"7C}&\ding{"7D}&\ding{"7E}&\\
      &\ding{"A1}&\ding{"A2}&\ding{"A3}&\ding{"A4}&\ding{"A5}&\ding{"A6}&\ding{"A7}&
      \ding{"A8}&\ding{"A9}&\ding{"AA}&\ding{"AB}&\ding{"AC}&\ding{"AD}&\ding{"AE}&\ding{"AF}\\
      \ding{"B0}&\ding{"B1}&\ding{"B2}&\ding{"B3}&\ding{"B4}&\ding{"B5}&\ding{"B6}&\ding{"B7}&
      \ding{"B8}&\ding{"B9}&\ding{"BA}&\ding{"BB}&\ding{"BC}&\ding{"BD}&\ding{"BE}&\ding{"BF}\\
      \ding{"C0}&\ding{"C1}&\ding{"C2}&\ding{"C3}&\ding{"C4}&\ding{"C5}&\ding{"C6}&\ding{"C7}&
      \ding{"C8}&\ding{"C9}&\ding{"CA}&\ding{"CB}&\ding{"CC}&\ding{"CD}&\ding{"CE}&\ding{"CF}\\
      \ding{"D0}&\ding{"D1}&\ding{"D2}&\ding{"D3}&\ding{"D4}&\ding{"D5}&\ding{"D6}&\ding{"D7}&
      \ding{"D8}&\ding{"D9}&\ding{"DA}&\ding{"DB}&\ding{"DC}&\ding{"DD}&\ding{"DE}&\ding{"DF}\\
      \ding{"E0}&\ding{"E1}&\ding{"E2}&\ding{"E3}&\ding{"E4}&\ding{"E5}&\ding{"E6}&\ding{"E7}&
      \ding{"E8}&\ding{"E9}&\ding{"EA}&\ding{"EB}&\ding{"EC}&\ding{"ED}&\ding{"EE}&\ding{"EF}\\
      &\ding{"F1}&\ding{"F2}&\ding{"F3}&\ding{"F4}&\ding{"F5}&\ding{"F6}&\ding{"F7}&
      \ding{"F8}&\ding{"F9}&\ding{"FA}&\ding{"FB}&\ding{"FC}&\ding{"FD}&\ding{"FE}&\\
      \end{tabular}
      }

Translation, without the table and the font change. As you can see, the
codes are between U+2700 and U+27BF, with some exceptions. For instance
character 169 gives U+2666. This is black diamond suit. But the file
mmlalias.ent defines ``&diamondsuit;`` to be the same character, and
this is used to translate ``$\diamondsuit$``.

.. container:: xml_out

   ::

      <p>&#x2701; &#x2702; &#x2703; &#x2704; &#x260E; &#x2706; &#x2707; 
      &#x2708; &#x2709; &#x261B; &#x261E; &#x270C; &#x270D; &#x270E; &#x270F;</p>
      <p noindent='true'>&#x2710; &#x2711; &#x2712; &#x2713; &#x2714; &#x2715; &#x2716; &#x2717; 
      &#x2718; &#x2719; &#x271A; &#x271B; &#x271C; &#x271D; &#x271E; &#x271F;</p>
      <p noindent='true'>&#x2720; &#x2721; &#x2722; &#x2723; &#x2724; &#x2725; &#x2726; &#x2727; 
      &#x2605; &#x2729; &#x272A; &#x272B; &#x272C; &#x272D; &#x272E; &#x272F;</p>
      <p noindent='true'>&#x2730; &#x2731; &#x2732; &#x2733; &#x2734; &#x2735; &#x2736; &#x2737; 
      &#x2738; &#x2739; &#x273A; &#x273B; &#x273C; &#x273D; &#x273E; &#x273F;</p>
      <p noindent='true'>&#x2740; &#x2741; &#x2742; &#x2743; &#x2744; &#x2745; &#x2746; &#x2747; 
      &#x2748; &#x2749; &#x274A; &#x274B; &#x25CF; &#x274D; &#x25A0; &#x274F;</p>
      <p noindent='true'>&#x2750; &#x2751; &#x2752; &#x25B2; &#x25BC; &#x25C6; &#x2756; &#x25D7; 
      &#x2758; &#x2759; &#x275A; &#x275B; &#x275C; &#x275D; &#x275E; </p>
      <p noindent='true'> &#x2761; &#x2762; &#x2763; &#x2764; &#x2765; &#x2766; &#x2767; 
      &#x2663; &#x2666; &#x2665; &#x2660; &#x2460; &#x2461; &#x2462; &#x2463;</p>
      <p noindent='true'>&#x2464; &#x2465; &#x2466; &#x2467; &#x2468; &#x2469; &#x2776; &#x2777; 
      &#x2778; &#x2779; &#x277A; &#x277B; &#x277C; &#x277D; &#x277E; &#x277F;</p>
      <p noindent='true'>&#x2780; &#x2781; &#x2782; &#x2783; &#x2784; &#x2785; &#x2786; &#x2787; 
      &#x2788; &#x2789; &#x278A; &#x278B; &#x278C; &#x278D; &#x278E; &#x278F;</p>
      <p noindent='true'>&#x2790; &#x2791; &#x2792; &#x2793; &#x2794; &#x2192; &#x2194; &#x2195; 
      &#x2798; &#x2799; &#x279A; &#x279B; &#x279C; &#x279D; &#x279E; &#x279F;</p>
      <p noindent='true'>&#x27A0; &#x27A1; &#x27A2; &#x27A3; &#x27A4; &#x27A5; &#x27A6; &#x27A7; 
      &#x27A8; &#x27A9; &#x27AA; &#x27AB; &#x27AC; &#x27AD; &#x27AE; &#x27AF;</p>
      <p noindent='true'> &#x27B1; &#x27B2; &#x27B3; &#x27B4; &#x27B5; &#x27B6; &#x27B7; 
      &#x27B8; &#x27B9; &#x27BA; &#x27BB; &#x27BC; &#x27BD; &#x27BE; </p>

This is the table

|Zapf Dingbats characters|

== = = = = = = = = = = = = = = =
\  ✁ ✂ ✃ ✄ ☎ ✆ ✇ ✈ ✉ ☛ ☞ ✌ ✍ ✎ ✏
✐  ✑ ✒ ✓ ✔ ✕ ✖ ✗ ✘ ✙ ✚ ✛ ✜ ✝ ✞ ✟
✠  ✡ ✢ ✣ ✤ ✥ ✦ ✧ ★ ✩ ✪ ✫ ✬ ✭ ✮ ✯
✰  ✱ ✲ ✳ ✴ ✵ ✶ ✷ ✸ ✹ ✺ ✻ ✼ ✽ ✾ ✿
❀  ❁ ❂ ❃ ❄ ❅ ❆ ❇ ❈ ❉ ❊ ❋ ● ❍ ■ ❏
❐  ❑ ❒ ▲ ▼ ◆ ❖ ◗ ❘ ❙ ❚ ❛ ❜ ❝ ❞ 
\  ❡ ❢ ❣ ❤ ❥ ❦ ❧ ♣ ♦ ♥ ♠ ① ② ③ ④
⑤  ⑥ ⑦ ⑧ ⑨ ⑩ ❶ ❷ ❸ ❹ ❺ ❻ ❼ ❽ ❾ ❿
➀  ➁ ➂ ➃ ➄ ➅ ➆ ➇ ➈ ➉ ➊ ➋ ➌ ➍ ➎ ➏
➐  ➑ ➒ ➓ ➔ → ↔ ↕ ➘ ➙ ➚ ➛ ➜ ➝ ➞ ➟
➠  ➡ ➢ ➣ ➤ ➥ ➦ ➧ ➨ ➩ ➪ ➫ ➬ ➭ ➮ ➯
\  ➱ ➲ ➳ ➴ ➵ ➶ ➷ ➸ ➹ ➺ ➻ ➼ ➽ ➾ 
== = = = = = = = = = = = = = = =

Other symbols
-------------

Here is a list of commands that are known to *Tralics* but whose
translation does not correspond to a Unicode character. Thus, an error
is signaled.

.. container:: ltx-source

   ::

      %\textascendercompwordmark\textcapitalcompwordmark
      % \textlbrackdbl\textrbrackdbl\texttildelow\textleaf\textdivorced\textborn
      % \textquotestraightbase\textquotestraightdblbase\textmarried\textdied
      % \textinterrobangdown\textcopyleft\textdollaroldstyle\textdollaroldstyle
      % \textblank\textcentoldstyle\textcentoldstyle
      % \textcentoldstyle\textdblhyphen
      % \textfouroldstyle \textfiveoldstyle \texteightoldstyle\textnineoldstyle
      % \textoneoldstyle \textsevenoldstyle\textsixoldstyle
      % \textthreeoldstyle\textzerooldstyle \texttwooldstyle

Here is a list of commands whose name start with \`text'.

.. container:: ltx-source

   ::

      \textacutedbl\ \textasciiacute\ 
      \textasciiacutex\  \textasciibreve\  \textasciicaron\  \textasciicedilla\ 
      \textasciicircum\  \textasciidieresis\  \textasciigrave\  \textasciimacron\ 
      \textasciitilde\  \textasteriskcentered\  \textbackslash\ \textbaht\ \textbar\ 
      \textbardbl\  \textbigcircle\    \textbraceleft\ 
      \textbraceright\  \textbrokenbar\  \textbullet\  
      \textcelsius\  \textcent\   \textcircledP\  \textcolonmonetary\ 
      \textcopyright\  \textcurrency\  \textdagger\ 
      \textdaggerdbl\    \textdegree\   
      \textdiv\  \textdollar\    \textdong\ 
      \textdownarrow\ \textellipsis\  \textemdash\  \textendash\ 
      \textestimated\  \texteuro\  \textexclamdown\  \textflorin\ 
      \textfractionsolidus\  \textfractionsolidus\ 
      \textfrenchfranc\ \textgravedbl\  \textgreater\  
      \textinterrobang\  \textlangle\ 
      \textleftarrow\  \textless\  \textlira\  \textlnot\ 
      \textlquill\  \textmho\  \textminus\  \textmu\ 
      \textmusicalnote\  \textnaira\   \textnormal\  \textnospace\ 
      \textnumero\  \textohm\  \textonehalf\   \textonequarter\ 
      \textonesuperior\  \textopenbullet\  \textordfeminine\  \textordmasculine\ 
      \textparagraph\  \textperiodcentered\  \textpertenthousand\  \textperthousand\ 
      \textpeso\  \textpilcrow\  \textpm\  \textquestiondown\  \textquotedblleft\ 
      \textquotedblright\  \textquoteleft\  \textquoteright\  \textquotesingle\ 
      \textrangle\ \textrecipe\  \textreferencemark\  \textregistered\ 
      \textrightarrow\   \textrquill\   \textsection\ 
      \textservicemark\ \textsofthyphen\  \textsterling 
      \textsurd\   \textthreequarters\  \textthreequartersemdash\ 
      \textthreesuperior\   \texttimes\  \texttrademark\ 
      \texttwelveudash\  \texttwosuperior\  \textunderscore\ 
      \textuparrow\  \textvisiblespace\    \textwon\  \textyen\ 

Translation: ″ ´ ′ ̆ ̌ ¸ ⌃ ¨ ‵ ¯ ~ ⁎ \\ ฿ \| ‖ ◯ { } ¦ • ℃ ¢ ℗ ₡ © ¤ † ‡
° ÷ $ ₫ ↓ … — – ℮ € ¡ ƒ ⁄ ⁄ ₣ ‶ > ‽ 〈 ← < ₤ ¬ ⁅ ℧ — µ ♪ ₦ ​ № Ω ½ ¼ ¹ ◦
ª º ¶ · ‱ ‰ ₱ ¶ ± ¿ “ ” ‘ ’ ' 〉 ℞ ※ ® → ⁆ § ℠ ­ £√ ¾ — ³ × ™ — ² \_ ↑ ␣
₩ ¥

Math symbols
============

| We present here some math characters; for a full and up-to-date list
  of constructions consult `Producing MathML with
  Tralics <quadrat/testmath.xml>`__. All character tables shown here are
  converted from XML to Pdf via xmltex, then to png images. You can say
  ``\mathmo{\&\#x2190;}`` in order to access the Unicode character
  U+2190 as a math operator. On the other hand ``^^^^2190`` produces the
  same character as a math identifier. In what follows, we assume the
  following definition
| ``\def\unimp#1{\mathmo{\&\#x#1;}}``

There is a file named tralics-iso.sty, that defines ``\mathslarr`` to be
equivalent to ``\mathmo{\&\#x2190;}``. The Unicode name of this
character is: \`leftwards arrow', and isoamsa defines the entity
``&slarr;`` as \`short left arrow'.

Arrows
------

Characters with code between U+2190 and U+21FF are shown in the table
below. Some symbols have no glyphs in the standard LaTeX fonts. They are
shown in the table by a dot if there is no entity in the isoamsXXX
files, their Unicode number otherwise.

.. container:: ltx-source

   ::

      $\begin{array}{lccccccccccccccccc}
      \text{2190}&\mathslarr&\mathuarr& \mathsrarr&\mathdarr&
       \mathharr& \mathvarr&\mathnwarr&\mathnearr&
       \mathsearr& \mathswarr& \mathnlarr&\mathnrarr&
       .&\mathrarrw& \mathLarr&\mathUarr\\
      \text{21A0}&\mathRarr& \mathDarr& \mathlarrtl&\mathrarrtl&
        \mathmapstoleft&\mathmapstoup&\mathmap&\mathmapstodown&
        .&\mathlarrhk&\mathrarrhk&\mathlarrlp&
        \mathrarrlp&\mathharrw&\mathnharr&\unimp{21af}\\
      \text{21B0}&\mathlsh&\mathrsh&\mathldsh&\mathrdsh&
       .&.&\mathcularr&\mathcurarr&
       . & .&\matholarr&\mathorarr&
       \mathlharu&\mathlhard&\mathuharr&\mathuharl\\
      \text{21C0}&\mathrharu&\mathrhard&\mathdharr&\mathdharl&
       \mathrlarr&\mathudarr&\mathlrarr&\mathllarr&
       \mathuuarr&\mathrrarr&\mathddarr&\mathlrhar&
       \mathrlhar&\mathnlArr&\mathnhArr&\mathnrArr\\
      \text{21D0}&\mathlArr&\mathuArr&\mathrArr&\mathdArr&
       \mathhArr&\mathvArr&\mathnwArr&\mathneArr&
       \mathseArr&\mathswArr&\mathlAarr&\mathrAarr&
       \unimp{21dc}&\mathzigrarr&.&.\\
      \text{21E0}&\unimp{21e0}& .& \unimp{21e2}& .&
       \mathlarrb& \mathrarrb& .& .&
       .& .& . & . & . & .& .&  .\\
      \text{21F0}& .& .&. & .& . & \mathduarr& .& .& 
       .& .& .&  .& .& \mathloarr& \mathroarr& \mathhoarr\\
      \end{array}$

Translation is trivial. We omit a big part of the table.

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mtable>
         <mtr>
          <mtd columnalign='left'><mrow><mtext>2190</mtext></mrow></mtd>
          <mtd><mo>&#x02190;</mo></mtd>
          <mtd><mo>&#x02191;</mo></mtd>
          <mtd><mo>&#x02192;</mo></mtd>
         ...
          <mtd><mo>&#x021FE;</mo></mtd>
          <mtd><mo>&#x021FF;</mo></mtd>
         </mtr>
        </mtable>
       </math>
      </formula>

This is the preview. |Unicode Arrows|

Mathematical operators
----------------------

Characters with code between U+2200 and U+22FF are shown in the table
below. Some symbols have no glyphs in the standard LaTeX fonts. Symbols
between U+22F2 and U+22FF (variants of \`element of') are not shown.
Others are shown by their Unicode number.

.. container:: ltx-source

   ::

      $\begin{array}{lccccccccccccccccc}
      \text{2200}& \mathforall& \mathcomp&\mathpart&\mathexist& 
       \mathnexist&  \mathempty& \unimp{2206}&\mathnabla&
       \mathisin&\mathnotin&\unimp{220a}&\mathni&
       \mathnotni&\unimp{220d}&\unimp{220e}&\mathprod\\
      \text{2210}&\mathcoprod&\mathsum&\mathminus&\mathmnplus&
        \mathplusdo&\unimp{2215}&\mathsetmn&\mathlowast&
        \mathcompfn&\unimp{2219}&\mathradic&\unimp{221B}&
        \unimp{221c}&\mathprop&\mathinfin&\mathangrt\\
      \text{2220}&\mathang&\mathangmsd&\unimp{2222}&\mathshortmid&
        \mathnmid&\mathspar&\mathnpar&\mathand&
        \mathor&\mathcap&\mathcup&\mathint&
        \mathInt&\mathtint&\mathconint&\mathConint\\
      \text{2230}&\mathCconint&\mathcwint&\mathcwconint&\mathawconint&
       \maththerefore&\mathbecaus&\mathratio&\mathColon&
       \mathminusd&\unimp{2239}&\mathmDDot&\mathhomtht&
       \maththksim&\mathbsim&\mathac&\mathmstpos\\
      \text{2240}&\mathwreath&\mathnsim&\mathesim&\mathsime&
        \mathnsime&\mathcong&\mathsimne&\mathncong&
        \mathasymp&\mathnap&\mathape&\mathapid&  
        \mathbcong&\mathasympeq&\mathbump&\mathbumpe\\
      \text{2250}&\mathesdot&\matheDot&\mathefDot&\matherDot&
        \mathcolone&\mathecolon&\mathecir&\mathcire&
         \unimp{2258}&\unimp{2259}&\unimp{225a}&\unimp{225b}&
         \mathtrie&\unimp{225d}&\unimp{225e}&\mathequest\\
      \text{2260}&\mathne&\mathequiv&\mathnequiv&\unimp{2263}&
        \mathle&\mathge&\mathlE&\mathgE&
        \mathlnE&\mathgnE&\mathLt&\mathGt&
        \mathtwixt&\mathNotCupCap&\mathnlt&\mathngt\\
      \text{2270}&\mathnle&\mathnge&\mathlsim&\mathgsim&
        \mathnlsim&\mathngsim&\mathlg&\mathgl&
        \mathntlg&\mathntgl&\mathpr&\mathsc&
        \mathprcue&\mathsccue&\mathprsim&\mathscsim\\
      \text{2280}&\mathnpr&\mathnsc&\mathsub&\mathsup&
       \mathnsub&\mathnsup&\mathsube&\mathsupe&
        \mathnsube&\mathnsupe&\mathsubne&\mathsupne&
       \unimp{228c}&\mathcupdot&\mathuplus&\mathsqsub\\
      \text{2290}&\mathsqsup&\mathsqsube&\mathsqsupe&\mathsqcap&
        \mathsqcup&\mathoplus&\mathominus&\mathotimes&
        \mathosol&\mathodot&\mathocir&\mathoast&
        \unimp{229c}&\mathodash&\mathplusb&\mathminusb\\
      \text{22a0}&\mathtimesb&\mathsdotb&\mathvdash&\mathdashv&
        \mathtop&\mathbottom&\unimp{22a6}&\mathmodels&
         \mathvDash&\mathVdash&\mathVvdash&\mathVDash&
         \mathnvdash&\mathnvDash&\mathnVdash&\mathnVDash\\
      \text{22b0}&\mathprurel&\unimp{22b1}&\mathvltri&\mathvrtri&
       \mathltrie&\mathrtrie&\mathorigof&\mathimof&
        \mathmumap&\mathhercon&\mathintcal&\mathveebar&
        \unimp{22bc}&\mathbarvee&\mathangrtvb&\mathlrtri\\
      \text{22c0}&\mathxwedge&\mathxvee&\mathxcap&\mathxcup&
       \mathdiam&\mathsdot&\mathsstarf&\mathdivonx&
        \mathbowtie&\mathltimes&\mathrtimes&\mathlthree&
        \mathrthree&\mathbsime&\mathcuvee&\mathcuwed\\
      \text{22d0}&\mathSub&\mathSup&\mathCap&\mathCup&
        \mathfork&\mathepar&\mathlessdot&\mathgtrdot&
        \mathLl&\mathGg&\mathleg&\mathgel&
         \unimp{22dc}&\unimp{22dd}&\mathcuepr&\mathcuesc\\
      \text{22e0}&\mathnprcue&\mathnsccue&\mathnsqsube&\mathnsqsupe&
        \unimp{22e4}&\unimp{22e5}&\mathlnsim&\mathgnsim&
        \mathprecnsim&\mathscnsim&\mathnltri&\mathnrtri&
        \mathnltrie&\mathnrtrie&\mathvellip&\mathctdot\\
      \text{22f0}&\mathutdot&\mathdtdot&\mathdisin&\mathisinsv&
        \mathisins&\mathisindot&\mathnotinvc&\mathnotinvb&
        \unimp{22f8}&\mathisinE&\mathnisd&\mathxnis&
        \mathnis&\mathnotnivc&\mathnotnivb&\unimp{22ff}\\
      \end{array}$

This is the preview. |Unicode Mathematical operators|

Miscellaneous symbols
---------------------

We consider here symbols between U+2300 and U+23FF. About 30 symbols are
implemented. The table shows also some symbols between U+2600 and
U+2607, and others between U+263D and U+2685.

.. container:: ltx-source

   ::

      $\begin{array}{lccccccccccccccccc}
      \text{2300}& \unimp{2300}&\unimp{2301}&\unimp{2302}&\unimp{2303}&
       \unimp{2304}&\mathbarwedge&\mathBarwed&\unimp{2307}&
       \mathlceil&\mathrceil&\mathlfloor&\mathrfloor&
       \mathdrcrop&\mathdlcrop&\mathurcrop&\mathulcrop\\
      \text{2310}&\mathbnot& \unimp{2311}& \mathprofline&\mathprofsurf&
       \unimp{2314}& \mathtelrec&\mathtarget&\unimp{2317}&
       \unimp{2318}& \unimp{2319}& \unimp{231a}& \unimp{231b}&
        \mathulcorner& \mathurcorner&\mathllcorner&\mathlrcorner\\
      \text{2320}&\unimp{2320}&\unimp{2321}&\mathfrown&\mathsmile&
       \unimp{2324}&\unimp{2325}&\unimp{2326}&\unimp{2327}&
        \unimp{2328}&\mathlangle&\mathrangle&\unimp{232b}&
        \unimp{232c}& \mathcylcty&\mathprofalar&\unimp{232f}\\
      \text{2330}&&&&&&&\mathtopbot&&&\unimp{2339}&&&&
        \mathovbar& &\mathsolbar\\
      \text{2340}&\unimp{2340}&&&&&&&\unimp{2347}&\unimp{2348}\\
      \text{2350}&\unimp{2350}&&&&&&&\unimp{2357}\\
      \text{2600}&&\unimp{2601}&&&&\mathbigstar&\mathstar&&&&&&\unimp{260C}&
        \unimp{260d}\unimp{263d}& \unimp{263e}&\unimp{263f}\\
      \text{2640}&\mathfemale&\unimp{2641}&\mathmale&\unimp{2643}
        &\unimp{2644}&\unimp{2645}&\unimp{2646}&\unimp{2647}&\unimp{2648}&
      \unimp{2649}&\unimp{264A}&\unimp{264b}&\unimp{264c}&
        \unimp{264d}&\unimp{264e} &\unimp{264f}\\
      \text{2650}&\unimp{2650}&\unimp{2651}&\unimp{2652}&\unimp{2653}
        &\unimp{2654}&\unimp{2655}&\unimp{2656}&\unimp{2657}&\unimp{2658}&
      \unimp{2659}&\unimp{265A}&\unimp{265b}&\unimp{265c}&
        \unimp{265d}&\unimp{265e} &\unimp{265f}\\
      \text{2660}&\mathspadesuit&\unimp{2661}&\unimp{2662}&\mathclubsuit
        &\unimp{2664}&\mathheartsuit&\mathdiamondsuit&\unimp{2667}&&
      \unimp{2669}&\mathsung&&&
        \mathflat&\mathnatur &\mathsharp\\
      \text{2680}&\unimp{2680}&\unimp{2681}&\unimp{2682}&\unimp{2683}
        &\unimp{2684}&\unimp{2685}\\
      \end{array}$

This is the preview.

|Unicode Miscellaneous symbols|

Math characters
---------------

Symbols between U+1D400 and U+1D7FF. First part. There are 12 empty
slots in the table symbols. These characters are somewhere else. They
are marked by a plus sign.

.. container:: ltx-source

   ::

      $\begin{array}{lccccccccccccccccc}
      \text{1d400}&\unimp{1d400}&\unimp{1d401}&\unimp{1d402}&\unimp{1d403}&
       \unimp{1d404}&\unimp{1d405}&\unimp{1d406}&\unimp{1d407}&
       \unimp{1d408}&\unimp{1d409}&\unimp{1d40a}&\unimp{1d40b}&
       \unimp{1d40c}&\unimp{1d40d}&\unimp{1d40e}&\unimp{1d40f}\\
      \text{1d410}&\unimp{1d410}&\unimp{1d411}&\unimp{1d412}&\unimp{1d413}&
       \unimp{1d414}&\unimp{1d415}&\unimp{1d416}&\unimp{1d417}&
       \unimp{1d418}&\unimp{1d419}&\unimp{1d41a}&\unimp{1d41b}&
       \unimp{1d41c}&\unimp{1d41d}&\unimp{1d41e}&\unimp{1d41f}\\
      \text{1d420}&\unimp{1d420}&\unimp{1d421}&\unimp{1d422}&\unimp{1d423}&
       \unimp{1d424}&\unimp{1d425}&\unimp{1d426}&\unimp{1d427}&
       \unimp{1d428}&\unimp{1d429}&\unimp{1d42a}&\unimp{1d42b}&
       \unimp{1d42c}&\unimp{1d42d}&\unimp{1d42e}&\unimp{1d42f}\\
      \text{1d430}&\unimp{1d430}&\unimp{1d431}&\unimp{1d432}&\unimp{1d433}&
       \unimp{1d434}&\unimp{1d435}&\unimp{1d436}&\unimp{1d437}&
       \unimp{1d438}&\unimp{1d439}&\unimp{1d43a}&\unimp{1d43b}&
       \unimp{1d43c}&\unimp{1d43d}&\unimp{1d43e}&\unimp{1d43f}\\
      \text{1d440}&\unimp{1d440}&\unimp{1d441}&\unimp{1d442}&\unimp{1d443}&
       \unimp{1d444}&\unimp{1d445}&\unimp{1d446}&\unimp{1d447}&
       \unimp{1d448}&\unimp{1d449}&\unimp{1d44a}&\unimp{1d44b}&
       \unimp{1d44c}&\unimp{1d44d}&\unimp{1d44e}&\unimp{1d44f}\\
      \text{1d450}&\unimp{1d450}&\unimp{1d451}&\unimp{1d452}&\unimp{1d453}&
       \unimp{1d454}&+\unimp{210e}&\unimp{1d456}&\unimp{1d457}&
       \unimp{1d458}&\unimp{1d459}&\unimp{1d45a}&\unimp{1d45b}&
       \unimp{1d45c}&\unimp{1d45d}&\unimp{1d45e}&\unimp{1d45f}\\
      \text{1d460}&\unimp{1d460}&\unimp{1d461}&\unimp{1d462}&\unimp{1d463}&
       \unimp{1d464}&\unimp{1d465}&\unimp{1d466}&\unimp{1d467}&
       \unimp{1d468}&\unimp{1d469}&\unimp{1d46a}&\unimp{1d46b}&
       \unimp{1d46c}&\unimp{1d46d}&\unimp{1d46e}&\unimp{1d46f}\\
      \text{1d470}&\unimp{1d470}&\unimp{1d471}&\unimp{1d472}&\unimp{1d473}&
       \unimp{1d474}&\unimp{1d475}&\unimp{1d476}&\unimp{1d477}&
       \unimp{1d478}&\unimp{1d479}&\unimp{1d47a}&\unimp{1d47b}&
       \unimp{1d47c}&\unimp{1d47d}&\unimp{1d47e}&\unimp{1d47f}\\
      \text{1d480}&\unimp{1d480}&\unimp{1d481}&\unimp{1d482}&\unimp{1d483}&
       \unimp{1d484}&\unimp{1d485}&\unimp{1d486}&\unimp{1d487}&
       \unimp{1d488}&\unimp{1d489}&\unimp{1d48a}&\unimp{1d48b}&
       \unimp{1d48c}&\unimp{1d48d}&\unimp{1d48e}&\unimp{1d48f}\\
      \text{1d490}&\unimp{1d490}&\unimp{1d491}&\unimp{1d492}&\unimp{1d493}&
       \unimp{1d494}&\unimp{1d495}&\unimp{1d496}&\unimp{1d497}&
       \unimp{1d498}&\unimp{1d499}&\unimp{1d49a}&\unimp{1d49b}&
       \mathAscr&+\mathBscr&\mathCscr&\mathDscr\\
      \text{1d4a0}&+\mathEscr&+\mathFscr&\mathGscr&+\mathHscr&
       +\mathIscr&\mathJscr&\mathKscr&+\mathLscr&
       +\mathMscr&\mathNscr&\mathOscr&\mathPscr&
       \mathQscr&+\mathRscr&\mathSscr&\mathTscr\\
      \text{1d4b0}&\mathUscr&\mathVscr&\mathWscr&\mathXscr&
       \mathYscr&\mathZscr&\mathascr&\mathbscr&
       \mathcscr&\mathdscr&+\mathescr&\mathfscr&
       +\mathgscr&\mathhscr&\mathiscr&\mathjscr\\
      \text{1d4c0}&\mathkscr&\mathlscr&\mathmscr&\mathnscr&
       +\mathoscr&\mathpscr&\mathqscr&\mathrscr&
       \mathsscr&\mathtscr&\mathuscr&\mathvscr&
       \mathwscr&\mathxscr&\mathyscr&\mathzscr\\
      \text{1d4d0}&\unimp{1d4d0}&\unimp{1d4d1}&\unimp{1d4d2}&\unimp{1d4d3}&
       \unimp{1d4d4}&\unimp{1d4d5}&\unimp{1d4d6}&\unimp{1d4d7}&
       \unimp{1d4d8}&\unimp{1d4d9}&\unimp{1d4da}&\unimp{1d4db}&
       \unimp{1d4dc}&\unimp{1d4dd}&\unimp{1d4de}&\unimp{1d4df}\\
      \text{1d4e0}&\unimp{1d4e0}&\unimp{1d4e1}&\unimp{1d4e2}&\unimp{1d4e3}&
       \unimp{1d4e4}&\unimp{1d4e5}&\unimp{1d4e6}&\unimp{1d4e7}&
       \unimp{1d4e8}&\unimp{1d4e9}&\unimp{1d4ea}&\unimp{1d4eb}&
       \unimp{1d4ec}&\unimp{1d4ed}&\unimp{1d4ee}&\unimp{1d4ef}\\
      \text{1d4f0}&\unimp{1d4f0}&\unimp{1d4f1}&\unimp{1d4f2}&\unimp{1d4f3}&
       \unimp{1d4f4}&\unimp{1d4f5}&\unimp{1d4f6}&\unimp{1d4f7}&
       \unimp{1d4f8}&\unimp{1d4f9}&\unimp{1d4fa}&\unimp{1d4fb}&
       \unimp{1d4fc}&\unimp{1d4fd}&\unimp{1d4fe}&\unimp{1d4ff}\\
      \end{array}$

|Unicode Mathematical alphanumeric symbols|

.. container:: ltx-source

   ::

      $\begin{array}{lccccccccccccccccc}
      \text{1d500}&\unimp{1d500}&\unimp{1d501}&\unimp{1d502}&\unimp{1d503}&
       \mathAfr&\mathBfr&+\mathCfr&\mathDfr&
       \mathEfr&\mathFfr&\mathGfr&+\mathHfr&
       +\mathIfr&\mathJfr&\mathKfr&\mathLfr\\
      \text{1d510}&\mathMfr&\mathNfr&\mathOfr&\mathPfr&
       \mathQfr&+\mathRfr&\mathSfr&\mathTfr&
       \mathUfr&\mathVfr&\mathWfr&\mathXfr&
       \mathYfr&+\mathZfr&\mathafr&\mathbfr\\
      \text{1d520}&\mathcfr&\mathdfr&\mathefr&\mathffr&
       \mathgfr&\mathhfr&\mathifr&\mathjfr&
       \mathkfr&\mathlfr&\mathmfr&\mathnfr&
       \mathofr&\mathpfr&\mathqfr&\mathrfr\\
      \text{1d530}&\mathsfr&\mathtfr&\mathufr&\mathvfr&
       \mathwfr&\mathxfr&\mathyfr&\mathzfr&
       \mathAopf&\mathBopf&+\mathCopf&\mathDopf&
       \mathEopf&\mathFopf&\mathGopf&+\mathHopf\\
      \text{1d540}&\mathIopf&\mathJopf&\mathKopf&\mathLopf&
       \mathMopf&+\mathNopf&\mathOopf&+\mathPopf&
       +\mathQopf&+\mathRopf&\mathSopf&\mathTopf&
       \mathUopf&\mathVopf&\mathWopf&\mathXopf\\
      \text{1d550}&\mathYopf&+\mathZopf&\mathaopf&\mathbopf&
       \mathcopf&\mathdopf&\matheopf&\mathfopf&
       \mathgopf&\mathhopf&\mathiopf&\mathjopf&
       \mathkopf&\mathlopf&\mathmopf&\mathnopf\\
      \text{1d560}&\mathoopf&\mathpopf&\mathqopf&\mathropf&
       \mathsopf&\mathtopf&\mathuopf&\mathvopf&
       \mathwopf&\mathxopf&\mathyopf&\mathzopf&
       \unimp{1d56c}&\unimp{1d56d}&\unimp{1d56e}&\unimp{1d56f}\\
      \text{1d570}&\unimp{1d570}&\unimp{1d571}&\unimp{1d572}&\unimp{1d573}&
       \unimp{1d574}&\unimp{1d575}&\unimp{1d576}&\unimp{1d577}&
       \unimp{1d578}&\unimp{1d579}&\unimp{1d57a}&\unimp{1d57b}&
       \unimp{1d57c}&\unimp{1d57d}&\unimp{1d57e}&\unimp{1d57f}\\
      \text{1d580}&\unimp{1d580}&\unimp{1d581}&\unimp{1d582}&\unimp{1d583}&
       \unimp{1d584}&\unimp{1d585}&\unimp{1d586}&\unimp{1d587}&
       \unimp{1d588}&\unimp{1d589}&\unimp{1d58a}&\unimp{1d58b}&
       \unimp{1d58c}&\unimp{1d58d}&\unimp{1d58e}&\unimp{1d58f}\\
      \text{1d590}&\unimp{1d590}&\unimp{1d591}&\unimp{1d592}&\unimp{1d593}&
       \unimp{1d594}&\unimp{1d595}&\unimp{1d596}&\unimp{1d597}&
       \unimp{1d598}&\unimp{1d599}&\unimp{1d59a}&\unimp{1d59b}&
       \unimp{1d59c}&\unimp{1d59d}&\unimp{1d59e}&\unimp{1d59f}\\
      \text{1d5a0}&\unimp{1d5a0}&\unimp{1d5a1}&\unimp{1d5a2}&\unimp{1d5a3}&
       \unimp{1d5a4}&\unimp{1d5a5}&\unimp{1d5a6}&\unimp{1d5a7}&
       \unimp{1d5a8}&\unimp{1d5a9}&\unimp{1d5aa}&\unimp{1d5ab}&
       \unimp{1d5ac}&\unimp{1d5ad}&\unimp{1d5ae}&\unimp{1d5af}\\
      \text{1d5b0}&\unimp{1d5b0}&\unimp{1d5b1}&\unimp{1d5b2}&\unimp{1d5b3}&
       \unimp{1d5b4}&\unimp{1d5b5}&\unimp{1d5b6}&\unimp{1d5b7}&
       \unimp{1d5b8}&\unimp{1d5b9}&\unimp{1d5ba}&\unimp{1d5bb}&
       \unimp{1d5bc}&\unimp{1d5bd}&\unimp{1d5be}&\unimp{1d5af}\\
      \text{1d5c0}&\unimp{1d5c0}&\unimp{1d5c1}&\unimp{1d5c2}&\unimp{1d5c3}&
       \unimp{1d5c4}&\unimp{1d5c5}&\unimp{1d5c6}&\unimp{1d5c7}&
       \unimp{1d5c8}&\unimp{1d5c9}&\unimp{1d5ca}&\unimp{1d5cb}&
       \unimp{1d5cc}&\unimp{1d5cd}&\unimp{1d5ce}&\unimp{1d5cf}\\
      \text{1d5d0}&\unimp{1d5d0}&\unimp{1d5d1}&\unimp{1d5d2}&\unimp{1d5d3}&
       \unimp{1d5d4}&\unimp{1d5d5}&\unimp{1d5d6}&\unimp{1d5d7}&
       \unimp{1d5d8}&\unimp{1d5d9}&\unimp{1d5da}&\unimp{1d5db}&
       \unimp{1d5dc}&\unimp{1d5dd}&\unimp{1d5de}&\unimp{1d5df}\\
      \text{1d5e0}&\unimp{1d5e0}&\unimp{1d5e1}&\unimp{1d5e2}&\unimp{1d5e3}&
       \unimp{1d5e4}&\unimp{1d5e5}&\unimp{1d5e6}&\unimp{1d5e7}&
       \unimp{1d5e8}&\unimp{1d5e9}&\unimp{1d5ea}&\unimp{1d5eb}&
       \unimp{1d5ec}&\unimp{1d5ed}&\unimp{1d5ee}&\unimp{1d5ef}\\
      \text{1d5f0}&\unimp{1d5f0}&\unimp{1d5f1}&\unimp{1d5f2}&\unimp{1d5f3}&
       \unimp{1d5f4}&\unimp{1d5f5}&\unimp{1d5f6}&\unimp{1d5f7}&
       \unimp{1d5f8}&\unimp{1d5f9}&\unimp{1d5fa}&\unimp{1d5fb}&
       \unimp{1d5fc}&\unimp{1d5fd}&\unimp{1d5fe}&\unimp{1d5ff}\\
      \end{array}$

|Unicode Mathematical alphanumeric symbols 2|

.. container:: ltx-source

   ::

      $\begin{array}{lccccccccccccccccc}
      \text{1d600}&\unimp{1d600}&\unimp{1d601}&\unimp{1d602}&\unimp{1d603}&
       \unimp{1d604}&\unimp{1d605}&\unimp{1d606}&\unimp{1d607}&
       \unimp{1d608}&\unimp{1d609}&\unimp{1d60a}&\unimp{1d60b}&
       \unimp{1d60c}&\unimp{1d60d}&\unimp{1d60e}&\unimp{1d60f}\\
      \text{1d610}&\unimp{1d610}&\unimp{1d611}&\unimp{1d612}&\unimp{1d613}&
       \unimp{1d614}&\unimp{1d615}&\unimp{1d616}&\unimp{1d617}&
       \unimp{1d618}&\unimp{1d619}&\unimp{1d61a}&\unimp{1d61b}&
       \unimp{1d61c}&\unimp{1d61d}&\unimp{1d61e}&\unimp{1d61f}\\
      \text{1d620}&\unimp{1d620}&\unimp{1d621}&\unimp{1d622}&\unimp{1d623}&
       \unimp{1d624}&\unimp{1d625}&\unimp{1d626}&\unimp{1d627}&
       \unimp{1d628}&\unimp{1d629}&\unimp{1d62a}&\unimp{1d62b}&
       \unimp{1d62c}&\unimp{1d62d}&\unimp{1d62e}&\unimp{1d62f}\\
      \text{1d630}&\unimp{1d630}&\unimp{1d631}&\unimp{1d632}&\unimp{1d633}&
       \unimp{1d634}&\unimp{1d635}&\unimp{1d636}&\unimp{1d637}&
       \unimp{1d638}&\unimp{1d639}&\unimp{1d63a}&\unimp{1d63b}&
       \unimp{1d63c}&\unimp{1d63d}&\unimp{1d63e}&\unimp{1d63f}\\
      \text{1d640}&\unimp{1d640}&\unimp{1d641}&\unimp{1d642}&\unimp{1d643}&
       \unimp{1d644}&\unimp{1d645}&\unimp{1d646}&\unimp{1d647}&
       \unimp{1d648}&\unimp{1d649}&\unimp{1d64a}&\unimp{1d64b}&
       \unimp{1d64c}&\unimp{1d64d}&\unimp{1d64e}&\unimp{1d64f}\\
      \text{1d650}&\unimp{1d650}&\unimp{1d651}&\unimp{1d652}&\unimp{1d653}&
       \unimp{1d654}&\unimp{1d655}&\unimp{1d656}&\unimp{1d657}&
       \unimp{1d658}&\unimp{1d659}&\unimp{1d65a}&\unimp{1d65b}&
       \unimp{1d65c}&\unimp{1d65d}&\unimp{1d65e}&\unimp{1d65f}\\
      \text{1d660}&\unimp{1d660}&\unimp{1d661}&\unimp{1d662}&\unimp{1d663}&
       \unimp{1d664}&\unimp{1d665}&\unimp{1d666}&\unimp{1d667}&
       \unimp{1d668}&\unimp{1d669}&\unimp{1d66a}&\unimp{1d66b}&
       \unimp{1d66c}&\unimp{1d66d}&\unimp{1d66e}&\unimp{1d66f}\\
      \text{1d670}&\unimp{1d670}&\unimp{1d671}&\unimp{1d672}&\unimp{1d673}&
       \unimp{1d674}&\unimp{1d675}&\unimp{1d676}&\unimp{1d677}&
       \unimp{1d678}&\unimp{1d679}&\unimp{1d67a}&\unimp{1d67b}&
       \unimp{1d67c}&\unimp{1d67d}&\unimp{1d67e}&\unimp{1d67f}\\
      \text{1d670}&\unimp{1d670}&\unimp{1d671}&\unimp{1d672}&\unimp{1d673}&
       \unimp{1d674}&\unimp{1d675}&\unimp{1d676}&\unimp{1d677}&
       \unimp{1d678}&\unimp{1d679}&\unimp{1d67a}&\unimp{1d67b}&
       \unimp{1d67c}&\unimp{1d67d}&\unimp{1d67e}&\unimp{1d67f}\\
      \text{1d680}&\unimp{1d680}&\unimp{1d681}&\unimp{1d682}&\unimp{1d683}&
       \unimp{1d684}&\unimp{1d685}&\unimp{1d686}&\unimp{1d687}&
       \unimp{1d688}&\unimp{1d689}&\unimp{1d68a}&\unimp{1d68b}&
       \unimp{1d68c}&\unimp{1d68d}&\unimp{1d68e}&\unimp{1d68f}\\
      \text{1d690}&\unimp{1d690}&\unimp{1d691}&\unimp{1d692}&\unimp{1d693}&
       \unimp{1d694}&\unimp{1d695}&\unimp{1d696}&\unimp{1d697}&
       \unimp{1d698}&\unimp{1d699}&\unimp{1d69a}&\unimp{1d69b}&
       \unimp{1d69c}&\unimp{1d69d}&\unimp{1d69e}&\unimp{1d69f}\\
      \text{1d6a0}&\unimp{1d6a0}&\unimp{1d6a1}&\unimp{1d6a2}&\unimp{1d6a3}&
       &&&&
       \unimp{1d6a8}&\unimp{1d6a9}&\unimp{1d6aa}&\unimp{1d6ab}&
       \unimp{1d6ac}&\unimp{1d6ad}&\unimp{1d6ae}&\unimp{1d6af}\\
      \text{1d6b0}&\unimp{1d6b0}&\unimp{1d6b1}&\unimp{1d6b2}&\unimp{1d6b3}&
       \unimp{1d6b4}&\unimp{1d6b5}&\unimp{1d6b6}&\unimp{1d6b7}&
       \unimp{1d6b8}&\unimp{1d6b9}&\unimp{1d6ba}&\unimp{1d6bb}&
       \unimp{1d6bc}&\unimp{1d6bd}&\unimp{1d6be}&\unimp{1d6bf}\\
      \text{1d6c0}&\unimp{1d6c0}&\unimp{1d6c1}&\unimp{1d6c2}&\unimp{1d6c3}&
       \unimp{1d6c4}&\unimp{1d6c5}&\unimp{1d6c6}&\unimp{1d6c7}&
       \unimp{1d6c8}&\unimp{1d6c9}&\unimp{1d6ca}&\unimp{1d6cb}&
       \unimp{1d6cc}&\unimp{1d6cd}&\unimp{1d6ce}&\unimp{1d6cf}\\
      \text{1d6d0}&\unimp{1d6d0}&\unimp{1d6d1}&\unimp{1d6d2}&\unimp{1d6d3}&
       \unimp{1d6d4}&\unimp{1d6d5}&\unimp{1d6d6}&\unimp{1d6d7}&
       \unimp{1d6d8}&\unimp{1d6d9}&\unimp{1d6da}&\unimp{1d6db}&
       \unimp{1d6dc}&\unimp{1d6dd}&\unimp{1d6de}&\unimp{1d6df}\\
      \text{1d6e0}&\unimp{1d6e0}&\unimp{1d6e1}&\unimp{1d6e2}&\unimp{1d6e3}&
       \unimp{1d6e4}&\unimp{1d6e5}&\unimp{1d6e6}&\unimp{1d6e7}&
       \unimp{1d6e8}&\unimp{1d6e9}&\unimp{1d6ea}&\unimp{1d6eb}&
       \unimp{1d6ec}&\unimp{1d6ed}&\unimp{1d6ee}&\unimp{1d6ef}\\
      \text{1d6f0}&\unimp{1d6f0}&\unimp{1d6f1}&\unimp{1d6f2}&\unimp{1d6f3}&
       \unimp{1d6f4}&\unimp{1d6f5}&\unimp{1d6f6}&\unimp{1d6f7}&
       \unimp{1d6f8}&\unimp{1d6f9}&\unimp{1d6fa}&\unimp{1d6fb}&
       \unimp{1d6fc}&\unimp{1d6fd}&\unimp{1d6fe}&\unimp{1d6ff}\\
      \end{array}$

|Unicode Mathematical alphanumeric symbols 3|

.. container:: ltx-source

   ::

      \text{1d700}&\unimp{1d700}&\unimp{1d701}&\unimp{1d702}&\unimp{1d703}&
       \unimp{1d704}&\unimp{1d705}&\unimp{1d706}&\unimp{1d707}&
       \unimp{1d708}&\unimp{1d709}&\unimp{1d70a}&\unimp{1d70b}&
       \unimp{1d70c}&\unimp{1d70d}&\unimp{1d70e}&\unimp{1d70f}\\
      \text{1d710}&\unimp{1d710}&\unimp{1d711}&\unimp{1d712}&\unimp{1d713}&
       \unimp{1d714}&\unimp{1d715}&\unimp{1d716}&\unimp{1d717}&
       \unimp{1d718}&\unimp{1d719}&\unimp{1d71a}&\unimp{1d71b}&
       \unimp{1d71c}&\unimp{1d71d}&\unimp{1d71e}&\unimp{1d71f}\\
      \text{1d720}&\unimp{1d720}&\unimp{1d721}&\unimp{1d722}&\unimp{1d723}&
       \unimp{1d724}&\unimp{1d725}&\unimp{1d726}&\unimp{1d727}&
       \unimp{1d728}&\unimp{1d729}&\unimp{1d72a}&\unimp{1d72b}&
       \unimp{1d72c}&\unimp{1d72d}&\unimp{1d72e}&\unimp{1d72f}\\
      \text{1d730}&\unimp{1d730}&\unimp{1d731}&\unimp{1d732}&\unimp{1d733}&
       \unimp{1d734}&\unimp{1d735}&\unimp{1d736}&\unimp{1d737}&
       \unimp{1d738}&\unimp{1d739}&\unimp{1d73a}&\unimp{1d73b}&
       \unimp{1d73c}&\unimp{1d73d}&\unimp{1d73e}&\unimp{1d73f}\\
      \text{1d740}&\unimp{1d740}&\unimp{1d741}&\unimp{1d742}&\unimp{1d743}&
       \unimp{1d744}&\unimp{1d745}&\unimp{1d746}&\unimp{1d747}&
       \unimp{1d748}&\unimp{1d749}&\unimp{1d74a}&\unimp{1d74b}&
       \unimp{1d74c}&\unimp{1d74d}&\unimp{1d74e}&\unimp{1d74f}\\
      \text{1d750}&\unimp{1d750}&\unimp{1d751}&\unimp{1d752}&\unimp{1d753}&
       \unimp{1d754}&\unimp{1d755}&\unimp{1d756}&\unimp{1d757}&
       \unimp{1d758}&\unimp{1d759}&\unimp{1d75a}&\unimp{1d75b}&
       \unimp{1d75c}&\unimp{1d75d}&\unimp{1d75e}&\unimp{1d75f}\\
      \text{1d760}&\unimp{1d760}&\unimp{1d761}&\unimp{1d762}&\unimp{1d763}&
       \unimp{1d764}&\unimp{1d765}&\unimp{1d766}&\unimp{1d767}&
       \unimp{1d768}&\unimp{1d769}&\unimp{1d76a}&\unimp{1d76b}&
       \unimp{1d76c}&\unimp{1d76d}&\unimp{1d76e}&\unimp{1d76f}\\
      \text{1d7c0}&&&&& &&&&&&&&
       &&\unimp{1d7ce}&\unimp{1d7cf}\\
      \text{1d7d0}&\unimp{1d7d0}&\unimp{1d7d1}&\unimp{1d7d2}&\unimp{1d7d3}&
       \unimp{1d7d4}&\unimp{1d7d5}&\unimp{1d7d6}&\unimp{1d7d7}&
       \unimp{1d7d8}&\unimp{1d7d9}&\unimp{1d7da}&\unimp{1d7db}&
       \unimp{1d7dc}&\unimp{1d7dd}&\unimp{1d7de}&\unimp{1d7df}\\
      \text{1d7e0}&\unimp{1d7e0}&\unimp{1d7e1}&\unimp{1d7e2}&\unimp{1d7e3}&
       \unimp{1d7e4}&\unimp{1d7e5}&\unimp{1d7e6}&\unimp{1d7e7}&
       \unimp{1d7e8}&\unimp{1d7e9}&\unimp{1d7ea}&\unimp{1d7eb}&
       \unimp{1d7ec}&\unimp{1d7ed}&\unimp{1d7ee}&\unimp{1d7ef}\\
      \text{1d7f0}&\unimp{1d7f0}&\unimp{1d7f1}&\unimp{1d7f2}&\unimp{1d7f3}&
       \unimp{1d7f4}&\unimp{1d7f5}&\unimp{1d7f6}&\unimp{1d7f7}&
       \unimp{1d7f8}&\unimp{1d7f9}&\unimp{1d7fa}&\unimp{1d7fb}&
       \unimp{1d7fc}&\unimp{1d7fd}&\unimp{1d7fe}&\unimp{1d7ff}\\
      \end{array}$

Some characters are missing: sans serif bold greek lower case sans serif
bold greek italic |Unicode Mathematical alphanumeric symbols 4|

The T1 encoding
---------------

For some encodings, *Tralics* proposes a conversion to UTF8. The name of
the command has the form ``T1-encoding``, hence cannot be used directly;
see below how to alias it to, say, ``\foo``. The command reads an
argument that must be an integer, for instance ``\foo{65}``,
``\foo{'101}``, ``\foo{"41}``, :literal:`\\foo{`A}`, ``\foo{\count0}``
(the braces are mandatory). The expansion is of the form ``\char128``.
This is a single token, as produced by ``\chardef``. In the T1 encoding,
hex location DF contains "SS", but this is not a Unicode character, thus
provokes an error; character with position less than 32 are not
translated. The argument

.. container:: ltx-source

   ::

      \expandafter\let\expandafter\enc\csname T1-encoding\endcsname
      \enc{"20}\enc{"21}\enc{"22}\enc{"23}\enc{"24}\enc{"25}\enc{"26}\enc{"27}%
      \enc{"28}\enc{"29}\enc{"2A}\enc{"2B}\enc{"2C}\enc{"2D}\enc{"2E}\enc{"2F}
      \enc{"30}\enc{"31}\enc{"32}\enc{"33}\enc{"34}\enc{"35}\enc{"36}\enc{"37}%
      \enc{"38}\enc{"39}\enc{"3A}\enc{"3B}\enc{"3C}\enc{"3D}\enc{"3E}\enc{"3F}
      \enc{"40}\enc{"41}\enc{"42}\enc{"43}\enc{"44}\enc{"45}\enc{"46}\enc{"47}%
      \enc{"48}\enc{"49}\enc{"4A}\enc{"4B}\enc{"4C}\enc{"4D}\enc{"4E}\enc{"4F}
      \enc{"50}\enc{"51}\enc{"52}\enc{"53}\enc{"54}\enc{"55}\enc{"56}\enc{"57}%
      \enc{"58}\enc{"59}\enc{"5A}\enc{"5B}\enc{"5C}\enc{"5D}\enc{"5E}\enc{"5F}
      \enc{"60}\enc{"61}\enc{"62}\enc{"63}\enc{"64}\enc{"65}\enc{"66}\enc{"67}%
      \enc{"68}\enc{"69}\enc{"6A}\enc{"6B}\enc{"6C}\enc{"6D}\enc{"6E}\enc{"6F}
      \enc{"70}\enc{"71}\enc{"72}\enc{"73}\enc{"74}\enc{"75}\enc{"76}\enc{"77}%
      \enc{"78}\enc{"79}\enc{"7A}\enc{"7B}\enc{"7C}\enc{"7D}\enc{"7E}\enc{"7F}
      \enc{"80}\enc{"81}\enc{"82}\enc{"83}\enc{"84}\enc{"85}\enc{"86}\enc{"87}%
      \enc{"88}\enc{"89}\enc{"8A}\enc{"8B}\enc{"8C}\enc{"8D}\enc{"8E}\enc{"8F}
      \enc{"90}\enc{"91}\enc{"92}\enc{"93}\enc{"94}\enc{"95}\enc{"96}\enc{"97}%
      \enc{"98}\enc{"99}\enc{"9A}\enc{"9B}\enc{"9C}\enc{"9D}\enc{"9E}\enc{"9F}
      \enc{"A0}\enc{"A1}\enc{"A2}\enc{"A3}\enc{"A4}\enc{"A5}\enc{"A6}\enc{"A7}%
      \enc{"A8}\enc{"A9}\enc{"AA}\enc{"AB}\enc{"AC}\enc{"AD}\enc{"AE}\enc{"AF}
      \enc{"B0}\enc{"B1}\enc{"B2}\enc{"B3}\enc{"B4}\enc{"B5}\enc{"B6}\enc{"B7}%
      \enc{"B8}\enc{"B9}\enc{"BA}\enc{"BB}\enc{"BC}\enc{"BD}\enc{"BE}\enc{"BF}
      \enc{"C0}\enc{"C1}\enc{"C2}\enc{"C3}\enc{"C4}\enc{"C5}\enc{"C6}\enc{"C7}%
      \enc{"C8}\enc{"C9}\enc{"CA}\enc{"CB}\enc{"CC}\enc{"CD}\enc{"CE}\enc{"CF}
      \enc{"D0}\enc{"D1}\enc{"D2}\enc{"D3}\enc{"D4}\enc{"D5}\enc{"D6}\enc{"D7}%"
      \enc{"D8}\enc{"D9}\enc{"DA}\enc{"DB}\enc{"DC}\enc{"DD}\enc{"DE}
      \enc{"E0}\enc{"E1}\enc{"E2}\enc{"E3}\enc{"E4}\enc{"E5}\enc{"E6}\enc{"E7}%
      \enc{"E8}\enc{"E9}\enc{"EA}\enc{"EB}\enc{"EC}\enc{"ED}\enc{"EE}\enc{"EF}
      \enc{"F0}\enc{"F1}\enc{"F2}\enc{"F3}\enc{"F4}\enc{"F5}\enc{"F6}\enc{"F7}%
      \enc{"F8}\enc{"F9}\enc{"FA}\enc{"FB}\enc{"FC}\enc{"FD}\enc{"FE}\enc{"FF}

Translation

.. container:: xml_out

   ::

      ␣!"#$%&'()*+,-./
      0123456789:;<=>?
      @ABCDEFGHIJKLMNO
      PQRSTUVWXYZ[\]^_
      `abcdefghijklmno
      pqrstuvwxyz{|}~-
      ĂĄĆČĎĚĘĞĹĽŁŇŃŊŐŔ
      ŘŚŠŞŤŢŰŮŸŹŽŻĲİđ§
      ăąćčďěęğĺľłńňŋőŕ
      řśšşťţűůÿźžżĳ¡¿£
      ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏ
      ÐÑÒÓÔÕÖŒØÙÚÛÜÝÞ
      àáâãäåæçèéêëìíîï
      ðñòóôõöœøùúûüýþß

The command ``\OT2-encoding`` (and its alias ``\wncyr-encoding``)
describes the OT2 (cyrillic) encoding. This is a 7bit alphabet, and we
show all the 128 characters, in order. Some of these characters are
accents, hence placed on the character that precedes (or in the margin).

.. container:: xml_out

   ::

      ЊЉЏЭІЄЂЋњљџэієђћ
      ЮЖЙЁѴѲЅЯюжйёѵѳѕя
      ̈!”Ѣ̆%́’()*ѣ,-./
      0123456789:;«¹»?
      ̆АБЦДЕФГХИЈКЛМНО
      ПЧРСТУВЩШЫЗ[“]ЬЪ
      ‘абцдефгхијклмно
      пчрстувщшыз-—№ьъ

The command ``\OT1-encoding`` describes the OT1 encoding. This is a 7bit
alphabet, and some slots contain accent and ligatures; they are not
implemented, and marked by a red x in the table that follows.

.. container:: xml_out

   ::

      ΓΔΘΛΞΠΣΥΦΨΩxxxxx
      xxxxxxxxxßæœøÆŒØ
      x!"#$%&'()*+,-./
      0123456789:;¡=¿?
      @ABCDEFGHIJKLMNO
      PQRSTUVWXYZ[x]xx
      `abcdefghijklmno
      pqrstuvwxyzxxxxx

Needs to be done
================

Not all characters are available. In particular cyrillic letters are
missing. Some characters, like ``\'\AE`` are recognized, but not shown
in the tables.

.. |Ascii Table| image:: /img/img_69.png
.. |latin 1, non ascii| image:: /img/img_70.png
.. |latin extended A| image:: /img/img_68.png
.. |latin extended additional| image:: /img/img_92.png
.. |latin extended additional 2| image:: /img/img_93.png
.. |Zapf Dingbats characters| image:: /img/img_71.png
.. |Unicode Arrows| image:: /img/img_126.png
.. |Unicode Mathematical operators| image:: /img/img_127.png
.. |Unicode Miscellaneous symbols| image:: /img/img_128.png
.. |Unicode Mathematical alphanumeric symbols| image:: /img/img_129.png
.. |Unicode Mathematical alphanumeric symbols 2| image:: /img/img_130.png
.. |Unicode Mathematical alphanumeric symbols 3| image:: /img/img_131.png
.. |Unicode Mathematical alphanumeric symbols 4| image:: /img/img_132.png

----

docs/err.rst
------------

=========================
Error recovery in Tralics
=========================

This file list most of all errors produced by *Tralics*.

Accents
-------

The command ``\a`` allows you to put an accent on a character. In fact
``\a'e`` is the same as ``\'e``. The first line produces three errors,
the last line five é.

.. container:: ltx-source

   ::

      11 \a{\bb} \a{12} \a{W}x
      12 \a'e \a'{e} \a{'}e \a{'}{e}  \a {'} {e}

.. container:: log_out

   ::

      Error signaled at line 11 of file tty:
      Bad syntax of \a, argument not a character \bb.
      Error signaled at line 11 of file tty:
      wanted a single token as argument to \a.
      Error signaled at line 11 of file tty:
      Bad syntax of \a, argument is W.

After the accent command, for instance ``\^``, there should come a
single letter, with or without braces. The first line produces six
errors, the second is equivalent to añêañê

.. container:: ltx-source

   ::

      1 a\~{}b\^{}ca\~{}b\^{}c \^{ee}\^{\foo}
      2 a\~n\^ea\~{n}\^{e}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Error in accent, command = \~
      \~{} is the wrong way to put a tilde in an URL.
      Error signaled at line 1 of file tty:
      Error in accent, command = \^
      Things like {\'{}} are a bit strange.
      Error signaled at line 1 of file tty:
      Error in accent, command = \~
      \~{} is the wrong way to put a tilde in an URL.
      Error signaled at line 1 of file tty:
      Error in accent, command = \^
      Things like {\'{}} are a bit strange.
      Error signaled at line 1 of file tty:
      Error in accent, command = \^
      Wanted a single token.
      Error signaled at line 1 of file tty:
      Error in accent, command = \^
      Letter needed instead of \foo.

In some cases you can put a double accent on a letter. The first line
produces four errors signaled by ``\a``, the second line shows correct
syntax.

.. container:: ltx-source

   ::

      1 \^{\a\foo} \^{\a+e} \^{\a{}e} \^{\a'{ee}} 
      2 \^{\'e} \a^{\a'e}\a^{\a'{e}}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Bad syntax of \a, argument not a character \foo.
      Error signaled at line 1 of file tty:
      Bad syntax of \a,  argument is {Character + of catcode 12}.
      Error signaled at line 1 of file tty:
      Bad syntax of \a,  argument is {Character { of catcode 1}.
      Error signaled at line 1 of file tty:
      Error in accent, command = \^
      Wanted a single token.

*Tralics* allow you to put any accent on any letter. In the code that
follows, we redefine the command that creates a composite character.
Thus the third line provokes two errors while in general it gives none.
You cannot put an accent on a non-letter and you cannot put a double
accent on a letter if the result is not a Unicode character. Line four
yields four errors. The last line shows that you can put an accent on å,
æ and ø (and their upper case equivalent) entered as ``\aa``, ``\ae``
``\o``.

.. container:: ltx-source

   ::

      1 \makeatletter \def\@unicode@composite#1{\badchar#1}
      2 \def\badchar#1#2{\error{bad accent  on #1}}
      3 \`x  \u z
      4 \=+\=2\=é \^{\'i}
      5 \=\i\=\ae\'aa\'\o

.. container:: log_out

   ::

      Error signaled at line 3 of file tty:
      Error: bad accent on x.
      Error signaled at line 3 of file tty:
      Error: bad accent on z.
      Error signaled at line 4 of file tty:
      Error in accent, command = \=
      Cannot put accent on non-letter character +.
      Error signaled at line 4 of file tty:
      Error in accent, command = \=
      Cannot put accent on digit 2.
      Error signaled at line 4 of file tty:
      Error in accent, command = \=
      Cannot put accent on a non 7-bit character.
      Error signaled at line 4 of file tty:
      Error in accent, command = \^\'
      Cannot put accent on letter i.

Errors in tables
----------------

The first argument to ``\newcolumntype`` has to be a 7- bit character.
The first two lines provoke some errors

.. container:: ltx-source

   ::

      1 \newcolumntype{}{xx}\newcolumntype{foo}{xx}
      2 \newcolumntype{é}{xx}\newcolumntype{\foo}{xx}
      3 \newcolumntype{C}{{>$}c<{$}}
      4 \newcolumntype{d}[1]{>{\rightdots{#1}}r<{\endrightdots}}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Empty argument to \newcolumntype.
      Error signaled at line 1 of file tty:
      More than one token in argument to \newcolumntype.
      Error signaled at line 2 of file tty:
      Argument to \newcolumntype is not a 7bit character.
      Error signaled at line 2 of file tty:
      Argument to \newcolumntype is not a 7bit character.

If you say ``\newcolumntype{D}{xx}``, then D will be replaced by xx, and
this is checked again; an error is signaled if a loop is detected. After
the replacement, errors are signaled if the result is not a known
character.

.. container:: ltx-source

   ::

      1 \newcolumntype{D}{D}
      2 \newcolumntype{E}{fg}
      3 \def\foo{33}\newcolumntype{F}{\foo}
      4 \begin{tabular}{D} x \end{tabular}
      5 \begin{tabular}{E} x \end{tabular}
      6 \begin{tabular}{F} x \end{tabular}

.. container:: log_out

   ::

      Error signaled at line 4 of file tty:
      array preamble expansion: Infinite loop?.
      Error signaled at line 5 of file tty:
      Wrong character in array preamble f.
      Error signaled at line 5 of file tty:
      Wrong character in array preamble g.
      Error signaled at line 6 of file tty:
      Wrong character in array preamble \foo.

The last line here shows a list of all possible characters in an array
preamble. Some characters take an argument (shown in braces here). This
may signal an error. There are some restrictions you cannot use a
less-than-sign, an at-sign or a exclamation point anywhere.

.. container:: ltx-source

   ::

      1 \def\foo#1{\begin{tabular}{#1} x \end {tabular}}
      2 \foo{!}\foo{@}\foo{c<}\foo{>}\foo{m}\foo{p}\foo{b}
      3 \foo{c>{}@{}}\foo{c>{}!{}}\foo{<{x}}
      4 \begin{tabular}{|clr!{1}@{2}c<{3}>{4}m{5}p{6}b{7}} x \end{tabular}

.. container:: log_out

   ::

      Error signaled at line 2 of file tty:
      Array preamble: argument missing for !.
      Error signaled at line 2 of file tty:
      Array preamble: argument missing for @.
      Error signaled at line 2 of file tty:
      Array preamble: argument missing for <.
      Error signaled at line 2 of file tty:
      Array preamble: argument missing for >.
      Error signaled at line 2 of file tty:
      Array preamble: argument missing for m.
      Error signaled at line 2 of file tty:
      Array preamble: argument missing for p.
      Error signaled at line 2 of file tty:
      Array preamble: argument missing for b.
      Error signaled at line 3 of file tty:
      illegal ! or @.
      Error signaled at line 3 of file tty:
      illegal ! or @.
      Error signaled at line 3 of file tty:
      unexpected less-than sign.

If the array preamble contains ``>{foo}``\ or ``<{bar}`` then the token
list ``foo`` is inserted before the corresponding cell, and then token
list ``bar`` after the cell. These lists are called the *u*- and
*v*-parts. A special marker is inserted after the *v*-part; it is called
the endv token. In the code that follows, the command ``\foo`` reads
this token. When *Tralics* sees ``\end{tabular}`` it finishes the
current cell; however, in the second (commented out) line, the ``\foo``
command gobbles then endv token and the end of the cell is never seen;
*Tralics* loops without end. On the third line there is a ``\cr``; this
end the current row (and thus the current cell, without inserting a
*v*-part). On line four, we show that ``\cr`` or the endv token cannot
be used outside a table.

.. container:: ltx-source

   ::

      1 \def\foo#1{\gdef\Bar{#1}} 
      2 %\begin{tabular}{c<{\foo}} x& y\end{tabular}
      3 \begin{tabular}{c<{tt\foo}} x& y\cr\end{tabular}
      4 \cr \Bar

.. container:: log_out

   ::

      Error signaled at line 4 of file tty:
      bad \cr.
      Error signaled at line 4 of file tty:
      Bad endv token.

Arithmetic errors
-----------------

The basic commands like ``\advance``, ``\multiply`` and ``\divide`` do
not always test for overflow. (the ``\XX`` macro produces never an
overflow, while the second call of ``\YY`` signals an error).

.. container:: ltx-source

   ::

      1 \def\XX{\advance \dimen0 by15000pt }
      2 \def\YY{\advance \dimen0 by \dimen0 }
      3 \dimen0= 17pt \XX \XX \XX \XX \XX \XX \XX
      4 \dimen0= 15000pt \YY \YY
      5 \count0=1234 \dimen0=5678pt \skip0= 3pt plus 5pt minus 6pt
      6 \divide \count0 by 0 \divide \dimen0 by 0\divide \skip0 by 0
      7 \dimen0=3000em \dimen0=4000ex \count0=9876543210

.. container:: log_out

   ::

      Error signaled at line 4 of file tty:
      Arithmetic overflow, threshold=1073741823, cur val=1966080000.
      Error signaled at line 6 of file tty:
      Arithmetic overflow, division by 0
      in 1234/0.
      Error signaled at line 6 of file tty:
      Arithmetic overflow, division by 0
      in 372113408/0.
      Error signaled at line 6 of file tty:
      Arithmetic overflow, division by 0.
      Error signaled at line 7 of file tty:
      Arithmetic overflow, threshold=2^{30}
      in 3000*655360+0.
      Error signaled at line 7 of file tty:
      Arithmetic overflow, threshold=2^{30}
      in 4000*278528+0.
      Error signaled at line 7 of file tty:
      number too big.

On the other hand commands like ``\numexpr`` perform regular overflow
checks. The error messages are also a bit different.

.. container:: ltx-source

   ::

       1 \def\N#1{\the\numexpr #1\relax}
       2 \def\D#1{\the\dimexpr #1\relax}
       3 \def\G#1{\the\glueexpr #1\relax}
       4 \D{15000pt+15000pt}
       5 \N{12/0}\D{12pt/0}\G{12pt/0}
       6 \N{12*3/0}\D{12pt*3/0}\G{12pt*3/0}
       7 \D{1073741824sp}\G{1073741824sp}\G{0pt plus 1073741824sp}
       8 \D{16384pt} \G{16384pt plus 16384pt minus 16384pt}
       9 \dimen0= 1639pt \multiply\dimen0 by 10 \D{16384pt*10}
      10 \D{16384pt*10}  \G{15000pt *3/2} \G{15000pt *2/3}
      11 \N{2147483000+ 700}\G{0pt plus 15000pt+0pt plus 15000pt}

.. container:: log_out

   ::

      Error signaled at line 4 of file tty:
      Arithmetic overflow, threshold=2^{30}
      in 983040000+983040000.
      Error signaled at line 5 of file tty:
      Division by zero.
      Error signaled at line 5 of file tty:
      Division by zero.
      Error signaled at line 5 of file tty:
      Division by zero.
      Error signaled at line 6 of file tty:
      Division by zero.
      Error signaled at line 6 of file tty:
      Division by zero.
      Error signaled at line 6 of file tty:
      Division by zero.
      Error signaled at line 7 of file tty:
      Arithmetic overflow, threshold=1073741823, cur val=1073741824.
      Error signaled at line 7 of file tty:
      Arithmetic overflow, threshold=1073741823, cur val=1073741824.
      Error signaled at line 7 of file tty:
      Arithmetic overflow, threshold=1073741823, cur val=1073741824.
      Error signaled at line 8 of file tty:
      Arithmetic overflow, threshold=2^{14}
      for 16384.
      Error signaled at line 8 of file tty:
      Arithmetic overflow, threshold=2^{14}
      for 16384.
      Error signaled at line 8 of file tty:
      Arithmetic overflow, threshold=2^{14}
      for 16384.
      Error signaled at line 8 of file tty:
      Arithmetic overflow, threshold=2^{14}
      for 16384.
      Error signaled at line 9 of file tty:
      Arithmetic overflow, threshold=2^{30}=16384pt
      in 107413504*10.
      Error signaled at line 9 of file tty:
      Arithmetic overflow, threshold=2^{14}
      for 16384.
      Error signaled at line 9 of file tty:
      Arithmetic overflow, threshold=2^{30}=16384pt
      in 1073741823*10.
      Error signaled at line 10 of file tty:
      Arithmetic overflow, threshold=2^{14}
      for 16384.
      Error signaled at line 10 of file tty:
      Arithmetic overflow, threshold=2^{30}=16384pt
      in 1073741823*10.
      Error signaled at line 10 of file tty:
      Arithmetic overflow
      in 983040000*3/2.
      Error signaled at line 11 of file tty:
      Arithmetic overflow, threshold=2^{31}
      in 2147483000+700.
      Error signaled at line 11 of file tty:
      Arithmetic overflow, threshold=2^{30}
      in 983040000+983040000

There are at most 256 possible fonts, and you might see *fatal: font
table overflow* after too many uses of ``\newfont``. Trying to modify a
parameter of non-existing font is an error. Moreover, indices must be in
the range zero to 100000. The last line here is correct.

.. container:: ltx-source

   ::

      1 \newfont\foo=cmr10
      2 \skewchar \empty 10 \fontdimen0 \empty 10pt
      3 \fontdimen -3 \foo 10pt \fontdimen 123456 \foo 10pt
      4 \skewchar \foo 10 \fontdimen0 \foo 10pt

.. container:: log_out

   ::

      Error signaled at line 2 of file tty:
      Missing font identifier.
      Error signaled at line 2 of file tty:
      attempt to modify unexistent font param.
      Error signaled at line 2 of file tty:
      Missing font identifier.
      Error signaled at line 2 of file tty:
      attempt to modify unexistent font param.
      Error signaled at line 3 of file tty:
      attempt to modify unexistent font param.
      Error signaled at line 3 of file tty:
      attempt to modify unexistent font param.

We show some errors signaled while parsing numbers

.. container:: ltx-source

   ::

       1 \catcode0=17 \mathcode0=32800 \sfcode0=32800 \delcode0=1234567890
       2 \lccode0=66000 \uccode0=66000 \lccode0=-1
       3 \advance\par by 3pt
       4 \count0=1234567890
       5 \advance \skip0by \muskip0 \advance \muskip0by \skip0
       6 \advance \muskip0by 3pt \advance \muskip0by 3mu
       7 \advance \skip0by 3mu
       8 \advance\skip0 by 3ex plus 2fillll
       9 \count32000=zero \count0=12345678901

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Invalid code (out of bounds)
      \catcode wants 0<=N<=15, got N=17.
      Error signaled at line 1 of file tty:
      Invalid code (out of bounds)
      \mathcode wants 0<=N<=32768, got N=32800.
      Error signaled at line 1 of file tty:
      Invalid code (out of bounds)
      \sfcode wants 0<=N<=32767, got N=32800.
      Error signaled at line 1 of file tty:
      Invalid code (out of bounds)
      \delcode wants 0<=N<=16777215, got N=1234567890.
      Error signaled at line 2 of file tty:
      Invalid code (out of bounds)
      \lccode wants 0<=N<=65535, got N=66000.
      Error signaled at line 2 of file tty:
      Invalid code (out of bounds)
      \uccode wants 0<=N<=65535, got N=66000.
      Error signaled at line 2 of file tty:
      Invalid code (out of bounds)
      \lccode wants 0<=N<=65535, got N=-1.
      Error signaled at line 3 of file tty:
      Invalid argument for \advance.
      Error signaled at line 5 of file tty:
      Incompatible glue units in \advance
      in conversion from mu to glue.
      Error signaled at line 5 of file tty:
      Incompatible glue units in \advance
      in conversion from glue to mu.
      Error signaled at line 6 of file tty:
      Incompatible glue units in \advance
      Expected mu unit, found something else.
      Error signaled at line 7 of file tty:
      Missing unit (replaced by pt) m.
      Error signaled at line 8 of file tty:
      Illegal unit of measure (replaced by filll).
      Error signaled at line 9 of file tty:
      Bad register code replaced by 0
      \count wants 0<=N<=1023, with N=32000.
      Error signaled at line 9 of file tty:
      Missing number, treated as zero scanned by \count.
      Error signaled at line 9 of file tty:
      number too big.

The first argument of ``\setlength`` has to be a command name, generally
a register allocated by ``\newlength``. Since there is only a finite
number of counters, you may see errors like *Overflow in \\newdimen; max
value is 1023*. The argument to ``\newif`` must start with the two
letters I and F. The ``\read`` command expands its arguments when
looking at a 'to' keyword, this is why we make sure ``\foo`` exists. We
show some errors signaled by the ``calc`` package. **Note:** the last
line number should be 9 and not 8. This is because of the
``\usepackage`` command in interactive mode; if you put the code in a
file, everything will be OK; however, if the code follows
``\begin{document}``, you will get another error; *Bad \\usepackage
command. The following command is not in outer vertical mode:
\\usepackage*. Note also that the line without a number should not be
put in the file, but given as answer to ``\read``. If nevertheless it is
in the file, then line you type will be executed. in particular, you get an
endless loop if the answer contains ``\foo``.

.. container:: ltx-source

   ::

       1 \newlength\mylength \newif\myif
       2 \setlength{\dimen0}{2cm}\setlength{\mylength}{2cm}
       3 \the\par
       4 \let\foo\relax \read0 \foo
           This line is read into \foo
       5 \the\numexpr(2=3)
       6 \the\fontdimen2\relax
       7 \par\usepackage{calc}
       8 \setlength{\parindent}{3Pt/0}\setlength{\parindent}{3Pt=0}
       8 \setbox0=\par

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      token list \newif does not start with if.
      Error signaled at line 2 of file tty:
      The command \setlength takes one token as argument.
      Error signaled at line 3 of file tty:
      You can't use `\par' after \the.
      Error signaled at line 4 of file tty:
      Missing to inserted.
      Error signaled at line 5 of file tty:
      Expected + - * / or ); closing paren inserted.
      Error signaled at line 6 of file tty:
      Missing font identifier.
      Error signaled at line 8 of file tty:
      Arithmetic overflow, division by 0
      in 196608/0.
      Error signaled at line 8 of file tty:
      unexpected token in calc
      {Character = of catcode 12}.
      Error signaled at line 8 of file tty:
      A box was assumed to be here, got \par.

Errors in the bibliography
--------------------------

At the end of the job, *Tralics* reads the bibliography, in order to
solve all unsolved references, and translates the corresponding. parts.
The bibliography file shown here has some errors. We shall comment them
one after the other.

For Inria's activity report you can see additional errors of the form
*entry moved from refer to year because* either there is no year field,
it is invalid, is the current year, or because the reference is not yet
published. There are errors of the form *the year field of this entry
should be* XXX, it is missing or YYY.

.. container:: ltx-source

   ::

      26 \bibliography{test}
      27 \cite{foo, foo1,foo2,foo3,foo4,foo5,foo6,foo7,foo8} 
      28 \bibitem {foo2}\bibitem {foo2}
      29 \section{foo}\XMLsolvecite{foo3}

This is the bibliography database

.. container:: ltx-source

   ::

       3 @article {foo, title = {\cite{bar} etc}}
       4 @article {foo1, title = ok}
       5 @article {foo1, title = {ok}}
       6 @article{foo4, 1=2,
       7   author={,, and {},{},{}}, % not a comment
       8   énot7bit is bad
       9   () parens are bad either
      10   xx={} ,author =0,  yy = "foo"-"bar",
      11   author={123}, 
      12  xx=aa(),
      13  author={123})
      14 @article thiswordwrong (foo5, author={Jos{\'e} Gr{\^\i} mm} )
      15 @article{foo6, author="foo&sons", editor = "a,b,c,d"}
      16 @article{foo7, author="foo{ and sons}}",  }
      17 @article{foo8, author="foo \and sons and Jos\'e Gr\^\i mm",  title="foo \and sons",  }
      18 @article

The effect of ``\bibitem{foo}`` is to mark the reference as solved; you
can solve it only once. The effect of ``\XMLsolvecite{foo3}`` acts like
``\bibitem``; it says that the current XML element solves the reference.
This command may fail if the current element has already a unique id
(here the current XML element is the section). The last line here is not
an error: it is just an information, *Tralics* has seen 9 citations, and
has solved one.

.. container:: log_out

   ::

      Error signaled at line 28 of file te.tex:
      Bibliography entry already defined foo2.
      Translating section command div0: foo.
      Error signaled at line 29 of file te.tex:
      Cannot solve (element has an Id) foo3.
      Bib stats: seen 9(1) entries.

There are two entries called ``foo1``, the second one will be ignored.
The first one has ``title=ok``, and *Tralics* needs a value for the
macro ``ok``.

.. container:: log_out

   ::

      Error detected at line 4 of bibliography file test.bib
      in entry foo1 started at line 4
      undefined macro ok.
      Error detected at line 5 of bibliography file test.bib
      in entry foo1 started at line 5
      duplicate entry ignored.

Entry ``foo4`` has a lot of errors. We have first ``1=2``, this is
illegal; a field cannot start with a percent sign, a 8bit-character, an
open parenthesis, etc. In all these cases, the remainder of the current
line will be ignored (and the parser may be in a silly state). You say
``foo#bar`` if you want to concatenate two values; on line 10 there is a
dash, and *Tralics* complains as it expected a comma. The last error is
that the entry is terminated by a parenthesis instead of a closing brace
(a closing parenthesis is allowed, provided that the entry starts with a
parenthesis, see entry foo5).

.. container:: log_out

   ::

      Error detected at line 6 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field name
      it cannot start with a digit
      remaining characters on current line will be ignored.
      Error detected at line 7 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field name
      it cannot start with `%'
      (A percent sign is not a comment character in bibtex)
      remaining characters on current line will be ignored.
      Error detected at line 8 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field name
      it cannot start with `é'
      remaining characters on current line will be ignored.
      Error detected at line 9 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field name
      it cannot start with `('
      remaining characters on current line will be ignored.
      Error detected at line 10 of bibliography file test.bib
      in entry foo4 started at line 6
      duplicate field `author' ignored.
      Error detected at line 10 of bibliography file test.bib
      in entry foo4 started at line 6
      expected comma before a field.
      Error detected at line 10 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field name
      expected `=' sign
      remaining characters on current line will be ignored.
      Error detected at line 11 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field type
      it cannot end with `='
      expecting `,', `#' or `}'
      remaining characters on current line will be ignored.
      Error detected at line 12 of bibliography file test.bib
      in entry foo4 started at line 6
      bad syntax for a field type
      it cannot end with `('
      expecting `,', `#' or `}'
      remaining characters on current line will be ignored.
      Error detected at line 13 of bibliography file test.bib
      in entry foo4 started at line 6
      duplicate field `author' ignored.
      Error detected at line 13 of bibliography file test.bib
      in entry foo4 started at line 6
      bad end delimiter.

On line 15 there is some junk between the keyword ``@article`` and the
opening brace. On line 16 braces do not balance in the string. Finally,
the file ends in the middle of an entry.

.. container:: log_out

   ::

      Error detected at line 14 of bibliography file test.bib
      bad syntax for an entry type
      expected `('  or `{'
      all characters up to next `('  or `{' ignored.
      Error detected at line 16 of bibliography file test.bib
      in entry foo7 started at line 16
      illegal closing brace.
      Error detected at line 18 of bibliography file test.bib
      Illegal end of bibtex database file.

After finishing analysis of the data base, *Tralics* signals an error:
reference foo3 was not found. Some additional errors are signaled. A
name is formed of three parts; last name, first name, junior, separated
by commas. *Tralics* insists that an empty slot be marked by ``{}``.
Moreover at least one of these fields has to be non-empty (if no comma
is given, the only fields contains the first and the last name).

.. container:: log_out

   ::

      Error signaled while handling entry cite:foo3
      undefined reference.
      Error signaled while handling entry cite:foo4 (line 6)
      misplaced comma in bibtex name
      you should say "{},{},foo", instead of  ",,foo" in 
       ,, and {},{},{}.
      Error signaled while handling entry cite:foo4 (line 6)
      misplaced comma in bibtex name
      you should say "{},{},foo", instead of  ",,foo" in 
       ,, and {},{},{}.
      Error signaled while handling entry cite:foo4 (line 6)
      empty name in
       ,, and {},{},{}.

Multiple names should be separated by ``and``, not by commas or an
ampersand. A particularity of bibtex is that commands should not appear
at top-level. You should for instance say ``Jos{\'e}``. *Tralics* allows
``Jos\'e`` as well as ``José``. It signals an error if you want to put
an accent on a non-letter as in ``Gr\^\i mm``. Note also that *Tralics*
considers ``mm`` as the last in this case.

.. container:: log_out

   ::

      Error signaled while handling entry cite:foo6 (line 15)
      unexpected character `&' (did you mean `and' ?)
      bad syntax in author or editor name
      error occurred at character position 4 in the string
       foo&sons.
      Error signaled while handling entry cite:foo6 (line 15)
      too many commas (namely 3) in name
       a,b,c,d.
      Error signaled while handling entry cite:foo8 (line 17)
      commands allowed only within braces
      bad syntax in author or editor name
      error occurred at character position 5 in the string
       foo \and sons and Jos\'e Gr\^\i mm.
      Error signaled while handling entry cite:foo8 (line 17)
      bad accent construct
      bad syntax in author or editor name
      error occurred at character position 28 in the string
       foo \and sons and Jos\'e Gr\^\i mm.
      Error signaled while handling entry cite:foo8 (line 17)
      commands allowed only within braces
      bad syntax in author or editor name
      error occurred at character position 30 in the string
       foo \and sons and Jos\'e Gr\^\i mm.

*Tralics* tells us that it extract seven entries from the data base
(remember that one entry was already solved, and another one missing).
Finally, the translation of entry foo had ``\cite`` command in it. This
is illegal.

.. container:: log_out

   ::

      Seen 7 bibliographic entries.
      Error signaled at line 12:
      Citation after loading biblio?.
      There were 28 errors.

Other errors
------------

The ``\end{figure}`` commands performs some checks, that fail if
``\begin{figure}`` is redefined. You cannot put ``\begin{document}``
inside a group; you cannot use ``\endcsname`` before ``\csname``. You
cannot use hat or underscore characters outside of math mode. There are
30 commands, for instance ``\lastkern``, that are read-only. You should
use them as ``\the\lastkern`` or ``\skip0=\lastkern``; in other cases an
error is signaled; if the command takes an argument, they are not read.
If you say ``\@onlypreamble\foo``, then ``\foo`` cannot be used after
``\begin{document}``. Assume that ``\begin{foo}`` had not been used.
Then ``\endfoo`` is an error, and ``\endfoo`` is not called. But if this
appears in the text then either *Tralics* complains that the command is
undefined, or does nothing, or says that the stack does not contain some
object; There are a few commands (like math environments) that say that
``\begin`` is missing.

.. container:: ltx-source

   ::

      1 \makeatletter
      2 \def\figure {} \begin{figure}  \end{figure}
      3 \def\table {} \begin{table} \end{table}
      4 \@onlypreamble\url.
      5 \begingroup \begin{document} \endcsname ^_
      6 \the\lastkern \skip0=\lastkern
      7 \lastkern \numexpr \fontcharwd \url
      8 \end{foo}\endfoo \endlist \endcenter \endequation

.. container:: log_out

   ::

      Error signaled at line 2 of file tty:
      no figure/table on stack.
      Error signaled at line 2 of file tty:
      Error in pop; stack holds document; trying to pop figure.
      Error signaled at line 3 of file tty:
      no figure/table on stack.
      Error signaled at line 3 of file tty:
      Error in pop; stack holds document; trying to pop table.
      Error signaled at line 5 of file tty:
      \begin{document} not at level 0.
      Error signaled at line 5 of file tty:
      Extra \endcsname.
      Error signaled at line 5 of file tty:
      Missing dollar not inserted, token ignored: {Character ^ of catcode 7}.
      Error signaled at line 5 of file tty:
      Missing dollar not inserted, token ignored: {Character _ of catcode 8}.
      Error signaled at line 7 of file tty:
      Read only variable \lastkern.
      Error signaled at line 7 of file tty:
      Read only variable \numexpr.
      Error signaled at line 7 of file tty:
      Read only variable \fontcharwd.
      Error signaled at line 7 of file tty:
      Can be used only in preamble: \url.
      Error signaled at line 8 of file tty:
      cannot close environment foo.
      Error signaled at line 8 of file tty:
      Undefined command \endfoo.
      Error signaled at line 8 of file tty:
      Error in pop; stack holds document; trying to pop list.
      Error signaled at line 8 of file tty:
      missing \begin environment \endequation.

Errors signaled by the the date package

.. container:: ltx-source

   ::

      207 \usepackage{datenumber}
      208 \setdatenumber{2011}{04}{30} \datedate
      209 \setdatenumber{2011}{13}{30}\setdatenumber{2011}{-5}{30}
      210 \setdatenumber{2011}{04}{32}\setdatenumber{2011}{05}{32}
      211 \setdatenumber{2011}{04}{-3}\setdatenumber{-10}{04}{32}
      212 \setdatenumber{2011}{02}{30}\setdatenumber{2012}{02}{30}

.. container:: log_out

   ::

      Error signaled at line 209 of file tty:
      Date error: month>12 2011/13/30.
      Error signaled at line 209 of file tty:
      Date error: month<1 2011/-5/30.
      Error signaled at line 210 of file tty:
      Date error: day>30 2011/4/32.
      Error signaled at line 210 of file tty:
      Date error: day>31 2011/5/32.
      Error signaled at line 211 of file tty:
      Date error: day<1 2011/4/-3.
      Error signaled at line 211 of file tty:
      Date error: year<1 -10/4/32.
      Error signaled at line 211 of file tty:
      Package datenumber: datenumber < startyear (-10 < \@startyear ).
      Error signaled at line 212 of file tty:
      Date error: day>28 2011/2/30.
      Error signaled at line 212 of file tty:
      Date error: day>29 2012/2/30.

Error signaled by the fp package
--------------------------------

.. container:: ltx-source

   ::

       9 \FPadd\foo{999999999999999999}{.5} ok
      10 \FPmul\fooe\foo{1.0000001} overflow
      11 \FPadd\fooe\foo{.5} bad
      12 \FPdiv\fooe\foo{0.99} 
      13 \FPpascal\foo{200}
      14 \FPtrunc\foo{1234}{-3}
      15 \FPround\foo{1234}{-4}
      16 \FPdiv\foo{3}{0}
      17 \FPln\foo{-3.4}\FPln\foo{0}
      18 \FPexp\foo{41} \FPexp\foo{42}
      19 \FPpow\foo{-1}{2}\FPpow\foo{0}{-2}
      20 \FParccos\foo{1}
      21 \FParccos\foo{1.2}
      22 \FParcsin\foo{1.2}
      23 \FPround\foo{12345678901234567890}{4}

.. container:: log_out

   ::

      Error signaled at line 10 of file te.tex:
      Overflow in FPmul.
      Error signaled at line 11 of file te.tex:
      Overflow in FPadd.
      Error signaled at line 12 of file te.tex:
      Overflow in FPdiv.
      Error signaled at line 13 of file te.tex:
      out of bound 200 max value is 63.
      Error signaled at line 14 of file te.tex:
      Negative number -3 in truncate.
      Error signaled at line 15 of file te.tex:
      Negative number -4 in round.
      Error signaled at line 16 of file te.tex:
      division by zero.
      Error signaled at line 17 of file te.tex:
      Log of negative number.
      Error signaled at line 17 of file te.tex:
      Log of 0.
      Error signaled at line 18 of file te.tex:
      Overflow in FPexp.
      Error signaled at line 19 of file te.tex:
      First argument negative.
      Error signaled at line 21 of file te.tex:
      Number greater than one for \FP@arccos.
      Error signaled at line 22 of file te.tex:
      Number greater than one for \FP@arcsin.
      Error signaled at line 23 of file te.tex:
      overflow in FPread.

Error in math mode
------------------

In a number of cases, *Tralics* stops scanning tokens in math mode when
it sees an error, because it generally minimizes the number of further
errors. Here are some errors.

.. container:: ltx-source

   ::

       1 $\left+\right -$
       2 $\left ( no right;$ 
       3 $no left but \right.$
       4 $a}  we are out of math here
       5 $a \par we are out of math here
       6 $a \frac{b} \par  we are out of math here
       7 $ \end{displaymath} we are out of math here
       8 $$ x $ we are out of math here
       9 $x {  $ y} $ we are out of math here
      10 $ \frac {$} 2$ we are out of math here
      11 $\begin{array}{c} $ x \end{array}$  we are out of math here

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Invalid character in \left or \right
      {Character + of catcode 12}.
      Error signaled at line 1 of file tty:
      Invalid character in \left or \right
      {Character - of catcode 12}.
      Error signaled at line 2 of file tty:
      Missing \right. inserted.
      Error signaled at line 3 of file tty:
      Unexpected \right.
      Error signaled at line 4 of file tty:
      Unexpected }.
      Error signaled at line 5 of file tty:
      Unexpected \par.
      Error signaled at line 6 of file tty:
      Unexpected \par while scanning argument of \frac.
      Error signaled at line 6 of file tty:
      Unexpected }.
      Error signaled at line 7 of file tty:
      Bad \end{displaymath}.
      Error signaled at line 8 of file tty:
      Display math should end with $$.
      Error signaled at line 9 of file tty:
      Out of scope $ ignored, maybe a } is missing here.
      Error signaled at line 10 of file tty:
      Extra $ ignored while scanning argument of \frac.
      Error signaled at line 11 of file tty:
      Extra $ ignored....

In a table, the command ``\multicolumn`` takes 3 arguments. In the first
case shown here, there are too many tokens; this is harmless. In the
second case, there are two few arguments and the ampersand is considered
the last argument. In the third case, the ``\end`` token is the
argument, and *Tralics* is in a bad state; it needs two ``\par``\ s to
get out of math mode. There is a problem on the next line: the ``array``
environment has an optional argument, and the closing bracket is
missing; the mandatory argument is also missing. Some environments like
``gather`` enter display math mode; they are forbidden in math mode. You
can use ``\eqno`` only in display math mode. Only one label is allowed
in a formula. Note the error on the last line: in some case it is not
possible to convert the math expression into MathML.

.. container:: ltx-source

   ::

      1 $\begin{array}{c} \multicolumn{2}{a}{b}{c} & d\end{array} $
      2 $\begin{array}{c} \multicolumn{2}{a}& \end{array} $
      3 $\begin{array}{c} \multicolumn{2}{a}\end{array} $ \par\par
      4 $\begin{array} [ \end{array} $ 
      5 $x \begin {gather} xx \end{gather}y $
      6 $x\eqno y \label {a}\label {b}$
      7 $a\over b \over c  a^b^c a_b_c  a^ ^ b__  c-^d_$
      8 $\hbox{\vbox{foo}} \xbox{foo}{bar}$

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Cell contains garbage after \multicolumn.
      Error signaled at line 2 of file tty:
      Wrong goup delimiter
      got `cell', expected `math'.
      Error signaled at line 2 of file tty:
      Wrong goup delimiter
      got `math', expected `cell'.
      --- {Character & of catcode 4}
      Error signaled at line 2 of file tty:
      Bad math expression.
      Error signaled at line 3 of file tty:
      Missing { inserted before unexpected } in argument of {Character $ of catcode 3}.
      Error signaled at line 3 of file tty:
      Bad \end{}.
      Error signaled at line 3 of file tty:
      Extra $ ignored....
      Error signaled at line 3 of file tty:
      Unexpected \par.
      Error signaled at line 3 of file tty:
      Unexpected \par.
      Error signaled at line 3 of file tty:
      Cell contains garbage after \multicolumn.
      Error signaled at line 4 of file tty:
      missing ].
      Error signaled at line 4 of file tty:
      missing argument.
      Error signaled at line 5 of file tty:
      bad math env gather.
      Error signaled at line 6 of file tty:
      Command \eqno allowed only in display math.
      Error signaled at line 6 of file tty:
      Label will be lost: a.
      Error signaled at line 7 of file tty:
      Too many commands of type \over.
      Error signaled at line 7 of file tty:
      double superscript.
      Error signaled at line 7 of file tty:
      double subscript.
      Error signaled at line 7 of file tty:
      Two consecutive _ or ^ characters.
      Error signaled at line 7 of file tty:
      Two consecutive _ or ^ characters.
      Error signaled at line 7 of file tty:
      Math formula should not finish with _.
      Error signaled at line 8 of file tty:
      bad hbox (see transcript file for details).
      --- \xbox
      Error signaled at line 8 of file tty:
      Bad math expression.

Parsing errors
--------------

| In some cases *Tralics* expects an opening brace and sees none, or
  sees a closing brace. Various error messages may be issued:
| *A left brace was mandatory here, so I've put one in*,
| *Extra closing brace (scanning started at line 17) for argument to
  \\foo*,
| *Too many closing braces*
| *Missing { inserted before unexpected } in argument of \\foo*,
| *Spurious close brace removed*,
| *missing brace for token register \\everyhbox*,
| *too many closing braces in \\read*.

| A *runaway* error is signaled when scanning of an argument is
  interrupted by an end-of-file or sometimes ``\par`` or any macro
  declared ``\outer``. You could see messages like
| *End of data reached while scanning end of environment foo*,
| *End of data reached while scanning a group; scanning argument of
  \\foo*
| *End of data reached while scanning argument of \\foo*
| *End of data reached while scanning start of argument*
| *Runaway argument?; Paragraph ended while scanning an argument of
  \\foo*
| *End of data reached while scanning \\fi for condition started on line
  17*
| *End of data reached while expecting \\endcsname*
| *End of data reached while scanning content of foo*;
| *end of data instead of a number after #*
| *Unterminated \\if*
| *\\if at end of file*
| *unbalanced \\read*.

On line 3, the name of the new command is illegal and the body is
missing. On line four, the open brace is missing after the (optional)
arguments of ``\hbox``. Note the that end-of-file after ``\iffalse``
confuses *Tralics* a bit.

.. container:: ltx-source

   ::

       1 \def\foo#1{} \foo{\par}
       2 \outer\def\Foo{} \def\foo#1{} \foo{\Foo}
       3 \newcommand{\foo\bar}. 
       4 \hbox foo}
       5 \iffalse

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Runaway argument?
      Paragraph ended while scanning an argument of \foo.
      Error signaled at line 1 of file tty:
      Extra }.
      Error signaled at line 2 of file tty:
      Runaway argument?
      Forbidden control sequence \Foo found while scanning use of \foo.
      Error signaled at line 2 of file tty:
      Extra }.
      Error signaled at line 3 of file tty:
      Attempt to define: \foo \bar .
      Error signaled at line 3 of file tty:
      Only one token allowed in argument list of \newcommand.
      Error signaled at line 3 of file tty:
      A left brace was mandatory here, so I've put one in.
      Argument was replaced by {}.
      Error signaled at line 4 of file tty:
      A left brace was mandatory here, so I've put one in.
      Error signaled at line 5 of file tty:
      Incomplete \if? missing \fi inserted
      End of file in conditional started at line 5.
      Error signaled at line 5 of file tty:
      End of data reached while scanning \fi
      for condition started on line 5.
      Error signaled at line 5 of file tty:
      Extra \fi
      I'm ignoring this; it doesn't match any \if.

On the first line the specification of the the number of arguments is
wrong. On the second line there should be ``#1`` instead of ``#2``. On
line 3, there are attempt to insert ``\char`` inside a name. On line 4,
we try to globally set the counter ``foo``; this is an error since the
counter is undefined. Note the assignment is global, so that ``\global``
is useless; in this case, the prefix applies to ``{0}`` since other
tokens have been discarded. Line 5 shows that the prefix is usually
accepted, but other prefixes like ``\log`` or ``\outer`` apply only to
``\def``. One line 6 we have a silly definition of ``\c@foo``.

.. container:: ltx-source

   ::

      1 \newcommand\fooA[25]{} \newcommand\fooB[\one]{} \newcommand\fooC[x]{} 
      2 \def\foo#2{}
      3 \csname \char 32\endcsname \newcounter{\char 32}
      4 \global\relax\setcounter{foo}{0}
      5 \global\setcounter{page}{0}\long\outer\setcounter{page}{0}
      6 \makeatletter\let\c@foo\relax\value{foo}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Bad syntax in optional argument
      Only one token allowed
      I will assume that the command takes no argument.
      Error signaled at line 1 of file tty:
      Bad syntax in optional argument
      Commands are not allowed
      I will assume that the command takes no argument.
      Error signaled at line 1 of file tty:
      Bad syntax in optional argument
      Argument should be a digit
      I will assume that the command takes no argument.
      Error signaled at line 2 of file tty:
      Error while scanning definition of \foo
      got #{Character 2 of catcode 12}, expected #1.
      Error signaled at line 3 of file tty:
      Invalid token \char
      found between \csname and \endcsname.
      Error signaled at line 3 of file tty:
      Extra \endcsname.
      Error signaled at line 3 of file tty:
      Invalid token \char
      found in counter name.
      Error signaled at line 3 of file tty:
      Extra \endcsname.
      Error signaled at line 4 of file tty:
      Unknown counter `foo'.
      Error signaled at line 4 of file tty:
      You cannot use the prefix \global before {Character { of catcode 1}.
      Error signaled at line 5 of file tty:
      You cannot use the prefix \global\long\outer  before \c@page.
      Error signaled at line 6 of file tty:
      Invalid counter `foo'.

We show here some errors produced by the ``\verb`` command. It cannot be
an argument of a command, and the argument of ``\verb`` must be on the
current line. You can define a short-verb command, so that ``|foo|`` is
the same as ``\verb+foo+``. You can save verbatim text (see line 5). The
verbatim text has to be on the current line. At line 8, we see that a
verbatim-like environment cannot be an argument of a command.

At line 9 is an instance of a special error: in some cases, *Tralics*
expects an internal buffer to be empty. This is normally the case if
``\item`` immediately follows the start of the environment, this is also
the case when the environment is not buried in a box or a table like
here. A remedy might be to insert a ``\par`` token before the ``\item``

.. container:: ltx-source

   ::

      1 \def\foo{\verb=bar=} \foo ?
      2 \verb+foo
      3 \DefineShortVerb{\|}\DefineShortVerb{\|}\UndefineShortVerb{\+}
      4 \DefineShortVerb{}\DefineShortVerb{abc}\DefineShortVerb{\abc}
      5 \SaveVerb{foo}|bar| \SaveVerb{foo}
      6 \endlinechar=-1
      7 \verb
       ok \def\foo{\begin{comment} etc} \foo
      9 \hbox{\begin{description} bad\item o\end{description}}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      \verb in argument of a command.
      Error signaled at line 2 of file tty:
      \verb terminated by end of line.
      Error signaled at line 3 of file tty:
      \DefineShortVerb: Already a short verb \|.
      Error signaled at line 3 of file tty:
      \UndefineShortVerb: Not a short verb \+.
      Error signaled at line 4 of file tty:
      \DefineShortVerb: One argument required.
      Error signaled at line 4 of file tty:
      \DefineShortVerb: One argument required.
      Error signaled at line 4 of file tty:
      \DefineShortVerb: A one-char control sequence is needed instead of \abc.
      Error signaled at line 5 of file tty:
      \SaveVerb : no delimiter found.
      Error signaled at line 7 of file tty:
      \verb at end of line.
      Error signaled at line 8 of file tty:
      Verbatim-like environment in argument : comment.
      Error signaled at line 9 of file tty:
      In \item, non-empty buffer 
       bad
      Some text may be lost.

Macros
------

We start with showing what happens when an undefined command or
environment is seen. We also show some errors that happen when defining
a command. The last error on line 9 is because\ ``\@ifdefinable``
signals an error when the command cannot be defined.

.. container:: ltx-source

   ::

      1 \undefined \begin{undefined} \end{undefined}
      2 \newcommand{b}\renewcommand{b}
      3 \newcommand{\b}\renewcommand{\B}
      4 \newcommand{}{}\providecommand{12}{}
      5 \newboolean{foo}\newboolean{foo}\newboolean{\par}
      6 \setboolean {foo}{OK}\setboolean {bar}{false}
      7 \def\foo\bar#1{#1} \foo c
      8 \def\foo#x#1{xx #x#3}
      9 \makeatletter \@ifdefinable{foo}{ok}\@ifdefinable\bar{ok}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Undefined command \undefined.
      Error signaled at line 1 of file tty:
      Undefined environment undefined.
      Error signaled at line 2 of file tty:
      Error signaled at line 2 of file tty:
      A left brace was mandatory here, so I've put one in.
      Argument was replaced by {}.
      Error signaled at line 3 of file tty:
      A left brace was mandatory here, so I've put one in.
      Argument was replaced by {}.
      Error signaled at line 3 of file tty:
      Error signaled at line 3 of file tty:
      Undefined command \B.
      Error signaled at line 4 of file tty:
      Empty argument list for \newcommand.
      Error signaled at line 4 of file tty:
      Attempt to define: 12.
      Error signaled at line 4 of file tty:
      Only one token allowed in argument list of \providecommand.
      Error signaled at line 5 of file tty:
      boolean \iffoo already defined in \newboolean.
      Error signaled at line 5 of file tty:
      Invalid token \par found while scanning newboolean.
      Error signaled at line 5 of file tty:
      Extra \endcsname.
      Error signaled at line 6 of file tty:
      boolean value neither true nor false: ok.
      Error signaled at line 6 of file tty:
      Undefined boolean \barfalse.
      Error signaled at line 7 of file tty:
      Use of \foo doesn't match its definition;
      got c, expected \bar.
      Error signaled at line 8 of file tty:
      Error while scanning definition of \foo
      got #x, expected #1.
      Error signaled at line 8 of file tty:
      bad token (x) after #.
      Error signaled at line 8 of file tty:
      bad token ({Character 3 of catcode 12}) after #.
      Error signaled at line 9 of file tty:
      Wrong syntax in \@ifdefinable.
      Error signaled at line 9 of file tty:
      Undefinable command \bar.

The commands ``&`` and ``\\`` can be used in an array. The command
``\\`` also be used as end of paragraph marker, in some cases; otherwise
an error will be signaled. An error is signaled for the two ``\url``
commands for historical reasons. The error message of ``\href`` is a bit
strange.

.. container:: ltx-source

   ::

      1 \begin{tabular}{c}\newline 1\\2 \end{tabular}
      2 \hbox{a\\ b\newline c} &
      3 \sin  o
      4 \color{blue}
      5 \url{()}\url{}
      6 \href{\texttt{x}}{y}  

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Bad use of \newline.
      Error signaled at line 2 of file tty:
      Bad use of \\.
      Error signaled at line 2 of file tty:
      Bad use of \newline.
      Error signaled at line 2 of file tty:
      Unexpected &.
      Error signaled at line 3 of file tty:
      Math only command \sin.
      (Contrarily to TeX, Tralics does not switch to math much in such a case.)
      Error signaled at line 4 of file tty:
      Undefined color blue.
      Error signaled at line 5 of file tty:
      Invalid URL value.
      Error signaled at line 5 of file tty:
      Invalid URL value.
      Error signaled at line 6 of file tty:
      unexpected font change tt.
      you should perhaps use \Href{\url{x}}{y}
        instead of \Href{y}{\url{x}}

The commands ``&`` and ``\\`` can be used in an array. The command
``\\`` also be used as end of paragraph marker, in some cases; otherwise
an error will be signaled

Some other errors

.. container:: ltx-source

   ::

      1 \count0=`\bar
      2 \includegraphics[1=2]{foo}
      3 \ifnum 1 2 \fi \hbox foo}
      4 \label {foo}\label{foo}
      5 \end{} \unless\par
      6 \shipout\box255
      7 \DeclareTextCommand \foo{body of foo}
      8 \xbox{a{\bf b}$c$}{the box}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Improper alphabetic constant \bar.
      Error signaled at line 2 of file tty:
      Invalid key in \includegraphics 1 = 2.
      Error signaled at line 3 of file tty:
      Missing = inserted for comparison {Character 2 of catcode 12}.
      Error signaled at line 3 of file tty:
      A left brace was mandatory here, so I've put one in.
      Error signaled at line 4 of file tty:
      Label 'foo' multiply defined (first use line 4 file tty).
      Error signaled at line 5 of file tty:
      Illegal \end{}.
      Error signaled at line 5 of file tty:
      You cannot use \unless before \par.
      Error signaled at line 6 of file tty:
      \shipout is undefined.
      Error signaled at line 7 of file tty:
      Unimplemented NFSS command \DeclareTextCommand.
      Error signaled at line 8 of file tty:
      A left brace was mandatory here, so I've put one in.
      Argument was replaced by {}.

There are some not-yet implemented commands.

.. container:: ltx-source

   ::

      1 \middle \accent 27 \delimiter 17
      2 \halign {etc} \insert 12{value} \mathaccent 12 \mathchar 13
      3 \noalign \noboundary \omit \radical 12
      4 \vadjust {code}
      5 \valign \span \dump \widthof \heightof \depthof 
      7 \vcenter{a box}
      7 \textquotestraightbase
      8 \textquotestraightdblbase

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Unimplemented e-TeX extension \middle.
      Error signaled at line 1 of file tty:
      Unimplemented command \accent.
      Error signaled at line 1 of file tty:
      Unimplemented command \delimiter.
      Error signaled at line 2 of file tty:
      Unimplemented command \halign.
      Error signaled at line 2 of file tty:
      Unimplemented command \insert.
      Error signaled at line 2 of file tty:
      Unimplemented command \mathaccent.
      Error signaled at line 2 of file tty:
      Unimplemented command \mathchar.
      Error signaled at line 3 of file tty:
      Unimplemented command \noalign.
      Error signaled at line 3 of file tty:
      Unimplemented command \noboundary.
      Error signaled at line 3 of file tty:
      Unimplemented command \omit.
      Error signaled at line 3 of file tty:
      Unimplemented command \radical.
      Error signaled at line 4 of file tty:
      Unimplemented command \vadjust.
      Error signaled at line 5 of file tty:
      Unimplemented command \valign.
      Error signaled at line 5 of file tty:
      Unimplemented command \span.
      Error signaled at line 5 of file tty:
      Unimplemented command \dump.
      Error signaled at line 5 of file tty:
      Unimplemented command \widthof.
      Error signaled at line 5 of file tty:
      Unimplemented command \heightof.
      Error signaled at line 5 of file tty:
      Unimplemented command \depthof.
      Error signaled at line 6 of file tty:
      Unimplemented command \vcenter.
      Error signaled at line 7 of file tty:
      Unimplemented command \textquotestraightbase.
      Error signaled at line 8 of file tty:
      Unimplemented command \textquotestraightdblbase.

Keywords
--------

We show here some errors signaled by the xkeyval package.

.. container:: ltx-source

   ::

      30 \makeatletter\usepackage{xkeyval}\par
      31 \define@key {XK\relax V}{foo}
      32 \define@key {XKV}{foo\char16 etc}{12}
      33 \disable@keys [XKV]{XKV}{foo}
      34 \define@key {aa}{a}{}\define@key {aa}{b}{}\define@key {aa}{c}{}
      35 \setkeys{aa}{a=1,\savevalue{b}=2, \savevalue{c}=\usevalue{b}}
      36 \setkeys{aa}{a=1,\savevalue{d}=2, \savevalue{c}=\usevalue{a}}
      37 \setkeys{aa}{a=\usevalue\bar}
      38 \setkeys{aa}{\savevalue{c}=\usevalue{c}}
      39 \setkeys{aa}{a,b=c,d=e}

.. container:: log_out

   ::

      Error signaled at line 31 of file tty:
      Bad command \relax in XKV family (more errors may follow).
      Error signaled at line 31 of file tty:
      A left brace was mandatory here, so I've put one in.
      Argument was replaced by {}.
      Error signaled at line 32 of file tty:
      bad key name.
      Error signaled at line 32 of file tty:
      A left brace was mandatory here, so I've put one in.
      Argument was replaced by {}.
      Error signaled at line 32 of file tty:
      Extra \endcsname.
      Error signaled at line 33 of file tty:
      xkeyval: `XKV' prefix is not allowed'.
      Error signaled at line 33 of file tty:
      Undefined key cannot be disabled: foo.
      Error signaled at line 36 of file tty:
      Undefined key: d.
      Error signaled at line 36 of file tty:
      No value recorded for key `a'; ignored.
      Error signaled at line 37 of file tty:
      Invalid \usevalue token.
      Error signaled at line 38 of file tty:
      Replace pointer aborted, (infinite loop?).
      Error signaled at line 39 of file tty:
      No value specified for key `a'.
      Error signaled at line 39 of file tty:
      Undefined key: d.

We show here some errors produced by the kvoptions package. There are a
bunch of errors due to the fact that the Declare-XXX-Option commands
check that no macro will be overwritten (note that, in case of error,
some arguments are not read, this might signal further errors). When
loading the package there is an error as BH expects a boolean (true or
false) and VA takes no argument. We first show the TeX file:

.. container:: ltx-source

   ::

      \usepackage[BH=TRUE,VA=0]{kvo}

This is the package file

.. container:: ltx-source

   ::

       4 \ProvidesPackage{kvo}[2007/10/18 kvoptions test]
       5 \RequirePackage{kvoptions}
       6 \SetupKeyvalOptions{family=MCS,prefix=MCS@}
       7 \DeclareVoidOption{VA}{\let\seeva\relax}
       8 \DeclareVoidOption{VB}{}
       9 \DeclareBoolOption[true]{BH}
      10 \DeclareStringOption[foo]{SB}
      11 \def\MCS@SA{}\DeclareStringOption{SA}
      12 \def\MCS@SB{}\DeclareVoidOption{SB}
      13 \def\MCS@SCtrue{}\DeclareBoolOption{SC}
      14 \def\MCS@SDfalse{}\DeclareBoolOption{SD}
      15 \def\ifMCS@SE{}\DeclareBoolOption{SE}
      16 \def\MCS@SFtrue{}\DeclareComplementaryOption{SF}{BH}
      17 \def\MCS@SGtrue{}\DeclareComplementaryOption{SG}{BH}
      18 \DeclareComplementaryOption{SH}{Sh}
      19 \ProcessKeyvalOptions*

.. container:: log_out

   ::

      Error signaled at line 11 of file kvo.plt:
      Cannot redefine \MCS@SA.
      Error signaled at line 11 of file kvo.plt:
      Cannot redefine \MCS@SB.
      Error signaled at line 12 of file kvo.plt:
      Cannot redefine \MCS@SCtrue.
      Error signaled at line 13 of file kvo.plt:
      Cannot redefine \MCS@SDfalse.
      Error signaled at line 14 of file kvo.plt:
      Cannot redefine \ifMCS@SE.
      Error signaled at line 15 of file kvo.plt:
      Cannot redefine \MCS@SFtrue.
      Error signaled at line 16 of file kvo.plt:
      Cannot redefine \MCS@SGtrue.
      Error signaled at line 17 of file kvo.plt:
      Cannot generate code for `SH', no parent Sh.
      Error signaled at line 18 of file kvo.plt:
      Illegal boolean value TRUE ignored.
      Value  should be true or false in package kvo.
      Error signaled at line 18 of file kvo.plt:
      Option VA takes no argument.

We show here errors produced by the date parser. The first line is OK
(unambiguous). Line 5 is OK (order of items is specified).

.. container:: ltx-source

   ::

      1 \formatdate{23/11/2009}\formatdate{23 jan 2009}
      2 \formatdate{23 jan 29} \formatdate{2003 jan feb}
      3 \formatdate{1 32 33}\formatdate{12345 32 33}
      4 \formatdate{today}\formatdate{1 2}
      5 \formatdate{1 2 3 YMD}
      6 \formatdate{1 22 3 YMD}
      7 \formatdate{1 2 33 YMD}
      8 \formatdate{jan 2 3 YMD} \formatdate{2 3 jan  YMD}

.. container:: log_out

   ::

      Error signaled at line 2 of file tty:
      Unable to distinguish between year day and month.
      Error signaled at line 2 of file tty:
      Date has two month fields.
      Error signaled at line 3 of file tty:
      Date has two fields with value>31.
      Error signaled at line 3 of file tty:
      Too many digits in date field.
      Error signaled at line 4 of file tty:
      Expected digits or a month in letters.
      Error signaled at line 4 of file tty:
      Missing fields in date.
      Error signaled at line 6 of file tty:
      Bad month field.
      Error signaled at line 7 of file tty:
      Bad day field.
      Error signaled at line 8 of file tty:
      Bad year field.
      Error signaled at line 8 of file tty:
      Bad day field.

Classes and styles
------------------

Some errors are signaled by classes or packages. Here are some examples.

.. container:: ltx-source

   ::

      1 \ClassError {myclass}{foo}{bar}
      2 \ClassError {myclass}{error line1\MessageBreak error line2}{unused}
      3 \PackageError {mypack}{foo}{bar}
      4 \PackageError {mypack}{error line1\MessageBreak error line2}{unused}
      5 \GenericError{myprefix}{error line1\MessageBreak error line2}{unused}{unused}
      6 \csname @latex@error\endcsname {aa}{unused}
      7 \error{this is an error}

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Class myclass Error: foo.
      Error signaled at line 2 of file tty:
      Class myclass Error: error line1
      (myclass)            error line2.
      Error signaled at line 3 of file tty:
      Package mypack Error: foo.
      Error signaled at line 4 of file tty:
      Package mypack Error: error line1
      (mypack)              error line2.
      Error signaled at line 5 of file tty:
      error line1
      myprefixerror line2.
      Error signaled at line 6 of file tty:
      Tralics Error: aa.
      Error signaled at line 7 of file tty:
      Error: this is an error.

There are some restrictions on the use of ``\documentclass{foo}`` namely
that you can use it only once, only before ``\begin{document}`` and not
inside a paragraph. In all these cases, the same error message is
signaled *Not in outer vertical mode*. *Tralics* read the file foo.plt
if it exists, but does nothing if the file does not exist. In the case
of ``\InputClass`` an error is signaled.

.. container:: ltx-source

   ::

      1 \LoadClass{foo}\InputClass{foo}
      2 \documentclass{foo} \usepackage{foo}
      3 \documentclass{foo} \usepackage{foo}
      4 text
      5 \usepackage{foo}\par \usepackage{foo}
      6 \begin{document} \usepackage{foo}
      7 \begin{document} 

.. container:: log_out

   ::

      Error signaled at line 1 of file tty:
      Cannot input foo.clt.
      Error signaled at line 3 of file tty:
      Bad \documentclass
      The following command is not in outer vertical mode: \documentclass.
      Error signaled at line 5 of file tty:
      Bad \usepackage command
      The following command is not in outer vertical mode: \usepackage.
      Error signaled at line 7 of file tty:
      Two environments named document.

Errrors for the activity report (old version)
---------------------------------------------

The Inria activity report uses some keywords like ``\projet``,
``localisation`` etc. They may signal an error of the form *There is a
problem with the command* followed by *It should be placed before
\\\begin{document}* or *It should be given only once*. A team name has
to be given in upper-case and mixed-case letters, like ``APICS`` and
``Apics``. In case of mismatch *Tralics* complains with *Bad Team name
foo should be case equivalent to bar*. The activity report is split into
modules, that have a name and a title. The name of a module is the name
of the file in which the content of the module will be stored. You may
see *Empty module name* or *invalid module name (\\\ and $ forbidden)*
or. *Module name \`foo' already seen* . Modules are grouped into
sections; which are specified by an optional argument. This may provoke
the following errors *Invalid section name* or *No default section*. You
may also meet *Environment foo is not closed* , or *unexpected end of
file* or *Characters ignored before open brace* or *Characters ignored
at end of line*

The command for producing glossaries in hidden in the current version of
*Tralics*. However, you can still use it. An error is signaled if the
environment is empty.

.. container:: ltx-source

   ::

      1 \begin{@glossaire}\csname@glo\endcsname{foo}{bar}\end{@glossaire}
      2 \begin{@glossaire}\end{@glossaire}

.. container:: log_out

   ::

      Error signaled at line 2 of file tty:
      empty glossaire.

Errrors for the activity report (current version)
-------------------------------------------------

Assume that your document starts with ``\documentclass{ra2009}``. In
this case *Tralics* enters RA mode. It may complain with *Fatal error:
Input file name must be team name followed by 2010* (where 2010 could be
replaced by the another quantity). Let's rename the file to test2010.
You will see *Illegal document class ra2009 should be ra2010*. The
reason is a mismatch between the year in the file name and the class
value. Let's rename the file to Team2010. You will see *Fatal error Only
lowercase letters allowed: Team*. If the team name is empty, you will
also see *Illegal file name of the form safir/2002.tex*

Translation of the Inria Activity Report requires a well-formed
configuration file. You might see errors of the form *The configuration
file for the RA is ra2007.tcf or ra.tcf. It must define a value for the
parameter theme_vals*. Other parameters are ur_vals, affiliation_vals,
profession_vals, section_vals. A variant of section_vals is
fullsection_vals. If not at least two sections are defined by one of
these lists, you will see *Config file did not provide sections*. These
errors are fatal: no XML is produced.

The ra2010.cls class file must provide a bunch of commands, otherwise
you may see errors of the form: *Undefined command
\\rawebstartdocument*. The command ``\projet`` is mandatory. It takes
three argument; if the first is not equal to the file name (without the
year), it might complain with *Package Raweb Error: Invalid Team name
exemple.* The command ``\theme`` was once mandatory; it could produce
error messages the form *Empty or missing theme* or *Invalid theme*; as
a consequence theme_vals is no longer required. The first argument of
the ``module`` environment is the section. In case of error you may see
*Invalid section* if the argument is not in the list of sections defined
by the configuration file, or *Illegal access to fullsection list* (this
is weird) or *No default section* (after the first invocation, the
argument becomes the default section, and there is no need to repeat
it), or *Only one module accepted in composition* (in the current
version, 'composition' is an environment, its translation should be the
only module in the composition section). You may also see *Bad section
fondements after logiciels* if modules are not in the right order.
Module titles should not be empty, otherwise you will get *Empty module
name replaced!* (this is an awful hack). The command ``\UR``, specifies
the localisation of the team; it may produce errors like *Empty
localisation value* or *Illegal localisation value*. One argument to
``\pers`` is a localisation. Errors may be of the form *No default
Research Centre defined* or *Invalid Unit Centre*.

Other Errrors
-------------

If *Tralics* cannot find its input file, it complains with *Fatal error:
Cannot open input file foo.tex*. If two arguments appear to *Tralics* to
be input file names, it complains with *Fatal error: Seen two source
files foo.tex and bar*. No file is translated in these cases.

The ``filecontents`` environment may signal *unable to open file for
writing*. It may signal *bad end of filecontents env* if the ``\end``
command is not placed at the start of the line.

When *Tralics* sees a ``\par`` or ``\noindent`` command in horizontal
mode, it expects the current element to be ``<p>``, this may fail and an
*Invalid \\par command* may be signaled. In general a ``<p>`` element is
started. This may confuse the caller. For instance ``\hbox{\noindent}``
signals *Error in pop; stack holds p; trying to pop hbox.* In the case
of ``\vspace`` you could get *Expected a p element on the stack*

| You may encounter errors like
| *Text found in a mode where no text is allowed*.
| *Command \\foo should occur in bibliographic mode only*
| *Current command should occur in tables only*

If an end of file is reached while in a special environment like
``verbatim`` or ``comment`` you will get *End of data reached while
scanning end of environment verbatim*. In other cases no error is
signaled. You may notice that there is a problem by examining the line
``Save stack +24   -17`` printed at the end. It says that the stack is
not empty.

There may be errors while parsing incorrect XML files

----

docs/latex3.rst
---------------

Implementation of the LaTeX3 Bundle in Tralics
==============================================

Introduction
------------

This document explains the implementation of the LaTeX3 expl3.sty
package. This consists in an extension of the C++ code, a style file
(using normal latex syntax) and a big tex file (using latex3 syntax)
which is expl3-code.tex minus the C++ code.

A partial implementation is available in Tralics version 2.15.4.

The most evident feature of LaTeX3 is that command names contain
underscore and colon characters (no atsign) and are much more explicit.
For instance ``\@ne`` and ``\thr@@`` are LaTeX constants, with value one
and three; in LaTeX3, they are named ``\c_one`` and ``\c_three``.
instead of ``\@tempboxa`` and ``\@tempcnta`` there will be
``\l_tmpa_box`` and ``\g_tmpa_int``; the first one should be used for
local assignment, the second one for global assignment. A variable of
the form ``\l_module_foo_tl`` is local, defined in the module “module”,
named “foo” and contains a token list, while ``\l__module_foo_tl`` is a
private variable of that module. In the case of the kernel, the module
part is omitted from the name.

The two commands ``\module_foo:nnn`` and ``\__module_foo:nnn`` are macro
names, respectively public and private, defined in the module; they take
three arguments (there are three letters after the colon). The meaning
of these letters is the following

-  None. A command whose name ends with a colon takes no argument.
   Example: ``\prg_do_nothing:`` (corresponds to ``\@empty``, is a
   command whose expansion is void, while ``\scan_stop:`` is the sames
   as ``\relax``.
-  ``n``: Unexpanded token or braced token list. Example ``\use:nn``.
   This is a command that takes two arguments, whose expansion is formed
   of these arguments. For instance ``\use:nn {a b}{{c d}}`` expands to
   ``a b{c d}`` (one pair of braces disappears), while ``\use:nn a b``
   expands to ``ab`` (an argument can be preceded by an optional space).
-  ``N``: Single token (unlike ``n``, the argument must not be
   surrounded by braces). Example ``\cs_if_eq:NNTF`` takes for
   arguments, compares the first two, and expands to the third if the
   test is true, to the fourth otherwise. The test is done by
   ``\if_meaning:w`` (aka ``\ifx``) that compares two tokens. It is very
   complicated to grab a single token in TeX, so, generally, all that
   matters is that the arguments consists in a single token; so
   ``\cs_if_eq:NNTF {a}{a} {ok}{\bad}`` expands to ok. If the first
   argument is ``{ab}``, LaTeX compares a and b, and the test is false;
   if the first argument is empty, you could be in trouble. An error is
   signaled in such cases by *Tralics*. On the other hand
   ``\cs_gset_eq:NN`` behaves like ``\global\let``. So
   ``\cs_set_eq:NN    {=}`` tries to redefine the opening brace, which
   is an error (unless the opening brace is an active character, an
   unusual situation).
-  ``T``, ``F``: These are special cases of ``n`` arguments. Example:
   ``\cs_if_eq:NNTF``, ``\cs_if_eq:NNT``, ``\cs_if_eq:NNF`` and
   ``\cs_if_eq_p:NN``, are four commands that process the first two
   arguments in the same way. The command that takes only two parameters
   expand to true or false (this will be explained later on), the first
   one (with four arguments) is explained aove; the other one take three
   argument; the expansion is this argument (if the truth value matches
   the extension) and is empty otherwise. So both
   ``\cs_if_eq:NNT aa {ok}`` and ``\cs_if_eq:NNF ab {ok}`` expand to
   ``ok``. The letters T and F are only used in this case.
-  ``p``: Primitive TeX parameter specification. This is used in command
   that define other commands whose arguments are not specified by a
   suffix. Example: ``\cs_set_nopar:Npn`` is ``\def`` and
   ``\cs_set:Npn`` behaves like ``\long\def``.
-  ``w``: This means that the argument syntaxis “weird” in that it does
   not follow any standard rule. Example ``\if_meaning:w`` cited above;
   this command reads two argument and compares them. It this executes
   the true or false code and skips the other one; this is the “weird”
   part of the syntax. LaTeX3 never defines commands with such a syntax:
   see T and F above.
-  ``D``: This means **Do not use**. Example ``\tex_ifx:D`` and
   ``\tex_let:D``; these are alternate names for ``\ifx`` and ``\let``;
   the idea is to always use macros with a colon in their name in the
   package files. The first macro is also known as ``\if_meaning:w``,
   and the second is like ``\cs_set_eq:NN`` (the difference is that you
   can say ``\let\foo= 3`` where the equals sign and the space that
   follows it are optional, and ``\cs_set_eq:NN~ 3`` makes the active
   character tilde behave like a space and typesets 3.
-  Variants. For instance ``\cs_set_eq:cN {foo}\bar`` is equivalent to
   ``\exp_after:wN \cs_set_eq:cN \cs:w foo\cs_end:\bar`` or, with TeX
   syntax: ``\expandafter \let \csname   foo\endcsname= \bar``. In
   general a variant calls the base function (here ``\cs_set_eq:NN``,
   unless optimiseed for speed.
-  ``c`` variant. As explained above, this means that the argument is
   processed by ``\csname`` (so is a command name). Example ``\use:c``
   is the same as ``\@nameuse`` it reads a sequence of tokens, fully
   expands them, converts the resulting characters into a control
   sequence name (which is the result of the expansion). If the
   expansion contains ``\par``, an error is signaled; note that
   ``\@nameuse`` signals an error is ``\par`` is part of the argument.
   The command ``\cs_if_exist:cTF`` is like ``\cs_if_exist:NTF`` but
   uses ``\if_cs_exist:w`` rather than ``\if_cs_exist:N`` (i.e.,
   ``\ifcsname`` or ``\ifdefined``); the idea is to avoid filling the
   hash table with an undefined token.
-  ``x`` variant. Fully-expanded token or braced token list. Example
   ``\iow_log:x``, which is the same as ``\wlog``; it prints its
   argument in the transcript file; the expansion is done by TeX. Other
   example ``\cs_set_nopar:Npx`` (aka ``\edef``) is the base function
   for doing full expansion. Now ``\use:x{foo}`` is the same as
   ``\edef\tmp{foo}\tmp``. For this reason, the command is not
   expandable, and x-type arguments cannot be nested. Note that
   ``\str_if_eq_x:nnTF`` is similar to ``\str_if_eq:nnTF``. The idea
   here is that the pdftex function that compares two string fully
   expands them; and you have to use ``\unexpanded`` in order to avoid
   this expansion.

----

docs/loop.rst
-------------

Example of the \\loop command in Tralics
========================================

In this page we describe a non-trivial example of the
`\\loop <doc-l.html#cmd-loop>`__ command. We also show how to analyse
the transcript file produced by *Tralics*.

The example
-----------

Consider a document that contains the following code:

.. container:: ltx-source

   ::

      % this is file testloop.tex $Revision: 1.4 $
      %\tracingall
      \let\olda\a %% \newcount defines \a globally...
      \countdef\td 4 \td=0%% no need to allocate a counter
      \newif\ifprime \newif\ifunknown
      \newcount\n \newcount\p \newcount\d \newcount\a \newcount\N
      \def\primes#1{2,~3% assume that #1 is at least 3
        \n=#1 \advance\n by-2 % n more to go
        \p=5 % odd primes starting with p
        \loop\ifnum\n>0 \printifprime\advance\p by2 \repeat}
      \def\printp{,% we will invoke \printp if p is prime
        \N=\n \divide\N by 8 \multiply \N by -8 \advance\N by \n
        \ifnum\N=0 {
        }\else{ }\fi 
        \ifnum\n=1 and~\fi % this precedes the last value
        \number\p \advance\n by -1 }
      \def\printifprime{\testprimality \ifprime\printp\fi}
      \def\testprimality{{\d=3 \global\primetrue
        \loop\trialdivision \ifunknown\advance\d by2 \repeat}}
      \def\trialdivision{\a=\p \divide\a by\d
          \global\advance\td by 1 %% count calls to trialdivision
        \ifnum\a>\d \unknowntrue\else\unknownfalse\fi
        \multiply\a by\d
        \ifnum\a=\p \global\primefalse\unknownfalse\fi}

      The first thirty prime numbers are \primes{30}. trial division macro was
      expanded \the\td\ times. %% Knuth says cpu time=4 sec, I see 0.02
      \let\a\olda %% restore

The result
----------

The XML translation by *Tralics* is:

.. container:: xml_out

   ::

       
      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- translated from latex by tralics 2.2 (pl3)-->
      <unknown>
      <p>The first thirty prime numbers are 2,&nbsp;3, 5, 7, 11, 13,
      17, 19, 23, 29, 31, 37, 41, 43,
      47, 53, 59, 61, 67, 71, 73, 79,
      83, 89, 97, 101, 103, 107, 109, and&nbsp;113. trial division macro was
      expanded 132 times.</p>
      </unknown>

The example above is in the `TeXbook <index.html#texbook>`__, at the end
of Chapter 20. We just added the code that computes the number of calls
of ``\trialdivision``, and the test of ``\n`` mod 8, that avoids long
lines in the XML output. You may wish to look at the description of:
`\\newcount <doc-n.html#cmd-newcount>`__,
`\\newif <doc-n.html#cmd-newif>`__, `\\ifnum <doc-i.html#cmd-ifnum>`__.

What is in the transcript file?
-------------------------------

We show here the content of the transcript file for version 2.15.4
rather than 2.2 (pl3) or 2.7 (pl5). The XML file is the same, modulo (a)
the encoding, which is now UTF-8, (b) the comment line with the version
also indicates teh compilation time, (c) ``&nbsp;`` has been replaced
aby a character. The transcript file starts like this

.. container:: log_out

   ::

      Transcript file of tralics 2.15.4 for file testloop1.tex
      Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      Tralics is licensed under the CeCILL Free Software Licensing Agreement
      Start compilation: 2015/12/02 16:44:19
      OS: Apple, machine maclaurin
      Starting translation of file testloop1.tex.
      Output encoding: UTF8  (idem transcript).
      Left quote is ` right quote is '
      \notrivialmath=1
      ++ Input encoding is 1 (iso-8859-1) for the main file
      ++ file .tralics_rc does not exist.
      ++ file ../confdir/.tralics_rc exists.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file ../confdir/.tralics_rc.
      Configuration file has type \documentclass
      No \documentclass in source file
      Using some default type
      dtd is unknown from unknown.dtd (standard mode)
      OK with the configuration file, dealing with the TeX file...
      There are 30 lines

These lines are printed before translation starts. What you can see is
that some configuration file was used, that did not define a document
type for *Tralics* compatible with the current ``\documentclass`` (there
is no document class specified in the source). As a consequence, the
main XML element will be called ``<unknown>``.

Let's remove the comment on the line with ``\tracingall``. This will
have as effect to add much more lines to the transcript file. (We could
also use the --verbose flag, this would enter verbose mode from the
start, and add some additional lines to the transcript file).

As a general rule, all lines of the form [number] text indicate source
lines, read by *Tralics*. Other lines start with a plus sign, an open
brace, or a command. A line of the form {\let} indicates that the main
command interpreter of *Tralics* has executed the command ``\let``. In
some cases, a second line is printed by the C++ code associated to the
command. Here you can see the arguments read by the command, and the
effects: new and old value of ``\a``.

.. container:: log_out

   ::

      [3] \let\olda\a %% \newcount defines \a globally...
      {\let}
      {\let \olda \a}
      {changing \olda=undefined}
      {into \olda=\a}

Here, you can see that ``\newif`` reads a command, and calls twice the
inter code of ``\let``.

.. container:: log_out

   ::

      [5] \newif\ifprime \newif\ifunknown
      {\newif}
      {\newif \ifprime}
      {changing \primetrue=undefined}
      {into \primetrue=macro:->\let \ifprime \iftrue }
      {changing \primefalse=undefined}
      {into \primefalse=macro:->\let \ifprime \iffalse }

This is now the trace for ``\global\primetrue``. The ``\global`` command
is a prefix that applies to the assignment that follows, that can be of
the form ``\def cmd`` or ``\count nbr=...``; the next token is fully
expanded. In this case, ``\primetrue`` is a user defined command, the
transcript file shows the body and the arguments (there are none here).
The third line shows the argument of ``\global`` (the first token in the
assignment sequence). What happens is the following; if the first
non-expandable token is not an assignment operator, you will get an
error of the form *You cannot use the prefix \\global before \\par*.
Otherwise, the assignment will be marked global. You can have more than
one prefix (for instance, before ``\def``); so you can see *You cannot
use the prefix \\global\long before \\count*.

.. container:: log_out

   ::

      {\global}
      \primetrue ->\let \ifprime \iftrue 
      {\global\let}
      {\let \ifprime \iftrue}
      {globally changing \ifprime=\iffalse}
      {into \ifprime=\iftrue}

This behaviour is different from TeX: if you say
``\global \let \ifprime \iftrue``, TeX will print only one line in its
transcript file. And for the code above, you will see:

.. container:: log_out

   ::

      {\global}
      \primetrue ->\let \ifprime \iftrue 

Chapter 24 of the `TeXbook <index.html#texbook>`__ starts with
explanations of what a <number> or a <dimen> is. These rules are
complicated, this is why *Tralics* prints in the transcript file lines
starting with +scanint or +scandimen whenever such a thing is scanned.
In general the result is used by a command (here ``\countdef``) or put
in a register (here register number 4, via its symbolic name ``\td``).
If you ask: what is ``\td``, the answer will be ``\count4`` (previous
versions of *Tralics* printed something like ``\countref1540``, for a
command that accesses to position 1540 in the table of integers). If the
value of a counter is changed, you see the old and new value. If these
two values are equal, you see reassigning instead of changing.

.. container:: log_out

   ::

      [4] \countdef\td 4 \td=0
      {\countdef}
      +scanint for \countdef->4
      {\countdef \td=\count4}
      {\count4}
      +scanint for \td->0
      {reassigning \count4=0}
      ...
      {\divide}
      +scanint for \N->8 %this divides N by 8
      {changing \count69=28 into \count69=3}

In previous versions of *Tralics*, the third line was of the form
``{\countdef \n=1553}``, where 1553 is to be interpreted as above (since
1540 was the index for counter 4, an easy computation shows that 1553 is
the index of counter 17; the current version improves a bit the
interpretation of the transcript file; even in silent mode, the
transcript contains a line for each use of command of the type
``\countdef``.

.. container:: log_out

   ::

      [6] \newcount\n \newcount\p \newcount\d \newcount\a \newcount\N
      {\newcount}
      {\countdef \n=\count65}
      ...
      {\countdef \N=\count69}

You may see lines like these when a group starts. Here a begin-group
character, i.e., a character of ``\catcode`` 1, an open brace, caused a
new group to be pushed on the stack. The current level is increased to 2
(bottom level is number 1). You can also see that the current line is 27
(because all the stack alterations are the result of the ``\primes``
command.)

.. container:: log_out

   ::

      {begin-group character}
      +stack: level + 2 for brace entered on line 27

You may see lines like these when a group ends. Here an end-group
character, i.e., a character of ``\catcode`` 2, a closing brace, caused
the stack to be unwound. The current execution level decreases (from 2
down to 1). The commands ``\ifunknown`` and ``\iterate`` are restored
(we truncated the value). Two integers are restored (``\d`` and ``\a``).

.. container:: log_out

   ::

      {end-group character}
      +stack: restoring \ifunknown=\iffalse.
      +stack: restoring \count68=0.
      +stack: restoring \iterate=macro:->\ifnum ...
      +stack: restoring \count67=0.
      +stack: level - 2 for brace from line 27

If in TeX, you say ``\par The first thirty prime numbers are``, a line
is added to the transcript for each group of letters (a line is also
added for each non-letter, for instance a space). As can been seen, a
paragraph is started, and horizontal mode is entered because of the
first letter.

.. container:: log_out

   ::

      {the letter T}
      {horizontal mode: the letter T}
      {blank space  }
      {the letter f}
      {blank space  }
      {the letter t}
      {blank space  }
      {the letter p}
      {blank space  }
      {the letter n}
      {blank space  }
      {the letter a}
      {blank space  }

This is the *Tralics* transcript file

.. container:: log_out

   ::

      Character sequence: The first thirty prime numbers are .

You can see that there is no difference between spaces and other
characters. The character sequence starts with the character that
follows the space after colon, and ends with the characters that
precedes the period (in the example, the first character is a T, the
last is a space). Currently, mode changes are not logged.

Analysis of the transcript file
-------------------------------

This is what the transcript file contains, starting with the line that
follows the definitions. Lines preceding line 25 contain definitions and
global assignments. Current mode is outer vertical, so that newline
characters between definitions are ignored. Empty lines and ``\par``
commands are ignored as well, but appear in the transcript.

.. container:: log_out

   ::

      [25] 
      {\par}
      [26] 
      {\par}

A new paragraph is started when the letter T is seen. The following
things happen: current mode becomes horizontal; a new XML element is
created; a new frame is pushed on the stack. What you see in the
transcript file is the name of the frame, in some cases, as here, the
frame and the element have the same name. At the end of the run, the XML
tree contains three sons: the ``<p>`` element created here, and two
newline characters, one before and one after. This element contains one
son: a piece of text.

For every character translated, something is printed in the transcript
file. The transcript file is flushed whenever a non-character is seen
(here the ``\primes`` command). The characters are put in another
buffer, flushed when needed.

.. container:: log_out

   ::

      [27] The first thirty prime numbers are \primes{30}. trial division macro was
      {Push p 1}
      Character sequence: The first thirty prime numbers are .

You can see the body and arguments of the ``\primes`` command (the
transcript file contains a single line, contrarily to TeX that inserts
newline characters whenever the line is full). You can also see that the
expansion of ``~`` is ``\nobreakspace``. The lines shown here add some
characters to the XML buffer, namely 2, 3, a comma, and whatever
``\nobreakspace`` translates to.

.. container:: log_out

   ::

      \primes #1->2,~3\n =#1 \advance \n by-2 \p =5 \loop \ifnum \n >0 
          \printifprime \advance \p by2 \repeat 
      #1<-30
      Character sequence: 2,.
      ~ ->\nobreakspace 
      {\nobreakspace}
      Character sequence: 3.

This is the transcript for ``\n =#1 \advance \n by-2 \p =5``.

.. container:: log_out

   ::

      {\count65}
      +scanint for \n->30
      {changing \count65=0 into \count65=30}
      {\advance}
      +scanint for \n->-2
      {changing \count65=30 into \count65=28}
      {\count66}
      +scanint for \p->5
      {changing \count66=0 into \count66=5}

This is the outer loop: we have to compute ``\n`` prime numbers (since
we have already printed 2 and 3, the current value of ``\n`` is 28), and
the candidate ``\p`` is 5. After this is found to be prime or not-prime,
we increment it by two (because even numbers greater than two cannot be
prime) and continue the loop.

.. container:: log_out

   ::

      {\loop}
      {changing \iterate=undefined}
      {into \iterate=macro:->\ifnum \n >0 ... }
      \iterate ->\ifnum \n >0 \printifprime \advance \p by2 \relax
          \expandafter \iterate \fi 

Here you can see the expansion of ``\ifnum \n >0``. Two numbers are
compared, the result is true. *Tralics* indicates the values, it also
indicates for each conditional its serial number.

.. container:: log_out

   ::

      +\ifnum1
      +scanint for \ifnum->28
      +scanint for \ifnum->0
      +iftest1 true

We do not indicate here what is done with the number 5. We skip some
code and go to 13.

.. container:: log_out

   ::

      \printifprime ->\testprimality \ifprime \printp \fi 
      ...

The idea is the following: we open a group, and set ``\d`` to 3. We make
the a priori assumption that our number is prime (the ``\global`` is
needed, because we have to know, outside the group, whether the number
is prime or not). The ``\trialdivision`` macro sets ``\ifunknown`` to
some value: if set to false, the status is known, indicated by
``\ifprime``. The number ``\d`` is incremented by 2. Loop invariant: we
assume that ``\p`` is not a multiple of any prime number less that
``\d``).

.. container:: log_out

   ::

      \printifprime ->\testprimality \ifprime \printp \fi 
      \testprimality ->{\d =3 \global \primetrue \loop \trialdivision 
         \ifunknown \advance \d by2 \repeat }
      {begin-group character}
      +stack: level + 2 for brace entered on line 27
      {\count67}
      +scanint for \d->3
      {changing \count67=0 into \count67=3}
      {\global}
      \primetrue ->\let \ifprime \iftrue 
      {\global\let}
      {\let \ifprime \iftrue}
      {globally changing \ifprime=\iftrue}
      {into \ifprime=\iftrue}

We are now in the inner loop. (note that ``\iterate`` is locally
redefined for each loop)

.. container:: log_out

   ::

      {\loop}
      {changing \iterate=macro:->... }
      {into \iterate=macro:-> ...  }
      \iterate->\trialdivision \ifunknown \advance \d by2 \relax 
        \expandafter \iterate \fi 

We divide 13 by 3, quotient in ``\a``, and increment the number of
divisions. We set ``\ifunknown`` to false, because 3 is less than 4.
Said otherwise our divider ``\d`` is less that the square root of
``\p``, not big enough to conclude that ``\p`` is prime.

.. container:: log_out

   ::

      \trialdivision ->\a =\p \divide \a by\d 
         \global \advance \td by 1 
         \ifnum \a >\d \unknowntrue \else \unknownfalse \fi
         \multiply \a by\d \ifnum \a =\p \global \primefalse \unknownfalse \fi 
      {\count68}
      +scanint for \a->13
      {changing \count68=0 into \count68=13}
      {\divide}
      +scanint for \a->3
      {changing \count68=13 into \count68=4}
      {\global}
      {\global\advance}
      +scanint for \td->1
      {globally changing \count4=4 into \count4=5}
      +\ifnum28
      +scanint for \ifnum->4
      +scanint for \ifnum->3
      +iftest28 true
      \unknowntrue ->\let \ifunknown \iftrue 
      {\let}
      {\let \ifunknown \iftrue}
      {changing \ifunknown=\iffalse}
      {into \ifunknown=\iftrue}
      +\else28
      +\fi28

We multiply 4 by 3, in ``\a``, and compared to ``\p``. Comparison is
false, ``\d`` does not divide ``\p``. We cannot conclude that ``\p`` is
not prime.

.. container:: log_out

   ::

      {\multiply}
      +scanint for \a->3
      {changing \count68=4 into \count68=12}
      +\ifnum29
      +scanint for \ifnum->12
      +scanint for \ifnum->13
      +iftest29 false
      +\fi29

Since we do not know that our number is prime, we must continue
checking. We first increment out divider. We find it convenient to
exchange the order of the ``\iterate`` and ``\fi`` tokens (in this case,
the only effect of the ``\fi`` is to pop the condition stack). Purpose
of the ``\relax``: the scanint procedure reads an integer, and could
evaluate the ``\expandafter`` without this token (said otherwise, the
space after the digit 2 is not necessary).

.. container:: log_out

   ::

      +\ifunknown30
      +iftest30 true
      {\advance}
      +scanint for \d->2
      {changing \count67=3 into \count67=5}
      {\relax}
      {\expandafter \iterate \fi}
      +\fi30

We have to execute the loop a second time.

.. container:: log_out

   ::

      \iterate ->\trialdivision \ifunknown \advance \d by2 \relax 
        \expandafter \iterate \fi 
      \trialdivision ->\a =\p \divide \a by\d \global \advance \td by 1 
        \ifnum \a >\d \unknowntrue \else \unknownfalse \fi 
        \multiply \a by\d \ifnum \a =\p \global \primefalse \unknownfalse \fi 

We see here that 5 does not divide 13. However 13 is less than
``5\times(5+1)``, hence is prime. Said otherwise, conditional number 31
shows that primality of 13 depends only on the result of test 32.

.. container:: log_out

   ::

      {\count68} 
      +scanint for \a->13
      {changing \count68=12 into \count68=13}
      {\divide}
      +scanint for \a->5
      {changing \count68=13 into \count68=2}
      {\global}
      {\global\advance}
      +scanint for \td->1
      {globally changing \count4=5 into \count4=6}
      +\ifnum31
      +scanint for \ifnum->2
      +scanint for \ifnum->5
      +iftest31 false
      +\else31
      \unknownfalse ->\let \ifunknown \iffalse 
      {\let}
      {\let \ifunknown \iffalse}
      {changing \ifunknown=\iftrue}
      {into \ifunknown=\iffalse}
      +\fi31
      {\multiply}
      +scanint for \a->5
      {changing \count68=2 into \count68=10}
      +\ifnum32
      +scanint for \ifnum->10
      +scanint for \ifnum->13
      +iftest32 false
      +\fi32

Since we know whether our number is prime or not, it is time to conclude
the inner loop. The assignment ``\let\iterate\relax`` is not really
useful, as will be seen in a minute. Its purpose is to release memory.

.. container:: log_out

   ::

      +\ifunknown33
      +iftest33 false
      +\fi33
      {\let}
      {\let \iterate \relax}
      {changing \iterate=macro:->... }
      {into \iterate=\relax}

The last action of ``\testprimality`` is to close the current group.
What you can see is that two integers are restored (``\a`` and ``\d``).
The value of ``\iterate`` is restored; this is the code of the outer
loop.

.. container:: log_out

   ::

      {end-group character}
      +stack: restoring \ifunknown=\iffalse.
      +stack: restoring \count68=0.
      +stack: restoring \iterate=macro:->\ifnum \n >0 ... \fi .
      +stack: restoring \count67=0.
      +stack: level - 2 for brace from line 27

Our number is prime! We print it.

.. container:: log_out

   ::

      +\ifprime34
      +iftest34 true
      \printp ->,\N =\n \divide \N by 8 ...
      Character sequence: ,.

We print a space or a newline character, depending on whether ``\n`` is
zero modulo 8. This piece of code is not in the original program. The
test could also have been: ``\ifnum\N=0 \char13 \else \char32 \fi``

.. container:: log_out

   ::

      {\count69}
      +scanint for \N->25
      {changing \count69=2 into \count69=25}
      {\divide}
      +scanint for \N->8
      {changing \count69=25 into \count69=3}
      {\multiply}
      +scanint for \N->-8
      {changing \count69=3 into \count69=-24}
      {\advance}
      +scanint for \N->25
      {changing \count69=-24 into \count69=1}
      +\ifnum35
      +scanint for \ifnum->1
      +scanint for \ifnum->0
      +iftest35 false
      +\else35
      {begin-group character}
      +stack: level + 2 for brace entered on line 27
      Character sequence:  .
      {end-group character}
      +stack: level - 2 for brace from line 27
      +\fi35

It is not the last number, so that only comma-space is printed.

.. container:: log_out

   ::

      +\ifnum36
      +scanint for \ifnum->25
      +scanint for \ifnum->1
      +iftest36 false
      +\fi36

The transcript shows a ``\fi34`` corresponding to the ``\ifprime`` above
and ``\fi27`` that corresponds to nothing. In fact, we skipped a big
part of the trace. Testing whether n is prime for n=5, 7, 9, 11, 13, and
15 uses the conditional 5, 12, 19, 24, 34, and 41: you can see that one
more test is needed for 13 than for other numbers; remember that if a
number is prime, a further test has to be done: is it the last one?

.. container:: log_out

   ::

      +scanint for \number->13
      Character sequence: 13.
      {\advance}
      +scanint for \n->-1
      {changing \count65=25 into \count65=24}
      +\fi34
      {\advance}
      +scanint for \p->2
      {changing \count66=13 into \count66=15}
      {\relax}
      {\expandafter \iterate \fi}
      +\fi27

This considers the number 15.

.. container:: log_out

   ::

      \iterate ->\ifnum \n >0 \printifprime \advance \p by2 \relax ...
      +\ifnum37
      +scanint for \ifnum->24
      +scanint for \ifnum->0
      +iftest37 true 
      \printifprime ->\testprimality \ifprime \printp \fi 
      \testprimality ->{\d =3 \global \primetrue \loop \trialdivision ...
      {begin-group character}
      +stack: level + 2 for brace entered on line 27
      +scanint for \d->3
      {changing \count67=0 into \count67=3}
      {\global}
      \primetrue ->\let \ifprime \iftrue 
      {\global\let}
      {\let \ifprime \iftrue}
      {globally changing \ifprime=\iftrue}
      {into \ifprime=\iftrue}

Dividing 15 by 3 is not enough to prove that 15 is a prime number.

.. container:: log_out

   ::

      {\loop}
      {changing \iterate=macro:->\ifnum ... \fi }
      {into \iterate=macro:->\trialdivision \ifunknown ... \fi }
      \iterate ->\trialdivision \ifunknown \advance \d by2 \relax ...
      \trialdivision ->\a =\p \divide \a by\d \global \advance \td by 1  ...
      {\count68}
      +scanint for \a->15
      {changing \count68=0 into \count68=15}
      {\divide}
      +scanint for \a->3
      {changing \count68=15 into \count68=5}
      {\global}
      {\global\advance}
      +scanint for \td->1
      {globally changing \count4=6 into \count4=7}
      +\ifnum38
      +scanint for \ifnum->5
      +scanint for \ifnum->3
      +iftest38 true
      \unknowntrue ->\let \ifunknown \iftrue 
      {\let}
      {\let \ifunknown \iftrue}
      {changing \ifunknown=\iffalse}
      {into \ifunknown=\iftrue}
      +\else38
      +\fi38

But dividing 15 by 3 *is* enough to prove that 15 is a not prime number.

.. container:: log_out

   ::

      {\multiply}
      +scanint for \a->3
      {changing \count68=5 into \count68=15}
      +\ifnum39
      +scanint for \ifnum->15
      +scanint for \ifnum->15
      +iftest39 true
      {\global}
      \primefalse ->\let \ifprime \iffalse 
      {\global\let}
      {\let \ifprime \iffalse}
      {globally changing \ifprime=\iftrue}
      {into \ifprime=\iffalse}
      \unknownfalse ->\let \ifunknown \iffalse 
      {\let}
      {\let \ifunknown \iffalse}
      {changing \ifunknown=\iftrue}
      {into \ifunknown=\iffalse}
      +\fi39

Skipping 6000 lines.

.. container:: log_out

   ::

      +iftest563 false
      +\fi563
      {\let}
      {\let \iterate \relax}
      {changing \iterate=macro:->\ifnum ... \fi }
      {into \iterate=\relax}
      Character sequence: . trial division macro was .
      [28] expanded \the\td\ times. % Knuth says cpu time=4 sec, I see 0.02
      Character sequence: expanded .
      {\the}
      {\the \td}
      \the->132.
      Character sequence: 132.
      {\ }
      Character sequence: times. .

Line 29 of the input file is a hack: the ``\a`` command is not defined
by plainTeX, so that Knuth can use, but it is defined in LaTeX, and we
have to restore it.

.. container:: log_out

   ::

      [29] \let\a\olda %% restore
      {\let}
      {\let \a \olda}
      {changing \a=\count68}
      {into \a=\a}

The last line of the file is empty, this is equivalent ``\par``, and has
as effect to finish the current element.

.. container:: log_out

   ::

      [30] 
      {\par}
      {Text:The first thirty prime numbers are 2, 3, 5, 7, 11, 13,
      17, 19, 23, 29, 31, 37, 41, 43,
      47, 53, 59, 61, 67, 71, 73, 79,
      83, 89, 97, 101, 103, 107, 109, and 113. trial division macro was
      expanded 132 times. }
      {Pop 1: document_v p_v}
      ++ Input stack empty at end of file

Note the last line of the file, the empty one, is not really needed.
Without it, the last line of the XML result would have been
``expanded 132 times. </p></unknown>``. In fact, when *Tralics* executes
a ``\par`` command, it removes the last space (that corresponds in
general to the end-of-line on the line before the empty line), and adds
a newline character in the XML tree after the ``<p>`` element. In this
example, there is a space before the comment line 28, the EOL characters
on lines 28 and 29 are commented out, and this one is visible if the
paragraph is ended without a ``\par`` command.

----

docs/mml_ex.rst
---------------

MathML Examples for Tralics
===========================

The *Tralics* documentation sometimes shows the translation of an
expression as an image. These do not always correspond to the latest
version of the software. We give here a variant, using MathML. For
instance, the translation of ``$x$`` is
``<formula type='inline'> <math xmlns='http://www.w3.org/1998/Math/MathML'><mi>x</mi></math></formula>``;
the math element of the formula renders as :math:`x`. In the case of
environment like ``align``, we have used the option -multi-math-label.
This has as effect to add ``id`` and ``id-text`` attributes to parts of
the math formula. Since ``id-text`` is not defined by MathML, we have
removed these attributes. Example: on `row1 <#uid1>`__ and
`row3 <#uid2>`__ for the eqnarray example; on `row1 <#uid3>`__ and
`row2 <#uid3>`__ for the gather example; on `row1 <#uid5>`__ and
`row2 <#uid6>`__ for the split example.

.. _accent1:

Accents
-------

Example of math accents:
``$\hat{a} \acute{a} \bar{a} \dot{a} \breve{a} \check{a} \grave{a} \vec{a} \ddot{a} \tilde{a}$``
translates as
:math:`\hat{a}\acute{a}\bar{a}\overset{˙}{a}\breve{a}\check{a}\grave{a}\overset{\rightarrow}{a}\overset{¨}{a}\widetilde{a}`.
Example of usual accents: :literal:`\\`e \'e \^e \"e \~a \.e \=e`
translates as è é ê ë ã ė ē. Example of other accents:
``\c c, \H o, \C o, \"o, \k a, \b b, \d a, \u a, \f a, \v a, \T e, \r a, \D a, \h a, \V e``
translates as ç, ő, ȍ, ö, ą, ḇ, ạ, ă, ȃ, ǎ, ḛ, å, ḁ, ả, ḙ. Example of
double accents, translation of
:literal:`\\={\.a} \={\"a}, \"{\'u} \"{\`u} \"{\v u} \c{\'c} \c{\u e} \d{\. s} \'{\^e}`
is ǡ ǟ, ǘ ǜ ǚ ḉ ḝ ṩ ế. The accentee is normally a 7bit character; there
are exeptions so that ``\=\ae \'\ae \'\aa \'\o \'\i`` translates as
ǣǽǻǿí.

\\accentset
-----------

Translation of
``$\accentset xy = \accentset{\ast}{X} = \hat{\accentset{\star}{\hat h}}   $``
is.
:math:`\overset{x}{y} = \overset{*}{X} = \hat{\overset{☆}{\hat{h}}}`.

.. _acute:

Math accents
------------

``$\acute{x} \bar{x} \breve{x} \check{x}  \ddddot{x} \dddot{x} \ddot{x} \dot{x}  \grave{x} \hat{x} \mathring{x} \tilde{x} \vec{x} \widehat{xyz} \widetilde{xyz}$``
gives
:math:`\acute{x}\bar{x}\breve{x}\check{x}\ddddot{x}\dddot{x}\overset{¨}{x}\overset{˙}{x}\grave{x}\hat{x}\overset{˚}{x}\widetilde{x}\overset{\rightarrow}{x}\hat{xyz}\widetilde{xyz}`.

``$\widetilde{abc} \widehat{abc} \overleftarrow{abc} \overrightarrow{abc} \overline{abc} \underline{abc} \overbrace{abc} \underbrace{abc} \underleftarrow{abc} \underrightarrow{abc}$``
gives
:math:`\widetilde{abc}\hat{abc}\overset{\leftarrow}{abc}\overset{\rightarrow}{abc}\bar{abc}\underline{abc}\overbrace{abc}\underbrace{abc}\underset{\leftarrow}{abc}\underset{\rightarrow}{abc}`.

``$\stackrel{j}{\longrightarrow} \overset{*}{X} \underset{*}{X} \sqrt{abc} \sqrt[n]{abc} \root n \of{abc} \frac{abc}{xyz} \dfrac{abc}{xyz}$``
gives
:math:`\overset{j}{\longrightarrow}\overset{*}{X}\underset{*}{X}\sqrt{abc}\sqrt[n]{abc}\sqrt[n]{abc}\frac{abc}{xyz}\frac{abc}{xyz}`

.. _align:

Alignments
----------

.. container:: ltx-source

   ::

      \begin{align}
      x^2+y^2&=1\\ x&=\sqrt{1-y^2}
      \end{align}

:math:`\begin{aligned}
{x^{2} + y^{2}} & {= 1} \\
x & {= \sqrt{1 - y^{2}}} \\
\end{aligned}`

.. container:: ltx-source

   ::

      \begin{equation}
      \begin{aligned}[x]
      x^2+y^2&=1& 1&=X^2+Y^2\\
      x&=0.01&0.001=X
      \end{aligned}
      \end{equation}

:math:`\begin{array}{rlrl}
{x^{2} + y^{2}} & {= 1} & 1 & {= X^{2} + Y^{2}} \\
x & {= 0.01} & {0.001 = X} & \\
\end{array}`

.. container:: ltx-source

   ::

      \def\R{\mathbf{R}}
      \begin{eqnarray*}
      \left\{\begin{array}{lcl}
      \dot{x} & = & Ax+g(x,u)\\
       y & = & Cx \\
       \multicolumn{3}{l}{x\in \R^n} 
      \end{array}
          \right.
      \end{eqnarray*}

:math:`\begin{array}{r}
\left\{ \begin{array}{lcl}
\overset{˙}{x} & = & {Ax + g\left( x,u \right)} \\
y & = & {Cx} \\
{x \in \mathbf{R}^{n}} & & \\
\end{array} \right. \\
\end{array}`

.. container:: ltx-source

   ::

      \def\MAT#1{\begin{array}{c#1}1&22\\3&4\end{array}}

      \[\left|
      \begin{array}{lcr}
      AAAAAAA&BBBBBCC&CCCCCCC\\
      A&B&C\\
      \multicolumn{1}{c}{A}&\multicolumn{1}{c}{B}&\multicolumn{1}{c}{C}\\
      \multicolumn{1}{r}{A}&\multicolumn{1}{r}{B}&\multicolumn{r}{c}{C}\\
      \multicolumn{1}{l}{A}&\multicolumn{1}{l}{B}&\multicolumn{l}{c}{C}\\
      \MAT l&\MAT c&\MAT r\\
      \multicolumn{2}{c}{0123456789abcdef}&C\\
      A&\multicolumn{2}{c}{0123456789abcdef}\\
      \multicolumn{2}{r}{0123456789abcdef}&C\\
      A&\multicolumn{2}{l}{0123456789abcdef}\\
      A&B&C\\
      \end{array}
      \right|\]

:math:`\left| \begin{matrix}
{AAAAAAA} & {BBBBBCC} & {CCCCCCC} \\
A & B & C \\
A & B & C \\
A & B & C \\
A & B & C \\
\begin{array}{cl}
1 & 22 \\
3 & 4 \\
\end{array} & \begin{matrix}
1 & 22 \\
3 & 4 \\
\end{matrix} & \begin{array}{cr}
1 & 22 \\
3 & 4 \\
\end{array} \\
{0123456789abcdef} & C & \\
A & {0123456789abcdef} & \\
{0123456789abcdef} & C & \\
A & {0123456789abcdef} & \\
A & B & C \\
\end{matrix} \right|`

.. container:: ltx-source

   ::

      \begin{eqnarray}
      x & = &17y \\
      y & > & a + b + c+d+e+f+g+h+i+j+ \nonumber\\
        &   & k+l+m+n+o+p
      \end{eqnarray}

:math:`\begin{array}{ccl} x & = & {17y} \\ y & > & {a + b + c + d + e + f + g + h + i + j +} \\ & & {k + l + m + n + o + p} \\ \end{array}`

.. container:: ltx-source

   ::

      \begin{eqnarray*}
      x & \ll & y_{1} + \cdots + y_{n} \\
        & \leq &z
      \end{eqnarray*}

:math:`\begin{array}{ccl} x & \ll & {y_{1} + \cdots + y_{n}} \\ & \leq & z \\ \end{array}`

.. container:: ltx-source
   :name: gather

   ::

      \begin{gather}
        (a + b)^2 = a^2 + 2ab + b^2          \\
        (a + b) \cdot (a - b) = a^2 - b^2
      \end{gather}

:math:`\begin{matrix}
{\left( a + b \right)^{2} = a^{2} + 2ab + b^{2}} \\
{\left( a + b \right) \cdot \left( a - b \right) = a^{2} - b^{2}} \\
\end{matrix}`

.. container:: ltx-source

   ::

      \begin{multline}
      \text{First line: left align}\\
      \text{centered}\\
      \text{This is the longest line of the table}\\
      \shoveright{\text{shoved left}}\\
      \shoveleft{\text{shoved right}}\\
      \text{Last right}
      \end{multline}

:math:`\begin{matrix}
{\text{First}\text{line:}\text{left}\text{align}} \\
\text{centered} \\
{\text{This}\text{is}\text{the}\text{longest}\text{line}\text{of}\text{the}\text{table}} \\
{\text{shoved}\text{left}} \\
{\text{shoved}\text{right}} \\
{\text{Last}\text{right}} \\
\end{matrix}`

.. container:: ltx-source
   :name: split

   ::

      \begin{equation}
      \begin{split}
      (a+b)^4 &= (a+b)^ 2 (a+b)^2           \\
              &= (a^2+2ab+b^2)(a^2+2ab+b^2) \\
              &= a^4+4a^3b+6a^2b^2+4ab^3+b^4 \\
      \end{split}
      \end{equation}

:math:`\begin{array}{cl} \left( a + b \right)^{4} & {= \left( a + b \right)^{2}\left( a + b \right)^{2}} \\ & {= \left( a^{2} + 2ab + b^{2} \right)\left( a^{2} + 2ab + b^{2} \right)} \\ & {= a^{4} + 4a^{3}b + 6a^{2}b^{2} + 4ab^{3} + b^{4}} \\ \end{array}`

Counters
--------

.. container:: ltx-source

   ::

      \def\showcounter#1{%
      \arabic{#1} \roman{#1} \Roman{#1} \alph{#1} \Alph{#1} \fnsymbol{#1}  $\fnsymbol{#1}$\\}
      \newcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}
      \stepcounter{ctr}\showcounter{ctr}

One can notice that ``\fnsymbol`` works in math mode or outside it, and
the result is not always the same. The effect of ``\\`` is to start a
no-indented paragraph by adding an attribute to the ``<p>`` element. We
have replaced it by a ``class`` attribute interpreted by the style
sheet.

.. container:: blanc

   1 i I a A \* :math:`*`

   2 ii II b B :math:`\dagger` :math:`\dagger`

   3 iii III c C :math:`\ddagger` :math:`\ddagger`

   4 iv IV d D § :math:`§`

   5 v V e E ¶ :math:`¶`

   6 vi VI f F :math:`\parallel` :math:`\parallel`

   7 vii VII g G \*\* :math:`**`

   8 viii VIII h H :math:`\dagger \dagger` :math:`\dagger \dagger`

   9 ix IX i I :math:`\ddagger \ddagger` :math:`\ddagger \ddagger`

The default translation of a Greek letter like ``\alpha`` is an entity.
There is an option -noentnames that replaces the entity names by
character references ``&alpha;`` will be replaced by ``&#x3B1;``. We
show here the entities.
:math:`\alpha\beta\gamma\delta\epsilon\epsilon\zeta\eta\theta\iota\kappa\lambda\mu\nu\xi\pi\rho\sigma\tau\upsilon\varphi\chi\psi\omega\varpi\varrho\varsigma\phi ϰ\vartheta`
:math:`\Gamma\Delta\Theta\Lambda\Xi\Sigma\mathrm{\Upsilon}\Phi\Pi\Psi\Omega`,
and the text version: α β γ δ ϵ ϵ ζ η θ ι κ λ μ ν ξ π ρ σ τ υ φ χ ψ ω ϖ
ϱ ς ϕ ϰ ϑ Γ Δ Θ Λ Ξ Σ ϒ Φ Π Ψ Ω

Binom
-----

.. container:: ltx-source

   ::

       
      \def\n{\mathchoice{a}{b}{c}{d}}
      $$\binom{\frac{\n+m}{2}} \n \quad
      \tbinom{\frac{\n+m}{2}} \n \quad
      \dbinom{\frac{\n+m}{2}} \n\qquad
      {}^{\binom{\frac{\n+m}{2}} \n \quad
      \tbinom{\frac{\n+m}{2}} \n \quad
      \dbinom{\frac{\n+m}{2}} \n}$$

:math:`\binom{\binom{c + m}{2}}{b}\binom{\binom{d + m}{2}}{c}\binom{\binom{c + m}{2}}{b}{}^{{(\binom{\binom{d + m}{2}}{d})}{(\binom{\binom{d + m}{2}}{c})}{(\binom{\binom{c + m}{2}}{b})}}`

.. container:: ltx-source

   ::

      ${a\over b}\quad {a\above1pt b}\quad {a\atop b}$
      ${a\overwithdelims() b}\quad {a\abovewithdelims()1pt b}%
        \quad {a\atopwithdelims() b}$

Translates as :math:`\frac{a}{b}\frac{a}{b}\binom{a}{b}` and
:math:`\left( \frac{a}{b} \right)\left( \frac{a}{b} \right)\binom{a}{b}`.

Bmod
----

.. container:: ltx-source

   ::

      \begin{align*}
      u& \equiv v+1 \mod{n^2} \\
      u& \equiv v+1 \bmod{n^2} \\
      u&   =    v+1 \pmod{n^2} \\
      u&   =    v+1 \pod{n^2} \\
      \end{align*}

:math:`\begin{aligned}
u & {\equiv v + 1\mspace{600mu}\operatorname{mod}\; n^{2}} \\
u & {\equiv v + 1\;\operatorname{mod}\; n^{2}} \\
u & {= v + 1\mspace{1800mu}\left( \operatorname{mod}\; n^{2} \right)} \\
u & {= v + 1\mspace{1800mu}\left( n^{2} \right)} \\
\end{aligned}`

\\boxed
-------

``$x = \boxed{\frac12}+z$`` translates as :math:`x = \begin{matrix}
\frac{1}{2} \\
\end{matrix} + z`.

Cases
-----

.. container:: ltx-source

   ::

      \[\text{The sign function: \ } 
      \mathcal{S}(x) = \begin{cases}
      -1&x<0 \\
      0&x=0 \\
      1&x>0
      \end{cases}
      \]

:math:`\text{The}\text{sign}\text{function:}\mathcal{S}\left( x \right) = \begin{cases}
{- 1} & {x < 0} \\
0 & {x = 0} \\
1 & {x > 0} \\
\end{cases}`

.. _math-font:

Math fonts
----------

``${\cal ABCDE FGHIJ KLMNO PQRST UVWXYZ}$`` gives
:math:`{\mathcal{A}\mathcal{B}\mathcal{C}\mathcal{D}\mathcal{E}}{\mathcal{F}\mathcal{G}\mathcal{H}\mathcal{I}\mathcal{J}}{\mathcal{K}\mathcal{L}\mathcal{M}\mathcal{N}\mathcal{O}}{\mathcal{P}\mathcal{Q}\mathcal{R}\mathcal{S}\mathcal{T}}{\mathcal{U}\mathcal{V}\mathcal{W}\mathcal{X}\mathcal{Y}\mathcal{Z}}`
when using Unicode characters in the SMP and
:math:`\mathcal{ABCDE}\mathcal{FGHIJ}\mathcal{KLMNO}\mathcal{PQRST}\mathcal{UVWXYZ}`
when using 7-bit characters and ``mathvariant`` attribute. The two
results should be identical.

Style
-----

.. container:: ltx-source

   ::

      ${\frac12}{x\displaystyle\frac 12} 
      {x\textstyle\frac 12}{x\scriptstyle\frac 12}{x\scriptscriptstyle\frac 12} \qquad
      {x\displaystyle a}+{x\textstyle a}+{x\scriptstyle a}+{x\scriptscriptstyle a}\qquad
      \frac{x\displaystyle a}{x\textstyle b}+\frac{x\scriptstyle a}{x\scriptscriptstyle b}$

Translates to

:math:`\frac{1}{2}{x\frac{1}{2}}{x\frac{1}{2}}{x\frac{1}{2}}{x\frac{1}{2}}{xa} + {xa} + {xa} + {xa}\frac{xa}{xb} + \frac{xa}{xb}`

.. _frac:

Fractions
---------

.. container:: ltx-source

   ::

      $$\frac12 \dfrac 12 \tfrac12 \qquad
      {}^{\frac12 \dfrac 12 \tfrac12}$$

:math:`\frac{1}{2}\frac{1}{2}\frac{1}{2}{}^{\frac{1}{2}\frac{1}{2}\frac{1}{2}}`

.. container:: ltx-source

   ::

      \def\N{\mathchoice{a}{b}{c}{d}}
      $$\frac{\N\frac{\N+m}{2}} \N \quad
      \tfrac{\N\frac{\N+m}{2}} \N \quad
      \dfrac{\N\frac{\N+m}{2}} \N
      $$

:math:`\frac{b\frac{c + m}{2}}{b}\frac{c\frac{d + m}{2}}{c}\frac{b\frac{c + m}{2}}{b}`

.. container:: ltx-source

   ::

      $$\genfrac{}{}{}{}12 % this is \frac 
      \genfrac[]{2pt}{2}{aaa}{bbb} % brackets, small, thick 
      \genfrac(){0cm}{0}nm % this is \dbinom 
      $$

:math:`\frac{1}{2}\left\lbrack \frac{aaa}{bbb} \right\rbrack\binom{n}{m}`

.. _math1:

Math tables
-----------

.. container:: ltx-source

   ::

      $\smallint \int \land \wedge \lor \owns \ni \notin
      \neg \lnot \gets \leftarrow \to \rightarrow
      \gtrless \geqslant \leqslant \iff \backslash$

Translation
:math:`\left. \int\int \land \land \vee \ni \ni \notin \neg\neg\leftarrow\leftarrow\rightarrow\rightarrow \gtrless \geqslant \leqslant \Leftrightarrow \smallsetminus \right.`

.. container:: ltx-source

   ::

       
      $ \pm \mp \times \div \ast \star \circ \bullet \cdot 
      \cap \cup \uplus \sqcap \sqcup \vee \wedge \setminus \wr
      \diamond \bigtriangleup \bigtriangledown \triangleleft \triangleright
      \oplus \ominus \otimes \oslash \odot \bigcirc \dagger \ddagger \amalg$

Table 8.4
:math:`\pm \mp \times \div *☆ \circ \bullet \cdot \cap \cup \uplus \sqcap \sqcup \vee \land \smallsetminus \wr \diamond \bigtriangleup \bigtriangledown \triangleleft \triangleright \oplus \ominus \otimes \oslash \odot ◯ \dagger \ddagger \amalg`

.. container:: ltx-source

   ::

      $\le \leq \succ \simeq \parallel \subseteq \sqsubset \doteq
      \ge \geq \sim \mid \subset \subseteq \ne \neq \frown \vdash
      \equiv \perp \ll \supset \cong \smile \in \dashv 
      \models \preceq \gg \approx \Join \sqsubseteq \ni
      \prec \succeq \asymp \bowtie \sqsupseteq \propto$

Table 8.5
:math:`\leq \leq \succ \simeq \parallel \subseteq ⊏ \doteq \geq \geq \sim \mid \subset \subseteq \neq \neq \frown \vdash \equiv \bot \ll \supset \cong \smile \in \dashv \models \preceq \gg \approx \bowtie \sqsubseteq \ni \prec \succeq \asymp \bowtie \sqsupseteq \propto`

.. container:: ltx-source

   ::

      $\leftarrow\longleftarrow  \Leftarrow \Longleftarrow 
      \rightarrow \longrightarrow \Rightarrow \Longrightarrow
      \leftrightarrow \Leftrightarrow \longleftrightarrow\Longleftrightarrow
      \mapsto \longmapsto \hookleftarrow \hookrightarrow
      \leftharpoondown \leftharpoonup \rightharpoondown \rightharpoonup
      \uparrow \Uparrow  \updownarrow \Updownarrow 
      \downarrow \Downarrow \nearrow \searrow \swarrow \nwarrow
      $

Table 8.6
:math:`\left. \leftarrow\longleftarrow\Leftarrow\Longleftarrow\rightarrow\longrightarrow\Rightarrow\Longrightarrow\leftrightarrow\Leftrightarrow\longleftrightarrow\Longleftrightarrow\mapsto\longmapsto\hookleftarrow\hookrightarrow\leftharpoondown\leftharpoonup\rightharpoondown\rightharpoonup\uparrow\Uparrow\updownarrow\Updownarrow\downarrow\Downarrow\nearrow\searrow\swarrow\nwarrow \right.`

.. container:: ltx-source

   ::

      $\ldots \prime \exists \Diamond \top \bot \mho 
      \cdots \forall \nabla \imath \flat \clubsuit \Re
      \vdots \infty \surd \jmath \natural \diamondsuit \Im
      \ddots \hbar \square \ell \sharp \heartsuit \angle
      \aleph \emptyset \triangle \neg \wp \spadesuit \partial$

Table 8.7:
:math:`...'\exists \diamond \top\bot ℧\cdots\forall\nabla\imath\flat\clubsuit\Re \vdots \infty{\sqrt{}}j\natural ♦\Im \ddots \hslash\square\ell\sharp ♥\angle\aleph\varnothing\vartriangle\neg\wp\spadesuit\partial`

.. container:: ltx-source

   ::

      $\coprod \bigvee \bigwedge \biguplus \bigcap \bigcup \int \sum 
       \prod \bigotimes \bigoplus \oint \bigsqcup  \bigodot$

Table 8.8:
:math:`\coprod\bigvee\bigwedge \uplus \bigcap\bigcup\int\sum\prod\bigotimes\bigoplus\oint\bigsqcup\bigodot`

.. container:: ltx-source

   ::

       
      $$\arccos^2 (x),\, \arcsin^2(x),\,  \arctan^2(x),\,  \arg^2(x),\, 
        \cos^2(x),\,  \cosh^2(x)  ,\, \cot^2(x)$$
      $$\coth^2(x),\, \csc^2(x),\,   \deg^2(x),\,   \dim^2(x),\, \exp^2(x),\, 
        \hom^2(x),\,  \ker^2(x) ,\, \lg^2(x)$$
      $$\ln^2(x),\, \log^2(x),\,  \Pr^2(x),\, \sec^2(x),\, \sin^2(x) 
        ,\,\sinh^2(x),\,  \tan^2(x),\, \tanh^2(x) $$
      $$\det_{x=1},\, \gcd_{x=1},\, \inf_{x=1},\, \injlim_{x=1},\, \lim_{x=1},\, 
      \liminf_{x=1},\,\limsup_{x=1},\,\max_{x=1},\, \min_{x=1},\, 
       \projlim_{x=1},\, \sup_{x=1}
      $$

Table 8.9

:math:`\arccos^{2}\left( x \right),\,\arcsin^{2}\left( x \right),\,\arctan^{2}\left( x \right),\,\arg^{2}\left( x \right),\,\cos^{2}\left( x \right),\,\cosh^{2}\left( x \right),\,\cot^{2}\left( x \right)`
:math:`\coth^{2}\left( x \right),\,\csc^{2}\left( x \right),\,\deg^{2}\left( x \right),\,\dim^{2}\left( x \right),\,\exp^{2}\left( x \right),\,\hom^{2}\left( x \right),\,\ker^{2}\left( x \right),\,\lg^{2}\left( x \right)`
:math:`\ln^{2}\left( x \right),\,\log^{2}\left( x \right),\,\Pr^{2}\left( x \right),\,\sec^{2}\left( x \right),\,\sin^{2}\left( x \right),\,\sinh^{2}\left( x \right),\,\tan^{2}\left( x \right),\,\tanh^{2}\left( x \right)`
:math:`\det\limits_{x = 1},\,\gcd\limits_{x = 1},\,\inf\limits_{x = 1},\,\operatorname{inj\ lim}\limits_{x = 1},\,\lim\limits_{x = 1},\,\operatorname{lim\ inf}\limits_{x = 1},\,\operatorname{lim\ sup}\limits_{x = 1},\,\max\limits_{x = 1},\,\min\limits_{x = 1},\,\operatorname{proj\ lim}\limits_{x = 1},\,\sup\limits_{x = 1}`

.. container:: ltx-source

   ::

      \def\kernel{\frac{x^1_2}{y^3_4}}
      \def\test{
      \left\lmoustache\left\uparrow\left\Uparrow\left\updownarrow\left\lgroup
      \kernel
      \right\rgroup\right\Updownarrow\right\Downarrow\right\downarrow\right\rmoustache}
      $\test$
      $\let\left\relax\let\right\relax \test$
      $\def\kernel{\int_0^{\frac{x^1_2}{y^3_4}}} \test$

Translation is
:math:`⎰\left. \uparrow\left. \Uparrow\left. \updownarrow{〔\frac{x_{2}^{1}}{y_{4}^{3}}〕}\Updownarrow \right.\Downarrow \right.\downarrow \right.⎱`
and
:math:`\left. ⎰\uparrow\Uparrow\updownarrow{〔\frac{x_{2}^{1}}{y_{4}^{3}}〕}\Updownarrow\Downarrow\downarrow ⎱ \right.`
and
:math:`⎰\left. \uparrow\left. \Uparrow\left. \updownarrow{〔\int_{0}^{\frac{x_{2}^{1}}{y_{4}^{3}}}〕}\Updownarrow \right.\Downarrow \right.\downarrow \right.⎱`

Delimiters
----------

.. container:: ltx-source

   ::

       
      $
      \def\kernel{\frac{x^1_2}{y^3_4}}
      \left\Vert\left|\left[\left(\left\{ \kernel \right\}\right)\right]\right|\right\Vert
      \left\vert\left|\left<\left\langle \kernel \right\rangle\right>\right|\right\vert
      \left\lbrace\left\lceil\left\lfloor \kernel \right\rfloor\right\rceil\right\rbrace
      \lbrack\rbrack
      $

Translation
:math:`{\parallel \left| \left\lbrack \left( \left\{ \frac{x_{2}^{1}}{y_{4}^{3}} \right\} \right) \right\rbrack \right| \parallel}\left| \left| \left\langle \left\langle \frac{x_{2}^{1}}{y_{4}^{3}} \right\rangle \right\rangle \right| \right|\left\{ \left\lceil \left\lfloor \frac{x_{2}^{1}}{y_{4}^{3}} \right\rfloor \right\rceil \right\}{\lbrack\rbrack}`

.. container:: ltx-source

   ::

       
      \[ \left(\left[\left\lbrack \left\{\left\lbrace\left\lfloor 
      \left\lceil\left\langle\left/ \left|\left\|\left\uparrow 
      \left\downarrow\left\updownarrow\left<\left\lmoustache
      \left\lgroup\frac 12\right\rgroup
      \right\rmoustache\right>\right\Updownarrow\right\downarrow 
      \right\Uparrow\right\Vert\right\vert \right\backslash\right\rangle
      \right\rceil\right\rfloor\right\rbrace\right\} \right\rbrack\right]\right)\]

:math:`\left( \left\lbrack \left\lbrack \left\{ \left\{ \left\lfloor \left\lceil \left\langle {/\left| {\parallel \left. \uparrow\left. \downarrow\left. \updownarrow\left\langle {⎰{〔\frac{1}{2}〕}⎱} \right\rangle\Updownarrow \right.\downarrow \right.\Uparrow \right. \parallel} \right| \smallsetminus} \right\rangle \right\rceil \right\rfloor \right\} \right\} \right\rbrack \right\rbrack \right)`

.. _math2:

Math examples
-------------

.. container:: ltx-source

   ::

      \providecommand\operatorname[1]{%
        \mathmo{#1}%
        \mathattribute{form}{prefix}%
        \mathattribute{movablelimits}{true}%
      }
      \def\Dmin{\operatorname{dmin}}
      $\min _xf(x) >\Dmin _xf(x)$.

Translation
:math:`\min_{x}f\left( x \right) > \operatorname{dmin}_{x}f\left( x \right)`

Limits
------

.. container:: ltx-source

   ::

      \def\A#1{\mathop a #1_b, \mathop a#1^c, \mathop a#1_b^c\qquad}
      $\A{} \A\limits \A\nolimits \A\displaylimits $
      \[\A{} \A\limits \A\nolimits \A\displaylimits \]

Compare the inline math formula
:math:`a_{b},a^{c},a_{b}^{c}\underset{b}{a},\overset{c}{a},\underset{b}{\overset{c}{a}} a_{b},a^{c},a_{b}^{c} a_{b},a^{c},a_{b}^{c}`
and the display math formula

:math:`\underset{b}{a},\overset{c}{a},\underset{b}{\overset{c}{a}}\underset{b}{a},\overset{c}{a},\underset{b}{\overset{c}{a}} a_{b},a^{c},a_{b}^{c}\underset{b}{a},\overset{c}{a},\underset{b}{\overset{c}{a}}`

.. container:: ltx-source

   ::

      \DeclareMathOperator{\Sin}{sin}
      \DeclareMathOperator*{\Limsup}{lim \, sup}
      %% the effect of * is visible only in display style
      \[\Sin^2 = \sin^2 = \operatorname{sin}^2 \quad
      \Limsup_x = \limsup_x = \operatorname*{lim\;sup}_x \]

:math:`\sin^{2} = \sin^{2} = \sin^{2}\operatorname{lim\ sup}\limits_{x} = \operatorname{lim\ sup}\limits_{x} = \operatorname{lim\ sup}\limits_{x}`

Attributes
----------

.. container:: ltx-source

   ::

      \begin{align}
      \formulaattribute{tag}{8-2-3}
      \thismathattribute{background}{yellow}
      \tableattribute{mathcolor}{red}
      \rowattribute{mathvariant}{bold} x^2 + y^2+100 &=  z^2 \\
      \cellattribute{columnalign}{left}\cellattribute{class}{bl}  x^3 + y^3+1 &<  z^3
      \cellattribute{mathbackground}{white}\cellattribute{mathvariant}{bold} 
      \end{align}

This example produces illegal MathML (illegal attribute names) so that
what you see below is a modification of the MathML code produced by
*Tralics*. The attribute ``background`` is illegal, it was replaced by
``mathbackground``. This attribute, as well as ``mathcolor`` and
``mathvariant`` can only be put in token elements. So we inserted two
``<mstyle>`` elements with the attributes, one that contains the table,
one that contains the content of the last cell. It is not possible to
add a ``mathvariant`` attribute to the first row since (a) one cannot
put the row in a ``<mstyle>`` element and (b) the child of the row
cannot be a ``<mstyle>`` element.

:math:`\begin{array}{cl}
{x^{2} + y^{2} + 100} & {= z^{2}} \\
{x^{3} + y^{3} + 1} & \mathbf{< z^{3}} \\
\end{array}`

.. _spacing:

Math spacing
------------

.. container:: ltx-source

   ::

      Math spacing\\
      $xxxxx$\\
      $x\,x\>x\;x\!x$\\
      $a\,\,\,\,\,a\>\>\>\>\>a$\\
      $a\;\;\;a\;\;\;\;a$\\
        

| Math spacing
| :math:`xxxxx`
| :math:`x\, x\ x\; x\! x`
| :math:`a\,\,\,\,\, a\ \ \ \ \ a`
| :math:`a\;\;\; a\;\;\;\; a`

Sideset
-------

.. container:: ltx-source

   ::

      $\sideset{}{'}\sum_i x_i$
      $\sideset{^{a}_b}{_{D}^c}\sum_x^yw$

Translates as ∑' i x i and ∑Dcba x y w; same formula in
``\displaystyle`` added ∑' i x i and ∑Dcba x y w

.. container:: ltx-source

   ::

      \[\xleftarrow{U+u}  \xleftarrow[D+d]{} \xleftarrow[U+u+v]{D+d}
      \xrightarrow{U+u}  \xrightarrow[D+d]{} \xrightarrow[U+u]{P+p+q}\]

:math:`\overset{U + u}{\leftarrow}\underset{D + d}{\leftarrow}\underset{U + u + v}{\overset{D + d}{\leftarrow}}\overset{U + u}{\rightarrow}\underset{D + d}{\rightarrow}\underset{U + u}{\overset{P + p + q}{\rightarrow}}`

Characters
----------

The following tables were generated accorging to the code given in `this
file <doc-chars.html>`__. We have regoupred all characters with Unicode
betwenn U+1D400 and U+1D7FF in a single table. At position 1D551 there
is ``\red\mathZopf`` where the first fommand is defined by
``\def\red#1{#1\mathattribute{mathcolor}{red}}``. This means that the
character shouls be there, but is in fact at position U+2124.

:math:`\begin{array}{lcccccccccccccccc}
\text{1d400} & \mathbf{A} & \mathbf{B} & \mathbf{C} & \mathbf{D} & \mathbf{E} & \mathbf{F} & \mathbf{G} & \mathbf{H} & \mathbf{I} & \mathbf{J} & \mathbf{K} & \mathbf{L} & \mathbf{M} & \mathbf{N} & \mathbf{O} & \mathbf{P} \\
\text{1d410} & \mathbf{Q} & \mathbf{R} & \mathbf{S} & \mathbf{T} & \mathbf{U} & \mathbf{V} & \mathbf{W} & \mathbf{X} & \mathbf{Y} & \mathbf{Z} & \mathbf{a} & \mathbf{b} & \mathbf{c} & \mathbf{d} & \mathbf{e} & \mathbf{f} \\
\text{1d420} & \mathbf{g} & \mathbf{h} & \mathbf{i} & \mathbf{j} & \mathbf{k} & \mathbf{l} & \mathbf{m} & \mathbf{n} & \mathbf{o} & \mathbf{p} & \mathbf{q} & \mathbf{r} & \mathbf{s} & \mathbf{t} & \mathbf{u} & \mathbf{v} \\
\text{1d430} & \mathbf{w} & \mathbf{x} & \mathbf{y} & \mathbf{z} & A & B & C & D & E & F & G & H & I & J & K & L \\
\text{1d440} & M & N & O & P & Q & R & S & T & U & V & W & X & Y & Z & a & b \\
\text{1d450} & c & d & e & f & g & h & i & j & k & l & m & n & o & p & q & r \\
\text{1d460} & s & t & u & v & w & x & y & z & \mathbf{A} & \mathbf{B} & \mathbf{C} & \mathbf{D} & \mathbf{E} & \mathbf{F} & \mathbf{G} & \mathbf{H} \\
\text{1d470} & \mathbf{I} & \mathbf{J} & \mathbf{K} & \mathbf{L} & \mathbf{M} & \mathbf{N} & \mathbf{O} & \mathbf{P} & \mathbf{Q} & \mathbf{R} & \mathbf{S} & \mathbf{T} & \mathbf{U} & \mathbf{V} & \mathbf{W} & \mathbf{X} \\
\text{1d480} & \mathbf{Y} & \mathbf{Z} & \mathbf{a} & \mathbf{b} & \mathbf{c} & \mathbf{d} & \mathbf{e} & \mathbf{f} & \mathbf{g} & \mathbf{h} & \mathbf{i} & \mathbf{j} & \mathbf{k} & \mathbf{l} & \mathbf{m} & \mathbf{n} \\
\text{1d490} & \mathbf{o} & \mathbf{p} & \mathbf{q} & \mathbf{r} & \mathbf{s} & \mathbf{t} & \mathbf{u} & \mathbf{v} & \mathbf{w} & \mathbf{x} & \mathbf{y} & \mathbf{z} & \mathcal{A} & \mathcal{B} & \mathcal{C} & \mathcal{D} \\
\text{1d4a0} & \mathcal{E} & \mathcal{F} & \mathcal{G} & \mathcal{H} & \mathcal{I} & \mathcal{J} & \mathcal{K} & \mathcal{L} & \mathcal{M} & \mathcal{N} & \mathcal{O} & \mathcal{P} & \mathcal{Q} & \mathcal{R} & \mathcal{S} & \mathcal{T} \\
\text{1d4b0} & \mathcal{U} & \mathcal{V} & \mathcal{W} & \mathcal{X} & \mathcal{Y} & \mathcal{Z} & \mathcal{a} & \mathcal{b} & \mathcal{c} & \mathcal{d} & \mathcal{e} & \mathcal{f} & \mathcal{g} & \mathcal{h} & \mathcal{i} & \mathcal{j} \\
\text{1d4c0} & \mathcal{k} & \mathcal{l} & \mathcal{m} & \mathcal{n} & \mathcal{o} & \mathcal{p} & \mathcal{q} & \mathcal{r} & \mathcal{s} & \mathcal{t} & \mathcal{u} & \mathcal{v} & \mathcal{w} & \mathcal{x} & \mathcal{y} & \mathcal{z} \\
\text{1d4d0} & \mathcal{A} & \mathcal{B} & \mathcal{C} & \mathcal{D} & \mathcal{E} & \mathcal{F} & \mathcal{G} & \mathcal{H} & \mathcal{I} & \mathcal{J} & \mathcal{K} & \mathcal{L} & \mathcal{M} & \mathcal{N} & \mathcal{O} & \mathcal{P} \\
\text{1d4e0} & \mathcal{Q} & \mathcal{R} & \mathcal{S} & \mathcal{T} & \mathcal{U} & \mathcal{V} & \mathcal{W} & \mathcal{X} & \mathcal{Y} & \mathcal{Z} & \mathcal{a} & \mathcal{b} & \mathcal{c} & \mathcal{d} & \mathcal{e} & \mathcal{f} \\
\text{1d4f0} & \mathcal{g} & \mathcal{h} & \mathcal{i} & \mathcal{j} & \mathcal{k} & \mathcal{l} & \mathcal{m} & \mathcal{n} & \mathcal{o} & \mathcal{p} & \mathcal{q} & \mathcal{r} & \mathcal{s} & \mathcal{t} & \mathcal{u} & \mathcal{v} \\
\text{1d500} & \mathcal{w} & \mathcal{x} & \mathcal{y} & \mathcal{z} & \mathfrak{A} & \mathfrak{B} & \mathfrak{C} & \mathfrak{D} & \mathfrak{E} & \mathfrak{F} & \mathfrak{G} & \mathfrak{H} & \Im & \mathfrak{J} & \mathfrak{K} & \mathfrak{L} \\
\text{1d510} & \mathfrak{M} & \mathfrak{N} & \mathfrak{O} & \mathfrak{P} & \mathfrak{Q} & \Re & \mathfrak{S} & \mathfrak{T} & \mathfrak{U} & \mathfrak{V} & \mathfrak{W} & \mathfrak{X} & \mathfrak{Y} & \mathfrak{Z} & \mathfrak{a} & \mathfrak{b} \\
\text{1d520} & \mathfrak{c} & \mathfrak{d} & \mathfrak{e} & \mathfrak{f} & \mathfrak{g} & \mathfrak{h} & \mathfrak{i} & \mathfrak{j} & \mathfrak{k} & \mathfrak{l} & \mathfrak{m} & \mathfrak{n} & \mathfrak{o} & \mathfrak{p} & \mathfrak{q} & \mathfrak{r} \\
\text{1d530} & \mathfrak{s} & \mathfrak{t} & \mathfrak{u} & \mathfrak{v} & \mathfrak{w} & \mathfrak{x} & \mathfrak{y} & \mathfrak{z} & \mathbb{A} & \mathbb{B} & \mathbb{C} & \mathbb{D} & \mathbb{E} & \mathbb{F} & \mathbb{G} & \mathbb{H} \\
\text{1d540} & \mathbb{I} & \mathbb{J} & \mathbb{K} & \mathbb{L} & \mathbb{M} & \mathbb{N} & \mathbb{O} & \mathbb{P} & \mathbb{Q} & \mathbb{R} & \mathbb{S} & \mathbb{T} & \mathbb{U} & \mathbb{V} & \mathbb{W} & \mathbb{X} \\
\text{1d550} & \mathbb{Y} & \mathbb{Z} & \mathbb{a} & \mathbb{b} & \mathbb{c} & \mathbb{d} & \mathbb{e} & \mathbb{f} & \mathbb{g} & \mathbb{h} & \mathbb{i} & \mathbb{j} & \Bbbk & \mathbb{l} & \mathbb{m} & \mathbb{n} \\
\text{1d560} & \mathbb{o} & \mathbb{p} & \mathbb{q} & \mathbb{r} & \mathbb{s} & \mathbb{t} & \mathbb{u} & \mathbb{v} & \mathbb{w} & \mathbb{x} & \mathbb{y} & \mathbb{z} & \mathfrak{A} & \mathfrak{B} & \mathfrak{C} & \mathfrak{D} \\
\text{1d570} & \mathfrak{E} & \mathfrak{F} & \mathfrak{G} & \mathfrak{H} & \mathfrak{I} & \mathfrak{J} & \mathfrak{K} & \mathfrak{L} & \mathfrak{M} & \mathfrak{N} & \mathfrak{O} & \mathfrak{P} & \mathfrak{Q} & \mathfrak{R} & \mathfrak{S} & \mathfrak{T} \\
\text{1d580} & \mathfrak{U} & \mathfrak{V} & \mathfrak{W} & \mathfrak{X} & \mathfrak{Y} & \mathfrak{Z} & \mathfrak{a} & \mathfrak{b} & \mathfrak{c} & \mathfrak{d} & \mathfrak{e} & \mathfrak{f} & \mathfrak{g} & \mathfrak{h} & \mathfrak{i} & \mathfrak{j} \\
\text{1d590} & \mathfrak{k} & \mathfrak{l} & \mathfrak{m} & \mathfrak{n} & \mathfrak{o} & \mathfrak{p} & \mathfrak{q} & \mathfrak{r} & \mathfrak{s} & \mathfrak{t} & \mathfrak{u} & \mathfrak{v} & \mathfrak{w} & \mathfrak{x} & \mathfrak{y} & \mathfrak{z} \\
\text{1d5a0} & \mathsf{A} & \mathsf{B} & \mathsf{C} & \mathsf{D} & \mathsf{E} & \mathsf{F} & \mathsf{G} & \mathsf{H} & \mathsf{I} & \mathsf{J} & \mathsf{K} & \mathsf{L} & \mathsf{M} & \mathsf{N} & \mathsf{O} & \mathsf{P} \\
\text{1d5b0} & \mathsf{Q} & \mathsf{R} & \mathsf{S} & \mathsf{T} & \mathsf{U} & \mathsf{V} & \mathsf{W} & \mathsf{X} & \mathsf{Y} & \mathsf{Z} & \mathsf{a} & \mathsf{b} & \mathsf{c} & \mathsf{d} & \mathsf{e} & \mathsf{f} \\
\text{1d5c0} & \mathsf{g} & \mathsf{h} & \mathsf{i} & \mathsf{j} & \mathsf{k} & \mathsf{l} & \mathsf{m} & \mathsf{n} & \mathsf{o} & \mathsf{p} & \mathsf{q} & \mathsf{r} & \mathsf{s} & \mathsf{t} & \mathsf{u} & \mathsf{v} \\
\text{1d5d0} & \mathsf{w} & \mathsf{x} & \mathsf{y} & \mathsf{z} & \mathbf{A} & \mathbf{B} & \mathbf{C} & \mathbf{D} & \mathbf{E} & \mathbf{F} & \mathbf{G} & \mathbf{H} & \mathbf{I} & \mathbf{J} & \mathbf{K} & \mathbf{L} \\
\text{1d5e0} & \mathbf{M} & \mathbf{N} & \mathbf{O} & \mathbf{P} & \mathbf{Q} & \mathbf{R} & \mathbf{S} & \mathbf{T} & \mathbf{U} & \mathbf{V} & \mathbf{W} & \mathbf{X} & \mathbf{Y} & \mathbf{Z} & \mathbf{a} & \mathbf{b} \\
\text{1d5f0} & \mathbf{c} & \mathbf{d} & \mathbf{e} & \mathbf{f} & \mathbf{g} & \mathbf{h} & \mathbf{i} & \mathbf{j} & \mathbf{k} & \mathbf{l} & \mathbf{m} & \mathbf{n} & \mathbf{o} & \mathbf{p} & \mathbf{q} & \mathbf{r} \\
\text{1d600} & \mathbf{s} & \mathbf{t} & \mathbf{u} & \mathbf{v} & \mathbf{w} & \mathbf{x} & \mathbf{y} & \mathbf{z} & \mathsf{A} & \mathsf{B} & \mathsf{C} & \mathsf{D} & \mathsf{E} & \mathsf{F} & \mathsf{G} & \mathsf{H} \\
\text{1d610} & \mathsf{I} & \mathsf{J} & \mathsf{K} & \mathsf{L} & \mathsf{M} & \mathsf{N} & \mathsf{O} & \mathsf{P} & \mathsf{Q} & \mathsf{R} & \mathsf{S} & \mathsf{T} & \mathsf{U} & \mathsf{V} & \mathsf{W} & \mathsf{X} \\
\text{1d620} & \mathsf{Y} & \mathsf{Z} & \mathsf{a} & \mathsf{b} & \mathsf{c} & \mathsf{d} & \mathsf{e} & \mathsf{f} & \mathsf{g} & \mathsf{h} & \mathsf{i} & \mathsf{j} & \mathsf{k} & \mathsf{l} & \mathsf{m} & \mathsf{n} \\
\text{1d630} & \mathsf{o} & \mathsf{p} & \mathsf{q} & \mathsf{r} & \mathsf{s} & \mathsf{t} & \mathsf{u} & \mathsf{v} & \mathsf{w} & \mathsf{x} & \mathsf{y} & \mathsf{z} & \mathbf{A} & \mathbf{B} & \mathbf{C} & \mathbf{D} \\
\text{1d640} & \mathbf{E} & \mathbf{F} & \mathbf{G} & \mathbf{H} & \mathbf{I} & \mathbf{J} & \mathbf{K} & \mathbf{L} & \mathbf{M} & \mathbf{N} & \mathbf{O} & \mathbf{P} & \mathbf{Q} & \mathbf{R} & \mathbf{S} & \mathbf{T} \\
\text{1d650} & \mathbf{U} & \mathbf{V} & \mathbf{W} & \mathbf{X} & \mathbf{Y} & \mathbf{Z} & \mathbf{a} & \mathbf{b} & \mathbf{c} & \mathbf{d} & \mathbf{e} & \mathbf{f} & \mathbf{g} & \mathbf{h} & \mathbf{i} & \mathbf{j} \\
\text{1d660} & \mathbf{k} & \mathbf{l} & \mathbf{m} & \mathbf{n} & \mathbf{o} & \mathbf{p} & \mathbf{q} & \mathbf{r} & \mathbf{s} & \mathbf{t} & \mathbf{u} & \mathbf{v} & \mathbf{w} & \mathbf{x} & \mathbf{y} & \mathbf{z} \\
\text{1d670} & \mathtt{A} & \mathtt{B} & \mathtt{C} & \mathtt{D} & \mathtt{E} & \mathtt{F} & \mathtt{G} & \mathtt{H} & \mathtt{I} & \mathtt{J} & \mathtt{K} & \mathtt{L} & \mathtt{M} & \mathtt{N} & \mathtt{O} & \mathtt{P} \\
\text{1d670} & \mathtt{A} & \mathtt{B} & \mathtt{C} & \mathtt{D} & \mathtt{E} & \mathtt{F} & \mathtt{G} & \mathtt{H} & \mathtt{I} & \mathtt{J} & \mathtt{K} & \mathtt{L} & \mathtt{M} & \mathtt{N} & \mathtt{O} & \mathtt{P} \\
\text{1d680} & \mathtt{Q} & \mathtt{R} & \mathtt{S} & \mathtt{T} & \mathtt{U} & \mathtt{V} & \mathtt{W} & \mathtt{X} & \mathtt{Y} & \mathtt{Z} & \mathtt{a} & \mathtt{b} & \mathtt{c} & \mathtt{d} & \mathtt{e} & \mathtt{f} \\
\text{1d690} & \mathtt{g} & \mathtt{h} & \mathtt{i} & \mathtt{j} & \mathtt{k} & \mathtt{l} & \mathtt{m} & \mathtt{n} & \mathtt{o} & \mathtt{p} & \mathtt{q} & \mathtt{r} & \mathtt{s} & \mathtt{t} & \mathtt{u} & \mathtt{v} \\
\text{1d6a0} & \mathtt{w} & \mathtt{x} & \mathtt{y} & \mathtt{z} & & & & & \mathbf{Α} & \mathbf{Β} & \mathbf{\Gamma} & \mathbf{\Delta} & \mathbf{Ε} & \mathbf{Ζ} & \mathbf{Η} & \mathbf{\Theta} \\
\text{1d6b0} & \mathbf{Ι} & \mathbf{Κ} & \mathbf{\Lambda} & \mathbf{Μ} & \mathbf{Ν} & \mathbf{\Xi} & \mathbf{Ο} & \mathbf{\Pi} & \mathbf{Ρ} & \mathbf{ϴ} & \mathbf{\Sigma} & \mathbf{Τ} & \mathbf{\Upsilon} & \mathbf{\Phi} & \mathbf{Χ} & \mathbf{\Psi} \\
\text{1d6c0} & \mathbf{\Omega} & \mathbf{∇} & \mathbf{α} & \mathbf{β} & \mathbf{γ} & \mathbf{δ} & \mathbf{ε} & \mathbf{ζ} & \mathbf{η} & \mathbf{θ} & \mathbf{ι} & \mathbf{κ} & \mathbf{λ} & \mathbf{μ} & \mathbf{ν} & \mathbf{ξ} \\
\text{1d6d0} & \mathbf{ο} & \mathbf{π} & \mathbf{ρ} & \mathbf{ς} & \mathbf{σ} & \mathbf{τ} & \mathbf{υ} & \mathbf{φ} & \mathbf{χ} & \mathbf{ψ} & \mathbf{ω} & \mathbf{∂} & \mathbf{ϵ} & \mathbf{ϑ} & \mathbf{ϰ} & \mathbf{ϕ} \\
\text{1d6e0} & \mathbf{ϱ} & \mathbf{ϖ} & \mathit{Α} & \mathit{Β} & \mathit{Γ} & \mathit{Δ} & \mathit{Ε} & \mathit{Ζ} & \mathit{Η} & \mathit{Θ} & \mathit{Ι} & \mathit{Κ} & \mathit{Λ} & \mathit{Μ} & \mathit{Ν} & \mathit{Ξ} \\
\text{1d6f0} & \mathit{Ο} & \mathit{Π} & \mathit{Ρ} & \mathit{ϴ} & \mathit{Σ} & \mathit{Τ} & \mathit{Υ} & \mathit{Φ} & \mathit{Χ} & \mathit{Ψ} & \mathit{Ω} & \mathit{∇} & \alpha & \beta & \gamma & \delta \\
\text{1d700} & \varepsilon & \zeta & \eta & \theta & \iota & \kappa & \lambda & \mu & \nu & \xi & \mathit{ο} & \pi & \rho & \varsigma & \sigma & \tau \\
\text{1d710} & \upsilon & \varphi & \chi & \psi & \omega & \partial & \epsilon & \vartheta & \varkappa & \phi & \varrho & \varpi & \mathbf{Α} & \mathbf{Β} & \mathbf{Γ} & \mathbf{Δ} \\
\text{1d720} & \mathbf{Ε} & \mathbf{Ζ} & \mathbf{Η} & \mathbf{Θ} & \mathbf{Ι} & \mathbf{Κ} & \mathbf{Λ} & \mathbf{Μ} & \mathbf{Ν} & \mathbf{Ξ} & \mathbf{Ο} & \mathbf{Π} & \mathbf{Ρ} & \mathbf{ϴ} & \mathbf{Σ} & \mathbf{Τ} \\
\text{1d730} & \mathbf{Υ} & \mathbf{Φ} & \mathbf{Χ} & \mathbf{Ψ} & \mathbf{Ω} & \mathbf{∇} & \mathbf{α} & \mathbf{β} & \mathbf{γ} & \mathbf{δ} & \mathbf{ε} & \mathbf{ζ} & \mathbf{η} & \mathbf{θ} & \mathbf{ι} & \mathbf{κ} \\
\text{1d740} & \mathbf{λ} & \mathbf{μ} & \mathbf{ν} & \mathbf{ξ} & \mathbf{ο} & \mathbf{π} & \mathbf{ρ} & \mathbf{ς} & \mathbf{σ} & \mathbf{τ} & \mathbf{υ} & \mathbf{φ} & \mathbf{χ} & \mathbf{ψ} & \mathbf{ω} & \mathbf{∂} \\
\text{1d750} & \mathbf{ϵ} & \mathbf{ϑ} & \mathbf{ϰ} & \mathbf{ϕ} & \mathbf{ϱ} & \mathbf{ϖ} & \mathbf{Α} & \mathbf{Β} & \mathbf{Γ} & \mathbf{Δ} & \mathbf{Ε} & \mathbf{Ζ} & \mathbf{Η} & \mathbf{Θ} & \mathbf{Ι} & \mathbf{Κ} \\
\text{1d760} & \mathbf{Λ} & \mathbf{Μ} & \mathbf{Ν} & \mathbf{Ξ} & \mathbf{Ο} & \mathbf{Π} & \mathbf{Ρ} & \mathbf{ϴ} & \mathbf{Σ} & \mathbf{Τ} & \mathbf{Υ} & \mathbf{Φ} & \mathbf{Χ} & \mathbf{Ψ} & \mathbf{Ω} & \mathbf{∇} \\
\text{1d7c0} & & & & & & & & & & & & & & & \mathbf{0} & \mathbf{1} \\
\text{1d7d0} & \mathbf{2} & \mathbf{3} & \mathbf{4} & \mathbf{5} & \mathbf{6} & \mathbf{7} & \mathbf{8} & \mathbf{9} & \mathbb{0} & \mathbb{1} & \mathbb{2} & \mathbb{3} & \mathbb{4} & \mathbb{5} & \mathbb{6} & \mathbb{7} \\
\text{1d7e0} & \mathbb{8} & \mathbb{9} & \mathsf{0} & \mathsf{1} & \mathsf{2} & \mathsf{3} & \mathsf{4} & \mathsf{5} & \mathsf{6} & \mathsf{7} & \mathsf{8} & \mathsf{9} & \mathbf{0} & \mathbf{1} & \mathbf{2} & \mathbf{3} \\
\text{1d7f0} & \mathbf{4} & \mathbf{5} & \mathbf{6} & \mathbf{7} & \mathbf{8} & \mathbf{9} & \mathtt{0} & \mathtt{1} & \mathtt{2} & \mathtt{3} & \mathtt{4} & \mathtt{5} & \mathtt{6} & \mathtt{7} & \mathtt{8} & \mathtt{9} \\
\end{array}`

Other symbols

:math:`\begin{array}{lcccccccccccccccc}
\text{2300} & \varnothing & ⌁ & ⌂ & ⌃ & ⌄ & \barwedge & \doublebarwedge & ⌇ & \lceil & \rceil & \lfloor & \rfloor & ⌌ & ⌍ & ⌎ & ⌏ \\
\text{2310} & ⌐ & ⌑ & ⌒ & ⌓ & ⌔ & ⌕ & ⌖ & ⌗ & ⌘ & ⌙ & ⌚ & ⌛ & ⌜ & ⌝ & ⌞ & ⌟ \\
\text{2320} & ⌠ & ⌡ & \frown & \smile & ⌤ & ⌥ & ⌦ & ⌧ & ⌨ & \langle & \rangle & ⌫ & ⌬ & ⌭ & ⌮ & ⌯ \\
\text{2330} & & & & & & & ⌶ & & & ⌹ & & & & ⌽ & & ⌿ \\
\text{2340} & ⍀ & & & & & & & ⍇ & ⍈ & & & & & & & \\
\text{2350} & ⍐ & & & & & & & ⍗ & & & & & & & & \\
\text{2600} & & ☁ & & & & \bigstar & ☆ & & & & & & ☌ & {☍☽} & ☾ & ☿ \\
\text{2640} & ♀ & ♁ & ♂ & ♃ & ♄ & ♅ & ♆ & ♇ & ♈ & ♉ & ♊ & ♋ & ♌ & ♍ & ♎ & ♏ \\
\text{2650} & ♐ & ♑ & ♒ & ♓ & ♔ & ♕ & ♖ & ♗ & ♘ & ♙ & ♚ & ♛ & ♜ & ♝ & ♞ & ♟ \\
\text{2660} & \spadesuit & \heartsuit & \diamondsuit & \clubsuit & ♤ & ♥ & ♦ & ♧ & & ♩ & ♪ & & & \flat & \natural & \sharp \\
\text{2680} & ⚀ & ⚁ & ⚂ & ⚃ & ⚄ & ⚅ & & & & & & & & & & \\
\end{array}`

And more

:math:`\begin{array}{lcccccccccccccccc}
\text{2100} & ℀ & ℁ & {\mathbb{C}} & ℃ & ℄ & ℅ & ℆ & ℇ & ℈ & ℉ & \mathcal{g} & \mathcal{H} & \mathfrak{H} & \mathbb{H} & h & \hslash \\
\text{2110} & \mathcal{I} & \Im & \mathcal{L} & \ell & ℔ & \mathbb{N} & № & ℗ & \wp & \mathbb{P} & \mathbb{Q} & \mathcal{R} & \Re & \mathbb{R} & ℞ & ℟ \\
\text{2120} & ℠ & ℡ & ™ & ℣ & \mathbb{Z} & ℥ & \mathrm{\Omega} & ℧ & \mathfrak{Z} & ℩ & K & \mathring{\mathrm{A}} & \mathcal{B} & \mathfrak{C} & ℮ & \mathcal{e} \\
\text{2130} & \mathcal{E} & \mathcal{F} & \Finv & \mathcal{M} & \mathcal{o} & \aleph & \beth & \gimel & \daleth & ℹ & ℺ & ℻ & & \mathbb{γ} & \mathbb{Γ} & \mathbb{Π} \\
\text{2140} & \mathbb{∑} & \Game & ⅂ & ⅃ & ⅄ & \mathbb{D} & \mathbb{d} & \mathbb{e} & \mathbb{i} & \mathbb{j} & ⅊ & ⅋ & & & & \\
\text{2190} & \leftarrow & \uparrow & \rightarrow & \downarrow & \leftrightarrow & \updownarrow & \nwarrow & \nearrow & \searrow & \swarrow & \nleftarrow & \nrightarrow & . & ↝ & \twoheadleftarrow & ↟ \\
\text{21A0} & \twoheadrightarrow & ↡ & \leftarrowtail & \rightarrowtail & ↤ & ↥ & \mapsto & ↧ & . & \hookleftarrow & \hookrightarrow & \looparrowleft & \looparrowright & \leftrightsquigarrow & \nleftrightarrow & ↯ \\
\text{21B0} & \Lsh & \Rsh & ↲ & ↳ & . & . & \curvearrowleft & \curvearrowright & . & . & \circlearrowleft & \circlearrowright & \leftharpoonup & \leftharpoondown & \upharpoonright & \upharpoonleft \\
\text{21C0} & \rightharpoonup & \rightharpoondown & \downharpoonright & \downharpoonleft & \rightleftarrows & ⇅ & \leftrightarrows & \leftleftarrows & \upuparrows & \rightrightarrows & \downdownarrows & \leftrightharpoons & \rightleftharpoons & \nLeftarrow & \nLeftrightarrow & \nRightarrow \\
\text{21D0} & \Leftarrow & \Uparrow & \Rightarrow & \Downarrow & \Leftrightarrow & \Updownarrow & ⇖ & ⇗ & ⇘ & ⇙ & \Lleftarrow & \Rrightarrow & ⇜ & \rightsquigarrow & . & . \\
\text{21E0} & ⇠ & . & ⇢ & . & ⇤ & ⇥ & . & . & . & . & . & . & . & . & . & . \\
\text{21F0} & . & . & . & . & . & ⇵ & . & . & . & . & . & . & . & ⇽ & ⇾ & ⇿ \\
\text{2200} & \forall & \complement & \partial & \exists & \nexists & \varnothing & \mathrm{\Delta} & \nabla & \in & \notin & \in & \ni & ∌ & \ni & \blacksquare & \prod \\
\text{2210} & \coprod & \sum & - & \mp & \dotplus & \slash & \smallsetminus & \ast & \circ & \bullet & \sqrt{} & \sqrt[3]{} & \sqrt[4]{} & \propto & \infty & ∟ \\
\text{2220} & \angle & \measuredangle & \sphericalangle & \mid & \nmid & \parallel & \nparallel & \land & \vee & \cap & \cup & \int & \iint & \iiint & \oint & ∯ \\
\text{2230} & ∰ & ∱ & ∲ & ∳ & \therefore & \because & : & :: & ∸ & -: & ∺ & ∻ & \sim & \backsim & ∾ & ∾ \\
\text{2240} & \wr & \nsim & \eqsim & \simeq & ≄ & \cong & ≆ & \ncong & \approx & ≉ & \approxeq & ≋ & ≌ & \asymp & \Bumpeq & \bumpeq \\
\text{2250} & \doteq & \Doteq & \fallingdotseq & \risingdotseq & ≔ & ≕ & \eqcirc & \circeq & ≘ & ≙ & ≚ & ≛ & \triangleq & ≝ & ≞ & ≟ \\
\text{2260} & \neq & \equiv & ≢ & ≣ & \leq & \geq & \leqq & \geqq & \lneqq & \gneqq & \ll & \gg & \between & ≭ & \nless & \ngtr \\
\text{2270} & \nleq & \ngeq & \lesssim & \gtrsim & ≴ & ≵ & \lessgtr & \gtrless & ≸ & ≹ & \prec & \succ & \preccurlyeq & \succcurlyeq & \precsim & \succsim \\
\text{2280} & \nprec & \nsucc & \subset & \supset & ⊄ & ⊅ & \subseteq & \supseteq & \nsubseteq & \nsupseteq & \subsetneq & \supsetneq & ⊌ & ⊍ & \uplus & ⊏ \\
\text{2290} & ⊐ & \sqsubseteq & \sqsupseteq & \sqcap & \sqcup & \oplus & \ominus & \otimes & \oslash & \odot & \circledcirc & \circledast & ⊜ & \circleddash & \boxplus & \boxminus \\
\text{22a0} & \boxtimes & \boxdot & \vdash & \dashv & \top & \bot & \vdash & \models & \vDash & \Vdash & \Vvdash & ⊫ & \nvdash & \nvDash & \nVdash & \nVDash \\
\text{22b0} & ⊰ & ⊱ & \vartriangleleft & \vartriangleright & \trianglelefteq & \trianglerighteq & ⊶ & ⊷ & \multimap & ⊹ & \intercal & \veebar & \barwedge & ⊽ & ⊾ & ⊿ \\
\text{22c0} & \bigwedge & \bigvee & \bigcap & \bigcup & \diamond & \cdot & \star & \divideontimes & \bowtie & \ltimes & \rtimes & \leftthreetimes & \rightthreetimes & \backsimeq & \curlyvee & \curlywedge \\
\text{22d0} & \Subset & \Supset & \Cap & \Cup & \pitchfork & ⋕ & \lessdot & \gtrdot & \lll & \ggg & \lesseqgtr & \gtreqless & ⋜ & ⋝ & \curlyeqprec & \curlyeqsucc \\
\text{22e0} & \npreceq & \nsucceq & ⋢ & ⋣ & ⋤ & ⋥ & \lnsim & \gnsim & \precnsim & \succnsim & \ntriangleleft & \ntriangleright & \ntrianglelefteq & \ntrianglerighteq & \vdots & \cdots \\
\text{22f0} & ⋰ & \ddots & ⋲ & ⋳ & ⋴ & ⋵ & ⋶ & ⋷ & ⋸ & ⋹ & ⋺ & ⋻ & ⋼ & ⋽ & ⋾ & \mathsf{E} \\
\text{2300} & \varnothing & ⌁ & ⌂ & ⌃ & ⌄ & \barwedge & \doublebarwedge & ⌇ & \lceil & \rceil & \lfloor & \rfloor & ⌌ & ⌍ & ⌎ & ⌏ \\
\text{2310} & ⌐ & ⌑ & ⌒ & ⌓ & ⌔ & ⌕ & ⌖ & ⌗ & ⌘ & ⌙ & ⌚ & ⌛ & ⌜ & ⌝ & ⌞ & ⌟ \\
\text{2320} & ⌠ & ⌡ & \frown & \smile & ⌤ & ⌥ & ⌦ & ⌧ & ⌨ & \langle & \rangle & ⌫ & ⌬ & ⌭ & ⌮ & ⌯ \\
\text{2330} & & & & & & & ⌶ & & & ⌹ & & & & ⌽ & & ⌿ \\
\text{2340} & ⍀ & & & & & & & ⍇ & ⍈ & & & & & & & \\
\text{2350} & ⍐ & & & & & & & ⍗ & & & & & & & & \\
\text{2600} & & ☁ & & & & \bigstar & ☆ & & & & & & ☌ & {☍☽} & ☾ & ☿ \\
\text{2640} & ♀ & ♁ & ♂ & ♃ & ♄ & ♅ & ♆ & ♇ & ♈ & ♉ & ♊ & ♋ & ♌ & ♍ & ♎ & ♏ \\
\text{2650} & ♐ & ♑ & ♒ & ♓ & ♔ & ♕ & ♖ & ♗ & ♘ & ♙ & ♚ & ♛ & ♜ & ♝ & ♞ & ♟ \\
\text{2660} & \spadesuit & \heartsuit & \diamondsuit & \clubsuit & ♤ & ♥ & ♦ & ♧ & & ♩ & ♪ & & & \flat & \natural & \sharp \\
\text{2680} & ⚀ & ⚁ & ⚂ & ⚃ & ⚄ & ⚅ & & & & & & & & & & \\
\end{array}`

----

docs/fp.rst
-----------

Examples for the fp package.
============================

Example of \\FParcsin, \\FParccos, \\FParcsincos
------------------------------------------------

.. container:: ltx-source

   ::

      \def\tsc#1#2#3{%Test and example of \FParcsin, \FParccos, \FParcsincos    
      \FParcsin\fps{#1} \testeq\fps{#2}% test that asin(#1)=#2
      \FParccos\fpc{#1} \testeq\fpc{#3}% test that acos(#1)=#3
      \FParcsincos\fpc\fps{#1} \testeq\fps{#3}\testeq\fpc{#2}% test \FParcsincos
      }

      \tsc{-1.}{-1.570796326794896619}{3.141592653589793238}
      \tsc{-.9}  {-1.1197695149986342} {2.690565841793530819}
      \tsc{-.901}{-1.12206913379314448} {2.692865460588041099}
      \tsc{-.8}   {-0.92729521800161225} {2.498091544796508869}
      \tsc{-.8001}{-0.927461903191685794}{2.498258229986582413}
      \tsc{-.7}    {-0.775397496610753039}{2.346193823405649658}
      \tsc{-.70001}{-0.775411499507692744}{2.346207826302589363}
      \tsc{-.6}     {-0.643501108793284369}{2.214297435588180988}
      \tsc{-.600001}{-0.643502358793870307}{2.214298685588766926}
      \tsc{-.5}      {-0.523598775598298861}{2.09439510239319548}
      \tsc{-.5000001}{-0.523598891068356546}{2.094395217863253165}
      \tsc{-.4}       {-0.41151684606748801} {1.982313172862384629}
      \tsc{-.40000001}{-0.411516856978382544}{1.982313183773279163}
      \tsc{-.3}        {-0.304692654015397501}{1.87548898081029412}
      \tsc{-.300000001}{-0.304692655063682339}{1.875488981858578958}
      \tsc{-.2}          {-0.201357920790330786}{1.772154247585227405}
      \tsc{-.20000000001}{-0.201357920800536993}{1.772154247595433612}
      \tsc{-.1}            {-0.100167421161559793}{1.670963747956456412}
      \tsc{-.1000000000001}{-0.100167421161660296}{1.670963747956556915}
      \tsc{0.}{0.}{1.570796326794896619}
      \tsc{0.1}             {0.100167421161559793}{1.470628905633336826}
      \tsc{0.10000000000001}{0.100167421161569843}{1.470628905633326776}
      \tsc{0.2}              {0.201357920790330786}{1.369438406004565833}
      \tsc{0.200000000000001}{0.201357920790331806}{1.369438406004564813}
      \tsc{0.3}               {0.304692654015397501}{1.266103672779499118}
      \tsc{0.3000000000000001}{0.304692654015397605}{1.266103672779499014}
      \tsc{0.4}                {0.41151684606748801} {1.159279480727408609}
      \tsc{0.40000000000000001}{0.411516846067488021}{1.159279480727408598}
      \tsc{0.5}                 {0.523598775598298861}{1.047197551196597758}
      \tsc{0.500000000000000001}{0.523598775598298862}{1.047197551196597757}
      \tsc{0.6}                 {0.643501108793284369}{0.92729521800161225}
      \tsc{0.600000000000000006}{0.643501108793284376}{0.927295218001612243}
      \tsc{0.7}                 {0.775397496610753039}{0.79539883018414358}
      \tsc{0.700000000000000007}{0.775397496610753049}{0.79539883018414357}
      \tsc{0.8}                 {0.92729521800161225} {0.643501108793284369}
      \tsc{0.800000000000000008}{0.927295218001612263}{0.643501108793284356}
      \tsc{0.9}                 {1.1197695149986342}  {0.451026811796262419}
      \tsc{0.900000000000000009}{1.119769514998634221}{0.451026811796262398}
      \tsc{1.}{1.570796326794896619}{0.}

Example of \\FPartan, \\FParccot, \\FParctancot
-----------------------------------------------

.. container:: ltx-source

   ::

      \def\tsc#1#2#3{%Test and example of \FParctan, \FParccot, \FParctancot 
      \FParctan\fps{#1} \testeq\fps{#2}% test that atan(#1)=#2
      \FParccot\fpc{#1} \testeq\fpc{#3}% test that acot(#1)=#3
      \FParctancot\fpc\fps{#1}\testeq\fps{#3}\testeq\fpc{#2}% test \FParctancot
      }

      \tsc{0.889}{0.726704406222857453}{0.844091920572039166}
      \tsc{0.890}{0.727262687996690304}{0.843533638798206315}
      \tsc{0.892}{0.728377589311900894}{0.842418737482995725}
      \tsc{0.894}{0.729490277509065194}{0.841306049285831425}
      \tsc{0.898}{0.731709029900430245}{0.839087296894466374}
      \tsc{0.906}{0.736120146489240496}{0.834676180305656123}
      \tsc{0.922}{0.744837694424903254}{0.825958632369993365}
      \tsc{0.954}{0.761861057414458448}{0.808935269380438171}
      \tsc{0.985}{0.777841632166671506}{0.792954694628225113}
      \tsc{0.992}{0.781382120731606315}{0.789414206063290304}
      \tsc{0.997}{0.783895911147454389}{0.78690041564744223} 

      \tsc{0.}{0.}{1.570796326794896619}
      \tsc{0.1}{0.099668652491162029}{1.47112767430373459}
      \tsc{0.22}{0.216550304976089278}{1.354246021818807341}
      \tsc{0.333}{0.321450524402644595}{1.249345802392252024}
      \tsc{0.4444}{0.418187215564994362}{1.152609111229902257}
      \tsc{0.55555}{0.507094259099305631}{1.063702067695590988}
      \tsc{0.666666}{0.588002142008964001}{0.982794184785932618}
      \tsc{0.7777777}{0.661043120389146583}{0.909753206405750036}
      \tsc{0.88888888}{0.726642335716208364}{0.844153991078688255}
      \tsc{0.999999999}{0.785398162897448356}{0.785398163897448263}
      \tsc{1.}{0.78539816339744831}{0.785398163397448309}
      \tsc{1.2345678901}{0.88998749346786801}{0.680808833327028609}
      \tsc{2.23456789011}{1.150011837102468973}{0.420784489692427646}
      \tsc{4.23456789012}{1.338893311505790293}{0.231903015289106326}
      \tsc{8.2345678901134}{1.449948794166153296}{0.120847532628743323}
      \tsc{16.234567890113456}{1.50927709513268111}{0.061519231662215509}
      \tsc{32.23456789011345678}{1.53978367639978028}{0.031012650395116339}
      \tsc{64.234567890113456789}{1.555229642723458197}{0.015566684071438422}
      \tsc{100.234567890113456789}{1.560820059669425338}{0.009976267125471281}
      \tsc{1000.234567890113456789}{1.569796561640876217}{0.000999765154020402}
      \tsc{10000.234567890113456789}{1.570696329140853809}{0.00009999765404281}
      \tsc{100000.234567890113456789}{1.570786326818353686}{0.000009999976542933}
      \tsc{1000000.234567890113456789}{1.570795326795131187}{0.000000999999765432}
      \tsc{10000000.234567890113456789}{1.570796226794898965}{0.000000099999997654}
      \tsc{100000000.234567890113456789}{1.570796316794896643}{0.000000009999999976}
      \tsc{1000000000.234567890113456789}{1.57079632579489662}{0.000000000999999999}

      \tsc{10000000000.234567890113456789}{1.57079632669489662}{0.000000000099999999}
      \tsc{100000000000.234567890113456789}{1.57079632678489662}{0.000000000009999999}
      \tsc{1000000000000.234567890113456789}{1.57079632679389662}{0.000000000000999999}
      \tsc{10000000000000.234567890113456789}{1.57079632679479662}{0.000000000000099999}
      \tsc{100000000000000.234567890113456789}{1.57079632679488662}{0.000000000000009999}
      \tsc{1000000000000000.234567890113456789}{1.57079632679489562}{0.000000000000000999}
      \tsc{10000000000000000.234567890113456789}{1.57079632679489652}{0.000000000000000099}
      \tsc{100000000000000000.234567890113456789}{1.57079632679489661}{0.000000000000000009}
       \tsc{0.}{0.}{1.570796326794896619}
      \tsc{-0.1}{-0.099668652491162029}{1.670464979286058648}
      \tsc{-0.22}{-0.216550304976089278}{1.787346631770985897}
      \tsc{-0.333}{-0.321450524402644595}{1.892246851197541214}
      \tsc{-0.4444}{-0.418187215564994362}{1.988983542359890981}
      \tsc{-0.55555}{-0.507094259099305631}{2.07789058589420225}
      \tsc{-0.666666}{-0.588002142008964001}{2.15879846880386062}
      \tsc{-0.7777777}{-0.661043120389146583}{2.231839447184043202}
      \tsc{-0.88888888}{-0.726642335716208364}{2.297438662511104983}
      \tsc{-0.999999999}{-0.785398162897448356}{2.356194489692344975}
      \tsc{-1.}{-0.78539816339744831}{2.356194490192344929}
      \tsc{-1.2345678901}{-0.88998749346786801}{2.460783820262764629}
      \tsc{-2.23456789011}{-1.150011837102468973}{2.720808163897365592}
      \tsc{-4.23456789012}{-1.338893311505790293}{2.909689638300686912}
      \tsc{-8.2345678901134}{-1.449948794166153296}{3.020745120961049915}
      \tsc{-16.234567890113456}{-1.50927709513268111}{3.080073421927577729}
      \tsc{-32.23456789011345678}{-1.53978367639978028}{3.110580003194676899}
      \tsc{-64.234567890113456789}{-1.555229642723458197}{3.126025969518354816}
      \tsc{-100.234567890113456789}{-1.560820059669425338}{3.131616386464321957}
      \tsc{-1000.234567890113456789}{-1.569796561640876217}{3.140592888435772836}
      \tsc{-10000.234567890113456789}{-1.570696329140853809}{3.141492655935750428}
      \tsc{-100000.234567890113456789}{-1.570786326818353686}{3.141582653613250305}
      \tsc{-1000000.234567890113456789}{-1.570795326795131187}{3.141591653590027806}
      \tsc{-10000000.234567890113456789}{-1.570796226794898965}{3.141592553589795584}

      \tsc{-100000000.234567890113456789}{-1.570796316794896643}{3.141592643589793262}
      \tsc{-1000000000.234567890113456789}{-1.57079632579489662}{3.141592652589793239}
      \tsc{-10000000000.234567890113456789}{-1.57079632669489662}{3.141592653489793239}
      \tsc{-100000000000.234567890113456789}{-1.57079632678489662}{3.141592653579793239}
      \tsc{-1000000000000.234567890113456789}{-1.57079632679389662}{3.141592653588793239}
      \tsc{-10000000000000.234567890113456789}{-1.57079632679479662}{3.141592653589693239}
      \tsc{-100000000000000.234567890113456789}{-1.57079632679488662}{3.141592653589783239}
      \tsc{-1000000000000000.234567890113456789}{-1.57079632679489562}{3.141592653589792239}
      \tsc{-10000000000000000.234567890113456789}{-1.57079632679489652}{3.141592653589793139}
      \tsc{-100000000000000000.234567890113456789}{-1.57079632679489661}{3.141592653589793229}

Example of \\FPexp
------------------

.. container:: ltx-source

   ::

      % The command \testeq checks that its arguments are equal 
      %Test exp(x) for all integers x (precomputed)
      \FPexp\foo{0}  \testeq\foo{1.}
      \FPexp\foo{1}  \testeq\foo{2.718281828459045235}
      \FPexp\foo{2}  \testeq\foo{7.389056098930650227}
      \FPexp\foo{3}  \testeq\foo{20.085536923187667741}
      \FPexp\foo{4}  \testeq\foo{54.598150033144239078}
      \FPexp\foo{5}  \testeq\foo{148.413159102576603421}
      \FPexp\foo{6}  \testeq\foo{403.428793492735122608}
      \FPexp\foo{7}  \testeq\foo{1096.633158428458599264}
      \FPexp\foo{8}  \testeq\foo{2980.957987041728274744}
      \FPexp\foo{9}  \testeq\foo{8103.08392757538400771}
      \FPexp\foo{10} \testeq\foo{22026.465794806716516958}
      \FPexp\foo{11} \testeq\foo{59874.141715197818455326}
      \FPexp\foo{12} \testeq\foo{162754.791419003920808005}
      \FPexp\foo{13} \testeq\foo{442413.392008920503326103}
      \FPexp\foo{14} \testeq\foo{1202604.284164776777749237}
      \FPexp\foo{15} \testeq\foo{3269017.372472110639301855}
      \FPexp\foo{16} \testeq\foo{8886110.520507872636763024}
      \FPexp\foo{17} \testeq\foo{24154952.753575298214775435}
      \FPexp\foo{18} \testeq\foo{65659969.137330511138786503}
      \FPexp\foo{19} \testeq\foo{178482300.963187260844910034}
      \FPexp\foo{20} \testeq\foo{485165195.409790277969106831}
      \FPexp\foo{21} \testeq\foo{1318815734.483214697209998884}
      \FPexp\foo{22} \testeq\foo{3584912846.131591561681159946}
      \FPexp\foo{23} \testeq\foo{9744803446.248902600034632685}
      \FPexp\foo{24} \testeq\foo{26489122129.843472294139162153}
      \FPexp\foo{25} \testeq\foo{72004899337.385872524161351466}
      \FPexp\foo{26} \testeq\foo{195729609428.838764269776397876}
      \FPexp\foo{27} \testeq\foo{532048240601.798616683747304341}
      \FPexp\foo{28} \testeq\foo{1446257064291.475173677047422997}
      \FPexp\foo{29} \testeq\foo{3931334297144.042074388620580844}
      \FPexp\foo{30} \testeq\foo{10686474581524.462146990468650741}
      \FPexp\foo{31} \testeq\foo{29048849665247.42523108568211168}
      \FPexp\foo{32} \testeq\foo{78962960182680.695160978022635108}
      \FPexp\foo{33} \testeq\foo{214643579785916.064624297761531261}
      \FPexp\foo{34} \testeq\foo{583461742527454.881402902734610391}
      \FPexp\foo{35} \testeq\foo{1586013452313430.72812964462577466}
      \FPexp\foo{36} \testeq\foo{4311231547115195.227113422292856925}
      \FPexp\foo{37} \testeq\foo{11719142372802611.308772939791190195}
      \FPexp\foo{38} \testeq\foo{31855931757113756.220328671701298646}
      \FPexp\foo{39} \testeq\foo{86593400423993746.953606932719264934}
      \FPexp\foo{40} \testeq\foo{235385266837019985.407899910749034805}
      \FPexp\foo{41} \testeq\foo{639843493530054949.222663403515570819}

      %Test exp(x) for all negative integers x (precomputed)
      \FPexp\foo{-0}  \testeq\foo{1.}
      \FPexp\foo{-1}  \testeq\foo{0.367879441171442322}
      \FPexp\foo{-2}  \testeq\foo{0.135335283236612692}
      \FPexp\foo{-3}  \testeq\foo{0.049787068367863943}
      \FPexp\foo{-4}  \testeq\foo{0.01831563888873418}
      \FPexp\foo{-5}  \testeq\foo{0.006737946999085467}
      \FPexp\foo{-6}  \testeq\foo{0.002478752176666358}
      \FPexp\foo{-7}  \testeq\foo{0.000911881965554516}
      \FPexp\foo{-8}  \testeq\foo{0.000335462627902512}
      \FPexp\foo{-9}  \testeq\foo{0.00012340980408668}
      \FPexp\foo{-10} \testeq\foo{0.000045399929762485}
      \FPexp\foo{-11} \testeq\foo{0.000016701700790246}
      \FPexp\foo{-12} \testeq\foo{0.000006144212353328}
      \FPexp\foo{-13} \testeq\foo{0.000002260329406981}
      \FPexp\foo{-14} \testeq\foo{0.000000831528719104}
      \FPexp\foo{-15} \testeq\foo{0.000000305902320502}
      \FPexp\foo{-16} \testeq\foo{0.000000112535174719}
      \FPexp\foo{-17} \testeq\foo{0.000000041399377188}
      \FPexp\foo{-18} \testeq\foo{0.000000015229979745}
      \FPexp\foo{-19} \testeq\foo{0.000000005602796438}
      \FPexp\foo{-20} \testeq\foo{0.000000002061153622}
      \FPexp\foo{-21} \testeq\foo{0.000000000758256043}
      \FPexp\foo{-22} \testeq\foo{0.000000000278946809}
      \FPexp\foo{-23} \testeq\foo{0.000000000102618796}
      \FPexp\foo{-24} \testeq\foo{0.000000000037751345}
      \FPexp\foo{-25} \testeq\foo{0.000000000013887944}
      \FPexp\foo{-26} \testeq\foo{0.000000000005109089}
      \FPexp\foo{-27} \testeq\foo{0.000000000001879529}
      \FPexp\foo{-28} \testeq\foo{0.00000000000069144}
      \FPexp\foo{-29} \testeq\foo{0.000000000000254367}
      \FPexp\foo{-30} \testeq\foo{0.000000000000093576}
      \FPexp\foo{-31} \testeq\foo{0.000000000000034425}
      \FPexp\foo{-32} \testeq\foo{0.000000000000012664}
      \FPexp\foo{-33} \testeq\foo{0.000000000000004659}
      \FPexp\foo{-34} \testeq\foo{0.000000000000001714}
      \FPexp\foo{-35} \testeq\foo{0.000000000000000631}
      \FPexp\foo{-36} \testeq\foo{0.000000000000000232}
      \FPexp\foo{-37} \testeq\foo{0.000000000000000085}
      \FPexp\foo{-38} \testeq\foo{0.000000000000000031}
      \FPexp\foo{-39} \testeq\foo{0.000000000000000012}
      \FPexp\foo{-40} \testeq\foo{0.000000000000000004}
      \FPexp\foo{-41} \testeq\foo{0.000000000000000002}
      \FPexp\foo{-42} \testeq\foo{0.000000000000000001}

      %Test exp(x) for other numbers
      \FPexp\foo{12.123456789012345678}    \testeq\foo{184140.952405940494102469}
      \FPexp\foo{-12.123456789012345678}   \testeq\foo{0.000005430622503762}
      \FPexp\foo{9.9123456789012345678}    \testeq\foo{20177.949513353417694403}
      \FPexp\foo{-9.9123456789012345678}   \testeq\foo{0.000049559049562405}
      \FPexp\foo{8.89123456789012345678}   \testeq\foo{7267.986469715274219469}
      \FPexp\foo{-8.89123456789012345678}  \testeq\foo{0.000137589689271831}
      \FPexp\foo{7.789123456789012345678}  \testeq\foo{2414.200503413830214843}
      \FPexp\foo{-7.789123456789012345678} \testeq\foo{0.000414215802948403}

Example of \\FPln
-----------------

.. container:: ltx-source

   ::

      %The command \testeq checks that its arguments are equal 
      %\ln(x) is precomputed if x is a power of ten  
      \FPln\foo{1} \testeq\foo{0.}
      \FPln\foo{10} \testeq\foo{2.302585092994045684}
      \FPln\foo{100} \testeq\foo{4.605170185988091368}
      \FPln\foo{1000} \testeq\foo{6.907755278982137052}
      \FPln\foo{10000} \testeq\foo{9.210340371976182736}
      \FPln\foo{100000} \testeq\foo{11.51292546497022842}
      \FPln\foo{1000000} \testeq\foo{13.815510557964274104}
      \FPln\foo{10000000} \testeq\foo{16.118095650958319788}
      \FPln\foo{100000000} \testeq\foo{18.420680743952365472}
      \FPln\foo{1000000000} \testeq\foo{20.723265836946411156}
      \FPln\foo{10000000000} \testeq\foo{23.02585092994045684}
      \FPln\foo{100000000000} \testeq\foo{25.328436022934502524}
      \FPln\foo{1000000000000} \testeq\foo{27.631021115928548208}
      \FPln\foo{10000000000000} \testeq\foo{29.933606208922593892}
      \FPln\foo{100000000000000} \testeq\foo{32.236191301916639576}
      \FPln\foo{1000000000000000} \testeq\foo{34.53877639491068526}
      \FPln\foo{10000000000000000} \testeq\foo{36.841361487904730944}
      \FPln\foo{100000000000000000} \testeq\foo{39.143946580898776628}
      \FPln\foo{999999999999999999.99999999999} \testeq\foo{41.4465316738928223}

      % compute ln of factorial of 100
      \count0=1
      \def\foo{0}
      \loop \advance\count0 by 1\edef\bar{\the\count0}
      \FPln\bar\bar\FPadd\foo\foo\bar
      \ifnum \count0<100 \repeat
      \testeq\foo{363.7393755555634891072}
      % should be 363.73937555556349014407...

Example of \\FPlsolve, \\FPqsolve, \\FPcsolve, \\FPqqsolve
----------------------------------------------------------

.. container:: ltx-source

   ::

      %The command \testeq checks that its arguments are equal 
      % case of degree one 
      \FPlsolve\foo{2}{3} \testeq\foo{-1.5} \ifnum\count0=1 \else\uerror\fi
      % case of degree two (2 then 0 roots) 
      \FPqsolve\foo\bar{1.7}{1.87}{-4.692}
      \ifnum\count0=2 \else\uerror\fi % roots are 1.2 and -2.3  
      \testeq\foo{1.199999999999999978}\testeq\bar{-2.299999999999999978}

      \FPqsolve\foo\bar{1.7}{5.1}{22.1} 
      \ifnum\count0=0 \else\uerror\fi

      % case of degree three 
      \FPcsolve\foo\bar\gee{1.7}{6.63}{0.544}{-13.1376}
      \ifnum\count0=3 \else\uerror\fi% roots are 1.2, -2.8 and -2.3 
      \testeq\foo{1.199999999999999986}
      \testeq\bar{-2.79999999999999993}
      \testeq\gee{-2.300000000000000055}

      \FPcsolve\foo\bar\gee{1.7}{13.43}{47.09}{108.29}
      \ifnum\count0=1 \else\uerror\fi% single root -4.9 
      \testeq\foo{-4.900000000000000077}

      % case of degree four 
      \FPqqsolve\foo\bar\uu\vv{1.7}0{1.87}0{-4.692}
      \ifnum\count0=2 \else\uerror\fi % 2 opposite roots  
      \testeq\foo{1.095445115010332206}
      \testeq\bar{-1.095445115010332206}

      \FPqqsolve\foo\bar\uu\vv{1.7}0{5.1}0{22.1} 
          % 2 pairs of imaginary opposite roots  
      \ifnum\count0=0 \else\uerror\fi

      \FPqqsolve\foo\bar\uu\vv{1}0{-13}0{36}
      \ifnum\count0=4 \else\uerror\fi%  roots are 2, -2, 3 -4  
      \testeq\foo{1.999999999999999995}
      \testeq\bar{-1.999999999999999995}
      \testeq\uu{2.999999999999999967}
      \testeq\vv{-2.999999999999999967}

      \FPqqsolve\foo\bar\uu\vv{0.25}{-2}{4.25}{-2}{0.25}
      \ifnum\count0=4 \else\uerror\fi% 4 roots  
      \testeq\foo{2.618033988749894842}
      \testeq\bar{0.381966011250105161}
      \testeq\uu{4.791287847477919982}
      \testeq\vv{0.208712152522080013}
      \FPqqsolve\foo\bar\uu\vv{1.7}{1.87}{-4.692}{1.87}{1.7}
      \ifnum\count0=2 \else\uerror\fi% 2 roots  
      \testeq\foo{-0.420204102886728779}
      \testeq\bar{-2.379795897113271197}
      \FPqqsolve\foo\bar\uu\vv{6}{-5}{13}{-5}{6}
      \ifnum\count0=0 \else\uerror\fi% no root  

      \FPqqsolve\foo\bar\uu\vv{6}{-5}{13}{-5}{6.1}
      \ifnum\count0=0 \else\uerror\fi% no root  

      \FPqqsolve\foo\bar\uu\vv{0.25}{-2}{4.25}{-2}{0.251}
      \ifnum\count0=4 \else\uerror\fi
      \testeq\foo{0.379595677692027994}
      \testeq\bar{0.210831989170684696}
      \testeq\uu{4.791196750515405957}
      \testeq\vv{2.618375582621881353}
      \FPqqsolve\foo\bar\uu\vv{1.7}{1.87}{-4.692}{1.87}{1.701}
      \ifnum\count0=2 \else\uerror\fi
      \testeq\foo{-0.420362831504803625}
      \testeq\bar{-2.37976786558364871}


      \FPqqsolve\foo\bar\uu\vv{1.7}0{1.87}{0.00000001}{-4.692}
      %\ifnum\count0=2 \else\uerror\fi
      %\show\foo\show\bar\show\uu\show\vv
      \FPqqsolve\foo\bar\uu\vv{1.7}{0.001}{1.87}0{-4.692}
      \testeq\foo{9.199999802152560780}
      \testeq\foo{0.000000149424471035}
      \testeq\foo{1.095344292320422276}
      \testeq\foo{-1.095545972998688846}

Example of \\FPround
--------------------

.. container:: ltx-source

   ::

      %The command \testeq checks that its arguments are equal
      \FPround\foo{12.1} 0 \testeq \foo{12.}
      \FPround\foo{12.6} 0 \testeq \foo{13.}
      \FPround\foo{12.500000000000000000001} 0 \testeq \foo{13.}
      \FPround\foo{12.1} 1 \testeq \foo{12.1}
      \FPround\foo{12.123456789} 1 \testeq \foo{12.1}
      \FPround\foo{12.1734567890000003} 1 \testeq \foo{12.2}
      \FPround\foo{12.123456789} 2 \testeq \foo{12.12}
      \FPround\foo{12.1273456789} 2 \testeq \foo{12.13}
      \FPround\foo{12.123456789} 3 \testeq \foo{12.123}
      \FPround\foo{12.12373456789} 3 \testeq \foo{12.124}
      \FPround\foo{12.1234156789} 4 \testeq \foo{12.1234}
      \FPround\foo{12.123456789} 4 \testeq \foo{12.1235}
      \FPround\foo{12.91234156789} 5 \testeq \foo{12.91234}
      \FPround\foo{12.9123456789} 5 \testeq \foo{12.91235}
      \FPround\foo{12.9999956789} 5 \testeq \foo{13.}
      \FPround\foo{12.891234156789} 6 \testeq \foo{12.891234}
      \FPround\foo{12.89123456789} 6 \testeq \foo{12.891235}
      \FPround\foo{12.7891234156789} 7 \testeq \foo{12.7891234}
      \FPround\foo{12.789123456789} 7 \testeq \foo{12.7891235}
      \FPround\foo{12.67891234156789} 8 \testeq \foo{12.67891234}
      \FPround\foo{12.6789123456789} 8 \testeq \foo{12.67891235}
      \FPround\foo{12.567891234156789} 9 \testeq \foo{12.567891234}
      \FPround\foo{12.56789123456789} 9 \testeq \foo{12.567891235}
      \FPround\foo{12.4567891234156789} {10} \testeq \foo{12.4567891234}
      \FPround\foo{12.456789123456789} {10} \testeq \foo{12.4567891235}
      \FPround\foo{12.34567891234156789} {11} \testeq \foo{12.34567891234}
      \FPround\foo{12.23456789123456789} {12} \testeq \foo{12.234567891235}
      \FPround\foo{12.234567891234156789} {12} \testeq \foo{12.234567891234}
      \FPround\foo{12.123456789123456789} {13} \testeq \foo{12.1234567891235}
      \FPround\foo{12.1234567891234156789} {13} \testeq \foo{12.1234567891234}
      \FPround\foo{12.0123456789123456789} {14} \testeq \foo{12.01234567891235}
      \FPround\foo{12.01234567891234156789} {14} \testeq \foo{12.01234567891234}
      \FPround\foo{12.90123456789123456789} {15} \testeq \foo{12.901234567891235}
      \FPround\foo{12.901234567891234156789} {15} \testeq \foo{12.901234567891234}
      \FPround\foo{12.890123456789123456789} {16} \testeq \foo{12.8901234567891235}
      \FPround\foo{12.8901234567891234156789} {16} \testeq \foo{12.8901234567891234}
      \FPround\foo{12.7890123456789123456789} {17} \testeq \foo{12.78901234567891235}
      \FPround\foo{12.78901234567891234156789} {17} \testeq \foo{12.78901234567891234}
      \FPround\foo{12.67890123456789123456789} {18} \testeq \foo{12.678901234567891234}
      \FPround\foo{12.678901234567891234156789} {18} \testeq \foo{12.678901234567891234}
      \FPround\foo{12.67890123456789123456789} {19} \testeq \foo{12.678901234567891234}
      \FPround\foo{12.678901234567891234156789} {19} \testeq \foo{12.678901234567891234}
      \FPround\foo{12.9999999996}9 \testeq\foo{13.}

Example of \\FPsin, \\FPcos, \\FPsincos, \\FPtan, \\FPcot, and \\FPtancot
-------------------------------------------------------------------------

.. container:: ltx-source

   ::


      \def\tsc(#1,#2,#3){%Test and example of \FPsin, \FPcos, \FPsincos
                         % \FPtan, \FPcot, and \FPtancot
      \def\arg{#1}%
      \FPsin\csr\arg\testeq\csr{#2}% test that sin(#1)=#2
      \FPcos\ccr\arg\testeq\ccr{#3}% test that cos(#1)=#3
      \FPdiv\tanval{#2}{#3}% is sin/cos
      \FPdiv\cotval{#3}{#2}% is cos/sin
      \FPtan\atr\arg\xtesteq\atr\tanval% test tangent
      \FPcot\ctr\arg\xtesteq\ctr\cotval% test cotangent
      \FPsincos\scs\scc\arg\testeq\scs{#2}\testeq\scc{#3}% test \FPsincos
      \FPtancot\tct\tcc\arg\xtesteq\tct\tanval\xtesteq\tcc\cotval% test \FPtancot
      }
      \def\xtesteq#1#2{% compare #1 with #2 expanded
      \xdef\tmp{#2}\ifx#1\tmp\else \typeout{______#2}\show #1\uerror\fi}

      \tsc(0.1012345678901232456789  ,0.1010617404468389,0.994880155907160391)
      \tsc(-0.1012345678901232456789,-0.1010617404468389,0.994880155907160391)
      \tsc(0.3012345678901232456789  ,0.296699408905774917,0.954970921418533965)
      \tsc(-0.3012345678901232456789,-0.296699408905774917,0.954970921418533965)
      \tsc(0.5012345678901232456789  ,0.480508608220765167,0.876990009877959334)
      \tsc(-0.5012345678901232456789,-0.480508608220765167,0.876990009877959334)
      \tsc(0.7012345678901232456789  ,0.64516144565859153,0.764046274145562632)
      \tsc(-0.7012345678901232456789,-0.64516144565859153,0.764046274145562632)
      \tsc(0.9012345678901232456789  ,0.784093732182682786,0.620642424550426072)
      \tsc(-0.9012345678901232456789,-0.784093732182682786,0.620642424550426072)
      \tsc(1.1012345678901232456789  ,0.891766675955506368,0.452495520038891548)
      \tsc(-1.1012345678901232456789,-0.891766675955506368,0.452495520038891548)
      \tsc(1.3012345678901232456789  ,0.963887696490462379,0.266309047075592758)
      \tsc(-1.3012345678901232456789,-0.963887696490462379,0.266309047075592758)
      \tsc(1.5012345678901232456789  ,0.997581556289863304,0.069505672792185076)
      \tsc(-1.5012345678901232456789,-0.997581556289863304,0.069505672792185076)
      \tsc(1.7012345678901232456789  ,0.991504987490630185,-0.130068673327612908)
      \tsc(-1.7012345678901232456789,-0.991504987490630185,-0.130068673327612908)
      \tsc(1.9012345678901232456789  ,0.945900243715066732,-0.324457591897273006)
      \tsc(-1.9012345678901232456789,-0.945900243715066732,-0.324457591897273006)
      \tsc(2.1012345678901232456789  ,0.862585442183413576,-0.505911410163128142)
      \tsc(-2.1012345678901232456789,-0.862585442183413576,-0.505911410163128142)
      \tsc(2.3012345678901232456789  ,0.744882081117677936,-0.667196137001554491)
      \tsc(-2.3012345678901232456789,-0.744882081117677936,-0.667196137001554491)
      \tsc(2.5012345678901232456789  ,0.597482622089115954,-0.801881859316891298)
      \tsc(-2.5012345678901232456789,-0.597482622089115955,-0.801881859316891297)
      \tsc(2.7012345678901232456789  ,0.4262634163833055,-0.904599082385800744)
      \tsc(-2.7012345678901232456789,-0.426263416383305501,-0.904599082385800743)
      \tsc(2.9012345678901232456789  ,0.238050433418288991,-0.971252794667466972)
      \tsc(-2.9012345678901232456789,-0.238050433418288992,-0.971252794667466972)
      \tsc(3.1012345678901232456789  ,0.040347130884468172,-0.999185722991172245)
      \tsc(-3.1012345678901232456789,-0.040347130884468173,-0.999185722991172245)
      \tsc(3.3012345678901232456789 ,-0.158964684434982212,-0.987284269652103048)
      \tsc(-3.3012345678901232456789 ,0.158964684434982211,-0.987284269652103048)
      \tsc(3.5012345678901232456789 ,-0.351939079428079982,-0.936022908037680247)
      \tsc(-3.5012345678901232456789 ,0.351939079428079981,-0.936022908037680247)
      \tsc(3.7012345678901232456789 ,-0.530882773932368332,-0.847445266870889957)
      \tsc(-3.7012345678901232456789 ,0.530882773932368331,-0.847445266870889957)
      \tsc(3.9012345678901232456789 ,-0.688661847537443519,-0.725082657182141475)
      \tsc(-3.9012345678901232456789 ,0.688661847537443518,-0.725082657182141476)
      \tsc(4.1012345678901232456789 ,-0.818986146479329999,-0.5738132900821812)
      \tsc(-4.1012345678901232456789 ,0.818986146479329999,-0.5738132900821812)
      \tsc(4.3012345678901232456789 ,-0.916660052221322069,-0.399667797879192535)
      \tsc(-4.3012345678901232456789 ,0.916660052221322069,-0.399667797879192535)
      \tsc(4.5012345678901232456789 ,-0.977789614369319932,-0.209588811799429354)
      \tsc(-4.5012345678901232456789 ,0.977789614369319932,-0.209588811799429354)
      \tsc(4.7012345678901232456789 ,-0.999937790185971389,-0.011154181188965009)
      \tsc(-4.7012345678901232456789 ,0.999937790185971389,-0.011154181188965009)
      \tsc(4.9012345678901232456789 ,-0.982221601794077009,0.187725131426449178)
      \tsc(-4.9012345678901232456789 ,0.982221601794077009,0.187725131426449178)
      \tsc(5.1012345678901232456789 ,-0.925347337718156243,0.379120435452799748)
      \tsc(-5.1012345678901232456789 ,0.925347337718156243,0.379120435452799748)
      \tsc(5.3012345678901232456789 ,-0.831582395389797154,0.555401404101364395)
      \tsc(-5.3012345678901232456789 ,0.831582395389797154,0.555401404101364395)
      \tsc(5.5012345678901232456789 ,-0.704664887167245378,0.709540271438889748)
      \tsc(-5.5012345678901232456789 ,0.704664887167245378,0.709540271438889748)
      \tsc(5.7012345678901232456789 ,-0.54965461359197653,0.835392007237952312)
      \tsc(-5.7012345678901232456789 ,0.54965461359197653,0.835392007237952312)
      \tsc(5.9012345678901232456789 ,-0.372731345108231537,0.92793929994036162)
      \tsc(-5.9012345678901232456789 ,0.372731345108231537,0.92793929994036162)
      \tsc(6.1012345678901232456789 ,-0.180948454116798069,0.983492581035943058)
      \tsc(-6.1012345678901232456789 ,0.180948454116798069,0.983492581035943058)
      \tsc(6.3012345678901232456789  ,0.018048280724405105,0.999837116515931842)
      \tsc(-6.3012345678901232456789,-0.018048280724405105,0.999837116515931842)
      \tsc(6.7012345678901232456789  ,0.405978479876358888,0.913882636817923606)
      \tsc(-6.7012345678901232456789,-0.405978479876358888,0.913882636817923606)
      \tsc(22.6012345678901232456789,-0.572937941778857506,-0.819598752360084116)
      \tsc(-22.6012345678901232456789,0.572937941778857505,-0.819598752360084116)
      \tsc(333.6012345678901232456789,0.558364699503853438,0.829595601692759368)
      \tsc(-333.6012345678901232456789,-0.558364699503853438,0.829595601692759368)
      \tsc(4444.6012345678901232456789,0.683371137707483341,-0.730071152798396659)
      \tsc(-4444.6012345678901232456789,-0.683371137707483342,-0.730071152798396658)
      \tsc(55555.6012345678901232456789,-0.317651344590243807,0.94820758448770604)
      \tsc(-55555.6012345678901232456789,0.317651344590243807,0.94820758448770604)
      \tsc(666666.6012345678901232456789,0.975943132754450349,-0.218025231634848405)
      \tsc(-666666.6012345678901232456789,-0.975943132754450349,-0.218025231634848405)
      \tsc(7777777.6012345678901232456789,-0.999955236694279961,0.009461744431474613)
      \tsc(-7777777.6012345678901232456789,0.999955236694279961,0.009461744431474613)
      \tsc(88888888.6012345678901232456789,0.042909218626836249,0.9990789753352006)
      \tsc(-88888888.6012345678901232456789,-0.042909218626836249,0.9990789753352006)
      \tsc(1999999999.6012345678901232456789,0.686035088730874198,0.727568455219178372)
      \tsc(-1999999999.6012345678901232456789,-0.686035088730874198,0.727568455219178372)
      \tsc(11111111111.6012345678901232456789,-0.825737644766692954,-0.564054378597626699)
      \tsc(-11111111111.6012345678901232456789,0.825737644766692954,-0.564054378597626699)

Example of \\FPtrunc
--------------------

.. container:: ltx-source

   ::

      %The command \testeq checks that its arguments are equal
      \FPtrunc\foo{12.1} 0 \testeq \foo{12.}
      \FPtrunc\foo{12.6} 0 \testeq \foo{12.}
      \FPtrunc\foo{12.500000000000000000001} 1 \testeq \foo{12.5}
      \FPtrunc\foo{12.1} 1 \testeq \foo{12.1}
      \FPtrunc\foo{12.123456789} 1 \testeq \foo{12.1}
      \FPtrunc\foo{12.1734567890000003} 1 \testeq \foo{12.1}
      \FPtrunc\foo{12.123456789} 2 \testeq \foo{12.12}
      \FPtrunc\foo{12.1273456789} 2 \testeq \foo{12.12}
      \FPtrunc\foo{12.123456789} 3 \testeq \foo{12.123}
      \FPtrunc\foo{12.12373456789} 3 \testeq \foo{12.123}
      \FPtrunc\foo{12.1234156789} 4 \testeq \foo{12.1234}
      \FPtrunc\foo{12.123456789} 4 \testeq \foo{12.1234}
      \FPtrunc\foo{12.91234156789} 5 \testeq \foo{12.91234}
      \FPtrunc\foo{12.9123456789} 5 \testeq \foo{12.91234}
      \FPtrunc\foo{12.9999956789} 5 \testeq \foo{12.99999}
      \FPtrunc\foo{12.891234156789} 6 \testeq \foo{12.891234}
      \FPtrunc\foo{12.89123456789} 6 \testeq \foo{12.891234}
      \FPtrunc\foo{12.7891234156789} 7 \testeq \foo{12.7891234}
      \FPtrunc\foo{12.789123456789} 7 \testeq \foo{12.7891234}
      \FPtrunc\foo{12.67891234156789} 8 \testeq \foo{12.67891234}
      \FPtrunc\foo{12.6789123456789} 8 \testeq \foo{12.67891234}
      \FPtrunc\foo{12.567891234156789} 9 \testeq \foo{12.567891234}
      \FPtrunc\foo{12.56789123456789} 9 \testeq \foo{12.567891234}
      \FPtrunc\foo{12.4567891234156789} {10} \testeq \foo{12.4567891234}
      \FPtrunc\foo{12.456789123456789} {10} \testeq \foo{12.4567891234}
      \FPtrunc\foo{12.34567891234156789} {11} \testeq \foo{12.34567891234}
      \FPtrunc\foo{12.23456789123456789} {12} \testeq \foo{12.234567891234}
      \FPtrunc\foo{12.234567891234156789} {12} \testeq \foo{12.234567891234}
      \FPtrunc\foo{12.123456789123456789} {13} \testeq \foo{12.1234567891234}
      \FPtrunc\foo{12.1234567891234156789} {13} \testeq \foo{12.1234567891234}
      \FPtrunc\foo{12.0123456789123456789} {14} \testeq \foo{12.01234567891234}
      \FPtrunc\foo{12.01234567891234156789} {14} \testeq \foo{12.01234567891234}
      \FPtrunc\foo{12.90123456789123456789} {15} \testeq \foo{12.901234567891234}
      \FPtrunc\foo{12.901234567891234156789} {15} \testeq \foo{12.901234567891234}
      \FPtrunc\foo{12.890123456789123456789} {16} \testeq \foo{12.8901234567891234}
      \FPtrunc\foo{12.8901234567891234156789} {16} \testeq \foo{12.8901234567891234}
      \FPtrunc\foo{12.7890123456789123456789} {17} \testeq \foo{12.78901234567891234}
      \FPtrunc\foo{12.78901234567891234156789} {17} \testeq \foo{12.78901234567891234}
      \FPtrunc\foo{12.67890123456789123456789} {18} \testeq \foo{12.678901234567891234}
      \FPtrunc\foo{12.678901234567891234156789} {18} \testeq \foo{12.678901234567891234}
      \FPtrunc\foo{12.67890123456789123456789} {19} \testeq \foo{12.678901234567891234}
      \FPtrunc\foo{12.678901234567891234156789} {19} \testeq \foo{12.678901234567891234}
      \FPtrunc\foo{12.9999999996}9 \testeq\foo{12.999999999}

----

docs/laux.rst
-------------

================================================
XML source and translation of some math commands
================================================

\\le
----

*Tralics* recognizes the following relations:

.. container:: ltx-source

   ::

      $\le \leq \succ \simeq \parallel \subseteq \sqsubset \doteq
      \ge \geq \sim \mid \subset \subseteq \ne \neq \frown \vdash
      \equiv \perp \ll \supset \cong \smile \in \dashv 
      \models \preceq \gg \approx \Join \sqsubseteq \ni
      \prec \succeq \asymp \bowtie \sqsupseteq \propto$

The XML result is

.. container:: xml_out

   ::

      <formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      <mrow><mo>&le;</mo> <mo>&le;</mo> <mo>&succ;</mo> <mo>&simeq;</mo>
      <mo>&parallel;</mo> <mo>&subseteq;</mo> <mo>&sqsubset;</mo> <mo>&doteq;</mo>
      <mo>&ge;</mo> <mo>&ge;</mo> <mo>&sim;</mo> <mo>&mid;</mo>
      <mo>&subset;</mo> <mo>&subseteq;</mo> <mo>&ne;</mo> <mo>&ne;</mo>
      <mo>&frown;</mo> <mo>&vdash;</mo> <mo>&equiv;</mo> <mo>&perp;</mo>
      <mo>&ll;</mo> <mo>&supset;</mo> <mo>&cong;</mo> <mo>&smile;</mo>
      <mo>&Element;</mo><mo> &dashv;</mo> <mo>&models;</mo> <mo>&preceq;</mo> 
      <mo>&gg;</mo> <mo>&approx;</mo> <mo>&bowtie;</mo> <mo>&sqsubseteq;</mo>
      <mo>&ni;</mo> <mo>&prec;</mo> <mo>&succeq;</mo> <mo>&asymp;</mo>
      <mo>&bowtie;</mo> <mo>&sqsupseteq;</mo> <mo>&propto;</mo></mrow></math></formula>

If you do not like entity names, you can use the ``-noentnames`` switch,
and you get

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
         <mrow><mo>&le;</mo><mo>&le;</mo><mo>&#x0227B;</mo><mo>&#x02243;</mo>
         <mo>&#x02225;</mo><mo>&#x02286;</mo><mo>&#x0228F;</mo><mo>&#x02250;</mo>
         <mo>&ge;</mo><mo>&ge;</mo><mo>&#x0223C;</mo><mo>&#x02223;</mo>
         <mo>&#x02282;</mo><mo>&#x02286;</mo><mo>&#x02260;</mo><mo>&#x02260;</mo>
         <mo>&#x02322;</mo><mo>&#x022A2;</mo><mo>&#x02261;</mo><mo>&#x022A5;</mo>
         <mo>&#x0226A;</mo><mo>&#x02283;</mo><mo>&#x02245;</mo><mo>&#x02323;</mo>
         <mo>&#x02208;</mo><mo>&#x022A3;</mo><mo>&#x022A7;</mo><mo>&#x02AAF;</mo>
         <mo>&#x0226B;</mo><mo>&#x02248;</mo><mo>&#x022C8;</mo><mo>&#x02291;</mo>
         <mo>&#x0220B;</mo><mo>&#x0227A;</mo><mo>&#x02AB0;</mo><mo>&#x02248;</mo>
         <mo>&#x022C8;</mo><mo>&#x02292;</mo><mo>&#x0221D;</mo></mrow>
        </math>
      </formula>

All these operators are from Table 8.5 of the `Latex
Companion <index.html#companion>`__. |relations operators from table
8.5|

\\leftarrow
-----------

Arrows:

.. container:: ltx-source

   ::

      $\leftarrow\longleftarrow  \Leftarrow \Longleftarrow 
      \rightarrow \longrightarrow \Rightarrow \Longrightarrow
      \leftrightarrow \Leftrightarrow \longleftrightarrow\Longleftrightarrow
      \mapsto \longmapsto \hookleftarrow \hookrightarrow
      \leftharpoondown \leftharpoonup \rightharpoondown \rightharpoonup
      \uparrow \Uparrow  \updownarrow \Updownarrow 
      \downarrow \Downarrow \nearrow \searrow \swarrow \nwarrow
      $

The XML result is

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mrow>
         <mo>&leftarrow;</mo><mo>&longleftarrow;</mo><mo>&Leftarrow;</mo><mo>&Longleftarrow;</mo>
         <mo>&rightarrow;</mo><mo>&longrightarrow;</mo><mo>&Rightarrow;</mo><mo>&Longrightarrow;</mo>
         <mo>&leftrightarrow;</mo><mo>&Leftrightarrow;</mo><mo>&longleftrightarrow;</mo><mo>&Longleftrightarrow;</mo>
         <mo>&mapsto;</mo><mo>&longmapsto;</mo>
         <mo>&hookleftarrow;</mo><mo>&hookrightarrow;</mo>
         <mo>&leftharpoondown;</mo><mo>&leftharpoonup;</mo><mo>&rightharpoondown;</mo><mo>&rightharpoonup;</mo>
         <mo>&uparrow;</mo><mo>&Uparrow;</mo><mo>&updownarrow;</mo><mo>&Updownarrow;</mo><mo>&downarrow;</mo><mo>&Downarrow;</mo>
         <mo>&nearrow;</mo><mo>&searrow;</mo><mo>&swarrow;</mo><mo>&nwarrow;</mo>
        </mrow>
       </math>
      </formula>

If you do not like entity names, you can use the ``-noentnames`` switch,
and you get

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mrow><mo>&#x02190;</mo><mo>&#x027F5;</mo><mo>&#x021D0;</mo><mo>&#x027F8;</mo>
        <mo>&#x02192;</mo><mo>&#x027F6;</mo><mo>&#x021D2;</mo><mo>&#x027F9;</mo>
        <mo>&#x02194;</mo><mo>&#x021D4;</mo><mo>&#x027F7;</mo><mo>&#x027FA;</mo>
        <mo>&#x021A6;</mo><mo>&#x027FC;</mo><mo>&#x021A9;</mo><mo>&#x021AA;</mo>
        <mo>&#x021BD;</mo><mo>&#x021BC;</mo><mo>&#x021C1;</mo><mo>&#x021C0;</mo>
        <mo>&#x02191;</mo><mo>&#x021D1;</mo><mo>&#x02195;</mo><mo>&#x021D5;</mo>
        <mo>&#x02193;</mo><mo>&#x021D3;</mo><mo>&#x02197;</mo><mo>&#x02198;</mo>
        <mo>&#x02199;</mo><mo>&#x02196;</mo></mrow>
       </math>
      </formula>

All these operators are from Table 8.6 of the `Latex
Companion <index.html#companion>`__. |arrows from table 8.6|

\\log
-----

The ``\log`` command is valid only in math mode. Its translation is a
math operator of the same name ``<mo form='prefix'>log</mo>``. Here is
the list of all log-like operators:

.. container:: ltx-source

   ::

      $$\arccos^2 (x),\, \arcsin^2(x),\,  \arctan^2(x),\,  \arg^2(x),\, \cos^2(x),\,  \cosh^2(x)  ,\, \cot^2(x)$$
      $$\coth^2(x),\, \csc^2(x),\,   \deg^2(x),\,   \dim^2(x),\, \exp^2(x),\, \hom^2(x),\,  \ker^2(x) ,\, \lg^2(x)$$
      $$\ln^2(x),\, \log^2(x),\,  \Pr^2(x),\, \sec^2(x),\, \sin^2(x) ,\,\sinh^2(x),\,  \tan^2(x),\, \tanh^2(x) $$
      $$ %These are declared m
      \det_{x=1},\, \gcd_{x=1},\, \inf_{x=1},\, \injlim_{x=1},\, \lim_{x=1},\, 
      \liminf_{x=1},\,\limsup_{x=1},\,\max_{x=1},\, \min_{x=1},\, \projlim_{x=1},\,
      \sup_{x=1}
      $$

The XML translation is the following. Note that some operators have the
attribute ``movablelimits='true'``. These are declared \`m' in the AMS
tables, and subscripts/superscripts should use ``<munderover>`` instead
of ``<msubsup>``. Our renderer understands this syntax, which is not
really MathML conformant, in the same way as L\ :sup:`A`\ T\ :sub:`E`\ X
(except for the space in an operator like ``\liminf``).

.. container:: xml_out

   ::

      <formula type='display'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <msup><mo form='prefix'>arccos</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
         <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>arcsin</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
         <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>arctan</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
         <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>arg</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
         <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>cos</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
         <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>cosh</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
         <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>cot</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow>
         </mrow></math></formula>

      <formula type='display'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <msup><mo form='prefix'>coth</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>csc</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>deg</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>dim</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>exp</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>hom</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>ker</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>lg</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow>
        </mrow></math></formula>

      <formula type='display'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <msup><mo form='prefix'>ln</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow> 
       <msup><mo form='prefix'>log</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>Pr</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>sec</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>sin</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>sinh</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>tan</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo>
          <mo>,</mo><mspace width='0.166667em'/></mrow>
       <msup><mo form='prefix'>tanh</mo> <mn>2</mn> </msup><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow>
        </mrow></math></formula>

      <formula type='display'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <msub><mo movablelimits='true' form='prefix'>det</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>gcd</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>inf</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>inj lim</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>lim</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>lim inf</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>lim sup</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>max</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>min</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>proj lim</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub>
         <mo>,</mo><mspace width='0.166667em'/>
       <msub><mo movablelimits='true' form='prefix'>sup</mo> <mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow> </msub></mrow>
      </math></formula>

| All commands are listed in Table 8.9 of the `Latex
  Companion <index.html#companion>`__.
| |log-like operators| |log-like operators2| |log-like operators3|
  |log-like operators4|

\\ldots
-------

*Tralics* recognizes the following miscellaneous symbols.

.. container:: ltx-source

   ::

      $\ldots \prime \exists \Diamond \top \bot \mho 
      \cdots \forall \nabla \imath \flat \clubsuit \Re
      \vdots \infty \surd \jmath \natural \diamondsuit \Im
      \ddots \hbar \square \ell \sharp \heartsuit \angle
      \aleph \emptyset \triangle \neg \wp \spadesuit \partial$

The XML result is

.. container:: xml_out

   ::

      <formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      <mrow><mo>...</mo> <mo>&prime;</mo> <mo>&exist;</mo> <mo>&diamond;</mo> <mi>&top;</mi> 
      <mi>&bottom;</mi> <mo>&mho;</mo> <mo>&ctdot;</mo> <mo>&forall;</mo> 
      <mi>&nabla;</mi> <mo>&imath;</mo> <mo>&flat;</mo> <mo>&clubsuit;</mo>
      <mi>&Re;</mi> <mo>&vellip;</mo> <mi>&infin;</mi> <mi>&radic;</mi> 
      <mo>&jmath;</mo> <mo>&natur;</mo> <mo>&diamondsuit;</mo> <mi>&Im;</mi> 
      <mo>&dtdot;</mo> <mi>&hbar;</mi> <mo>&square;</mo> <mi>&ell;</mi> 
      <mo>&sharp;</mo> <mo>&heartsuit;</mo> <mi>&ang;</mi> <mo>&aleph;</mo> 
      <mi>&emptyset;</mi> <mi>&triangle;</mi> <mo>&not;</mo> <mi>&wp;</mi> 
      <mo>&spadesuit;</mo> <mi>&part;</mi></mrow></math></formula>

If you do not like entity names, you can use the ``-noentnames`` switch,
and you get

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mrow><mo>...</mo><mo>&#x02032;</mo><mo>&#x02203;</mo><mo>&#x022C4;</mo>
        <mi>&#x022A4;</mi><mi>&#x022A5;</mi> <mo>&#x02127;</mo><mo>&#x022EF;</mo>
        <mo>&#x02200;</mo><mi>&#x02207;</mi><mo>&#x00131;</mo>  <mo>&#x0266D;</mo>
        <mo>&#x02663;</mo><mi>&#x0211C;</mi><mo>&#x022EE;</mo><mi>&#x0221E;</mi>
        <mi>&#x0221A;</mi><mo>&#x0006A;</mo>  <mo>&#x0266E;</mo><mo>&#x02666;</mo>
        <mi>&#x02111;</mi><mo>&#x022F1;</mo><mi>&#x0210F;</mi><mo>&#x025A1;</mo>
        <mi>&#x02113;</mi><mo>&#x0266F;</mo><mo>&#x02665;</mo><mi>&#x02220;</mi>
        <mo>&#x02135;</mo><mi>&#x02205;</mi><mi>&#x025B5;</mi><mo>&#xAC;</mo>
        <mi>&#x02118;</mi><mo>&#x02660;</mo><mi>&#x02202;</mi></mrow>
       </math>
      </formula>

All these operators are from Table 8.7 of the `Latex
Companion <index.html#companion>`__. The ``\Box`` command is not yet
implemented (but ``\square`` produces the same effect. |operators of
table 8.7|

Math fonts
----------

Example:

.. container:: ltx-source

   ::

      \def\test#1#2{\mathtt{#1#2}\mathcal{#1}\mathbf{#1#2}\mathrm{#1#2}
      \mathit{#1#2}\mathbb{#1}\mathsf{#1#2}\mathnormal{#1#2}}
      \begin{equation}\begin{split}
      \test Aa &\test Bb\\
      \test Cc &\test Dd\\
      \test Ee &\test Ff\\
      \test Gg &\test Hh\\
      \test Ii &\test Jj\\
      \test Kk &\test Ll\\
      \test Mm &\test Nn\\
      \test Oo &\test Pp\\
      \test Qq &\test Rr\\
      \test Ss &\test Tt\\
      \test Uu &\test Vv\\
      \test Ww &\test Xx\\
      \test Yy &\test Zz\\
      \end{split}
      \end{equation}

Translation (a bit longish)

.. container:: xml_out

   ::

      <formula type='display'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mtable>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>A</mi>
            <mi mathvariant='monospace'>a</mi>
            <mi>&Ascr;</mi>
            <mi mathvariant='bold'>A</mi>
            <mi mathvariant='bold'>a</mi>
            <mi> A </mi>
            <mi> a </mi>
            <mi>A</mi>
            <mi>a</mi>
            <mi>&Aopf;</mi>
            <mi mathvariant='sans-serif'>A</mi>
            <mi mathvariant='sans-serif'>a</mi>
            <mi>A</mi>
            <mi>a</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>B</mi>
            <mi mathvariant='monospace'>b</mi>
            <mi>&Bscr;</mi>
            <mi mathvariant='bold'>B</mi>
            <mi mathvariant='bold'>b</mi>
            <mi> B </mi>
            <mi> b </mi>
            <mi>B</mi>
            <mi>b</mi>
            <mi>&Bopf;</mi>
            <mi mathvariant='sans-serif'>B</mi>
            <mi mathvariant='sans-serif'>b</mi>
            <mi>B</mi>
            <mi>b</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>C</mi>
            <mi mathvariant='monospace'>c</mi>
            <mi>&Cscr;</mi>
            <mi mathvariant='bold'>C</mi>
            <mi mathvariant='bold'>c</mi>
            <mi> C </mi>
            <mi> c </mi>
            <mi>C</mi>
            <mi>c</mi>
            <mi>&Copf;</mi>
            <mi mathvariant='sans-serif'>C</mi>
            <mi mathvariant='sans-serif'>c</mi>
            <mi>C</mi>
            <mi>c</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>D</mi>
            <mi mathvariant='monospace'>d</mi>
            <mi>&Dscr;</mi>
            <mi mathvariant='bold'>D</mi>
            <mi mathvariant='bold'>d</mi>
            <mi> D </mi>
            <mi> d </mi>
            <mi>D</mi>
            <mi>d</mi>
            <mi>&Dopf;</mi>
            <mi mathvariant='sans-serif'>D</mi>
            <mi mathvariant='sans-serif'>d</mi>
            <mi>D</mi>
            <mi>d</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>E</mi>
            <mi mathvariant='monospace'>e</mi>
            <mi>&Escr;</mi>
            <mi mathvariant='bold'>E</mi>
            <mi mathvariant='bold'>e</mi>
            <mi> E </mi>
            <mi> e </mi>
            <mi>E</mi>
            <mi>e</mi>
            <mi>&Eopf;</mi>
            <mi mathvariant='sans-serif'>E</mi>
            <mi mathvariant='sans-serif'>e</mi>
            <mi>E</mi>
            <mi>e</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>F</mi>
            <mi mathvariant='monospace'>f</mi>
            <mi>&Fscr;</mi>
            <mi mathvariant='bold'>F</mi>
            <mi mathvariant='bold'>f</mi>
            <mi> F </mi>
            <mi> f </mi>
            <mi>F</mi>
            <mi>f</mi>
            <mi>&Fopf;</mi>
            <mi mathvariant='sans-serif'>F</mi>
            <mi mathvariant='sans-serif'>f</mi>
            <mi>F</mi>
            <mi>f</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>G</mi>
            <mi mathvariant='monospace'>g</mi>
            <mi>&Gscr;</mi>
            <mi mathvariant='bold'>G</mi>
            <mi mathvariant='bold'>g</mi>
            <mi> G </mi>
            <mi> g </mi>
            <mi>G</mi>
            <mi>g</mi>
            <mi>&Gopf;</mi>
            <mi mathvariant='sans-serif'>G</mi>
            <mi mathvariant='sans-serif'>g</mi>
            <mi>G</mi>
            <mi>g</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>H</mi>
            <mi mathvariant='monospace'>h</mi>
            <mi>&Hscr;</mi>
            <mi mathvariant='bold'>H</mi>
            <mi mathvariant='bold'>h</mi>
            <mi> H </mi>
            <mi> h </mi>
            <mi>H</mi>
            <mi>h</mi>
            <mi>&Hopf;</mi>
            <mi mathvariant='sans-serif'>H</mi>
            <mi mathvariant='sans-serif'>h</mi>
            <mi>H</mi>
            <mi>h</mi> 
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>I</mi>
            <mi mathvariant='monospace'>i</mi>
            <mi>&Iscr;</mi>
            <mi mathvariant='bold'>I</mi>
            <mi mathvariant='bold'>i</mi>
            <mi> I </mi>
            <mi> i </mi>
            <mi>I</mi>
            <mi>i</mi>
            <mi>&Iopf;</mi>
            <mi mathvariant='sans-serif'>I</mi>
            <mi mathvariant='sans-serif'>i</mi>
            <mi>I</mi>
            <mi>i</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>J</mi>
            <mi mathvariant='monospace'>j</mi>
            <mi>&Jscr;</mi>
            <mi mathvariant='bold'>J</mi>
            <mi mathvariant='bold'>j</mi>
            <mi> J </mi>
            <mi> j </mi>
            <mi>J</mi>
            <mi>j</mi>
            <mi>&Jopf;</mi>
            <mi mathvariant='sans-serif'>J</mi>
            <mi mathvariant='sans-serif'>j</mi>
            <mi>J</mi>
            <mi>j</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>K</mi>
            <mi mathvariant='monospace'>k</mi>
            <mi>&Kscr;</mi>
            <mi mathvariant='bold'>K</mi>
            <mi mathvariant='bold'>k</mi>
            <mi> K </mi>
            <mi> k </mi>
            <mi>K</mi>
            <mi>k</mi>
            <mi>&Kopf;</mi>
            <mi mathvariant='sans-serif'>K</mi>
            <mi mathvariant='sans-serif'>k</mi>
            <mi>K</mi>
            <mi>k</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>L</mi>
            <mi mathvariant='monospace'>l</mi>
            <mi>&Lscr;</mi>
            <mi mathvariant='bold'>L</mi>
            <mi mathvariant='bold'>l</mi>
            <mi> L </mi>
            <mi> l </mi>
            <mi>L</mi>
            <mi>l</mi>
            <mi>&Lopf;</mi>
            <mi mathvariant='sans-serif'>L</mi>
            <mi mathvariant='sans-serif'>l</mi>
            <mi>L</mi>
            <mi>l</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>M</mi>
            <mi mathvariant='monospace'>m</mi>
            <mi>&Mscr;</mi>
            <mi mathvariant='bold'>M</mi>
            <mi mathvariant='bold'>m</mi>
            <mi> M </mi>
            <mi> m </mi>
            <mi>M</mi>
            <mi>m</mi>
            <mi>&Mopf;</mi>
            <mi mathvariant='sans-serif'>M</mi>
            <mi mathvariant='sans-serif'>m</mi>
            <mi>M</mi>
            <mi>m</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>N</mi>
            <mi mathvariant='monospace'>n</mi>
            <mi>&Nscr;</mi>
            <mi mathvariant='bold'>N</mi>
            <mi mathvariant='bold'>n</mi>
            <mi> N </mi>
            <mi> n </mi>
            <mi>N</mi>
            <mi>n</mi>
            <mi>&Nopf;</mi>
            <mi mathvariant='sans-serif'>N</mi>
            <mi mathvariant='sans-serif'>n</mi>
            <mi>N</mi>
            <mi>n</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>O</mi>
            <mi mathvariant='monospace'>o</mi>
            <mi>&Oscr;</mi>
            <mi mathvariant='bold'>O</mi>
            <mi mathvariant='bold'>o</mi>
            <mi> O </mi>
            <mi> o </mi>
            <mi>O</mi>
            <mi>o</mi>
            <mi>&Oopf;</mi>
            <mi mathvariant='sans-serif'>O</mi>
            <mi mathvariant='sans-serif'>o</mi>
            <mi>O</mi>
            <mi>o</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>P</mi>
            <mi mathvariant='monospace'>p</mi>
            <mi>&Pscr;</mi>
            <mi mathvariant='bold'>P</mi>
            <mi mathvariant='bold'>p</mi>
            <mi> P </mi>
            <mi> p </mi>
            <mi>P</mi>
            <mi>p</mi>
            <mi>&Popf;</mi>
            <mi mathvariant='sans-serif'>P</mi>
            <mi mathvariant='sans-serif'>p</mi>
            <mi>P</mi>
            <mi>p</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>Q</mi>
            <mi mathvariant='monospace'>q</mi>
            <mi>&Qscr;</mi>
            <mi mathvariant='bold'>Q</mi>
            <mi mathvariant='bold'>q</mi>
            <mi> Q </mi>
            <mi> q </mi>
            <mi>Q</mi>
            <mi>q</mi>
            <mi>&Qopf;</mi>
            <mi mathvariant='sans-serif'>Q</mi>
            <mi mathvariant='sans-serif'>q</mi>
            <mi>Q</mi>
            <mi>q</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>R</mi>
            <mi mathvariant='monospace'>r</mi>
            <mi>&Rscr;</mi>
            <mi mathvariant='bold'>R</mi>
            <mi mathvariant='bold'>r</mi>
            <mi> R </mi>
            <mi> r </mi>
            <mi>R</mi>
            <mi>r</mi>
            <mi>&Ropf;</mi>
            <mi mathvariant='sans-serif'>R</mi>
            <mi mathvariant='sans-serif'>r</mi>
            <mi>R</mi>
            <mi>r</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>S</mi>
            <mi mathvariant='monospace'>s</mi>
            <mi>&Sscr;</mi>
            <mi mathvariant='bold'>S</mi>
            <mi mathvariant='bold'>s</mi>
            <mi> S </mi>
            <mi> s </mi>
            <mi>S</mi>
            <mi>s</mi>
            <mi>&Sopf;</mi>
            <mi mathvariant='sans-serif'>S</mi>
            <mi mathvariant='sans-serif'>s</mi>
            <mi>S</mi>
            <mi>s</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>T</mi>
            <mi mathvariant='monospace'>t</mi>
            <mi>&Tscr;</mi>
            <mi mathvariant='bold'>T</mi>
            <mi mathvariant='bold'>t</mi>
            <mi> T </mi>
            <mi> t </mi>
            <mi>T</mi>
            <mi>t</mi>
            <mi>&Topf;</mi>
            <mi mathvariant='sans-serif'>T</mi>
            <mi mathvariant='sans-serif'>t</mi>
            <mi>T</mi>
            <mi>t</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>U</mi>
            <mi mathvariant='monospace'>u</mi>
            <mi>&Uscr;</mi>
            <mi mathvariant='bold'>U</mi>
            <mi mathvariant='bold'>u</mi>
            <mi> U </mi>
            <mi> u </mi>
            <mi>U</mi>
            <mi>u</mi>
            <mi>&Uopf;</mi>
            <mi mathvariant='sans-serif'>U</mi>
            <mi mathvariant='sans-serif'>u</mi>
            <mi>U</mi>
            <mi>u</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>V</mi>
            <mi mathvariant='monospace'>v</mi>
            <mi>&Vscr;</mi>
            <mi mathvariant='bold'>V</mi>
            <mi mathvariant='bold'>v</mi>
            <mi> V </mi>
            <mi> v </mi>
            <mi>V</mi>
            <mi>v</mi>
            <mi>&Vopf;</mi>
            <mi mathvariant='sans-serif'>V</mi>
            <mi mathvariant='sans-serif'>v</mi>
            <mi>V</mi>
            <mi>v</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>W</mi>
            <mi mathvariant='monospace'>w</mi>
            <mi>&Wscr;</mi>
            <mi mathvariant='bold'>W</mi>
            <mi mathvariant='bold'>w</mi>
            <mi> W </mi>
            <mi> w </mi>
            <mi>W</mi>
            <mi>w</mi>
            <mi>&Wopf;</mi>
            <mi mathvariant='sans-serif'>W</mi>
            <mi mathvariant='sans-serif'>w</mi>
            <mi>W</mi>
            <mi>w</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>X</mi>
            <mi mathvariant='monospace'>x</mi>
            <mi>&Xscr;</mi>
            <mi mathvariant='bold'>X</mi>
            <mi mathvariant='bold'>x</mi>
            <mi> X </mi>
            <mi> x </mi>
            <mi>X</mi>
            <mi>x</mi>
            <mi>&Xopf;</mi>
            <mi mathvariant='sans-serif'>X</mi>
            <mi mathvariant='sans-serif'>x</mi>
            <mi>X</mi>
            <mi>x</mi>
           </mrow>
          </mtd>
         </mtr>
         <mtr>
          <mtd columnalign='right'>
           <mrow>
            <mi mathvariant='monospace'>Y</mi>
            <mi mathvariant='monospace'>y</mi>
            <mi>&Yscr;</mi>
            <mi mathvariant='bold'>Y</mi>
            <mi mathvariant='bold'>y</mi>
            <mi> Y </mi>
            <mi> y </mi>
            <mi>Y</mi>
            <mi>y</mi>
            <mi>&Yopf;</mi>
            <mi mathvariant='sans-serif'>Y</mi>
            <mi mathvariant='sans-serif'>y</mi>
            <mi>Y</mi>
            <mi>y</mi>
           </mrow>
          </mtd>
          <mtd columnalign='left'>
           <mrow>
            <mi mathvariant='monospace'>Z</mi>
            <mi mathvariant='monospace'>z</mi>
            <mi>&Zscr;</mi>
            <mi mathvariant='bold'>Z</mi>
            <mi mathvariant='bold'>z</mi>
            <mi> Z </mi>
            <mi> z </mi>
            <mi>Z</mi>
            <mi>z</mi>
            <mi>&Zopf;</mi>
            <mi mathvariant='sans-serif'>Z</mi>
            <mi mathvariant='sans-serif'>z</mi>
            <mi>Z</mi>
            <mi>z</mi>
           </mrow>
          </mtd>
         </mtr>
        </mtable>
       </math>
      </formula>

Preview |math fonts|

CENTER
------

.. container:: ltx-source

   ::

      {\centering a \indent a1 \noindent a2 \\ a3\par a4} \par
      {\raggedleft b \indent b1 \noindent b2 \\ b3\par b4} \par
      {\raggedright c \indent c1 \noindent c2 \\ c3\par c4} \par
      {\centering\raggedright d \indent d1 \noindent d2 \\ d3\par d4} \par
      {f\centering\raggedright e \indent e1 \noindent e2 \\ e3\par e4} \par
      \begin{center}A \indent A1 \noindent A2 \\ A3 \par A4\end{center}
      \begin{flushright}B \indent B1 \noindent B2 \\ B3 \par B4\end{flushright}
      \begin{flushleft}C \indent C1 \noindent C2 \\ C3\par C4\end{flushleft}
      \begin{center}\begin{flushleft}D \indent D1 \noindent D2 \\ D3\par D4\end{flushleft}\end{center}
      F\begin{center}\begin{flushleft} E \indent E1 \noindent E2 \\ E3 \par E4\end{flushleft}\end{center}
      \begin{quote}I \indent I1 \noindent I2 \\ I3 \par I4\end{quote}
      \begin{quotation}J \indent J1 \noindent J2 \\ J3 \par J4\end{quotation}

The translation is the following. There are two lines with
``\centering\raggedright``. In the first case, the command is seen in
vertical mode (outside paragraph), so that the letter d will be in a new
paragraph, a flushed-left one. In the second case, the command appears
in vertical mode, so that ``f\centering`` will center the f (and the e
that follows). The e1 is flushed-left since ``\\`` start a new
paragraph. On the other hand, D and E are flushed left, because the
environement insert an implicit ``\par`` (both letters are seen in
vertical mode).

.. container:: xml_out

   ::

      <p rend='center'>a</p>
      <p rend='center'>a1</p>
      <p rend='center'>a2</p>
      <p rend='center'>a3</p>
      <p rend='center'>a4</p>
      <p rend='flushed-right'>b</p>
      <p noindent='false' rend='flushed-right'>b1</p>
      <p noindent='true' rend='flushed-right'>b2</p>
      <p noindent='true' rend='flushed-right'>b3</p>
      <p rend='flushed-right'>b4</p>
      <p rend='flushed-left'>c</p>
      <p noindent='false' rend='flushed-left'>c1</p>
      <p noindent='true' rend='flushed-left'>c2</p>
      <p noindent='true' rend='flushed-left'>c3</p>
      <p rend='flushed-left'>c4</p>
      <p rend='flushed-left'>d</p>
      <p noindent='false' rend='flushed-left'>d1</p>
      <p noindent='true' rend='flushed-left'>d2</p>
      <p noindent='true' rend='flushed-left'>d3</p>
      <p rend='flushed-left'>d4</p>
      <p rend='center'>fe</p>
      <p noindent='false' rend='flushed-left'>e1</p>
      <p noindent='true' rend='flushed-left'>e2</p>
      <p noindent='true' rend='flushed-left'>e3</p>
      <p rend='flushed-left'>e4</p>
      <p rend='center'>A</p>
      <p rend='center'>A1</p>
      <p rend='center'>A2</p>
      <p rend='center'>A3</p>
      <p rend='center'>A4</p>
      <p rend='flushed-right'>B</p>
      <p noindent='false' rend='flushed-right'>B1</p>
      <p noindent='true' rend='flushed-right'>B2</p>
      <p noindent='true' rend='flushed-right'>B3</p>
      <p rend='flushed-right'>B4</p>
      <p rend='flushed-left'>C</p>
      <p noindent='false' rend='flushed-left'>C1</p>
      <p noindent='true' rend='flushed-left'>C2</p>
      <p noindent='true' rend='flushed-left'>C3</p>
      <p rend='flushed-left'>C4</p>
      <p rend='flushed-left'>D</p>
      <p noindent='false' rend='flushed-left'>D1</p>
      <p noindent='true' rend='flushed-left'>D2</p>
      <p noindent='true' rend='flushed-left'>D3</p>
      <p rend='flushed-left'>D4</p>
      <p>F</p>
      <p rend='flushed-left'>E</p>
      <p noindent='false' rend='flushed-left'>E1</p>
      <p noindent='true' rend='flushed-left'>E2</p>
      <p noindent='true' rend='flushed-left'>E3</p>
      <p rend='flushed-left'>E4</p>
      <p rend='quoted'>I</p>
      <p noindent='false' rend='quoted'>I1</p>
      <p noindent='true' rend='quoted'>I2</p>
      <p noindent='true' rend='quoted'>I3</p>
      <p rend='quoted'>I4</p>
      <p rend='quoted'>J</p>
      <p noindent='false' rend='quoted'>J1</p>
      <p noindent='true' rend='quoted'>J2</p>
      <p noindent='true' rend='quoted'>J3</p>
      <p rend='quoted'>J4</p>

The names in the example above are not hard coded. If the configuration
file contains the following lines,

.. container:: ltx-source

   ::

        att_rend = "Rend"
        att_centering = "Center"
        att_flush_left = "FlushLeft"
        att_flush_right = "FlushRight"
        att_quote = "Quote"
        att_quotation = "Quotation"
        att_noindent = "Noindent"

then the translation will be

.. container:: xml_out

   ::

      <p Rend='Center'>a</p>
      <p Rend='Center'>a1</p>
      <p Rend='Center'>a2</p>
      <p Rend='Center'>a3</p>
      <p Rend='Center'>a4</p>
      <p Rend='FlushRight'>b</p>
      <p Noindent='false' Rend='FlushRight'>b1</p>
      <p Noindent='true' Rend='FlushRight'>b2</p>
      <p Noindent='true' Rend='FlushRight'>b3</p>
      <p Rend='FlushRight'>b4</p>
      <p Rend='FlushLeft'>c</p>
      <p Noindent='false' Rend='FlushLeft'>c1</p>
      <p Noindent='true' Rend='FlushLeft'>c2</p>
      <p Noindent='true' Rend='FlushLeft'>c3</p>
      <p Rend='FlushLeft'>c4</p>
      <p Rend='FlushLeft'>d</p>
      <p Noindent='false' Rend='FlushLeft'>d1</p>
      <p Noindent='true' Rend='FlushLeft'>d2</p>
      <p Noindent='true' Rend='FlushLeft'>d3</p>
      <p Rend='FlushLeft'>d4</p>
      <p Rend='Center'>fe</p>
      <p Noindent='false' Rend='FlushLeft'>e1</p>
      <p Noindent='true' Rend='FlushLeft'>e2</p>
      <p Noindent='true' Rend='FlushLeft'>e3</p>
      <p Rend='FlushLeft'>e4</p>
      <p Rend='Center'>A</p>
      <p Rend='Center'>A1</p>
      <p Rend='Center'>A2</p>
      <p Rend='Center'>A3</p>
      <p Rend='Center'>A4</p>
      <p Rend='FlushRight'>B</p>
      <p Noindent='false' Rend='FlushRight'>B1</p>
      <p Noindent='true' Rend='FlushRight'>B2</p>
      <p Noindent='true' Rend='FlushRight'>B3</p>
      <p Rend='FlushRight'>B4</p>
      <p Rend='FlushLeft'>C</p>
      <p Noindent='false' Rend='FlushLeft'>C1</p>
      <p Noindent='true' Rend='FlushLeft'>C2</p>
      <p Noindent='true' Rend='FlushLeft'>C3</p>
      <p Rend='FlushLeft'>C4</p>
      <p Rend='FlushLeft'>D</p>
      <p Noindent='false' Rend='FlushLeft'>D1</p>
      <p Noindent='true' Rend='FlushLeft'>D2</p>
      <p Noindent='true' Rend='FlushLeft'>D3</p>
      <p Rend='FlushLeft'>D4</p>
      <p>F</p>
      <p Rend='FlushLeft'>E</p>
      <p Noindent='false' Rend='FlushLeft'>E1</p>
      <p Noindent='true' Rend='FlushLeft'>E2</p>
      <p Noindent='true' Rend='FlushLeft'>E3</p>
      <p Rend='FlushLeft'>E4</p>
      <p Rend='Quote'>I</p>
      <p Noindent='false' Rend='Quote'>I1</p>
      <p Noindent='true' Rend='Quote'>I2</p>
      <p Noindent='true' Rend='Quote'>I3</p>
      <p Rend='Quote'>I4</p>
      <p Rend='Quotation'>J</p>
      <p Noindent='false' Rend='Quotation'>J1</p>
      <p Noindent='true' Rend='Quotation'>J2</p>
      <p Noindent='true' Rend='Quotation'>J3</p>
      <p Rend='Quotation'>J4</p>

.. |relations operators from table 8.5| image:: /img/img_8.png
.. |arrows from table 8.6| image:: /img/img_9.png
.. |log-like operators| image:: /img/img_10.png
.. |log-like operators2| image:: /img/img_11.png
.. |log-like operators3| image:: /img/img_56.png
.. |log-like operators4| image:: /img/img_12.png
.. |operators of table 8.7| image:: /img/img_7.png
.. |math fonts| image:: /img/img_111.png

----

docs/auxdoc.rst
---------------

---------
Font test
---------

This files contains `here <#source>`__ a small text that shows all
combinations of latex fonts. We show here `here <#xml1>`__ the XML
result. Each font change is a ``<hi>`` element with some attribute. An
alternate version `here <#xml2>`__ uses elements instead. The result can
be seen `here <#out1>`__ and `here <#out2>`__. We also show the content
of a `config file <#config2>`__, that could be used to produce the
second example.

--------------

This is the tex source:

.. container:: ltx-source

   ::

      \def\Test{
      \textrm{Textrm} \textsf{Textsf} \texttt{Texttt}
      \textbf{Testbf} \textit{Textit} \textsc{Textsc} \textsl{Textsl}
      \textnormal{Textnormal} \textmd{Textmd} \emph{Emph} \textup{Textup}
      \par}

      {\rmfamily \mdseries \upshape rmmdup \Test}
      {\sffamily \mdseries \upshape sfmdup \Test}
      {\ttfamily \mdseries \upshape ttmdup \Test}
      {\rmfamily \bfseries \upshape rmbfup \Test}
      {\sffamily \bfseries \upshape sfbfup \Test}
      {\ttfamily \bfseries \upshape ttbfup \Test}

      {\rmfamily \mdseries \itshape rmmdit \Test}
      {\sffamily \mdseries \itshape sfmdit \Test}
      {\ttfamily \mdseries \itshape ttmdit \Test}
      {\rmfamily \bfseries \itshape rmbfit \Test}
      {\sffamily \bfseries \itshape sfbfit \Test}
      {\ttfamily \bfseries \itshape ttbfit \Test}

      {\rmfamily \mdseries \scshape rmmdsc \Test}
      {\sffamily \mdseries \scshape sfmdsc \Test}
      {\ttfamily \mdseries \scshape ttmdsc \Test}
      {\rmfamily \bfseries \scshape rmbfsc \Test}
      {\sffamily \bfseries \scshape sfbfsc \Test}
      {\ttfamily \bfseries \scshape ttbfsc \Test}

      {\rmfamily \mdseries \slshape rmmdsl \Test}
      {\sffamily \mdseries \slshape sfmdsl \Test}
      {\ttfamily \mdseries \slshape ttmdsl \Test}
      {\rmfamily \bfseries \slshape rmbfsl \Test}
      {\sffamily \bfseries \slshape sfbfsl \Test}
      {\ttfamily \bfseries \slshape ttbfsl \Test}

This is the XML result

.. container:: xml_out

   ::

      <p>rmmdup Textrm <hi rend='sansserif'>Textsf</hi> <hi rend='tt'>Texttt</hi>
      <hi rend='bold'>Testbf</hi> <hi rend='it'>Textit</hi> <hi
      rend='sc'>Textsc</hi> <hi rend='slanted'>Textsl</hi> Textnormal Textmd <hi
      rend='it'>Emph</hi> Textup </p>

      <p><hi rend='sansserif'>sfmdup </hi>Textrm<hi
      rend='sansserif'> Textsf </hi><hi rend='tt'>Texttt</hi><hi rend='sansserif'>
      </hi><hi rend='sansserif'><hi rend='bold'>Testbf</hi></hi><hi
      rend='sansserif'> </hi><hi rend='it'><hi rend='sansserif'>Textit</hi></hi><hi
      rend='sansserif'> </hi><hi rend='sc'><hi rend='sansserif'>Textsc</hi></hi><hi
      rend='sansserif'> </hi><hi rend='slanted'><hi
      rend='sansserif'>Textsl</hi></hi><hi rend='sansserif'> </hi>Textnormal<hi
      rend='sansserif'> Textmd </hi><hi rend='it'><hi
      rend='sansserif'>Emph</hi></hi><hi rend='sansserif'> Textup </hi></p> 

      <p><hi
      rend='tt'>ttmdup </hi>Textrm<hi rend='tt'> </hi><hi
      rend='sansserif'>Textsf</hi><hi rend='tt'> Texttt </hi><hi rend='tt'><hi
      rend='bold'>Testbf</hi></hi><hi rend='tt'> </hi><hi rend='it'><hi
      rend='tt'>Textit</hi></hi><hi rend='tt'> </hi><hi rend='sc'><hi
      rend='tt'>Textsc</hi></hi><hi rend='tt'> </hi><hi rend='slanted'><hi
      rend='tt'>Textsl</hi></hi><hi rend='tt'> </hi>Textnormal<hi rend='tt'> Textmd
      </hi><hi rend='it'><hi rend='tt'>Emph</hi></hi><hi rend='tt'> Textup </hi></p>

      <p><hi rend='bold'>rmbfup Textrm </hi><hi rend='sansserif'><hi
      rend='bold'>Textsf</hi></hi><hi rend='bold'> </hi><hi rend='tt'><hi
      rend='bold'>Texttt</hi></hi><hi rend='bold'> Testbf </hi><hi rend='it'><hi
      rend='bold'>Textit</hi></hi><hi rend='bold'> </hi><hi rend='sc'><hi
      rend='bold'>Textsc</hi></hi><hi rend='bold'> </hi><hi rend='slanted'><hi
      rend='bold'>Textsl</hi></hi><hi rend='bold'> </hi>Textnormal<hi rend='bold'>
      </hi>Textmd<hi rend='bold'> </hi><hi rend='it'><hi
      rend='bold'>Emph</hi></hi><hi rend='bold'> Textup </hi></p> 

      <p><hi
      rend='sansserif'><hi rend='bold'>sfbfup </hi></hi><hi
      rend='bold'>Textrm</hi><hi rend='sansserif'><hi rend='bold'> Textsf
      </hi></hi><hi rend='tt'><hi rend='bold'>Texttt</hi></hi><hi
      rend='sansserif'><hi rend='bold'> Testbf </hi></hi><hi rend='it'><hi
      rend='sansserif'><hi rend='bold'>Textit</hi></hi></hi><hi rend='sansserif'><hi
      rend='bold'> </hi></hi><hi rend='sc'><hi rend='sansserif'><hi
      rend='bold'>Textsc</hi></hi></hi><hi rend='sansserif'><hi rend='bold'>
      </hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'>Textsl</hi></hi></hi><hi rend='sansserif'><hi rend='bold'>
      </hi></hi>Textnormal<hi rend='sansserif'><hi rend='bold'> </hi></hi><hi
      rend='sansserif'>Textmd</hi><hi rend='sansserif'><hi rend='bold'>
      </hi></hi><hi rend='it'><hi rend='sansserif'><hi
      rend='bold'>Emph</hi></hi></hi><hi rend='sansserif'><hi rend='bold'> Textup
      </hi></hi></p> 

      <p><hi rend='tt'><hi rend='bold'>ttbfup </hi></hi><hi
      rend='bold'>Textrm</hi><hi rend='tt'><hi rend='bold'> </hi></hi><hi
      rend='sansserif'><hi rend='bold'>Textsf</hi></hi><hi rend='tt'><hi
      rend='bold'> Texttt Testbf </hi></hi><hi rend='it'><hi rend='tt'><hi
      rend='bold'>Textit</hi></hi></hi><hi rend='tt'><hi rend='bold'> </hi></hi><hi
      rend='sc'><hi rend='tt'><hi rend='bold'>Textsc</hi></hi></hi><hi rend='tt'><hi
      rend='bold'> </hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>Textsl</hi></hi></hi><hi rend='tt'><hi rend='bold'>
      </hi></hi>Textnormal<hi rend='tt'><hi rend='bold'> </hi></hi><hi
      rend='tt'>Textmd</hi><hi rend='tt'><hi rend='bold'> </hi></hi><hi
      rend='it'><hi rend='tt'><hi rend='bold'>Emph</hi></hi></hi><hi rend='tt'><hi
      rend='bold'> Textup </hi></hi></p> 

      <p><hi rend='it'>rmmdit Textrm </hi><hi
      rend='it'><hi rend='sansserif'>Textsf</hi></hi><hi rend='it'> </hi><hi
      rend='it'><hi rend='tt'>Texttt</hi></hi><hi rend='it'> </hi><hi rend='it'><hi
      rend='bold'>Testbf</hi></hi><hi rend='it'> Textit </hi><hi
      rend='sc'>Textsc</hi><hi rend='it'> </hi><hi rend='slanted'>Textsl</hi><hi
      rend='it'> </hi>Textnormal<hi rend='it'> Textmd </hi>Emph<hi rend='it'>
      </hi>Textup<hi rend='it'> </hi></p> 

      <p><hi rend='it'><hi
      rend='sansserif'>sfmdit </hi></hi><hi rend='it'>Textrm</hi><hi rend='it'><hi
      rend='sansserif'> Textsf </hi></hi><hi rend='it'><hi
      rend='tt'>Texttt</hi></hi><hi rend='it'><hi rend='sansserif'> </hi></hi><hi
      rend='it'><hi rend='sansserif'><hi rend='bold'>Testbf</hi></hi></hi><hi
      rend='it'><hi rend='sansserif'> Textit </hi></hi><hi rend='sc'><hi
      rend='sansserif'>Textsc</hi></hi><hi rend='it'><hi rend='sansserif'>
      </hi></hi><hi rend='slanted'><hi rend='sansserif'>Textsl</hi></hi><hi
      rend='it'><hi rend='sansserif'> </hi></hi>Textnormal<hi rend='it'><hi
      rend='sansserif'> Textmd </hi></hi><hi rend='sansserif'>Emph</hi><hi
      rend='it'><hi rend='sansserif'> </hi></hi><hi rend='sansserif'>Textup</hi><hi
      rend='it'><hi rend='sansserif'> </hi></hi></p> 

      <p><hi rend='it'><hi
      rend='tt'>ttmdit </hi></hi><hi rend='it'>Textrm</hi><hi rend='it'><hi
      rend='tt'> </hi></hi><hi rend='it'><hi rend='sansserif'>Textsf</hi></hi><hi
      rend='it'><hi rend='tt'> Texttt </hi></hi><hi rend='it'><hi rend='tt'><hi
      rend='bold'>Testbf</hi></hi></hi><hi rend='it'><hi rend='tt'> Textit
      </hi></hi><hi rend='sc'><hi rend='tt'>Textsc</hi></hi><hi rend='it'><hi
      rend='tt'> </hi></hi><hi rend='slanted'><hi rend='tt'>Textsl</hi></hi><hi
      rend='it'><hi rend='tt'> </hi></hi>Textnormal<hi rend='it'><hi rend='tt'>
      Textmd </hi></hi><hi rend='tt'>Emph</hi><hi rend='it'><hi rend='tt'>
      </hi></hi><hi rend='tt'>Textup</hi><hi rend='it'><hi rend='tt'> </hi></hi></p>

      <p><hi rend='it'><hi rend='bold'>rmbfit Textrm </hi></hi><hi rend='it'><hi
      rend='sansserif'><hi rend='bold'>Textsf</hi></hi></hi><hi rend='it'><hi
      rend='bold'> </hi></hi><hi rend='it'><hi rend='tt'><hi
      rend='bold'>Texttt</hi></hi></hi><hi rend='it'><hi rend='bold'> Testbf Textit
      </hi></hi><hi rend='sc'><hi rend='bold'>Textsc</hi></hi><hi rend='it'><hi
      rend='bold'> </hi></hi><hi rend='slanted'><hi rend='bold'>Textsl</hi></hi><hi
      rend='it'><hi rend='bold'> </hi></hi>Textnormal<hi rend='it'><hi rend='bold'>
      </hi></hi><hi rend='it'>Textmd</hi><hi rend='it'><hi rend='bold'>
      </hi></hi><hi rend='bold'>Emph</hi><hi rend='it'><hi rend='bold'>
      </hi></hi><hi rend='bold'>Textup</hi><hi rend='it'><hi rend='bold'>
      </hi></hi></p> 

      <p><hi rend='it'><hi rend='sansserif'><hi rend='bold'>sfbfit
      </hi></hi></hi><hi rend='it'><hi rend='bold'>Textrm</hi></hi><hi rend='it'><hi
      rend='sansserif'><hi rend='bold'> Textsf </hi></hi></hi><hi rend='it'><hi
      rend='tt'><hi rend='bold'>Texttt</hi></hi></hi><hi rend='it'><hi
      rend='sansserif'><hi rend='bold'> Testbf Textit </hi></hi></hi><hi
      rend='sc'><hi rend='sansserif'><hi rend='bold'>Textsc</hi></hi></hi><hi
      rend='it'><hi rend='sansserif'><hi rend='bold'> </hi></hi></hi><hi
      rend='slanted'><hi rend='sansserif'><hi rend='bold'>Textsl</hi></hi></hi><hi
      rend='it'><hi rend='sansserif'><hi rend='bold'> </hi></hi></hi>Textnormal<hi
      rend='it'><hi rend='sansserif'><hi rend='bold'> </hi></hi></hi><hi
      rend='it'><hi rend='sansserif'>Textmd</hi></hi><hi rend='it'><hi
      rend='sansserif'><hi rend='bold'> </hi></hi></hi><hi rend='sansserif'><hi
      rend='bold'>Emph</hi></hi><hi rend='it'><hi rend='sansserif'><hi rend='bold'>
      </hi></hi></hi><hi rend='sansserif'><hi rend='bold'>Textup</hi></hi><hi
      rend='it'><hi rend='sansserif'><hi rend='bold'> </hi></hi></hi></p> 

      <p><hi
      rend='it'><hi rend='tt'><hi rend='bold'>ttbfit </hi></hi></hi><hi
      rend='it'><hi rend='bold'>Textrm</hi></hi><hi rend='it'><hi rend='tt'><hi
      rend='bold'> </hi></hi></hi><hi rend='it'><hi rend='sansserif'><hi
      rend='bold'>Textsf</hi></hi></hi><hi rend='it'><hi rend='tt'><hi rend='bold'>
      Texttt Testbf Textit </hi></hi></hi><hi rend='sc'><hi rend='tt'><hi
      rend='bold'>Textsc</hi></hi></hi><hi rend='it'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>Textsl</hi></hi></hi><hi rend='it'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi>Textnormal<hi rend='it'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='it'><hi rend='tt'>Textmd</hi></hi><hi rend='it'><hi
      rend='tt'><hi rend='bold'> </hi></hi></hi><hi rend='tt'><hi
      rend='bold'>Emph</hi></hi><hi rend='it'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='tt'><hi rend='bold'>Textup</hi></hi><hi rend='it'><hi
      rend='tt'><hi rend='bold'> </hi></hi></hi></p> 

      <p><hi rend='sc'>rmmdsc Textrm
      </hi><hi rend='sc'><hi rend='sansserif'>Textsf</hi></hi><hi rend='sc'>
      </hi><hi rend='sc'><hi rend='tt'>Texttt</hi></hi><hi rend='sc'> </hi><hi
      rend='sc'><hi rend='bold'>Testbf</hi></hi><hi rend='sc'> </hi><hi
      rend='it'>Textit</hi><hi rend='sc'> Textsc </hi><hi
      rend='slanted'>Textsl</hi><hi rend='sc'> </hi>Textnormal<hi rend='sc'> Textmd
      </hi>Emph<hi rend='sc'> </hi>Textup<hi rend='sc'> </hi></p>

       <p><hi
      rend='sc'><hi rend='sansserif'>sfmdsc </hi></hi><hi rend='sc'>Textrm</hi><hi
      rend='sc'><hi rend='sansserif'> Textsf </hi></hi><hi rend='sc'><hi
      rend='tt'>Texttt</hi></hi><hi rend='sc'><hi rend='sansserif'> </hi></hi><hi
      rend='sc'><hi rend='sansserif'><hi rend='bold'>Testbf</hi></hi></hi><hi
      rend='sc'><hi rend='sansserif'> </hi></hi><hi rend='it'><hi
      rend='sansserif'>Textit</hi></hi><hi rend='sc'><hi rend='sansserif'> Textsc
      </hi></hi><hi rend='slanted'><hi rend='sansserif'>Textsl</hi></hi><hi
      rend='sc'><hi rend='sansserif'> </hi></hi>Textnormal<hi rend='sc'><hi
      rend='sansserif'> Textmd </hi></hi><hi rend='sansserif'>Emph</hi><hi
      rend='sc'><hi rend='sansserif'> </hi></hi><hi rend='sansserif'>Textup</hi><hi
      rend='sc'><hi rend='sansserif'> </hi></hi></p> 

      <p><hi rend='sc'><hi
      rend='tt'>ttmdsc </hi></hi><hi rend='sc'>Textrm</hi><hi rend='sc'><hi
      rend='tt'> </hi></hi><hi rend='sc'><hi rend='sansserif'>Textsf</hi></hi><hi
      rend='sc'><hi rend='tt'> Texttt </hi></hi><hi rend='sc'><hi rend='tt'><hi
      rend='bold'>Testbf</hi></hi></hi><hi rend='sc'><hi rend='tt'> </hi></hi><hi
      rend='it'><hi rend='tt'>Textit</hi></hi><hi rend='sc'><hi rend='tt'> Textsc
      </hi></hi><hi rend='slanted'><hi rend='tt'>Textsl</hi></hi><hi rend='sc'><hi
      rend='tt'> </hi></hi>Textnormal<hi rend='sc'><hi rend='tt'> Textmd
      </hi></hi><hi rend='tt'>Emph</hi><hi rend='sc'><hi rend='tt'> </hi></hi><hi
      rend='tt'>Textup</hi><hi rend='sc'><hi rend='tt'> </hi></hi></p> 

      <p><hi
      rend='sc'><hi rend='bold'>rmbfsc Textrm </hi></hi><hi rend='sc'><hi
      rend='sansserif'><hi rend='bold'>Textsf</hi></hi></hi><hi rend='sc'><hi
      rend='bold'> </hi></hi><hi rend='sc'><hi rend='tt'><hi
      rend='bold'>Texttt</hi></hi></hi><hi rend='sc'><hi rend='bold'> Testbf
      </hi></hi><hi rend='it'><hi rend='bold'>Textit</hi></hi><hi rend='sc'><hi
      rend='bold'> Textsc </hi></hi><hi rend='slanted'><hi
      rend='bold'>Textsl</hi></hi><hi rend='sc'><hi rend='bold'>
      </hi></hi>Textnormal<hi rend='sc'><hi rend='bold'> </hi></hi><hi
      rend='sc'>Textmd</hi><hi rend='sc'><hi rend='bold'> </hi></hi><hi
      rend='bold'>Emph</hi><hi rend='sc'><hi rend='bold'> </hi></hi><hi
      rend='bold'>Textup</hi><hi rend='sc'><hi rend='bold'> </hi></hi></p> 

      <p><hi
      rend='sc'><hi rend='sansserif'><hi rend='bold'>sfbfsc </hi></hi></hi><hi
      rend='sc'><hi rend='bold'>Textrm</hi></hi><hi rend='sc'><hi
      rend='sansserif'><hi rend='bold'> Textsf </hi></hi></hi><hi rend='sc'><hi
      rend='tt'><hi rend='bold'>Texttt</hi></hi></hi><hi rend='sc'><hi
      rend='sansserif'><hi rend='bold'> Testbf </hi></hi></hi><hi rend='it'><hi
      rend='sansserif'><hi rend='bold'>Textit</hi></hi></hi><hi rend='sc'><hi
      rend='sansserif'><hi rend='bold'> Textsc </hi></hi></hi><hi rend='slanted'><hi
      rend='sansserif'><hi rend='bold'>Textsl</hi></hi></hi><hi rend='sc'><hi
      rend='sansserif'><hi rend='bold'> </hi></hi></hi>Textnormal<hi rend='sc'><hi
      rend='sansserif'><hi rend='bold'> </hi></hi></hi><hi rend='sc'><hi
      rend='sansserif'>Textmd</hi></hi><hi rend='sc'><hi rend='sansserif'><hi
      rend='bold'> </hi></hi></hi><hi rend='sansserif'><hi
      rend='bold'>Emph</hi></hi><hi rend='sc'><hi rend='sansserif'><hi rend='bold'>
      </hi></hi></hi><hi rend='sansserif'><hi rend='bold'>Textup</hi></hi><hi
      rend='sc'><hi rend='sansserif'><hi rend='bold'> </hi></hi></hi></p> 

      <p><hi
      rend='sc'><hi rend='tt'><hi rend='bold'>ttbfsc </hi></hi></hi><hi
      rend='sc'><hi rend='bold'>Textrm</hi></hi><hi rend='sc'><hi rend='tt'><hi
      rend='bold'> </hi></hi></hi><hi rend='sc'><hi rend='sansserif'><hi
      rend='bold'>Textsf</hi></hi></hi><hi rend='sc'><hi rend='tt'><hi rend='bold'>
      Texttt Testbf </hi></hi></hi><hi rend='it'><hi rend='tt'><hi
      rend='bold'>Textit</hi></hi></hi><hi rend='sc'><hi rend='tt'><hi rend='bold'>
      Textsc </hi></hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>Textsl</hi></hi></hi><hi rend='sc'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi>Textnormal<hi rend='sc'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='sc'><hi rend='tt'>Textmd</hi></hi><hi rend='sc'><hi
      rend='tt'><hi rend='bold'> </hi></hi></hi><hi rend='tt'><hi
      rend='bold'>Emph</hi></hi><hi rend='sc'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='tt'><hi rend='bold'>Textup</hi></hi><hi rend='sc'><hi
      rend='tt'><hi rend='bold'> </hi></hi></hi></p> 

      <p><hi rend='slanted'>rmmdsl
      Textrm </hi><hi rend='slanted'><hi rend='sansserif'>Textsf</hi></hi><hi
      rend='slanted'> </hi><hi rend='slanted'><hi rend='tt'>Texttt</hi></hi><hi
      rend='slanted'> </hi><hi rend='slanted'><hi rend='bold'>Testbf</hi></hi><hi
      rend='slanted'> </hi><hi rend='it'>Textit</hi><hi rend='slanted'> </hi><hi
      rend='sc'>Textsc</hi><hi rend='slanted'> Textsl </hi>Textnormal<hi
      rend='slanted'> Textmd </hi>Emph<hi rend='slanted'> </hi>Textup<hi
      rend='slanted'> </hi></p> 

      <p><hi rend='slanted'><hi rend='sansserif'>sfmdsl
      </hi></hi><hi rend='slanted'>Textrm</hi><hi rend='slanted'><hi
      rend='sansserif'> Textsf </hi></hi><hi rend='slanted'><hi
      rend='tt'>Texttt</hi></hi><hi rend='slanted'><hi rend='sansserif'>
      </hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'>Testbf</hi></hi></hi><hi rend='slanted'><hi rend='sansserif'>
      </hi></hi><hi rend='it'><hi rend='sansserif'>Textit</hi></hi><hi
      rend='slanted'><hi rend='sansserif'> </hi></hi><hi rend='sc'><hi
      rend='sansserif'>Textsc</hi></hi><hi rend='slanted'><hi rend='sansserif'>
      Textsl </hi></hi>Textnormal<hi rend='slanted'><hi rend='sansserif'> Textmd
      </hi></hi><hi rend='sansserif'>Emph</hi><hi rend='slanted'><hi
      rend='sansserif'> </hi></hi><hi rend='sansserif'>Textup</hi><hi
      rend='slanted'><hi rend='sansserif'> </hi></hi></p> 

      <p><hi rend='slanted'><hi
      rend='tt'>ttmdsl </hi></hi><hi rend='slanted'>Textrm</hi><hi
      rend='slanted'><hi rend='tt'> </hi></hi><hi rend='slanted'><hi
      rend='sansserif'>Textsf</hi></hi><hi rend='slanted'><hi rend='tt'> Texttt
      </hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>Testbf</hi></hi></hi><hi rend='slanted'><hi rend='tt'>
      </hi></hi><hi rend='it'><hi rend='tt'>Textit</hi></hi><hi rend='slanted'><hi
      rend='tt'> </hi></hi><hi rend='sc'><hi rend='tt'>Textsc</hi></hi><hi
      rend='slanted'><hi rend='tt'> Textsl </hi></hi>Textnormal<hi
      rend='slanted'><hi rend='tt'> Textmd </hi></hi><hi rend='tt'>Emph</hi><hi
      rend='slanted'><hi rend='tt'> </hi></hi><hi rend='tt'>Textup</hi><hi
      rend='slanted'><hi rend='tt'> </hi></hi></p> 

      <p><hi rend='slanted'><hi
      rend='bold'>rmbfsl Textrm </hi></hi><hi rend='slanted'><hi
      rend='sansserif'><hi rend='bold'>Textsf</hi></hi></hi><hi rend='slanted'><hi
      rend='bold'> </hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>Texttt</hi></hi></hi><hi rend='slanted'><hi rend='bold'> Testbf
      </hi></hi><hi rend='it'><hi rend='bold'>Textit</hi></hi><hi rend='slanted'><hi
      rend='bold'> </hi></hi><hi rend='sc'><hi rend='bold'>Textsc</hi></hi><hi
      rend='slanted'><hi rend='bold'> Textsl </hi></hi>Textnormal<hi
      rend='slanted'><hi rend='bold'> </hi></hi><hi rend='slanted'>Textmd</hi><hi
      rend='slanted'><hi rend='bold'> </hi></hi><hi rend='bold'>Emph</hi><hi
      rend='slanted'><hi rend='bold'> </hi></hi><hi rend='bold'>Textup</hi><hi
      rend='slanted'><hi rend='bold'> </hi></hi></p> 

      <p><hi rend='slanted'><hi
      rend='sansserif'><hi rend='bold'>sfbfsl </hi></hi></hi><hi rend='slanted'><hi
      rend='bold'>Textrm</hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> Textsf </hi></hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>Texttt</hi></hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> Testbf </hi></hi></hi><hi rend='it'><hi rend='sansserif'><hi
      rend='bold'>Textit</hi></hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> </hi></hi></hi><hi rend='sc'><hi rend='sansserif'><hi
      rend='bold'>Textsc</hi></hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> Textsl </hi></hi></hi>Textnormal<hi rend='slanted'><hi
      rend='sansserif'><hi rend='bold'> </hi></hi></hi><hi rend='slanted'><hi
      rend='sansserif'>Textmd</hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> </hi></hi></hi><hi rend='sansserif'><hi
      rend='bold'>Emph</hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> </hi></hi></hi><hi rend='sansserif'><hi
      rend='bold'>Textup</hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'> </hi></hi></hi></p> 

      <p><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'>ttbfsl </hi></hi></hi><hi rend='slanted'><hi
      rend='bold'>Textrm</hi></hi><hi rend='slanted'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='slanted'><hi rend='sansserif'><hi
      rend='bold'>Textsf</hi></hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'> Texttt Testbf </hi></hi></hi><hi rend='it'><hi rend='tt'><hi
      rend='bold'>Textit</hi></hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'> </hi></hi></hi><hi rend='sc'><hi rend='tt'><hi
      rend='bold'>Textsc</hi></hi></hi><hi rend='slanted'><hi rend='tt'><hi
      rend='bold'> Textsl </hi></hi></hi>Textnormal<hi rend='slanted'><hi
      rend='tt'><hi rend='bold'> </hi></hi></hi><hi rend='slanted'><hi
      rend='tt'>Textmd</hi></hi><hi rend='slanted'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi><hi rend='tt'><hi rend='bold'>Emph</hi></hi><hi
      rend='slanted'><hi rend='tt'><hi rend='bold'> </hi></hi></hi><hi rend='tt'><hi
      rend='bold'>Textup</hi></hi><hi rend='slanted'><hi rend='tt'><hi rend='bold'>
      </hi></hi></hi></p>

Version in which the font is not an attribute.

.. container:: xml_out

   ::

      <p>rmmdup 
      Textrm <sansserif>Textsf</sansserif> <tt>Texttt</tt>
      <bold>Testbf</bold> <it>Textit</it> <sc>Textsc</sc> <slanted>Textsl</slanted>
      Textnormal Textmd <it>Emph</it> Textup</p>
      <p noindent='true'>
      <sansserif>sfmdup 
      </sansserif>Textrm<sansserif> Textsf </sansserif><tt>Texttt</tt><sansserif>
      </sansserif><sansserif><bold>Testbf</bold></sansserif><sansserif> </sansserif>
      <it><sansserif>Textit</sansserif></it><sansserif> </sansserif><sc>
      <sansserif>Textsc</sansserif></sc><sansserif> </sansserif><slanted>
      <sansserif>Textsl</sansserif></slanted><sansserif>
      </sansserif>Textnormal<sansserif> Textmd </sansserif><it>
      <sansserif>Emph</sansserif></it><sansserif> Textup</sansserif></p>
      <p noindent='true'><sansserif/>
      <tt>ttmdup 
      </tt>Textrm<tt> </tt><sansserif>Textsf</sansserif><tt> Texttt
      </tt><tt><bold>Testbf</bold></tt><tt> </tt><it><tt>Textit</tt></it><tt> 
      </tt><sc><tt>Textsc</tt></sc><tt> </tt><slanted><tt>Textsl</tt></slanted><tt>
      </tt>Textnormal<tt> Textmd </tt><it><tt>Emph</tt></it><tt> Textup</tt></p>
      <p noindent='true'><tt/>
      <bold>rmbfup 
      Textrm </bold><sansserif><bold>Textsf</bold></sansserif><bold> </bold><tt>
      <bold>Texttt</bold></tt><bold>
      Testbf </bold><it><bold>Textit</bold></it><bold> </bold><sc>
      <bold>Textsc</bold></sc><bold> </bold><slanted><bold>Textsl</bold></slanted>
      <bold>
      </bold>Textnormal<bold> </bold>Textmd<bold> </bold><it><bold>Emph</bold></it>
      <bold> Textup</bold></p>
      <p noindent='true'><bold/>
      <sansserif/><sansserif><bold>sfbfup 
      </bold></sansserif><bold>Textrm</bold><sansserif><bold> Textsf </bold>
      </sansserif><tt><bold>Texttt</bold></tt><sansserif><bold>
      Testbf </bold></sansserif><it><sansserif><bold>Textit</bold></sansserif>
      </it><sansserif><bold> </bold></sansserif><sc><sansserif><bold>Textsc</bold>
      </sansserif></sc><sansserif><bold> </bold></sansserif><slanted><sansserif>
      <bold>Textsl</bold></sansserif></slanted><sansserif><bold>
      </bold></sansserif>Textnormal<sansserif><bold> </bold></sansserif>
      <sansserif>Textmd</sansserif><sansserif><bold> </bold></sansserif><it>
      <sansserif><bold>Emph</bold></sansserif></it><sansserif><bold> Textup</bold>
      </sansserif></p>
      <p noindent='true'><sansserif><bold/></sansserif>
      <tt/><tt><bold>ttbfup 
      </bold></tt><bold>Textrm</bold><tt><bold> </bold></tt><sansserif>
      <bold>Textsf</bold></sansserif><tt><bold> Texttt
      Testbf </bold></tt><it><tt><bold>Textit</bold></tt></it><tt><bold> </bold>
      </tt><sc><tt><bold>Textsc</bold></tt></sc><tt><bold> </bold></tt><slanted><tt>
      <bold>Textsl</bold></tt></slanted><tt><bold>
      </bold></tt>Textnormal<tt><bold> </bold></tt><tt>Textmd</tt><tt><bold> </bold>
      </tt><it><tt><bold>Emph</bold></tt></it><tt><bold> Textup</bold></tt></p>
      <p noindent='true'><tt><bold/></tt>
      <it>rmmdit 
      Textrm </it><it><sansserif>Textsf</sansserif></it><it> </it><it>
      <tt>Texttt</tt></it><it>
      </it><it><bold>Testbf</bold></it><it> Textit </it><sc>Textsc</sc><it> </it>
      <slanted>Textsl</slanted><it>
      </it>Textnormal<it> Textmd </it>Emph<it> </it>Textup<it></it></p>
      <p noindent='true'><it/>
      <sansserif/><it><sansserif>sfmdit 
      </sansserif></it><it>Textrm</it><it><sansserif> Textsf </sansserif></it><it>
      <tt>Texttt</tt></it><it><sansserif>
      </sansserif></it><it><sansserif><bold>Testbf</bold></sansserif></it><it>
      <sansserif> Textit </sansserif></it><sc><sansserif>Textsc</sansserif></sc>
      <it><sansserif> </sansserif></it><slanted><sansserif>Textsl</sansserif>
      </slanted><it><sansserif>
      </sansserif></it>Textnormal<it><sansserif> Textmd </sansserif></it>
      <sansserif>Emph</sansserif><it><sansserif> </sansserif></it>
      <sansserif>Textup</sansserif><it><sansserif></sansserif></it></p>
      <p noindent='true'><it><sansserif/></it>
      <tt/><it><tt>ttmdit 
      </tt></it><it>Textrm</it><it><tt> </tt></it><it><sansserif>Textsf</sansserif>
      </it><it><tt> Texttt
      </tt></it><it><tt><bold>Testbf</bold></tt></it><it><tt> Textit </tt></it><sc>
      <tt>Textsc</tt></sc><it><tt> </tt></it><slanted><tt>Textsl</tt></slanted><it>
      <tt>
      </tt></it>Textnormal<it><tt> Textmd </tt></it><tt>Emph</tt><it><tt> </tt></it>
      <tt>Textup</tt><it><tt></tt></it></p>
      <p noindent='true'><it><tt/></it>
      <bold/><it><bold>rmbfit 
      Textrm </bold></it><it><sansserif><bold>Textsf</bold></sansserif></it><it>
      <bold> </bold></it><it><tt><bold>Texttt</bold></tt></it><it><bold>
      Testbf Textit </bold></it><sc><bold>Textsc</bold></sc><it><bold> </bold></it>
      <slanted><bold>Textsl</bold></slanted><it><bold>
      </bold></it>Textnormal<it><bold> </bold></it><it>Textmd</it><it><bold> </bold>
      </it><bold>Emph</bold><it><bold> </bold></it><bold>Textup</bold><it><bold>
      </bold></it></p>
      <p noindent='true'><it><bold/></it>
      <sansserif/><sansserif><bold/></sansserif><it><sansserif><bold>sfbfit 
      </bold></sansserif></it><it><bold>Textrm</bold></it><it><sansserif>
      <bold> Textsf </bold></sansserif></it><it><tt><bold>Texttt</bold></tt></it>
      <it><sansserif><bold>
      Testbf Textit </bold></sansserif></it><sc><sansserif><bold>Textsc</bold>
      </sansserif></sc><it><sansserif><bold> </bold></sansserif></it><slanted>
      <sansserif><bold>Textsl</bold></sansserif></slanted><it><sansserif><bold>
      </bold></sansserif></it>Textnormal<it><sansserif><bold> </bold></sansserif>
      </it><it><sansserif>Textmd</sansserif></it><it><sansserif><bold> </bold>
      </sansserif></it><sansserif><bold>Emph</bold></sansserif><it><sansserif>
      <bold> </bold></sansserif></it><sansserif><bold>Textup</bold></sansserif>
      <it><sansserif><bold></bold></sansserif></it></p>
      <p noindent='true'><it><sansserif><bold/></sansserif></it>
      <tt/><tt><bold/></tt><it><tt><bold>ttbfit 
      </bold></tt></it><it><bold>Textrm</bold></it><it><tt><bold> </bold></tt></it>
      <it><sansserif><bold>Textsf</bold></sansserif></it><it><tt><bold> Texttt
      Testbf Textit </bold></tt></it><sc><tt><bold>Textsc</bold></tt></sc><it><tt>
      <bold> </bold></tt></it><slanted><tt><bold>Textsl</bold></tt></slanted><it>
      <tt><bold>
      </bold></tt></it>Textnormal<it><tt><bold> </bold></tt></it><it><tt>Textmd</tt>
      </it><it><tt><bold> </bold></tt></it><tt><bold>Emph</bold></tt><it><tt>
      <bold> </bold></tt></it><tt><bold>Textup</bold></tt><it><tt><bold></bold>
      </tt></it></p>
      <p noindent='true'><it><tt><bold/></tt></it>
      <sc>rmmdsc 
      Textrm </sc><sc><sansserif>Textsf</sansserif></sc><sc> </sc><sc>
      <tt>Texttt</tt></sc><sc>
      </sc><sc><bold>Testbf</bold></sc><sc> </sc><it>Textit</it><sc> Textsc </sc>
      <slanted>Textsl</slanted><sc>
      </sc>Textnormal<sc> Textmd </sc>Emph<sc> </sc>Textup<sc></sc></p>
      <p noindent='true'><sc/>
      <sansserif/><sc><sansserif>sfmdsc 
      </sansserif></sc><sc>Textrm</sc><sc><sansserif> Textsf </sansserif></sc><sc>
      <tt>Texttt</tt></sc><sc><sansserif>
      </sansserif></sc><sc><sansserif><bold>Testbf</bold></sansserif></sc><sc>
      <sansserif> </sansserif></sc><it><sansserif>Textit</sansserif></it><sc>
      <sansserif> Textsc </sansserif></sc><slanted><sansserif>Textsl</sansserif>
      </slanted><sc><sansserif>
      </sansserif></sc>Textnormal<sc><sansserif> Textmd </sansserif></sc>
      <sansserif>Emph</sansserif><sc><sansserif> </sansserif></sc>
      <sansserif>Textup</sansserif><sc><sansserif></sansserif></sc></p>
      <p noindent='true'><sc><sansserif/></sc>
      <tt/><sc><tt>ttmdsc 
      </tt></sc><sc>Textrm</sc><sc><tt> </tt></sc><sc><sansserif>Textsf</sansserif>
      </sc><sc><tt> Texttt
      </tt></sc><sc><tt><bold>Testbf</bold></tt></sc><sc><tt> </tt></sc><it>
      <tt>Textit</tt></it><sc><tt> Textsc </tt></sc><slanted><tt>Textsl</tt>
      </slanted><sc><tt>
      </tt></sc>Textnormal<sc><tt> Textmd </tt></sc><tt>Emph</tt><sc><tt> </tt>
      </sc><tt>Textup</tt><sc><tt></tt></sc></p>
      <p noindent='true'><sc><tt/></sc>
      <bold/><sc><bold>rmbfsc 
      Textrm </bold></sc><sc><sansserif><bold>Textsf</bold></sansserif></sc><sc>
      <bold> </bold></sc><sc><tt><bold>Texttt</bold></tt></sc><sc><bold>
      Testbf </bold></sc><it><bold>Textit</bold></it><sc><bold> Textsc </bold></sc>
      <slanted><bold>Textsl</bold></slanted><sc><bold>
      </bold></sc>Textnormal<sc><bold> </bold></sc><sc>Textmd</sc><sc><bold> </bold>
      </sc><bold>Emph</bold><sc><bold> </bold></sc><bold>Textup</bold><sc><bold>
      </bold></sc></p>
      <p noindent='true'><sc><bold/></sc>
      <sansserif/><sansserif><bold/></sansserif><sc><sansserif><bold>sfbfsc 
      </bold></sansserif></sc><sc><bold>Textrm</bold></sc><sc><sansserif>
      <bold> Textsf </bold></sansserif></sc><sc><tt><bold>Texttt</bold></tt></sc>
      <sc><sansserif><bold>
      Testbf </bold></sansserif></sc><it><sansserif><bold>Textit</bold></sansserif>
      </it><sc><sansserif><bold> Textsc </bold></sansserif></sc><slanted><sansserif>
      <bold>Textsl</bold></sansserif></slanted><sc><sansserif><bold>
      </bold></sansserif></sc>Textnormal<sc><sansserif><bold> </bold></sansserif>
      </sc><sc><sansserif>Textmd</sansserif></sc><sc><sansserif><bold> </bold>
      </sansserif></sc><sansserif><bold>Emph</bold></sansserif><sc><sansserif>
      <bold> </bold></sansserif></sc><sansserif><bold>Textup</bold></sansserif><sc>
      <sansserif><bold></bold></sansserif></sc></p>
      <p noindent='true'><sc><sansserif><bold/></sansserif></sc>
      <tt/><tt><bold/></tt><sc><tt><bold>ttbfsc 
      </bold></tt></sc><sc><bold>Textrm</bold></sc><sc><tt><bold> </bold></tt></sc>
      <sc><sansserif><bold>Textsf</bold></sansserif></sc><sc><tt><bold> Texttt
      Testbf </bold></tt></sc><it><tt><bold>Textit</bold></tt></it><sc><tt>
      <bold> Textsc </bold></tt></sc><slanted><tt><bold>Textsl</bold></tt>
      </slanted><sc><tt><bold>
      </bold></tt></sc>Textnormal<sc><tt><bold> </bold></tt></sc><sc><tt>Textmd</tt>
      </sc><sc><tt><bold> </bold></tt></sc><tt><bold>Emph</bold></tt><sc><tt>
      <bold> </bold></tt></sc><tt><bold>Textup</bold></tt><sc><tt><bold></bold>
      </tt></sc></p>
      <p noindent='true'><sc><tt><bold/></tt></sc>
      <slanted>rmmdsl 
      Textrm </slanted><slanted><sansserif>Textsf</sansserif></slanted>
      <slanted> </slanted><slanted><tt>Texttt</tt></slanted><slanted>
      </slanted><slanted><bold>Testbf</bold></slanted><slanted> </slanted>
      <it>Textit</it><slanted> </slanted><sc>Textsc</sc><slanted> Textsl
      </slanted>Textnormal<slanted> Textmd </slanted>Emph<slanted> </slanted>Textup<slanted></slanted></p>
      <p noindent='true'><slanted/>
      <sansserif/><slanted><sansserif>sfmdsl 
      </sansserif></slanted><slanted>Textrm</slanted><slanted>
      <sansserif> Textsf </sansserif></slanted><slanted><tt>Texttt</tt></slanted>
      <slanted><sansserif>
      </sansserif></slanted><slanted><sansserif><bold>Testbf</bold></sansserif>
      </slanted><slanted><sansserif> </sansserif></slanted><it>
      <sansserif>Textit</sansserif></it><slanted><sansserif> </sansserif>
      </slanted><sc><sansserif>Textsc</sansserif></sc><slanted><sansserif> Textsl
      </sansserif></slanted>Textnormal<slanted><sansserif> Textmd </sansserif>
      </slanted><sansserif>Emph</sansserif><slanted><sansserif> </sansserif>
      </slanted><sansserif>Textup</sansserif><slanted><sansserif></sansserif>
      </slanted></p>
      <p noindent='true'><slanted><sansserif/></slanted>
      <tt/><slanted><tt>ttmdsl 
      </tt></slanted><slanted>Textrm</slanted><slanted><tt> </tt></slanted>
      <slanted><sansserif>Textsf</sansserif></slanted><slanted><tt> Texttt
      </tt></slanted><slanted><tt><bold>Testbf</bold></tt></slanted><slanted>
      <tt> </tt></slanted><it><tt>Textit</tt></it><slanted><tt> </tt></slanted><sc>
      <tt>Textsc</tt></sc><slanted><tt> Textsl
      </tt></slanted>Textnormal<slanted><tt> Textmd </tt></slanted><tt>Emph</tt>
      <slanted><tt> </tt></slanted><tt>Textup</tt><slanted><tt></tt></slanted></p>
      <p noindent='true'><slanted><tt/></slanted>
      <bold/><slanted><bold>rmbfsl 
      Textrm </bold></slanted><slanted><sansserif><bold>Textsf</bold></sansserif>
      </slanted><slanted><bold> </bold></slanted><slanted><tt><bold>Texttt</bold>
      </tt></slanted><slanted><bold>
      Testbf </bold></slanted><it><bold>Textit</bold></it><slanted><bold> </bold>
      </slanted><sc><bold>Textsc</bold></sc><slanted><bold> Textsl
      </bold></slanted>Textnormal<slanted><bold> </bold></slanted>
      <slanted>Textmd</slanted><slanted><bold> </bold></slanted>
      <bold>Emph</bold><slanted><bold> </bold></slanted><bold>Textup</bold>
      <slanted><bold></bold></slanted></p>
      <p noindent='true'><slanted><bold/></slanted>
      <sansserif/><sansserif><bold/></sansserif><slanted><sansserif><bold>sfbfsl 
      </bold></sansserif></slanted><slanted><bold>Textrm</bold></slanted><slanted>
      <sansserif><bold> Textsf </bold></sansserif></slanted><slanted><tt>
      <bold>Texttt</bold></tt></slanted><slanted><sansserif><bold>
      Testbf </bold></sansserif></slanted><it><sansserif><bold>Textit</bold>
      </sansserif></it><slanted><sansserif><bold> </bold></sansserif></slanted><sc>
      <sansserif><bold>Textsc</bold></sansserif></sc><slanted><sansserif>
      <bold> Textsl
      </bold></sansserif></slanted>Textnormal<slanted><sansserif><bold> </bold>
      </sansserif></slanted><slanted><sansserif>Textmd</sansserif></slanted>
      <slanted><sansserif><bold> </bold></sansserif></slanted><sansserif>
      <bold>Emph</bold></sansserif><slanted><sansserif><bold> </bold></sansserif>
      </slanted><sansserif><bold>Textup</bold></sansserif><slanted><sansserif>
      <bold></bold></sansserif></slanted></p>
      <p noindent='true'><slanted><sansserif><bold/></sansserif></slanted>
      <tt/><tt><bold/></tt><slanted><tt><bold>ttbfsl 
      </bold></tt></slanted><slanted><bold>Textrm</bold></slanted><slanted><tt>
      <bold> </bold></tt></slanted><slanted><sansserif><bold>Textsf</bold>
      </sansserif></slanted><slanted><tt><bold> Texttt
      Testbf </bold></tt></slanted><it><tt><bold>Textit</bold></tt></it><slanted>
      <tt><bold> </bold></tt></slanted><sc><tt><bold>Textsc</bold></tt></sc>
      <slanted><tt><bold> Textsl
      </bold></tt></slanted>Textnormal<slanted><tt><bold> </bold></tt></slanted>
      <slanted><tt>Textmd</tt></slanted><slanted><tt><bold> </bold></tt></slanted>
      <tt><bold>Emph</bold></tt><slanted><tt><bold> </bold></tt></slanted><tt><
      bold>Textup</bold></tt><slanted><tt><bold></bold></tt></slanted></p>
      <p noindent='true'><slanted><tt><bold/></tt></slanted></p>

Preview |all font variants|

New version. Preview |all font variants 2|

Configuration source file. This file gives longert names than the
example above; but our XSLT processor handles the long names and the
short names identically.

.. container:: ltx-source

   ::

        use_font_elt = "true"
        xml_font_small = "font-small"
        xml_font_small1 = "font-small1"
        xml_font_small2 = "font-small2"
        xml_font_small3 = "font-small3"
        xml_font_small4 = "font-small4"
        xml_font_large = "font-large"
        xml_font_large1 = "font-large1"
        xml_font_large2 = "font-large2"
        xml_font_large3 = "font-large3"
        xml_font_large4 = "font-large4"
        xml_font_large5 = "font-large5"
        xml_font_normalsize = "font-normalsize"
        xml_font_upright = "font-upright-shape"
        xml_font_medium = "font-medium-series"
        xml_font_roman = "font-roman-family"
        xml_font_it = "font-italic-shape"
        xml_font_slanted = "font-slanted-shape"
        xml_font_sc = "font-small-caps-shape"
        xml_font_tt = "font-typewriter-family"
        xml_font_sansserif = "font-sansserif-family"
        xml_font_bold = "font-bold-series"

.. |all font variants| image:: /img/img_40.png
.. |all font variants 2| image:: /img/img_122.png

----

docs/titlepage.rst
------------------

Configuration files of Tralics: syntax and usage
================================================

1. Introduction
---------------

This document explains how to modify the output of *Tralics*:

-  A general configuration file, or a specialized *tcf* file, is used to
   find the document type;
-  This allows you to change the name of some elements, or the DTD of
   the XML document;
-  A mechanism is provided for collecting meta data at the start of the
   document when a command, for instance \\maketitle, is seen;
-  Additional files (of type *ult*, *plt*, and *clt*) can be used
   instead of package and classe files.

In this document, we explain the syntax of the configuration file using
`this <titlepage-conf.html>`__ configuration file. We consider two TeX
files `this one <titlepage-ex1.html#ex1>`__, and `that
one <titlepage-ex1.html#ex2>`__, and show the XML result `(this
XML) <titlepage-ex2.html#ex1>`__ and `(that
XML) <titlepage-ex2.html#ex2>`__ and the log file produced by Tralics
`(first) <titlepage-ex3.html#ex1>`__ and
`(second) <titlepage-ex3.html#ex2new>`__. We shall alse use the
following `tpa.tcf <titlepage-conf.html#tpa>`__ files.

2. What Tralics prints on the terminal
--------------------------------------

First example, using original syntax.

.. container:: tty_out

   ::

      grimm@medee$ tralics tpa -configfile ../config_tpa -verbose
      This is tralics 1.9t, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2004, Jos� Grimm
      Starting xml processing for tpa.
      <!-- S1 -->
      Trying config file from user specs:../config_tpa
      Read configuration file ../config_tpa.
      Configuration file has type \documentclass
      Seen \documentclass tpa
      <!-- S2 -->
      Potential type is tpa
      Defined type: default
      Defined type: tpa
      Defined type: unused
      Defined type: eurotex
      Using type tpa
      dtd is tpa from tpa.dtd (standard mode)
      Ok with the config file, dealing with the TeX file...
      <!-- S3 -->
      Error signaled at line 35:
      No value given for command \cmdp.
      <!-- S4 -->
      Seen 0 bibliographic entries
      Used 1237 commands
      math stats : formulas 0, non trivial kernels 0, cells 0,
         special 0 trivial 0, \mbox 0 large 0 small 0.
      List stats: short 0 inc 2 alloc 529
      Buffer realloc 0 string 1455 size 17863; merge 0
      Macros created 28 deleted 4
      Save stack +12 -12
      Attribute list search 191(119) found 156 in 1081 elements (1037 after boot)
      number of ref 0, of used labels 0, of defined labels 0, of ext. ref. 0
      Modules with 0, without 0, sections with 0, without 0
      There was no image.
      Output written on tpa.xml (1436 bytes).
      There was one error.
      (For more information, see transcript file tpa.log)

First example, using new syntax.

.. container:: tty_out

   ::

      grimm@medee$ tralics tpa -verbose 
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for tpa.
      <!-- S1 -->
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file /user/grimm/home/cvs/tralics/.tralics_rc.
      Configuration file has type \documentclass
      Seen \documentclass tpa
      <!-- S2 -->
      Potential type is tpa
      Defined type: std
      Configuration file identification: tpa.tcf $ Revision: 1.3 $
      Read tcf file for type: ../confdir/tpa.tcf
      Using type tpa
      dtd is tpa from tpa.dtd (standard mode)
      Ok with the config file, dealing with the TeX file...
      <!-- S3 -->
      Error signaled at line 35 of file tpa.tex:
      No value given for command \cmdp.
      <!-- S4 -->
      Bib stats: seen 0 entries
      Seen 0 bibliographic entries
      Used 1810 commands
      Math stats: formulas 0, non trivial kernels 0,
         special 0, trivial 0, \mbox 0, large 0, small 0.
      Buffer realloc 0, string 1642, size 17963, merge 0
      Macros created 86, deleted 4.
      Save stack +24 -24.
      Attribute list search 1700(1549) found 1019 in 1495 elements (1450 after boot).
      Number of ref 0, of used labels 0, of defined labels 0, of ext. ref. 0.
      Modules with 0, without 0, sections with 0, without 0
      There was no image.
      Output written on tpa.xml (1378 bytes).
      There was one error.
      (For more information, see transcript file tpa.log)

Second example, non-verbose mode

.. container:: tty_out

   ::

      grimm@medee$ tralics bo
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for bo.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file /user/grimm/home/cvs/tralics/.tralics_rc.
      Configuration file identification: cedram.tcf $ Revision: 1.1 $
      Read tcf file for type: cedram.tcf
      Translation terminated after title page
      Bib stats: seen 0 entries
      Seen 3 bibliographic entries
      Used 1866 commands
      Math stats: formulas 16, non trivial kernels 10,
         special 0, trivial 0, \mbox 0, large 0, small 8.
      Buffer realloc 7, string 1881, size 25733, merge 2
      Macros created 114, deleted 10.
      Save stack +154 -154.
      Attribute list search 1847(1549) found 1010 in 1620 elements (1450 after boot).
      Number of ref 0, of used labels 0, of defined labels 0, of ext. ref. 0.
      Modules with 0, without 0, sections with 0, without 0
      There was no image.
      Output written on bo.xml (5209 bytes).
      No error found.
      (For more information, see transcript file bo.log)

3. Explanations
---------------

The lines above show the command used to call *Tralics*, and its
response. We have added some markers in order to make the explanations
easy to follow.

The first example was run in 2004, using an old version of the software.
We have rerun the example, with the new version of *Tralics*. As you can
see, the resulting XML is differerent (1378 bytes instead of 1536). You
can compare the `old version <titlepage-ex2.html#ex1old>`__ with the
`new version <titlepage-ex2.html#ex1new>`__. The differences are the
following: first, spaces before a ``\par`` command are removed, this
means that the XML contains no space before a closing ``</p>`` tag;
second, ``<foo></foo>`` is now printed as ``<foo/>``; third, the
``language`` atttribute is now added to the document element only if the
configuration file contains ``att_language="language"`` (the right hand
side of the assignment defines the attribute name).

3.1. Launching Tralics
~~~~~~~~~~~~~~~~~~~~~~

| For a list of all arguments of the Tralics command, see the page
  `Options of the program <raweb.html#options>`__. The command line used
  for the first example is:
|    ``tralics tpa -configfile ../config_tpa -verbose``
| It tells the program to translate a file named ``tpa.tex``, in verbose
  mode, using a given configuration file. The verbose option is
  equivalent to a ``\tracingall`` command in the TeX source (its effect
  is to print a lot of things in the transcript file); moreover some
  additional lines are printed on the screen (especially concerning
  configuration).

*Tralics* analyses first the arguments. All options start with a single
or double dash. Instead of ``-configfile foo``, you can say
``-configfile=foo`` (whitout spaces). For historical reasons, you can
also say ``-config_file=foo``, and, since version 2.8, the short form
``-config=foo`` is allowed. There is exactly one argument to the
``tralics`` command that does not start with a dash, it is the name of
the TeX input file (extension ``.tex`` is optional).

The transcript file (here ``tpa.log``) is opened after all arguments
have been successfully parsed. Almost everything printed on the terminal
is also printed to the transcript file. In the example, the version
number is printed, the Copyright notice, then the line: \`Starting xml
processing for tpa'. The TeX input file is read next, once and for all.

3.2. Finding the Potential Type
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Step S1 shows *Tralics* examining the configuration file, in order to
find the Document Type. This information will be used to select a part
of the configuration file, or the whole of a tcf file, using the rules
that follow.

#. If you say ``tralics -noconfig``, then no configuration file is read
   at all.
#. If you say ``tralics -configfile=foo``, then *Tralics* will print
   *Trying config file from user specs*, and try to use this file.
#. If you say ``tralics -configfile=foo.tcf``, then *Tralics* will print
   the same as above; it will also search the file in the \`confdir'
   directory.
#. If the source file contains
   ``% tralics configuration file 'foobar'``, then *Tralics* will print
   *Trying config file from source file*, and try to use this file. In
   case of failure, and if the name 'foobar' contains no dot, the suffix
   ``.tcf`` is added, and the next rule is applied.
#. If the source file contains
   ``% tralics configuration file 'foobar.tcf'``, then *Tralics* will
   print the same as above; it will also search the file in the
   \`confdir' directory.
#. The default configuration file is named ``.tralics_rc`` (or
   ``tralics_rc`` on Windows). The current directory is looked at first,
   then the tralicsdir, finally the home directory.
#. If you say ``tralics -dir TOTO``, or ``tralics -dir=TOTO``, then
   ``TOTO/src/.tralics_rc`` is the second try.
#. The home directory, or its ``src`` subdirectory, is searched next.
   (Depending on the operating system, this can fail, because there is
   no standard way of defining the home directory of the user).
#. If you set the shell variable ``TRALICSDIR`` to ``somedir``, or
   ``RAWEBDIR`` to ``somedir``, then ``somedir/src/.tralics_rc`` is the
   last try. If neither variable is set, then some default location will
   be used.

-  If a configuration file has been given on the command line, but not
   found according to rules 2 and 3, then no configuration file will be
   used.
-  For rules 4 and 5, only the first hundred lines of the source file
   are considered, the line must start with a percent character; you can
   use an upper case T in the string "tralics"; the configuration file
   name is delimited by single quotes; the line can hold additional
   characters that are ignored.
-  If a configuration file has been given in the source file, but not
   found according to rules 4 and 5, then the default configuration file
   will be used.
-  In the case of rules 3 and 5, a tcf file is looked at, say
   ``foo.tcf``. It is first searched in the current directory, then in
   all directories specified by the ``confdir`` options, then in a
   default directory. For instance, if you say
   ``tralics -confdir=mydir/`` (final slash optional), the second try
   would be ``mydir/foo.tcf``. If this file is not found, a default
   location, for instance ``../confdir/foo.tcf``, is tried. If you
   specify ``dir1`` then ``dir2``, then the order will be: current
   directory, dir2, dir1, default directory.

In the configuration file, you can use # or % as comment characters.
This file contains declarations inside groups (for instance
``BeginAlias`` ... ``End`` on lines
`11 <titlepage-conf.html#l11>`__--`14 <titlepage-conf.html#l14>`__ or
``BeginType`` ... ``End`` on lines
`16 <titlepage-conf.html#l16>`__--`25 <titlepage-conf.html#l25>`__). The
end of a group is defined by a line that starts with the 3 letters
\`End', followed by anything. Some commands are allowed outside groups.

In the example, you can see that the user defined configuration file has
been read and an important information extracted from line
`8 <titlepage-conf.html#l8>`__, namely
``'Configuration file has type \documentclass'`` and *Tralics* has
``Seen \documentclass tpa``.

The *documentclass* is defined as the argument of the first
``\documentclass`` command seen in the TeX source. This may be different
from the real document class because of one of the following

-  ``\csname documentclass\endcsname`` is used;
-  The real class is declared in another file, loaded via ``\input``;
-  There is a line break between the command and its argument, and the
   parser skips this one;
-  A line like ``%\documentclass{report}`` defines the type as report.
   If a double percent sign is used, the match fails. The translator
   will ignore such a line, if standard category codes are in effect.
-  In some cases, there is no ``\documentclass`` in the document. In
   theses cases, some default action is done.

If you say ``tralics -type FOO``, then the type will be FOO. Otherwise,
if the configuration file contains, at toplevel, the declaration
``Type =fOO``, then the type will be fOO. If the configuration file
contains ``Type =\documentclass``, then the type will be the
*documentclass*, as explained above. If you say nothing, then the type
is the documentclass. This will be called the *potential type*, that
needs to be converted into a real type.

3.3. Finding the Type
~~~~~~~~~~~~~~~~~~~~~

When *Tralics* enters step S2, it says: Potential type is tpa. It tries
to match this type with all the types that are defined. In this case
they are four types defined, default
(`l.16 <titlepage-conf.html#l16>`__), tpa
(`l.48 <titlepage-conf.html#l48>`__), unused
(`l.94 <titlepage-conf.html#l94>`__) and eurotex
(`l.134 <titlepage-conf.html#l134>`__), and one of them is to be
selected.

In case of failure, aliases are considered. There is line
`12 <titlepage-conf.html#l12>`__ that says that \`report' is the same as
\`article', but \`article' is undefined, so that this line discarded. In
the same fashion, \`inriaslides' and \`foiltex' are aliases to
\`slides', which is undefined. Near the end of the file, lines
`154 <titlepage-conf.html#l154>`__ to `156 <titlepage-conf.html#l156>`__
say that \`foo' and \`foo2004' are alias to tpa, which is undefined.
Thus we have only two useful lines, one that says that \`foo' is an
alias for \`TPA' and \`unused', while \`foo2003' is an alias for
\`unused'. Only the first valid alias for \`foo' is considered.

Hence, for this configuration file, aliasing adds two new types: \`foo'
for \`TPA', \`foo2003' for \`unused'.

In the case of the first example, new syntax, we use the standard
configuration file. This defines a single type, std, plus some aliases.
We show here the content of it (without the comments).

.. container:: ltx-source

   ::

      Type = \documentclass

      BeginType std
        DocType = std classes.dtd 
      End

      BeginAlias
        torture torture1 torture2 
        std report book article minimal
      End

Since version 2.8, tcf files are considered. This means that, if the
potential type is tpa, and the file ``tpa.tcf`` exists (or its alternate
location ``../confdir/tpa.tcf``), it will be used. This is what happens
in our example and *Tralics* says: *Read tcf file for type:
../confdir/tpa.tcf*. If the potential type is, as 'torture2' above,
aliased to \`torture', and if \`torture' is not a type defined in the
configuration file, then ``torture.tcf`` and ``../confdir/torture.tcf``
are considered; if the file exists, it will be read, and \`torture'
becomes the effective type.

If aliasing fails, a second try is made, ignoring final digits in the
name. Thus \`fooNNNN' is equivalent to \`tpa', whatever NNNN (if NNNN is
a number, different from 2003). Since the standard distribution contains
a file ``ra.tcf``, if you say ``\documentclass{ra2003}`` (and this is
required for the RAWEB, year 2003), the type will be \`ra'. See `example
of the raweb <raweb.html#main-doc>`__.

In case of failure, the first type of the configuration file is used
(this is \`std' for the default configuration file).

In case of failure (if the configuration file does specify no type) then
\`book', \`report' or \`article' classes are recognized as a special
case. In the same fashion, if no ``\documentclass`` command is seen in
the TeX source, then plainTeX input is assumed. No error is signaled,
but no parameterization code is executed.

In our example, we get the message *Using type tpa*. Everything that is
out of the \`tpa' scope is ignored from the configuration file. If a tcf
file, is given, its entire content is considered.

3.4 Using the Type
~~~~~~~~~~~~~~~~~~

What remains in the configuration file, after removing what is
irrelevant to the current type, consists in two blocks:
``BeginTitlePage ... End`` (lines `50 <titlepage-conf.html#l50>`__ --
`86 <titlepage-conf.html#l86>`__) ``BeginCommands ... End`` (lines
`87 <titlepage-conf.html#l87>`__ -- `89 <titlepage-conf.html#l89>`__)
and some isolated commands (in this example there is only line
`49 <titlepage-conf.html#l49>`__, but for other types lines
`17 <titlepage-conf.html#l17>`__ -- `20 <titlepage-conf.html#l20>`__ or
lines `29 <titlepage-conf.html#l29>`__ --
`43 <titlepage-conf.html#l43>`__ are considered).

From now on, all line numbers refer to the ``tpa.tcf`` file; the first
block is at lines
`311 <titlepage-conf.html#l311>`__--`347 <titlepage-conf.html#l347>`__,
the second at lines
`348 <titlepage-conf.html#l348>`__--`350 <titlepage-conf.html#l350>`__,
the isolated line at `308 <titlepage-conf.html#l308>`__.

The important command is the \`DocType' line. *Tralics* says: *dtd is
tpa from tpa.dtd (standard mode)*. It might say something like: *dtd is
raweb from raweb.dtd (mode RAWEB2003)*, case where you are creating
Inria's Raweb for year 2003.

-  A line of the form ``DocAttrib = test "foo"``
   (`l.31 <titlepage-conf.html#l31>`__ for instance) informs *Tralics*
   to add ``test='foo'`` to the attribute list of the document element.
   Comments are allowed after the string "foo".
-  A line of the form ``DocAttrib = test \specialyear``
   (`l.19 <titlepage-conf.html#l19>`__) informs *Tralics* to add
   ``test='2003'`` to the attribute list of the document element. The
   default year will be 2004 starting May, 1st. If you say
   ``tralics -year 2005``, then the special year is 2005.
-  A line of the form ``DocAttrib = test \foo``
   (`l.18 <titlepage-conf.html#l18>`__) informs *Tralics* to add
   ``test='fooval'`` to the attribute list of the document element. More
   precisely, ``\addattributestodocument{x}{\foo}`` is added to the
   document hook. This means that the ``\foo`` command is evaluated just
   after ``\begin{document}``.
-  A line of the form
   ``DocAttrib = z \the\day\space \the\month\space \the\year``
   (`l.20 <titlepage-conf.html#l20>`__) informs *Tralics* to add
   ``z='29 1 2004'`` to the attribute list of the document element.
   Every character on the line is considered. Comments are forbidden.
-  A line of the form ``makefo="xsltproc --catalogs -o %A.fo %B %C"``
   (`l.33 <titlepage-conf.html#l33>`__) is useful only for the RA. After
   translation is complete, the ``xsltproc`` command will be called with
   arguments depending on the file name, and other things. All the
   commands defined by the RA type (and commented in the example) follow
   these schema. See `Running Tralics -ps <raweb4.html#run3>`__.
-  A line of the form ``xml_labelitem_name = "Xlabel"``
   (`l.95 <titlepage-conf.html#l95>`__) tells *Tralics* to use the name
   Xlabel instead of the name label. See example elsewhere.
-  A block of the form
   ``BeginCommands          \def\recurse{\recurse\recurse}          EndCommands``
   is copied (without first and last line) into the TeX source, just
   before the ``\documentclass`` command (the one used to find the type;
   nothing is done if no such command exists). You can see this in the
   transcript file. It is marked \`Insert 2', because there is a second
   insertion of the same kind, see later.
   **Note** In the current version, it is inserted *before* the command.
   See `explanations <#inserts>`__.
-  Each line in a TitlePage block is analyzed, and a table is created.
   See later.

Now *Tralics* prints: *Ok with the config file, dealing with the TeX
file...*

3.5 Bootstrap code
~~~~~~~~~~~~~~~~~~

In the transcript file, at the start of Step S3, you can see that the
source file has 38 lines. After that, the transcript file contains, for
every source line its content, and for every command executed some
information (this is because we are in verbose mode).

Some lines are not shown, they are of the form ``\let\endgraf\par``.
Then comes a bunch of lines of the form
``Defining \InsertTitlepage as \TitlePageCmd 0``. Almost every line from
the TitlePage block is associated to such a line. In fact, every line
that start with a backslash (a LaTeX command) defines a command, and if
you say ``alias \foo``, then ``\foo`` is an alias to the command defined
on the previous line. In the case of ``<UR> -``, no command is created,
but such lines are nevertheless useful.

Each line is followed by a second line, of the form
``usual <abstract ab='AB1'/> (flags +par +env)``. We shall see in a
moment how the flags have to be interpreted.

| You can see this in the transcript file:
| ``[1] \cmdb{\cmdBval}``
| ``++ End of virtual file.``
| This is a consequence of the B or C flag, as explained later.

The transcript file contains ``[1] \def\cmdAval{CMDA}``, plus some other
lines, not shown here. This is the first line of the TeX source.

4. The titlepage info
---------------------

In the configuration file, there are some lines that define the
titlepage info. In this way, you can add, to *Tralics*, some commands
like ``\author``, ``\title``, etc, that can be used (exactly once, at
most once, at least once, as you like) before the ``\maketitle`` command
(you chose your own name, variants are allowed). These commands should
appear before the main text; they are forbidden in a paragraph (you can
always insert a ``\par`` before them). Only one ``\maketitle`` command
is allowed in the document.

4.1 Syntax
~~~~~~~~~~

Each line of the configuration file in the title page info section is
formed of one to four tokens; these have a type, say A, E, S, C; the
interpretation of the line depends on the lists of these types.

-  An A token corresponds to the string ``alias``, it could also be
   ``action`` or ``execute`` see below;
-  An E token corresponds to an element, of the form ``<...>`` (all
   characters up to the greater-than sign are read, it is assumed that
   the result is a valid XML element);
-  A S token corresponds to a character string of the form ``"..."``
   (all characters up to the closing double-quote are read);
-  A C token corresponds to a command, of the form ``\xxx`` (all letters
   following the backslash are read);
-  Tokens E, S, and C can be preceded by one or two modifiers. Currently
   characters ?+- (question, plus, minus) and letters ABCeEpq are
   allowed;
-  No modifier is allowed for the first and last token.

Our example starts with a CESS, followed by an AESS, and two CES. After
that comes a CEES, and the first E has plus as modifier. The order of
elements is important. There can be only one CESS element, and it has to
be the first. You can put an AESS only after an AESS or a CESS. You
cannot put an AS element after a CESS, AESS or E.

4.2 Semantics
~~~~~~~~~~~~~

We shall discuss the meaning of these token list, in the order of use in
the example.

CESS
   Example: ``\cmd <elt> "att1" "att2"``.

   This declaration has to be the first in the list. It defines a
   command ``\cmd``, that can be used only once in the document, after
   ``\begin{document}``. The effect is to insert the ``<elt>`` element
   into the XML tree. In what follows, we shall call it the *TPA
   element*. This element is formed of other elements defined by the
   titlepage info, the names of these elements are statically defined,
   their content is dynamic (i.e. the names depends on the configuration
   file, the content on the TeX document). The string ``att1`` is a list
   of attributes added to the TPA element and the string ``att2`` is a
   list of attributes added to the document element.

   There is an example on lines `312 <titlepage-conf.html#l312>`__ and
   `313 <titlepage-conf.html#l313>`__; the title page element is named
   \`titlepage', it has two attributes, with value \`att1' and \`att2'
   with value \`foo1' and \`foo2'. If used via the command defined on
   line `312 <titlepage-conf.html#l312>`__, it has two additional
   attributes \`a1' and \`a2', and the document element has attributes
   \`from_type' and \`from_tpa'. There is another example line
   `207 <titlepage-conf.html#l207>`__; the attribute name is empty, thus
   the attribute value will be ignored by the translator. See section
   `Special action <#titlepage-action>`__ for the use of this special
   value.

AESS
   Example: ``alias \cmda "att1p" "att2p"``. This declaration is valid
   only after a CESS declaration (or after another AESS declaration). It
   defines a command ``\cmda`` that can be used instead of ``\cmd``
   (only one of these commands can be used). The result is the same;
   however ``att1p`` is used instead of ``att1`` for the attribute list
   of the TPA element, and ``att2p`` is used instead of ``att2`` for the
   document element (same remark as above for special attribute values
   in ``att2p``).

   In what follows, the ``\TPA`` command means one of the commands
   defined by this rule or the preceding one.

CEES
   Example: ``\cmdb +<master> <local> "val"``. Note that the plus sign
   is required before the master element. Examples can be seen on line
   `316 <titlepage-conf.html#l316>`__ and
   `317 <titlepage-conf.html#l317>`__. See comments below.

   This declaration has as side effect that the TPA element will contain
   a ``<master>`` element, formed of a number of ``<local>`` elements.
   Initially there is only one, initialized with "val".

   The declaration has another effect, it defines a command ``\cmdb``,
   that has to be used before ``\TPA`` command. It takes one argument,
   and creates a ``<local>`` whose content is the translation of the
   argument. This element is added to the end of the ``<master>``
   element. Note that the default value is removed in case at least one
   value is given.

CES
   Example: ``\cmdc <elt> "value"``. The element can have the flags p,
   q, e or E, and the value can have the flags +ABC. The effect is to
   define a command ``\cmdc`` (or an environment ``cmdc`` if the E flag
   has been given), that can be used only before the ``\TPA`` command.
   The argument of the command, (or the content of the environment) is
   translated, put in a ``<elt>`` element, and added to the TPA element.
   If no flag is given for the element, paragraphs are forbidden in the
   argument. If you want to use paragraphs (either ``\par`` or ``\\``)
   you must use the P flag (lower-case letter). In the same fashion, a
   lower case E means environment without paragraphs, an upper case E
   means environment with paragraphs. If the q flag is given, paragraphs
   are forbidden, but you can use ``\\``, which is ignored. (in fact,
   the command reads an optional star, an optional argument, and the
   result is replaced by a space). Other flags are described in the
   section `Interpreting the CES flags <#titlepage-flags>`__ below.
   There is a special trick for the case where the name of the element
   associated to the command is empty. Assume that the configuration
   file contains ``\cmd <> +"text"``. In the case where the user does
   not use ``\cmd``, an error will be signaled, and ``text`` will appear
   in the resulting XML. If the user says ``\cmd{foo}``, then *Tralics*
   remembers the use and issues no complain. Moreover, it reads the
   argument, and pushes ``foo\par`` in the input stream (the reason why
   ``\par`` is executed is to make sure that *Tralics* remains in
   vertical mode).
CCS
   Example ``\cmdd \cmde "text"``. The effect is the same as
   ``\def\cmdd{\cmde{text}}``. However, "text" is not translated, it is
   taken verbatim.
AC
   If you say ``alias \foo``, then \\foo is an alias for the command
   defined on the previous line.
E
   Example: ``<UR> -``. The dash after the element is required. Another
   example is: ``<sUR fr='unit� de recherche' en='research unit'> -``.
   In this second example, we have an element named \`sUR', that has two
   attributes. The effect is to put, in the XML result, this element
   (with its attributes), and its content is a list of items declared in
   the configuration file (the list can be empty).
CE
   The syntax is ``\cmdf ?+ <elt>``. Example:
   ``\sURsop ?+ <sUR fr='dans le sud'>``. This has as effect to define a
   command, here ``\sURsop``, that takes no argument, whose effect is to
   insert, to the element ``<elt>`` (that must be defined by the
   previous rule) an empty element, whose name is ``cmdf``, and that has
   the attributes of ``<elt>``. In the example, we would get:
   ``<sURsop fr='dans le sud'/>``.
CEE
   The syntax is ``\cmdg ? <elt> <eltx>``. Same as above, but the
   element created is ``<eltx>`` instead of one named ``cmdf`` with the
   attributes of ``<elt>``. Example
   ``\sParis ?<sUR> <Rocq en='nearparis'>`` gives
   ``<Rocq en='nearparis'/>``.
S
   The character string is inserted verbatim in the XML tree.
AC
   The syntax is ``execute \cmd`` or ``action \cmd``. When *Tralics*
   sees the ``\InsertTitlepage`` command, it executes ``\xbox{}{\cmd}``,
   this gives an XML element that is inserted in the current tree.

**Note.** Since Version 2.8, *Tralics* can produce UTF-8 output. Some
arguments are copied verbatim from the input to the output,
independently of this setting. The example shown above for case 'E'
contains the string ``fr='unit� de recherche'`` (see configuration file,
line 71). If you read the file containing this string in UTF8 mode, an
error will be signaled by *Tralics*. If you use it in UTF8 output mode,
no error is signaled, but the result is invalid. The solution is to use
seven bit input and character entities, like ``&#xe9;``. See line 332 of
the configuration file, where this patch has been applied.

4.3. Interpreting the CES item
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the titlepage contains ``\cmd ?<elt> ?"value"``, this defines a
command ``\cmd`` that produces an element ``<elt>``, with a default
value "value". The first question mark has to be replaced by nothing or
one of p, q, e or E, the second by one of A, B, C or plus sign. If e or
E is given, then an environment is defined, instead of a command.

Look at the second transcript file, line
`649 <titlepage-ex3.html#l649>`__. First, the translator sees a command;
here it is ``\lastname``, but what the translator knows is the command
code and its subcode; no name to is attached to this command code so
that you will see \``{(Unknown)}''. The translator executes a piece of
code that depends on the command code; this piece of code prints line
`650 <titlepage-ex3.html#l650>`__, namely \``{\titlepage 8}'', where 8
is the subcode of the command (the transcript file says, on line
`330 <titlepage-ex3.html#l330>`__, \``Defining \\lastname as
\\TitlePageCmd 8'', so that this is coherent.) The title page data
structure, contains for line 8, not only the name of the element to
create, but also the name of the command. Thus, you can see on line
`651 <titlepage-ex3.html#l651>`__ the name of the command,
\``{\titlepage 8=\lastname}'' and on line
`652 <titlepage-ex3.html#l652>`__ the start of the action \``{Push nom
1}''.

The effect of ``\cmd{foo}`` is roughly the same as
``\setbox8\xbox{elt}{foo}`` (replace \`\cmd' by the name of the command,
\`elt' by the name of the element, and \`\setbox8' by the effective
location in the titlepage structure, this can differ slightly from the
index of the command in the table). In the first version of *Tralics*
the argument of the command was read, translated, and the stack was
popped after that. As a consequence category codes were fixed once and
for all. When you say ``\setbox8=\hbox``, then TeX will execute the
``\hbox`` command, and push a special marker on the stack. When the
closing brace of the command is found, TeX will fix the glue of the box,
then pop its special stack, and then finish the assignment. No argument
is read, category changes are allowed, all modifications are local to
the group defined by the braces.

In the case of a titlepage element, another special marker is put on the
stack by *Tralics*. In general, the opening brace in ``\cmd{foo}`` does
not change the grouping level (this is different from ``\hbox``), so
that the transcript file will contain:
``+stack: level = 2 for titlepage argument`` (see transcript file, line
`653 <titlepage-ex3.html#l653>`__). In a simple case, for instance
``\Atitle``, the opening brace is sensed line
`539 <titlepage-ex3.html#l539>`__, the closing brace on line
`547 <titlepage-ex3.html#l547>`__, and this is followed by a line of the
form \``+stack: level - 2 for titlepage argument''. This means that the
current level will decrease from 2 to 1, which is the bottom level (what
you do *not* see in the current version is that the level is incremented
by one, when the special closing brace is seen).

Assume that ``\cmd@hook`` is defined. Then ``\cmd{foo}`` behaves like
``\setbox8 \xbox{elt} {\cmd@hook {foo}}``. This does not work if you use
\`cmd' as an environment. In fact, the argument of ``\foo`` is read, and
the token list ``{\cmd@hook {foo}}`` is pushed back in the input stream.
An example is given in the configuration line
`263 <titlepage-conf.html#l263>`__. The transcript file, on line
`653 <titlepage-ex3.html#l653>`__, shows the inserted brace, not the
initial one; on line `654 <titlepage-ex3.html#l654>`__, you see the call
of ``\lastname@hook``. On line `657 <titlepage-ex3.html#l657>`__, you
will see \``stack: level + 3'', this is because the hook expands to
``\textit{#1}``, and this is the same as ``{\it #1}``. On line
`660 <titlepage-ex3.html#l660>`__, you see the closing brace that
delimits the argument of the ``\it`` command, on line
`664 <titlepage-ex3.html#l664>`__ the closing brace of the titlepage
command, and on line `667 <titlepage-ex3.html#l667>`__ another closing
brace (input line 7 has the form ``\author{XYZ}``, the ``\author``
command command is defined to be ``\relax`` by the configuration file
line `238 <titlepage-conf.html#l238>`__, the 3 items X, Y, Z are
commands. The transcript file says, line
`666 <titlepage-ex3.html#l666>`__: \``{Pop 1: document_v nom_t}''. This
means that the current element (to be popped) is a ``<nom>`` in a
``<document>``.

Assume that ``\cmd@helper`` is defined. Then ``\cmd{foo}`` behaves like
``\setbox25 \xbox{elt} {\cmd@helper foo}``, and
``\begin{cmd}foo\end{cmd}`` behaves like
``\setbox25= \begin{xmlelement} {elt}\cmd@helper foo\end{xmlelement}``.
More precisely: if the command is defined, it is inserted and executed.
Braces are group delimiters. If we consider the case of \`Btitle', whose
execution starts line `554 <titlepage-ex3.html#l554>`__, we can see line
`556 <titlepage-ex3.html#l556>`__ that the opening brace that follows is
a special one (that leaves the level unchanged), and on line
`557 <titlepage-ex3.html#l557>`__ that the level is increased by one.
The closing brace is seen on line `568 <titlepage-ex3.html#l568>`__, and
line `570 <titlepage-ex3.html#l570>`__ shows that the level goes down
from 3 to 2 (as previously, you do not see it raising to 3). But you see
the effects: on line `569 <titlepage-ex3.html#l569>`__ the value of
``\@nomathml`` is restored. Line `572 <titlepage-ex3.html#l572>`__
matches line `557 <titlepage-ex3.html#l557>`__: the brace level goes
down from 2 to 1.

The situation is similar for environments. On lines
`805 <titlepage-ex3.html#l805>`__, `849 <titlepage-ex3.html#l849>`__,
``\begin{Aabstract}`` or ``\begin{Babstract}`` is seen. On lines
`806 <titlepage-ex3.html#l806>`__, `811 <titlepage-ex3.html#l811>`__
(and similarly, `850 <titlepage-ex3.html#l850>`__,
`855 <titlepage-ex3.html#l855>`__) we have two lines that say that the
current level increases or is unchanged. This is independent of the
existence of a helper or not. On line `842 <titlepage-ex3.html#l842>`__
and `887 <titlepage-ex3.html#l887>`__ we execute ``\end{Aabstract}`` or
``\end{Babstract}``. In general, this expands to ``\endAabstract``. But
this is a special case, so that, after restoring what is needed (line
`888 <titlepage-ex3.html#l888>`__ for instance), and unwinding the stack
(line `890 <titlepage-ex3.html#l890>`__), execution resumes with popping
the XML stack. As is the case of a non-environment, you see the level
decrease twice, but one of them (line `891 <titlepage-ex3.html#l891>`__)
is immediately corrected.

4.4. Interpreting the CES flags
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

We finish the discussion of a command defined by:
``\cmd <elt> ?"value"``, where, instead of the question mark, you can
use one of A, B, C or plus sign. You can also say nothing. Then, if the
command is never used, ``<elt>value</elt>`` is added in proper place to
the TPA element.

On the titlepage example, lines `342 <titlepage-conf.html#l342>`__
--`345 <titlepage-conf.html#l345>`__, we define ``\cmdp``, ``\cmdA``,
``\cmdB``, ``\cmdC`` in a similar fashion, but add a flag before the
value. None of these commands is used in the TeX file (first example),
and you can observe the following facts.

-  *Tralics* complains with: *Error signaled at line 35: No value given
   for command \\cmdp.* In fact, when Tralics sees the
   ``\InsertTitlepage`` command, it notices that ``\cmdp`` has not been
   called and complains, because the plus-sign flags means: this value
   is required.
-  In the case where the flag is one of A, B or C, then ``"value"`` is a
   LaTeX command, that will be evaluated and translated (In fact,
   *Tralics* removes the double quotes, and inserts the characters in
   one of its buffers, or converts the string into a token list that is
   appended to the input token list). The non trivial point is: when is
   the command evaluated?
-  In the case of \`A' flag, the command is evaluated just before the
   ``\documentclass{TPA}`` command. It is marked `Insert
   1 <titlepage-ex3.html#insert1>`__ in the transcript file. Since there
   is a second insert, *Tralics* sees the following source lines : lines
   1 to 4 (this being the ``\documentclass`` line), the line 1 (for line
   of some insert), then line 88 (marked `Insert
   2 <titlepage-ex3.html#insert2>`__, this is a \`BeginCommands' block,
   starting at line `87 <titlepage-conf.html#l87>`__), then lines 5, 6,
   etc. Line `5 <titlepage-ex3.html#insert3>`__ is marked \`A destroyed'
   so that we know that the command is evaluated before this.
-  **Note:** Since version 2.9, the command is evaluated *before* the
   ``\documentclass`` command. See `explanations <#inserts>`__.
-  In the case of \`B' flag, the command is evaluated at begindocument.
   More precisely, ``\AtBeginDocument{\cmdb{\cmdBval}}`` is executed.
   This can been seen in the transcript file: after \`Defining \\cmdb',
   there is `the line <titlepage-ex3.html#insert4>`__
   ``[1] \cmdb{\cmdBval}``, followed by ``++ End of virtual file.`` This
   is a hack needed to convert the character string into a list of 4
   tokens (two braces, two commands), and this token list is fed to
   ``\AtBeginDocument``.
   These tokens are stored somewhere, and executed after the
   ``\begin{document}``, the result can be seen in the log in the region
   marked \`\ `documenthook <titlepage-ex3.html#documenthook>`__'.
-  In the case of \`C' flag, the command is evaluated when the TPA
   command is seen. In the transcript file is `the
   line <titlepage-ex3.html#insert5>`__ ``[1] \cmdc{\cmdCval}``,
   followed by ``++ End of virtual file.`` This is a hack, as above (the
   string is converted into a list of tokens, then executed).

4.5. Comments
~~~~~~~~~~~~~

The purpose of the CEES construction is to define a list of authors. See
example 1, where we have four authors, each defined by a single name.
Example 2 is more complicated, but incomplete. The idea would be the
following: the XML file contains a ``<auteur>`` element for each author
(the configuration file works for a single author, elements are
hard-coded `l.213 <titlepage-conf.html#l213>`__,
`l.221 <titlepage-conf.html#l221>`__. Authors can be divided into real
authors and contributors, the number of them is automatically computed
(`l.222 <titlepage-conf.html#l222>`__) and
`l.223 <titlepage-conf.html#l223>`__). It is easy to create the
``<nombre_auteurs>``: define a CES command, and do not use it, add flag
C; then some command is evaluated at the end, when the number of authors
is known.

The source file shows a ``\author`` command, containing the name
(structured via 3 commands) but not the affiliation (address, email,
etc), that are defined elsewhere. Very often, this is given via
footnotes, or special notes, like ``\thanks``. Some people use shorthand
notations like ``{A,B}@foo.bar`` for ``A@foo.bar`` and ``B@foo.bar``.

4.6. Special action
~~~~~~~~~~~~~~~~~~~

When you launch *Tralics* with the option ``-tpa_status=X``, this
controls what happens after the titlepage has been translated. If X is
``all`` (or starts with the letter \`a'), then the whole document is
translated as usual. If X is ``title`` (or starts with the letter \`t'),
then only the titlepage is translated. The resulting XML will contain
the TPA element, maybe some junk, maybe the bibliography. If X is
``config`` (or starts with the letter \`c'), then the result depends on
the configuration file, more precisely on the second attribute list of
the titlepage command (see examples lines
`207 <titlepage-conf.html#l207>`__ or
`312 <titlepage-conf.html#l312>`__). In the case where one of the
attributes of ``att2`` has the value ``'only title page'``, the
translation stops. Note that the string above contains two spaces and
two single quotes. If you really want this string to appear in the XML,
replace the quote by ``&apos;``. Any other value has the following
meaning: compilation stops if an error was signaled, continues
otherwise. By default, the configuration file has precedence.

If translation stops after the titlepage, the bibliography is not
inserted. Exception: if 'translate also bibliography' (with the quotes),
appears in the attribute list, then the equivalent of ``\nocite{*}``,
``\bibliography{\jobname}`` is executed. This has as side effect to
insert the bibliography at the end of the document.

Lines `244 <titlepage-conf.html#l244>`__,
`245 <titlepage-conf.html#l245>`__, `246 <titlepage-conf.html#l246>`__
of the configuration file contain the magic command ``\@reeavaluate``.
When you say ``\@reevaluate\foo\bar{gee}``, then commands ``\foo`` and
``\bar`` are called with ``gee`` as argument, as in
``\def\@reevaluate#1#2#3{#1{#3}#2{#3}}``, but the command can change the
category codes. A star is allowed, and the behaviour is as in
``\def\@reevaluate*#1#2#3{\begin{#1}#3\end{#1}\begin{#2}#3\end{#2}}``,
There is an example in the transcript file line
`375 <titlepage-ex3.html#l375>`__. We say
``\def \title {\@reevaluate \Atitle \Btitle}``. On line
`378 <titlepage-ex3.html#l378>`__ there is
``\def\abstract {\@reevaluate* {Aabstract} {Babstract}}``. The star form
of the command says that we consider environments. You can see the first
use on line `529 <titlepage-ex3.html#l529>`__.

First, *Tralics* reads the optional star, then two arguments. After
that, it reads all characters up to a closing brace, or (in the case of
a star) the end of the environment. It can happen that some characters
have already been read and tokenized. In this case, the token is
converted into a character string (with a leading backslash, and a
trailing space if the token has at least two characters, or has a single
character that is a letter (this is independent of the category code).
When characters are read from the buffer, the backslash character is
considered specially: the character that follows it is normal. Otherwise
an open brace increases the brace counter, a closing brace decreases the
brace counter. In the case of ``\@reevaluate*``, parsing ends when the
end of the environment is seen; this means that *Tralics* counts the
number of ``\begin`` and ``\end`` at brace-level zero (the command name
must be followed by a non-letter), and stops when there is one more
``\end`` than ``\begin`` (the characters in this ``\end`` token are not
read).

On line `530 <titlepage-ex3.html#l530>`__ and following, you can see see
the list of all these characters; they are put in a local file that has
a two lines, first is read at `l.534 <titlepage-ex3.html#l534>`__,
second is read at `l.551 <titlepage-ex3.html#l551>`__, end of file
detected at `l.574 <titlepage-ex3.html#l574>`__ The interesting part
starts on line `l.558 <titlepage-ex3.html#l558>`__. Originaly, we had
:literal:`\\catcode `\$=12 \@nomathml=1`, its effect is to replace the
math formula ``$L^\infy$`` by ``$L^\infty $``. Translation is `given
here <titlepage-ex2.html#ex2>`__. A better solution would be to use
``\@nomathml=-1`` (not category code changes!). Then the translation of
the math formula will be ``<texmath type='inline'>L^\infty </texmath>``.
The translation of the whole document is `given
here <titlepage-ex2.html#ex2new>`__.

In the case where ``\@nomathml`` is zero (normal case) or negative (as
above), parsing a math formula produces lines like
`l.543 <titlepage-ex3.html#l543>`__ (or
`l.564 <titlepage-ex3.html#l564>`__) because a math formula is a group,
maybe other lines that increase of decrease the grouping level, maybe
lines that show expansion of all local macros, followed by the
end-of-group line, followed by the list of all tokens read (see line
`l.827 <titlepage-ex3.html#l827>`__ for a more complicated example).
After that, the math formula is translated. You may see lines of the for
`l.829 <titlepage-ex3.html#l829>`__ whenever some tables are
reallocated.

Consider now line `l.781 <titlepage-ex3.html#l781>`__ in the transcript
file. We have the start of some environment. A new grouping level is
created (`line 784 <titlepage-ex3.html#l784>`__), and the command
associated to the environment is executed (`line
785 <titlepage-ex3.html#l785>`__), and this calls the magic command
``\@reevaluate``. All sources lines, from 24 to 27 are read (only the
first four characters of line 27 are consulted, none of them is read).
But *Tralics* reads one token (this should be the ``\end`` token) and a
sequence of characters (in the same way as the ``\end`` command reads is
argument); it does not test that this sequence is the current
environment. It closes the current environment (see lines
`791 <titlepage-ex3.html#l791>`__, `792 <titlepage-ex3.html#l792>`__).
After that, Tralics inserts the set of lines, of the form
``\begin {cmd1} text \end{cmd1}% \begin{cmd2}  text \end {cmd2}%``. As
above, a virtual file is created. It starts at line
`802 <titlepage-ex3.html#l802>`__ and lasts until
`893 <titlepage-ex3.html#l893>`__.

.. _cls-clo:

5. Classes and packages
-----------------------

.. _insert:

5.1 User configuration file
~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you compile file ``foo.tex``, then *Tralics* will insert the line
``\InputIfFileExists*{foo.ult}{}{}`` just near the line with the
documentclass declaration, if there is any. As mentioned above, there
are other insertions, and in the transcript file, they are all *after*
the line containing the ``\documentclass`` declaration. This is wrong in
the case where an optional argument follows the declaration on the
following line: we cannot insert text between the command and its
argument.

In the current version, all insertions are *before* the line containing
the ``\documentclass``. The order if the following: all commands from a
BeginCommand block in a configuration file (as Insert 2 above), then
insertions from the titlepage (as Insert 1 above) then the
InputIfFileExists line.

The semantics of ``\InputIfFileExists`` is the following. an argument is
read, here, ``foo.ult``. If the file exists, it is input; moreover the
first token list is added to the current stream, otherwise the second
list is inserted. Here both lists are empty, so that nothing special
happens. The star after the command has a special meaning: it says that
the @ character should be of category code 11 (letter) while reading the
file. The old category code is saved on a special stack.

If the file uses the document class 'bar', then ``bar.clt`` will be
used, and if package 'gee' is required, ``gee.plt`` will be used. The
files ``bar.clt`` and ``gee.plt`` are looked at it the current
directory, then in the directories specified by the ``confdir`` options
to the program, then in a default directory, in the same way as tcf
files, `described here <tcfpath>`__. No error is signalled if one of
these files is missing. The @ character has always category code 11
(letter) while loading these files. Normally, ``bar.clt`` contains the
same code as ``bar.cls`` (we shall explain later what is in the standard
classes), and ``gee.plt`` contains the same code as ``gee.sty``.

In order to implement commands like ``\LoadClassWithOptions``, a table
of all packages or classes, loaded not not, is maintained somewhere. A
global variable contains the current position in the table, it is saved
on the stack mentioned above, set to zero when a file opens, restored
when a file closes. A command like ``\DeclareOption`` adds an option to
the current class or package. If you say ``\input{baraux}``, the content
of the file \`baraux' does not belong to the current class or package.
In order to share options between standard classes, *Tralics* provides
``\InputClass{baraux}``. This loads the file ``baraux.clt`` (found in
the same way as ``aux.clt``), but the content is added to the current
class.

The following shows a bit what happens. The transcript file has a line
for every file whose existence is tested. The file 'article.clt'
identifies itself via ``\ProvidesClass`` line, it loads std.clt, that
identifies itself with a ``\ProvidesFile``. You can see how the integer
cur_file_pos is restored to zero (outside class or package, or to one,
the class). You can also see the options that are executed (in verbose
mode, you would see the code of the options as well). The first list
corresponds to the ``\ExecuteOptions`` command of the class file, the
second to the ``\ProcessOptions``

.. container:: log_out

   ::

      ++ file article.clt does not exist 
      ++ file ../confdir/article.clt exists 
      ++ Made @ a letter
      ++  Opened file ../confdir/article.clt; it has 25 lines
      Document class: article 2006/08/19 v1.0 article document class for Tralics
      ++ file std.clt does not exist 
      ++ file ../confdir/std.clt exists 
      ++ Made @ a letter
      ++  Opened file ../confdir/std.clt; it has 51 lines
      File: std 2006/08/19 v1.0 Standard LaTeX document class, for Tralics
      ++ End of file ../confdir/std.clt
      ++ cur_file_pos restored to 1
      {Options to execute->letterpaper,10pt,oneside,onecolumn,final}
      {Options to execute->}
      ++ End of file ../confdir/article.clt
      ++ cur_file_pos restored to 0

----

docs/titlepage-conf.rst
-----------------------

===============================
Configuration of the title page
===============================

The file config_tpa
-------------------

This is an example of a configuration file for the titlepage. Some long
lines have been split (they start with three dots instead of a line
number). The use of this files is described `here <titlepage.html>`__.

.. container:: ltx-source

   ::

        1 # This is an example of a configuration file for tralics.
        2 # $ Id: config_tpa,v 2.2 2006/06/16 12:32:51 grimm Exp $
        3 
        4 
        5 % Some comments: comments start with % or #
        6 
        7 % this means: take the documentclass value as type name
        8 Type = \documentclass
        9 
       10 % some useless aliases
       11 BeginAlias
       12   article report 
       13   slides inriaslides foiltex
       14 End
       15 
       16 BeginType default
       17   DocType = document devnul.dtd
       18   DocAttrib = x \foo
       19   DocAttrib = y \specialyear
       20   DocAttrib = z \the\day\space \the\month\space \the\year 
       21 BeginCommands
       22   \def\ABC{\recurse\recurse}
       23   \def\DEF{\recurse\recurse}
       24 End
       25 End
       26 
       27 
       28 %% BeginType RA     % Case RA
       29 %%   DocType = raweb raweb.dtd
       30 %%  DocAttrib = year \specialyear
       31 %% #DocAttrib = test "foo"
       32 %% 
       33 %%   makefo="xsltproc --catalogs -o %A.fo %B %C";
       34 %%   makehtml = "xsltproc --catalogs  %B %C";
       35 %%   call_lint = "xmllint --catalogs --valid  --noout %C"
       36 %%   makepdf = "pdflatex -interaction=nonstopmode %w"
       37 %%   %makedvi = "latex -interaction=nonstopmode %w"
       38 %%   % makedvi et dvips pour marie-pierre
       39 %%   %dvitops = "dvips %w.dvi -o %w.ps"
       40 %%   %makedvi = "latex -interaction=nonstopmode %w"
       41 %%   generatedvi = "latex -interaction=nonstopmode %t"
       42 %%   % old latex: "latex \\nonstopmode\\input{%t}"
       43 %%   generateps = "dvips %t.dvi -o %t.ps"
       44 %% End
       45 
       46 % This is used for testing the titlepage command
       47 
       48 BeginType  tpa
       49   DocType = tpa tpa.dtd
       50 BeginTitlePage
       51   \InsertTitlepage <titlepage att1='foo' att2='foo2'> 
      ...             "a1='b1' a2='b2'" "from-tpa='ok' from_type='OK'"
       52   alias \AInsertTitlepage  "" ""
       53   \title <title-element tea='tea-val'> "No title"
       54   \utitle <utitle-element tea='utea-val'> "No title"
       55   \author + <autL al = 'alval' bl = 'blval'>
      ...            <aut auta='autaval'> "No authors"
       56   \uauthor + <uautL al='alval' bl='blval'>
      ...     <aut auta='autaval'> "No authors"
       57   \Eabstract E<abstract ab='AB1'> "no abstract1"
       58   \eabstract e<abstract ab='AB2'> "no abstract2"
       59   \pabstract p<abstract ab='AB3'> "no abstract3"
       60   \abstract <abstract ab='AB4'> "no abstract4"
       61   alias \abstractalias
       62   \uEabstract E<uabstract ab='AB5' > "no abstract1"
       63   \ueabstract e<uabstract ab='AB6'> "no abstract2"
       64   \upabstract p<uabstract ab='AB7'> "no abstract3"
       65   \uabstract <uabstract ab='AB8'> "no abstract4"
       66   alias \uabstractalias
       67   <UR> -
       68   \URsop ?+ <UR>
       69   \URlor ?+ <UR>
       70   \Paris ?<UR> <Rocq>
       71   <sUR fr='unit� de recherche' en='research unit'> -
       72   \sURsop ?+ <sUR fr='dans le sud'>
       73   \sURlor ?+ <sUR fr=" dans l'est">
       74   \sParis ?<sUR> <Rocq en='nearparis'>
       75   \myself \author "JG"
       76   \himself \author "DEK"  # this is a list def
       77   alias \autk
       78   \address  <Address>  "no adress"
       79   \waddress \address "somewhere" # this is a normal def
       80 
       81   \cmdp <cmdp> +"nodefault" 
       82   \cmda <cmdA> A"\cmdAval" 
       83   \cmdb <cmdB> B"\cmdBval" 
       84   \cmdc <cmdC> C"\cmdCval" 
       85 
       86 End
       87 BeginCommands
       88   \def\recurse{\recurse\recurse}
       89 EndCommands
       90 End
       91 
       92 # This one is used for testing entity renaming
       93 
       94 BeginType unused
       95   xml_labelitem_name = "Xlabel"
       96   xml_gloitem_name = "Xglolabel"
       97   xml_item_name = "Xitem"
       98   xml_div0_name = "Xdiv0"
       99   xml_div1_name = "Xdiv1"
      100   xml_div2_name = "Xdiv2"
      101   xml_div3_name = "Xdiv3"
      102   xml_div4_name = "Xdiv4"
      103   xml_div5_name = "Xdiv5"
      104   xml_div6_name = "Xdiv6"
      105   xml_subfigure_name = "Xsubfigure"
      106   xml_row_name = "Xrow"
      107   xml_cell_name = "Xcell"
      108   xml_keywords_name = "Xkeywords"
      109   xml_term_name = "Xterm"
      110   xml_mbox_name = "Xmbox"
      111   xml_topic_name = "Xtopic"
      112   xml_caption_name = "Xcaption"
      113   xml_footnote_name = "Xnote"
      114   xml_fbox_name = "Xfbox"
      115   xml_box_name = "Xbox"
      116   xml_picture_name = "Xpicture"
      117   xml_graphics_name = "Xgraphics"
      118   xml_figure_name = "Xfigure"
      119   xml_table_name = "Xtable"
      120   xml_Table_name = "XTable"
      121   xml_bezier_name = "Xbezier"
      122   xml_put_name = "Xput"
      123   xml_line_name = "Xline"
      124   xml_vector_name = "Xvector"
      125   xml_oval_name = "Xoval"
      126   xml_dashline_name = "Xdashline"
      127   xml_drawline_name = "Xdrawline"
      128   xml_dottedline_name = "Xdottedline"
      129   xml_circle_name = "Xcircle"
      130 EndType
      131 
      132 # This one was used for the eurotex paper
      133 
      134 BeginType  eurotex     % Case eurotex 2003
      135   DocType = eurotex tugboat.dtd
      136 BeginTitlePage
      137   \maketitle <titlepage> "" ""
      138   \title <ti> "No title"
      139   \netaddress <NetA>  "No address"
      140   \personalURL <U> "No url given"
      141   \resume E<resume> "Pas de r\'esum\'e"
      142   \abstract E<abstract> "no abstract"
      143   \author + <author> <auth> "No authors"
      144   \address p<address>  "no address"
      145 End
      146 BeginCommands
      147   \def\recurse{\recurse\recurse}
      148 EndCommands
      149 End
      150 
      151 
      152 # more aliases
      153 BeginAlias
      154   tpa foo foo2004
      155   TPA foo
      156   unused foo  foo2003
      157 End

.. _cedram:

The file cedram.tcf
-------------------

.. container:: ltx-source

   ::

      201 ## This is an example of a configuration file for tralics
      202 ## Copyright 2006 Inria/apics, Jose' Grimm
      203 ## $Id: cedram.tcf,v 1.1 2006/07/17 09:09:06 grimm Exp $
      204 ## tralics ident rc=cedram.tcf $Revision: 1.1 $
      205   DocType = cedram cedram.dtd #
      206 BeginTitlePage 
      207   \maketitle <article> "" "'only title page' 
      ...      'translate also bibliography'"
      208    action \getproduction
      209   action \getid 
      210   \daterecieved <date_reception> "Pas de date"
      211   \dateaccepted <date_acceptation> "Pas de date"
      212   "<auteur>"
      213 #  <nomcomplet> "NC"
      214    \firstname <prenom> "FN"  
      215    \middlename <middlename> "MN"  
      216    \lastname <nom> "LN"  
      217 
      218   \address q<adresse> "no ad"
      219   \email <mel> "no mail"
      220   "</auteur>"
      221 # <nombre_auteurs>
      222 # <nombre_contributeurs>
      223   \Ctitle <titre xml:lang='fr'> "TF"
      224   \Dtitle <TeXtitre xml:lang='fr'> "TF"
      225   \Atitle <titre xml:lang='en'> "TE"
      226   \Btitle <TeXtitre xml:lang='en'> "TE"
      227   \currentlanguage <langue> "en"
      228   \Aabstract e<resume xml:lang='en' > "no abstract"
      229   \Babstract e<TEXresume xml:lang='en' > "no abstract"
      230   \Cabstract e<resume xml:lang='fr' > "no abstract"
      231   \Dabstract e<TEXresume xml:lang='fr' > "no abstract"
      232   \altkeywords <motcle xml:lang='fr'> "pas de resume"
      233   \keywords <motcle xml:lang='en' > "no abstract"
      234   \subjclass <msc> "MSC"
      235 End
      236 
      237 BeginCommands
      238   \let\author\relax
      239   \def\getproduction{\xbox{production}{
      240    \xbox{fichier\_tex}{\jobname}
      241    \xbox{fichier\_bib}{\jobname}
      242    \xbox{date\_prod}{\the\year-\the\month-\the\day}}}
      243   \makeatletter 
      244   \def\title{\@reevaluate\Atitle\Btitle}
      245   \def\abstract{\@reevaluate*{Aabstract}{Babstract}}
      246   \def\altabstract{\@reevaluate*{Cabstract}{Dabstract}}
      247   \def\Btitle@helper{\@nomathml=-1 }
      248   \def\Dtitle@helper{\@nomathml=-1 }
      249   \def\Babstract@helper{\@nomathml=-1 }
      250   \def\Dabstract@helper{\@nomathml=-1 }
      251   \def\alttitle{\@reevaluate\Ctitle\Dtitle}
      252    % for the biblio
      253    \renewcommand\bpers[5][\undefined]{%
      254    \xbox{nom}{#4}%
      255  \ifx#1\undefined\xbox{prenom}{#2}\else
      ...         \xbox{prenom}{#1}\xbox{initiale}{#2}\fi
      256  \xbox{particule}{#3}%
      257  \def\tmp{#1\undefined}\ifx\tmp\undefined\else
      258  \xbox{junior}{#5}\fi}
      259 
      260   \expandafter\def\csname cititem-btitle\endcsname{%
      261     \bgroup\catcode `\$=12 \@nomathml=1 \citembtitle}
      262      \def\citembtitle#1{\xbox{title}{#1}\egroup\@addnl}
      263   \def\lastname@hook#1{\textit{#1}}
      264 # Following commands used by T.B.
      265   \let\nfrac\dfrac
      266   \let\pfrac\dfrac
      267   \newtheorem{theorem}{Theorem}
      268   \newtheorem{proof}{Proof}
      269   \newtheorem{lemma}{Lemma}
      270   \newtheorem{rema*}{Remark}
      271   \newtheorem{remas*}{Remarks}
      272   \newtheorem{defi}{Definition}
      273   \let \tn\text
      274   \let\appendix\relax
      275   \let\notag\relax
      276   \def\sideset#1#2{}
      277   \makeatother 
      278 EndCommands

.. _tpa:

The file tpa.tcf
----------------

.. container:: ltx-source

   ::

      301 ## This is an example of a configuration file for tralics
      302 ## Copyright 2006 Inria/apics, Jose' Grimm
      303 ## $Id: tpa.tcf,v 1.3 2006/07/21 08:47:03 grimm Exp $
      304 ## tralics ident rc=testa.tcf $Revision: 1.3 $
      305 
      306 
      307 
      308   DocType = tpa tpa.dtd
      309 
      310 
      311 BeginTitlePage
      312   \InsertTitlepage <titlepage att1='foo' att2='foo2'>
      ...     "a1='b1' a2='b2'" "from-tpa='ok' from_type='OK'"
      313   alias \AInsertTitlepage  "" ""
      314   \title <title-element tea='tea-val'> "No title"
      315   \utitle <utitle-element tea='utea-val'> "No title"
      316   \author + <autL al = 'alval' bl = 'blval'> 
      ...     <aut auta='autaval'> "No authors"
      317   \uauthor + <uautL al='alval' bl='blval'> 
      ...     <aut auta='autaval'> "No authors"
      318   \Eabstract E<abstract ab='AB1'> "no abstract1"
      319   \eabstract e<abstract ab='AB2'> "no abstract2"
      320   \pabstract p<abstract ab='AB3'> "no abstract3"
      321   \abstract <abstract ab='AB4'> "no abstract4"
      322   alias \abstractalias
      323   \uEabstract E<uabstract ab='AB5' > "no abstract1"
      324   \ueabstract e<uabstract ab='AB6'> "no abstract2"
      325   \upabstract p<uabstract ab='AB7'> "no abstract3"
      326   \uabstract <uabstract ab='AB8'> "no abstract4"
      327   alias \uabstractalias
      328   <UR> -
      329   \URsop ?+ <UR>
      330   \URlor ?+ <UR>
      331   \Paris ?<UR> <Rocq>
      332   <sUR fr='unit&#xe9; de recherche' en='research unit'> -
      333   \sURsop ?+ <sUR fr='dans le sud'>
      334   \sURlor ?+ <sUR fr=" dans l'est">
      335   \sParis ?<sUR> <Rocq en='nearparis'>
      336   \myself \author "JG"
      337   \himself \author "DEK"  # this is a list def
      338   alias \autk
      339   \address  <address>  "no adress"
      340   \waddress \address "somewhere" # this is a normal def
      341 
      342   \cmdp <cmdp> +"nodefault" 
      343   \cmda <cmdA> A"\cmdAval" 
      344   \cmdb <cmdB> B"\cmdBval" 
      345   \cmdc <cmdC> C"\cmdCval" 
      346 
      347 End
      348 BeginCommands
      349   \def\recurse{\recurse\recurse}
      350 EndCommands

`back to description <titlepage.html>`__

----

docs/titlepage-ex1.rst
----------------------

Two examples for the Titlepage mechanism of Tralics
===================================================

We give here two examples of the use of a configuration file:
`config_tpa <titlepage-conf.html>`__. First example: put it in the file
``tpa.tex``, and run it via ``tralics tpa -configfile config_tpa``.
Explanations can be found `here <titlepage.html>`__.

.. container:: ltx-source

   ::

      \def\cmdAval{CMDA}
      \def\cmdBval{\invalid}
      \def\cmdCval{\invalid}
      \documentclass{tpa}
      \def\cmdAval{\invalid}
      \def\Title{Titlepage customisation in Tralics}


      \title{\Title}
      \author{Jos� Grimm}
      \author{Knuth}
      \myself
      \autk

      \Paris \URsop
      \waddress

      \sParis \sURsop \sURlor

      \begin{Eabstract}
      This is an abstract with \par some paragraphs in it\par ok ?
      \end{Eabstract}

      \begin{eabstract}
      This is an abstract without paragraphs in it
      \end{eabstract}
      \pabstract{Another abstract \par with \par in it}
      \abstractalias{Another abstract without par}

      \def\cmdBval{CMDB}
      \begin{document}
      \def\cmdBval{\invalidagain}

      \def\cmdCval{CMDC}
      \InsertTitlepage

      \end{document}

Second example file for the titlepage command.

.. container:: ltx-source

   ::

      \documentclass[AIF]{cedram}

      \begin{document}

      \title{Fourier coefficients for simple $L^\infty$ functions}
      \alttitle{Coefficients Fourier pour fonctions  $L^\infty$ simples}
      \author{\firstname{Donald} \middlename{E.} \lastname{Knuth}} 

      \address{\TeX\ Users Group \\P.O. Box 869\\
      Santa Barbara, CA 93102-0869 USA}

      \email{d.e.knuth@somewhere.on.the.net} 

      \subjclass{11M26,  11M36, 11S40}

      \keywords{simple $L^\infty$ functions, lambda function}

      \altkeywords{fonctions  $L^\infty$ simples, fonction lambda}

      \daterecieved{2004-06-14}%{14 juin 2004}
      \dateaccepted{2004-12-09}%{9 d�cembre 2004}

      \begin{abstract}
        This is an abstract with a beautiful inline formula % Comment!
        $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n + 
         O(\sqrt{n}\log{n})$, where $C_1(\pi)$ is a real-valued constant.
      \end{abstract}


      \begin{altabstract}
        Mon r�sum� avec ma formule
        $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n + 
         O(\sqrt{n}\log{n})$, o� $C_1(\pi)$ est une constante r�elle.
      \end{altabstract}

      \maketitle

      \section{Introduction}

      The content of the document is unimportant.
      We have a simple math formula $\alpha=\beta$
      and two references \cite{Ba03} and \cite{BPY1}


      \bibliography{bo}

      \end{document}

Bibtex file for the second example:

.. container:: ltx-source

   ::




      @Article{Ba03,
        author =   {Barnes, E. W.},
        title =    {On the expression of {E}uler's constant as a
                        definite integral},
        journal =  {Messenger of Math.},
        year =     1903,
        volume =   33,
        pages =    {59--61}
      }


      @Article{BPY01,
        author =   {P. Biane and J. Pitman and M. Yor},
        title =    {Probability laws related to the {J}acobi $\theta$ and
                        {R}iemann $\zeta$ functions, and {B}rownian excursions},
        journal =  {Bull. Amer. Math. Soc.},
        year =     2001,
        volume =   38,
        pages =    {435--465}
      }


      @Article{Bo99,
        author =   {E. Bombieri},
        title =    {Remarks on {W}eil's quadratic functional in the
                        theory of prime numbers~{I}},
        journal =  {Rend. Mat. Acc. Lincei, Ser.~IX},
        year =     2000,
        volume =   11,
        pages =    {183--233}
      }

----

docs/titlepage-ex2.rst
----------------------

Two examples for the Titlepage mechanism of Tralics
===================================================

First example. The source file is described `here <titlepage.html>`__.
This file was produced in Jan. 2004 Some line breaks were inserted, they
are marked by red underscores.

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE tpa SYSTEM 'tpa.dtd'>
      <!-- translated from latex by tralics 1.9t-->
      <tpa from_type='OK' from-tpa='ok' language='english'>
      <titlepage a2='b2' a1='b1' att2='foo2' att1='foo'>
      __<title-element tea='tea-val'>Titlepage customisation 
      __in Tralics</title-element>
      <utitle-element tea='utea-val'>No title</utitle-element>
      <autL bl='blval' al='alval'><aut auta='autaval'>Jos� Grimm</aut>
      <aut auta='autaval'>Knuth</aut>
      <aut auta='autaval'>JG</aut>
      <aut auta='autaval'>DEK</aut>
      </autL>
      <uautL bl='blval' al='alval'><aut auta='autaval'>No authors</aut></uautL>
      <abstract ab='AB1'><p>
      This is an abstract with </p>
      <p>some paragraphs in it</p>
      <p>ok ?
      </p></abstract>
      <abstract ab='AB2'>
      This is an abstract without paragraphs in it
      </abstract>
      <abstract ab='AB3'><p>Another abstract </p>
      <p>with </p>
      <p>in it</p></abstract>
      <abstract ab='AB4'>Another abstract without par</abstract>
      <uabstract ab='AB5'>no abstract1</uabstract>
      <uabstract ab='AB6'>no abstract2</uabstract>
      <uabstract ab='AB7'>no abstract3</uabstract>
      <uabstract ab='AB8'>no abstract4</uabstract>
      <UR><Rocq></Rocq>
      <URsop></URsop>
      </UR>
      <sUR en='research unit' fr='unit� de recherche'><Rocq en='nearparis'></Rocq>
      <sURsop fr='dans le sud'></sURsop>
      <sURlor fr=' dans l&apos;est'></sURlor>
      </sUR>
      <Address>somewhere</Address>
      <cmdp>nodefault</cmdp>
      <cmdA>CMDA</cmdA>
      <cmdB>CMDB</cmdB>
      <cmdC>CMDC</cmdC>
      </titlepage>
      <p></p></tpa>

First example, new syntax

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE tpa SYSTEM 'tpa.dtd'>
      <!-- translated from latex by tralics 2.8-->
      <tpa from_type='OK' from-tpa='ok'>
      <titlepage a2='b2' a1='b1' att2='foo2' att1='foo'><title-element tea='tea-val'>Titlepage customisation in Tralics</title-element>
      <utitle-element tea='utea-val'>No title</utitle-element>
      <autL bl='blval' al='alval'><aut auta='autaval'>Jos� Grimm</aut>
      <aut auta='autaval'>Knuth</aut>
      <aut auta='autaval'>JG</aut>
      <aut auta='autaval'>DEK</aut>
      </autL>
      <uautL bl='blval' al='alval'><aut auta='autaval'>No authors</aut></uautL>
      <abstract ab='AB1'><p>
      This is an abstract with</p>
      <p>some paragraphs in it</p>
      <p>ok ?
      </p></abstract>
      <abstract ab='AB2'>
      This is an abstract without paragraphs in it
      </abstract>
      <abstract ab='AB3'><p>Another abstract</p>
      <p>with</p>
      <p>in it</p></abstract>
      <abstract ab='AB4'>Another abstract without par</abstract>
      <uabstract ab='AB5'>no abstract1</uabstract>
      <uabstract ab='AB6'>no abstract2</uabstract>
      <uabstract ab='AB7'>no abstract3</uabstract>
      <uabstract ab='AB8'>no abstract4</uabstract>
      <UR>
      <Rocq/>
      <URsop/>
      </UR>
      <sUR en='research unit' fr='unit� de recherche'>
      <Rocq en='nearparis'/>
      <sURsop fr='dans le sud'/>
      <sURlor fr=' dans l&apos;est'/>
      </sUR>
      <Address>somewhere</Address>
      <cmdp>nodefault</cmdp>
      <cmdA>CMDA</cmdA>
      <cmdB>CMDB</cmdB>
      <cmdC>CMDC</cmdC>
      </titlepage>
      <p/>
      </tpa>

.. _ex2:

Cedram test 1
-------------

Second example file for the titlepage command. Some line breaks were
inserted, they are marked by red underscores.

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE cedram SYSTEM 'cedram.dtd'>
      <!-- translated from latex by tralics 2.7c-->
      <cedram>
      <article><production>
      <fichier_tex>bo</fichier_tex>
      <fichier_bib>bo</fichier_bib>
      <date_prod>2006-6-16</date_prod></production>

      <date_reception>2004-06-14</date_reception>
      <date_acceptation>2004-12-09</date_acceptation>
      <auteur>
      <prenom>Donald</prenom>
      <middlename>E.</middlename>
      <nom><hi rend='it'>Knuth</hi></nom>
      <adresse><TeX/> Users Group  P.O. Box 869 Santa Barbara,
      __ CA 93102-0869 USA</adresse>
      <mel>d.e.knuth@somewhere.on.the.net</mel>
      </auteur>
      <titre xml:lang='fr'>Coefficients Fourier pour fonctions
      __ <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<msup><mi>L</mi> <mi>&infin;</mi> </msup></math></formula> simples
      __</titre>
      <TeXtitre xml:lang='fr'>Coefficients Fourier pour fonctions 
      __$L^\infty $ simple</TeXtitre>
      <titre xml:lang='en'>Fourier coefficients for simple
      __ <formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<msup><mi>L</mi> <mi>&infin;</mi> </msup>
      __</math></formula> functions</titre>
      <TeXtitre xml:lang='en'>Fourier coefficients for 
      __simple $L^\infty $ functions</TeXtitre>
      <langue>en</langue>
      <resume xml:lang='en'>This is an abstract with a beautiful inline 
      __formule <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
      __<msub><mi>&lambda;</mi> <mi>n</mi> </msub>
      __<mrow><mo>(</mo><mi>&pi;</mi><mo>)</mo></mrow>
      __<mo>=</mo><mfrac><mi>N</mi> <mn>2</mn></mfrac><mi>n</mi>
      __<mo form='prefix'>log</mo><mi>n</mi><mo>+</mo><msub><mi>C</mi> 
      __<mn>1</mn> </msub><mrow><mo>(</mo><mi>&pi;</mi>
      __<mo>)</mo><mi>n</mi><mo>+</mo><mi>O</mi>
      __<mo>(</mo></mrow><msqrt><mi>n</mi></msqrt><mrow>
      __<mo form='prefix'>log</mo><mi>n</mi><mo>)</mo></mrow>
      __</mrow></math></formula>, where <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<mrow><msub><mi>C</mi> 
      __<mn>1</mn> </msub><mrow><mo>(</mo><mi>&pi;</mi>
      __<mo>)</mo></mrow></mrow></math></formula> 
      __is a real-valued constant.</resume>
      <TEXresume xml:lang='en'>This is an abstract with a beautiful inline 
      __formule $\lambda _n(\pi ) = \frac N2 n \log n + C_1(\pi ) n + 
      __O(\sqrt n\log n)$, where $C_1(\pi )$ 
      __is a real-valued constant.</TEXresume>
      <resume xml:lang='fr'>Mon r�sum� avec ma formule <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<mrow><msub><mi>&lambda;</mi> <mi>n</mi> </msub>
      __<mrow><mo>(</mo><mi>&pi;</mi><mo>)</mo></mrow>
      __<mo>=</mo><mfrac><mi>N</mi> <mn>2</mn></mfrac>
      __<mi>n</mi><mo form='prefix'>log</mo><mi>n</mi><mo>+</mo>
      __<msub><mi>C</mi> <mn>1</mn> </msub><mrow><mo>(</mo>
      __<mi>&pi;</mi><mo>)</mo><mi>n</mi><mo>+</mo><mi>O</mi>
      __<mo>(</mo></mrow><msqrt><mi>n</mi></msqrt><mrow>
      __<mo form='prefix'>log</mo><mi>n</mi><mo>)</mo></mrow></mrow>
      __</math></formula>, o� <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<mrow><msub><mi>C</mi> <mn>1</mn>
      __ </msub><mrow><mo>(</mo><mi>&pi;</mi><mo>)</mo>
      __</mrow></mrow></math></formula> est une constante r�elle.</resume>
      <TEXresume xml:lang='fr'>Mon r�sum� avec ma formule $\lambda _n(\pi ) 
      __= \frac N2 n \log n + C_1(\pi ) n + O(\sqrt n\log n)$, o� $C_1(\pi )$ 
      __est une constante r�elle.</TEXresume>
      <motcle xml:lang='fr'>fonctions <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><msup><mi>L</mi>
      __ <mi>&infin;</mi>
      </msup></math></formula>
      __ simples, fonction lambda</motcle>
      <motcle xml:lang='en'>simple <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><msup>
      __<mi>L</mi> <mi>&infin;</mi> </msup></math></formula> functions, lambda
      __ function</motcle>
      <msc>11M26, 11M36, 11S40</msc>
      </article>
      <p/>
      __<biblio>
      <citation from='year' key='Bar03' id='bid0' 
      __userid='cite:Ba03' type='article'>
      <bauteurs><nom>Barnes</nom><prenom>E. W.</prenom><initiale>E. W.</initiale>
      __<particule/><junior/></bauteurs>
      <title>On the expression of Euler's constant as a definite integral</title>
      <bjournal>Messenger of Math.</bjournal>
      <bvolume>33</bvolume>
      <byear>1903</byear>
      <bpages>59&ndash;61</bpages>
      </citation>
      __
      <citation from='year' key='Bom00' id='bid2' 
      __userid='cite:Bo99' type='article'>
      <bauteurs><nom>Bombieri</nom><prenom>E.</prenom>
      __<initiale>E.</initiale><particule/><junior/></bauteurs>
      <title>Remarks on Weil's quadratic functional in the theory
      __ of prime numbers&nbsp;I</title>
      <bjournal>Rend. Mat. Acc. Lincei, Ser.&nbsp;IX</bjournal>
      <bvolume>11</bvolume>
      <byear>2000</byear>
      <bpages>183&ndash;233</bpages>
      </citation>
      __
      <citation from='year' key='BPY01' id='bid1' 
      __userid='cite:BPY01' type='article'>
      <bauteurs><nom>Biane</nom><prenom>P.</prenom><initiale>P.</initiale>
      __<particule/><junior/><nom>Pitman</nom><prenom>J.</prenom>
      __<initiale>J.</initiale><particule/><junior/><nom>Yor</nom>
      __<prenom>M.</prenom><initiale>M.</initiale><particule/><junior/>
      __</bauteurs>
      <title>Probability laws related to the Jacobi $\theta $ and Riemann
      __ $\zeta $ functions, and Brownian excursions</title>
      <bjournal>Bull. Amer. Math. Soc.</bjournal>
      <bvolume>38</bvolume>
      <byear>2001</byear>
      <bpages>435&ndash;465</bpages>
      </citation></biblio></cedram>

.. _ex2new:

Cedram test 2
-------------

.. container:: xml_out

   ::

        <?xml version='1.0' encoding='iso-8859-1'?>
        <!DOCTYPE cedram SYSTEM 'cedram.dtd'>
        <!-- translated from latex by tralics 2.8-->
        <cedram>
        <article><production>
        <fichier_tex>bo</fichier_tex>
        <fichier_bib>bo</fichier_bib>
        <date_prod>2006-7-18</date_prod></production>
        
        <date_reception>2004-06-14</date_reception>
        <date_acceptation>2004-12-09</date_acceptation>
        <auteur>
        <prenom>Donald</prenom>
        <middlename>E.</middlename>
        <nom><hi rend='it'>Knuth</hi></nom>
        <adresse><TeX/> Users Group  P.O. Box 869 Santa Barbara, 
      __CA 93102-0869 USA</adresse>
        <mel>d.e.knuth@somewhere.on.the.net</mel>
        </auteur>
        <titre xml:lang='fr'>Coefficients Fourier pour fonctions 
      __<formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<msup><mi>L</mi> <mi>&infin;</mi> </msup></math></formula> simples</titre>
        <TeXtitre xml:lang='fr'>Coefficients Fourier pour fonctions 
      __<texmath type='inline'>L^\infty </texmath> simples</TeXtitre>
        <titre xml:lang='en'>Fourier coefficients for simple 
      __<formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<msup><mi>L</mi> <mi>&infin;</mi> </msup></math></formula> functions</titre>
        <TeXtitre xml:lang='en'>Fourier coefficients for simple 
      __<texmath type='inline'>L^\infty </texmath> functions</TeXtitre>
        <langue>en</langue>
        <resume xml:lang='en'>This is an abstract with a beautiful inline formula 
      __<formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<mrow><msub><mi>&lambda;</mi> <mi>n</mi> </msub><mrow><mo>(</mo>
      __<mi>&pi;</mi><mo>)</mo></mrow><mo>=</mo><mfrac><mi>N</mi> <mn>2</mn>
      __</mfrac><mi>n</mi><mo form='prefix'>log</mo><mi>n</mi><mo>+</mo><msub>
      __<mi>C</mi> <mn>1</mn> </msub><mrow><mo>(</mo><mi>&pi;</mi><mo>)
      __</mo><mi>n</mi><mo>+</mo><mi>O</mi><mo>(</mo></mrow><msqrt><mi>n</mi>
      __</msqrt><mrow><mo form='prefix'>log</mo><mi>n</mi><mo>)</mo></mrow>
      __</mrow></math></formula>, where <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mi>C</mi>
      __ <mn>1</mn> </msub><mrow><mo>(</mo><mi>&pi;</mi><mo>)</mo></mrow></mrow>
      __</math></formula> is a real-valued constant.
        </resume>
        <TEXresume xml:lang='en'>This is an abstract with a beautiful 
      __inline formula <texmath type='inline'>\lambda _n(\pi ) = \frac{N}{2} 
      __n \log n + C_1(\pi ) n +
      __  O(\sqrt{n}\log {n})</texmath>, where <texmath type='inline'>C_1(\pi )
      __</texmath> is a real-valued constant.
        </TEXresume>
        <resume xml:lang='fr'>Mon r�sum� avec ma formule
        <formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>
      __<mrow><msub><mi>&lambda;</mi> <mi>n</mi> </msub><mrow><mo>(</mo>
      __<mi>&pi;</mi><mo>)</mo></mrow><mo>=</mo><mfrac><mi>N</mi> <mn>2</mn>
      __</mfrac><mi>n</mi><mo form='prefix'>log</mo><mi>n</mi><mo>+</mo>
      __<msub><mi>C</mi> <mn>1</mn> </msub><mrow><mo>(</mo><mi>&pi;</mi><mo>)
      __</mo><mi>n</mi><mo>+</mo><mi>O</mi><mo>(</mo></mrow><msqrt><mi>n</mi>
      __</msqrt><mrow><mo form='prefix'>log</mo><mi>n</mi><mo>)</mo></mrow>
      __</mrow></math></formula>, o� <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub>
      __<mi>C</mi> <mn>1</mn> </msub><mrow><mo>(</mo><mi>&pi;</mi><mo>)</mo>
      __</mrow></mrow></math></formula> est une constante r�elle.
        </resume>
        <TEXresume xml:lang='fr'>Mon r�sum� avec ma formule
        <texmath type='inline'>\lambda _n(\pi ) = \frac{N}{2} n \log n 
      __+ C_1(\pi ) n +
        O(\sqrt{n}\log {n})</texmath>, o� 
      __<texmath type='inline'>C_1(\pi )</texmath> est une constante r�elle.
        </TEXresume>
        <motcle xml:lang='fr'>fonctions <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><msup><mi>L</mi> 
      __<mi>&infin;</mi> </msup></math></formula> simples, fonction lambda</motcle>
      __  <motcle xml:lang='en'>simple <formula type='inline'>
      __<math xmlns='http://www.w3.org/1998/Math/MathML'><msup>
      __<mi>L</mi> <mi>&infin;</mi> </msup></math></formula> functions, 
      __lambda function</motcle>
        <msc>11M26, 11M36, 11S40</msc>
        </article>
        <p/><biblio>
        <citation from='year' key='Bar03' id='bid0' userid='cite:Ba03' 
      __type='article'>
        <bauteurs><nom>Barnes</nom><prenom>E. W.</prenom>
      __<initiale>E. W.</initiale><particule/><junior/></bauteurs>
        <title>On the expression of Euler's constant as a definite integral</title>
        <bjournal>Messenger of Math.</bjournal>
        <bvolume>33</bvolume>
        <byear>1903</byear>
        <bpages>59&ndash;61</bpages>
        </citation>
        <citation from='year' key='Bom00' id='bid2' userid='cite:Bo99' 
      __type='article'>
        <bauteurs><nom>Bombieri</nom><prenom>E.</prenom>
      __<initiale>E.</initiale><particule/><junior/></bauteurs>
        <title>Remarks on Weil's quadratic functional in the theory of 
      __prime numbers&nbsp;I</title>
        <bjournal>Rend. Mat. Acc. Lincei, Ser.&nbsp;IX</bjournal>
        <bvolume>11</bvolume>
        <byear>2000</byear>
        <bpages>183&ndash;233</bpages>
        </citation>
        <citation from='year' key='BPY01' id='bid1' userid='cite:BPY01' 
      __type='article'>
        <bauteurs><nom>Biane</nom><prenom>P.</prenom><initiale>P.</initiale>
      __<particule/><junior/><nom>Pitman</nom><prenom>J.</prenom>
      __<initiale>J.</initiale><particule/><junior/><nom>Yor</nom>
      __<prenom>M.</prenom><initiale>M.</initiale><particule/><junior/></bauteurs>
        <title>Probability laws related to the Jacobi $\theta $ and 
      __Riemann $\zeta $ functions, and Brownian excursions</title>
        <bjournal>Bull. Amer. Math. Soc.</bjournal>
        <bvolume>38</bvolume>
        <byear>2001</byear>
        <bpages>435&ndash;465</bpages>
        </citation></biblio></cedram>

----

docs/titlepage-ex3.rst
----------------------

Examples of transcripts
=======================

First example file for the titlepage command

.. container:: log_out

   ::

      Trace of tralics 1.9t for file tpa.tex
      Start compilation: 29/1/2004 11:42:47
      Starting xml processing for tpa.
      <!-- S1 -->
      Trying config file from user specs:../config_tpa
      Read configuration file ../config_tpa.
      Configuration file has type \documentclass
      Seen \documentclass TPA
      <!-- S2 -->
      Potential type is TPA
      Defined type: default
      Defined type: TPA
      Defined type: unused
      Defined type: eurotex
      Using type TPA
      dtd is tpa from tpa.dtd (standard mode)
      Ok with the config file, dealing with the TeX file...
      <!-- S3 -->
      There are 38 lines
      Starting translation
      [1] %% Begin bootstrap commands for latex
      <!-- skip over bootstrap -->
      [21] %% End bootstrap commands for latex
      Defining \InsertTitlepage as \TitlePageCmd 0
         main <titlepage att1='foo' att2='foo2' a1='b1' a2='b2' -- from-tpa='ok' from_type='OK'/>
      Defining \AInsertTitlepage as \TitlePageCmd 1
         main <titlepage att1='foo' att2='foo2'  -- />
      Defining \title as \TitlePageCmd 2
         usual <title-element tea='tea-val'/>
      Defining \utitle as \TitlePageCmd 3
         usual <utitle-element tea='utea-val'/>
      Defining \author as \TitlePageCmd 4
         list <autL al = 'alval' bl = 'blval'/> and <aut auta='autaval'/>
      Defining \uauthor as \TitlePageCmd 5
         list <uautL al='alval' bl='blval'/> and <aut auta='autaval'/>
      Defining \Eabstract as \TitlePageCmd 6
         usual <abstract ab='AB1'/> (flags +par +env)
      Defining \eabstract as \TitlePageCmd 7
         usual <abstract ab='AB2'/> (flags +env)
      <!-- skip over 22 commands like these-->
      Defining \cmda as \TitlePageCmd 30
         usual <cmdA/> (flags +A)
      Defining \cmdb as \TitlePageCmd 31
         usual <cmdB/> (flags +B)
      [1] \cmdb{\cmdBval}<!--another insert-->
      ++ End of virtual file.
      Defining \cmdc as \TitlePageCmd 32
         usual <cmdC/> (flags +C)
      [1] \def\cmdAval{CMDA}
      {\def}
      {\def \cmdAval ->CMDA}
      Character sequence:  .
      [2] \def\cmdBval{\invalid}
      {\def}
      {\def \cmdBval ->\invalid }
      Character sequence:  .
      [3] \def\cmdCval{\invalid}
      {\def}
      {\def \cmdCval ->\invalid }
      Character sequence:  .
      [4] \documentclass{TPA}
      {\documentclass}
      {Push argument 1}
      Character sequence: TPA.
      {Text:TPA}
      {Pop 1: document_v argument_v}
      [1] \cmda{\cmdAval}<!-- Insert 1 -->
      {\titlepage 30}
      {\titlepage 30=\cmda}
      {Push cmdA 1}
      \cmdAval->CMDA
      Character sequence: CMDA.
      {Text:CMDA}
      {Pop 1: document_v cmdA_t}
      Character sequence:  .
      [88]   \def\recurse{\recurse\recurse}<!-- Insert 2 -->
      {\def}
      {\def \recurse ->\recurse \recurse }
      Character sequence:  .
      [5] \def\cmdAval{\invalid}<!-- A destroyed here -->
      {\def}
      {\def \cmdAval ->\invalid }
      Character sequence:  .
      [6] \def\Title{Titlepage customisation in Tralics}
      {\def}
      {\def \Title ->Titlepage customisation in Tralics}
      Character sequence:  .
      [7] 
      {\par}
      [8] 
      {\par}
      [9] \title{\Title}
      {\titlepage 2}
      {\titlepage 2=\title}
      {Push title-element 1}
      \Title->Titlepage customisation in Tralics
      Character sequence: Titlepage customisation in Tralics.
      {Text:Titlepage customisation in Tralics}
      {Pop 1: document_v title-element_t}
      Character sequence:  .
      [10] \author{Jos� Grimm}
      <!-- SKIP -->
      [20] \begin{Eabstract}
      {\begin}
      {\begin Eabstract}
      +stack: level + 2 for environment
      {\titlepage 6}
      {\titlepage 6=\Eabstract}
      [21] This is an abstract with \par some paragraphs in it\par ok ?
      [22] \end{Eabstract}
      {Push abstract 1}
      {Push p 2}
      Character sequence:  This is an abstract with .
      {\par}
      {Text:
      This is an abstract with }
      {Pop 2: document_v abstract_v p_v}
      {Push p 2}
      Character sequence: some paragraphs in it.
      {\par}
      {Text:some paragraphs in it}
      {Pop 2: document_v abstract_v p_v}
      {Push p 2}
      Character sequence: ok ? .
      {Text:ok ?
      }
      {Pop 2: document_v abstract_v p_v}
      {Pop 1: document_v abstract_v}
      {\end}
      {\end Eabstract}
      {\relax}
      {\endgroup (for env)}
      +stack: ending environment Eabstract; resuming document.
      +stack: level - 2 for environment
      <!-- end env... -->
      Character sequence:  .
      [23] 
      <!-- skip -->
      [31] \begin{document}
      {\begin}
      {\begin document}
      +stack: level + 2 for environment
      {\document}
      +stack: ending environment document; resuming document.
      +stack: level - 2 for environment
      +stack: level set to 1
      atbegindocumenthook= \cmdb {\cmdBval }<!-- document hook -->
      \par \let \AtBeginDocument \@notprerr 
      <!-- end of document hook -->
      {\titlepage 31}
      {\titlepage 31=\cmdb}
      {Push cmdB 1}
      \cmdBval->CMDB
      Character sequence: CMDB.
      {Text:CMDB}
      {Pop 1: document_v cmdB_t}
      <!-- skip -->
      [35] \InsertTitlepage
      {\titlepage 0}
      {\titlepage 0=\InsertTitlepage}
      Error signaled at line 35:
      No value given for command \cmdp.
      [1] \cmdc{\cmdCval}<!-- \cmdc is evaluated here -->
      ++ End of virtual file.
      {\titlepage 32}
      {\titlepage 32=\cmdc}
      <!-- SKIP -->
      [37] \end{document}
      {\end}
      {\end document}
      +stack: level + 2 for environment
      {\enddocument}
      {\endinput}
      {\enddocument}
      {Pop (module) 1: document_v p_v}
      {\endgroup (for env)}
      +stack: ending environment document; resuming document.
      +stack: level - 2 for environment
      Character sequence:  .
      {Text:
      }
      Seen 0 bibliographic entries
      <!-- SKIP -->

Second example file for the titlepage command.

.. container:: log_out

   ::

        1 Transcript file of tralics 2.8 for file bo.tex
        2 Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
        3 Tralics is licensed under the CeCILL Free Software Licensing Agreement
        4 Start compilation: 1/8/2006 10:58:10
        5 Starting xml processing for bo.
        6 Configuration file identification: standard $ Revision: 2.24 $
        7 Read configuration file /user/grimm/home/cvs/tralics/.tralics_rc.
        8 Configuration file has type \documentclass
        9 Seen \documentclass cedram
       10 Potential type is cedram
       11 Defined type: std
       12 Configuration file identification: cedram.tcf $ Revision: 1.1 $
       13 Read tcf file for type: cedram.tcf
       14 Using type cedram
       15 dtd is cedram from cedram.dtd (standard mode)
       16 Ok with the config file, dealing with the TeX file...
       17 There are 47 lines
       18 Starting translation
       19 {\countdef \m@ne=\count10}
       20 {\countdef \count@=\count255}
       21 {\countdef \c@page=\count0}
       22 {\dimendef \dimen@=\dimen0}
       23 {\dimendef \epsfxsize=\dimen11}
       24 {\dimendef \epsfysize=\dimen12}
       25 {\chardef \@ne=\char1}
       26 {\chardef \tw@=\char2}
       27 {\chardef \active=\char13}
       28 {\dimendef \z@=\dimen13}
       29 {\dimendef \oddsidemargin=\dimen14}
       30 {\dimendef \evensidemargin=\dimen15}
       31 {\dimendef \leftmargin=\dimen16}
       32 {\dimendef \rightmargin=\dimen17}
       33 {\dimendef \leftmargini=\dimen18}
       34 {\dimendef \leftmarginii=\dimen19}
       35 {\dimendef \leftmarginiii=\dimen20}
       36 {\dimendef \leftmarginiv=\dimen21}
       37 {\dimendef \leftmarginv=\dimen22}
       38 {\dimendef \leftmarginvi=\dimen23}
       39 {\dimendef \itemindent=\dimen24}
       40 {\dimendef \labelwidth=\dimen25}
       41 {\dimendef \fboxsep=\dimen26}
       42 {\dimendef \fboxrule=\dimen27}
       43 {\skipdef \itemsep=\skip11}
       44 {\skipdef \labelsep=\skip12}
       45 {\skipdef \parsep=\skip13}
       46 {\skipdef \fill=\skip14}
       47 {\countdef \c@bottomnumber=\count11}
       48 [1] %% Begin bootstrap commands for latex
       49 [2] \def\lq{`}\def\rq{'}\def\lbrack{[}\def\rbrack{]}%
       50 {\def}
       51 {\def \lq ->`}
       52 {\def}
       53 {\def \rq ->'}
       54 {\def}
       55 {\def \lbrack ->[}
       56 {\def}
       57 {\def \rbrack ->]}
       58 [3] \z@=0pt\m@ne=-1 \fboxsep = 3pt %
       59 {\dimen13}
       60 +scanint for \z@->0
       61 +scandimen for \z@ ->0.0pt
       62 {\count10}
       63 +scanint for \m@ne->-1
       64 {\dimen26}
       65 +scanint for \fboxsep->3
       66 +scandimen for \fboxsep ->3.0pt
       67 [4] \c@page=1 \fill = 0pt plus 1fill
       68 {\count0}
       69 +scanint for \c@page->1
       70 {\skip14}
       71 +scanint for \fill->0
       72 +scandimen for \fill ->0.0pt
       73 +scanint for \fill->1
       74 [5] \def\sloppypar{\par\sloppy}\def\endsloppypar{\par}%
       75 +scandimen for \fill ->1.0pt
       76 {scanglue 0.0pt plus 1.0fill}
       77 {\def}
       78 {\def \sloppypar ->\par \sloppy }
       79 {\def}
       80 {\def \endsloppypar ->\par }
       81 [6] {\catcode`\_=13\global\let_\_}%
       82 {begin-group character {}
       83 +stack: level + 2 for brace
       84 {\catcode}
       85 +scanint for \catcode->95
       86 +scanint for \catcode->13
       87 {\global}
       88 {\global\let}
       89 {\let _ \_}
       90 {end-group character }}
       91 +stack: restoring integer value 8 for \catcode95
       92 +stack: level - 2 for brace
       93 [7] {\catcode`\#=13\global\let#\#}%
       94 {begin-group character {}
       95 +stack: level + 2 for brace
       96 {\catcode}
       97 +scanint for \catcode->35
       98 +scanint for \catcode->13
       99 {\global}
      100 {\global\let}
      101 {\let # \#}
      102 {end-group character }}
      103 +stack: restoring integer value 6 for \catcode35
      104 +stack: level - 2 for brace
      105 [8] {\catcode`\&=13\global\def&{\char`&}}%
      106 {begin-group character {}
      107 +stack: level + 2 for brace
      108 {\catcode}
      109 +scanint for \catcode->38
      110 +scanint for \catcode->13
      111 {\global}
      112 {\global\def}
      113 {\def & ->\char `&}
      114 {end-group character }}
      115 +stack: restoring integer value 4 for \catcode38
      116 +stack: level - 2 for brace
      117 [9] \catcode`\~=13\def~{\nobreakspace}%
      118 {\catcode}
      119 +scanint for \catcode->126
      120 +scanint for \catcode->13
      121 {\def}
      122 {\def ~ ->\nobreakspace }
      123 [10] \def\null{\hbox{}}%
      124 {\def}
      125 {\def \null ->\hbox {}}
      126 [11] \def\urlfont{}%
      127 {\def}
      128 {\def \urlfont ->}
      129 [12] \newenvironment{cases}{\left\{\begin{array}{ll}}{\end{array}\right.}%
      130 {\newenvironment}
      131 {\newenvironment cases}
      132 [13] \def\binom{\genfrac()\z@{}}\def\dbinom{\genfrac(){0pt}0}\def\tbinom{\genfrac(){0pt}1}%
      133 {\def}
      134 {\def \binom ->\genfrac ()\z@ {}}
      135 {\def}
      136 {\def \dbinom ->\genfrac (){0pt}0}
      137 {\def}
      138 {\def \tbinom ->\genfrac (){0pt}1}
      139 [14] \def\space{ }
      140 {\def}
      141 {\def \space -> }
      142 [15] \def\thinspace{ }%
      143 {\def}
      144 {\def \thinspace -> }
      145 [16] \long\def \@gobble #1{}\long\def \@gobbletwo #1#2{}
      146 {\long}
      147 {\long\def}
      148 {\def \@gobble #1->}
      149 {\long}
      150 {\long\def}
      151 {\def \@gobbletwo #1#2->}
      152 [17] \def\markboth#1#2{\gdef\@themark{{#1}}\mark{{#1}{#2}}}
      153 {\def}
      154 {\def \markboth #1#2->\gdef \@themark {{#1}}\mark {{#1}{#2}}}
      155 [18] \def\markright#1{\expandafter\markboth\@themark{#1}}
      156 {\def}
      157 {\def \markright #1->\expandafter \markboth \@themark {#1}}
      158 [19] \def\xscale{1.0}\def\yscale{1.0}\def\xscaley{0.0}\def\yscalex{0.0}
      159 {\def}
      160 {\def \xscale ->1.0}
      161 {\def}
      162 {\def \yscale ->1.0}
      163 {\def}
      164 {\def \xscaley ->0.0}
      165 {\def}
      166 {\def \yscalex ->0.0}
      167 [20] \def\@height{height} \def\@depth{depth} \def\@width{width}
      168 {\def}
      169 {\def \@height ->height}
      170 {\def}
      171 {\def \@depth ->depth}
      172 {\def}
      173 {\def \@width ->width}
      174 [21] \def\@minus{minus}\def\@plus{plus}\def\hb@xt@{\hbox to}
      175 {\def}
      176 {\def \@minus ->minus}
      177 {\def}
      178 {\def \@plus ->plus}
      179 {\def}
      180 {\def \hb@xt@ ->\hbox to}
      181 [22] \def\stretch#1{\z@ \@plus #1fill\relax}
      182 {\def}
      183 {\def \stretch #1->\z@ \@plus #1fill\relax }
      184 [23] \theoremstyle{plain}\theoremheaderfont{\bfseries}
      185 {\theoremstyle}
      186 {\theoremheaderfont}
      187 [24] \def\@namedef#1{\expandafter\def\csname #1\endcsname}
      188 {\def}
      189 {\def \@namedef #1->\expandafter \def \csname #1\endcsname }
      190 [25] \def\@nameuse#1{\csname #1\endcsname}
      191 {\def}
      192 {\def \@nameuse #1->\csname #1\endcsname }
      193 [26] \def\I{I}\def\J{J}
      194 {\def}
      195 {\def \I ->I}
      196 {\def}
      197 {\def \J ->J}
      198 [27] \def\cl@page{}
      199 {\def}
      200 {\def \cl@page ->}
      201 [28] \def\thepage{\@arabic\c@page}
      202 {\def}
      203 {\def \thepage ->\@arabic \c@page }
      204 [29] \def\@roman#1{\romannumeral#1}\def\@Roman#1{\Romannumeral#1}
      205 {\def}
      206 {\def \@roman #1->\romannumeral #1}
      207 {\def}
      208 {\def \@Roman #1->\Romannumeral #1}
      209 [30] \def\mod#1{~\@mod\;#1}
      210 {\def}
      211 {\def \mod #1->~\@mod \;#1}
      212 [31] \def\bmod#1{\;\@mod\;#1}
      213 {\def}
      214 {\def \bmod #1->\;\@mod \;#1}
      215 [32] \def\pmod#1{\pod{\@mod\; #1}}
      216 {\def}
      217 {\def \pmod #1->\pod {\@mod \; #1}}
      218 [33] \def\pod#1{~(#1)}
      219 {\def}
      220 {\def \pod #1->~(#1)}
      221 [34] \newcommand\bottomfraction{.3}
      222 {\newcommand}
      223 {\newcommand \bottomfraction}
      224 [35] \newcount\c@topnumber\newcommand\topfraction{.7}
      225 {\newcount}
      226 {\countdef \c@topnumber=\count12}
      227 {\newcommand}
      228 {\newcommand \topfraction}
      229 [36] \def\date#1{\xmlelt{date}{#1}}
      230 {\def}
      231 {\def \date #1->\xmlelt {date}{#1}}
      232 [37] \newcounter{enumi}\newcounter{enumii}\newcounter{enumiii}\newcounter{enumiv}
      233 {\newcounter}
      234 {\countdef \c@enumi=\count13}
      235 {\newcounter}
      236 {\countdef \c@enumii=\count14}
      237 {\newcounter}
      238 {\countdef \c@enumiii=\count15}
      239 {\newcounter}
      240 {\countdef \c@enumiv=\count16}
      241 [38] \newcommand\labelitemi{\textbullet}
      242 {\newcommand}
      243 {\newcommand \labelitemi}
      244 [39] \newcommand\labelitemii{\normalfont\bfseries \textendash}
      245 {\newcommand}
      246 {\newcommand \labelitemii}
      247 [40] \newcommand\labelitemiii{\textasteriskcentered}
      248 {\newcommand}
      249 {\newcommand \labelitemiii}
      250 [41] \newcommand\labelitemiv{\textperiodcentered}
      251 {\newcommand}
      252 {\newcommand \labelitemiv}
      253 [42] \newcounter {part}\newcounter {chapter}
      254 {\newcounter}
      255 {\countdef \c@part=\count17}
      256 {\newcounter}
      257 {\countdef \c@chapter=\count18}
      258 [43] \newcounter {section}[chapter]\newcounter{subsection}[section]
      259 {\newcounter}
      260 {\countdef \c@section=\count19}
      261 {newcounter_opt}
      262 {newcounter_opt->\cl@chapter}
      263 \cl@chapter ->
      264 {\newcounter}
      265 {\countdef \c@subsection=\count20}
      266 {newcounter_opt}
      267 {newcounter_opt->\cl@section}
      268 \cl@section ->
      269 [44] \newcounter {subsubsection}[subsection]
      270 {\newcounter}
      271 {\countdef \c@subsubsection=\count21}
      272 {newcounter_opt}
      273 {newcounter_opt->\cl@subsection}
      274 \cl@subsection ->
      275 [45] \newcounter {paragraph}[subsubsection]
      276 {\newcounter}
      277 {\countdef \c@paragraph=\count22}
      278 {newcounter_opt}
      279 {newcounter_opt->\cl@subsubsection}
      280 \cl@subsubsection ->
      281 [46] \newcounter {subparagraph}[paragraph]
      282 {\newcounter}
      283 {\countdef \c@subparagraph=\count23}
      284 {newcounter_opt}
      285 {newcounter_opt->\cl@paragraph}
      286 \cl@paragraph ->
      287 [47] \def\refname{Bibliography}\def\footcitesep{, }\def\citepunct{, }
      288 {\def}
      289 {\def \refname ->Bibliography}
      290 {\def}
      291 {\def \footcitesep ->, }
      292 {\def}
      293 {\def \citepunct ->, }
      294 [48] \newcommand\newblock{\hskip .11em plus.33em minus.07em}
      295 {\newcommand}
      296 {\newcommand \newblock}
      297 [49] \def\choose{\atopwithdelims()}
      298 {\def}
      299 {\def \choose ->\atopwithdelims ()}
      300 [50] \def\shoveleft{\multicolumn{1}{l}}
      301 {\def}
      302 {\def \shoveleft ->\multicolumn {1}{l}}
      303 [51] \def\shoveright{\multicolumn{1}{r}}
      304 {\def}
      305 {\def \shoveright ->\multicolumn {1}{r}}
      306 [52] \long\def\@firstoftwo#1#2{#1}\long\def\@secondoftwo#1#2{#2}
      307 {\long}
      308 {\long\def}
      309 {\def \@firstoftwo #1#2->#1}
      310 {\long}
      311 {\long\def}
      312 {\def \@secondoftwo #1#2->#2}
      313 [53] 
      314 {\par}
      315 [54] %% End bootstrap commands for latex
      316 ++ Input stack empty at end of file
      317 Defining \maketitle as \TitlePageCmd 0
      318    main <article  -- 'only title page' 'translate also bibliography'/>
      319 Inserting the command \getproduction
      320 Inserting the command \getid
      321 Defining \daterecieved as \TitlePageCmd 3
      322    usual <date_reception/>
      323 Defining \dateaccepted as \TitlePageCmd 4
      324    usual <date_acceptation/>
      325 Inserting the string <auteur>
      326 Defining \firstname as \TitlePageCmd 6
      327    usual <prenom/>
      328 Defining \middlename as \TitlePageCmd 7
      329    usual <middlename/>
      330 Defining \lastname as \TitlePageCmd 8
      331    usual <nom/>
      332 Defining \address as \TitlePageCmd 9
      333    usual <adresse/> (flags -par)
      334 Defining \email as \TitlePageCmd 10
      335    usual <mel/>
      336 Inserting the string </auteur>
      337 Defining \Ctitle as \TitlePageCmd 12
      338    usual <titre xml:lang='fr'/>
      339 Defining \Dtitle as \TitlePageCmd 13
      340    usual <TeXtitre xml:lang='fr'/>
      341 Defining \Atitle as \TitlePageCmd 14
      342    usual <titre xml:lang='en'/>
      343 Defining \Btitle as \TitlePageCmd 15
      344    usual <TeXtitre xml:lang='en'/>
      345 Defining \currentlanguage as \TitlePageCmd 16
      346    usual <langue/>
      347 Defining \Aabstract as \TitlePageCmd 17
      348    usual <resume xml:lang='en' /> (flags +env)
      349 Defining \Babstract as \TitlePageCmd 18
      350    usual <TEXresume xml:lang='en' /> (flags +env)
      351 Defining \Cabstract as \TitlePageCmd 19
      352    usual <resume xml:lang='fr' /> (flags +env)
      353 Defining \Dabstract as \TitlePageCmd 20
      354    usual <TEXresume xml:lang='fr' /> (flags +env)
      355 Defining \altkeywords as \TitlePageCmd 21
      356    usual <motcle xml:lang='fr'/>
      357 Defining \keywords as \TitlePageCmd 22
      358    usual <motcle xml:lang='en' />
      359 Defining \subjclass as \TitlePageCmd 23
      360    usual <msc/>
      361 [39]   \let\author\relax
      362 {\let}
      363 {\let \author \relax}
      364 [40]   \def\getproduction{\xbox{production}{
      365 {\def}
      366 [41]    \xbox{fichier\_tex}{\jobname}
      367 [42]    \xbox{fichier\_bib}{\jobname}
      368 [43]    \xbox{date\_prod}{\the\year-\the\month-\the\day}}}
      369 {\def \getproduction ->\xbox {production}{
      370 \xbox {fichier\_tex}{\jobname }
      371 \xbox {fichier\_bib}{\jobname }
      372 \xbox {date\_prod}{\the \year -\the \month -\the \day }}}
      373 [44]   \makeatletter
      374 {\makeatletter}
      375 [45]   \def\title{\@reevaluate\Atitle\Btitle}
      376 {\def}
      377 {\def \title ->\@reevaluate \Atitle \Btitle }
      378 [46]   \def\abstract{\@reevaluate*{Aabstract}{Babstract}}
      379 {\def}
      380 {\def \abstract ->\@reevaluate *{Aabstract}{Babstract}}
      381 [47]   \def\altabstract{\@reevaluate*{Cabstract}{Dabstract}}
      382 {\def}
      383 {\def \altabstract ->\@reevaluate *{Cabstract}{Dabstract}}
      384 [48]   \def\Btitle@helper{\@nomathml=-1 }
      385 {\def}
      386 {\def \Btitle@helper ->\@nomathml =-1 }
      387 [49]   \def\Dtitle@helper{\@nomathml=-1 }
      388 {\def}
      389 {\def \Dtitle@helper ->\@nomathml =-1 }
      390 [50]   \def\Babstract@helper{\@nomathml=-1 }
      391 {\def}
      392 {\def \Babstract@helper ->\@nomathml =-1 }
      393 [51]   \def\Dabstract@helper{\@nomathml=-1 }
      394 {\def}
      395 {\def \Dabstract@helper ->\@nomathml =-1 }
      396 [52]   \def\alttitle{\@reevaluate\Ctitle\Dtitle}
      397 {\def}
      398 {\def \alttitle ->\@reevaluate \Ctitle \Dtitle }
      399 [53]    % for the biblio
      400 [54]    \renewcommand\bpers[5][\undefined]{%
      401 {\renewcommand}
      402 {\newcommand \bpers}
      403 [55]    \xbox{nom}{#4}%
      404 [56]  \ifx#1\undefined\xbox{prenom}{#2}\else\xbox{prenom}{#1}\xbox{initiale}{#2}\fi
      405 [57]  \xbox{particule}{#3}%
      406 [58]  \def\tmp{#1\undefined}\ifx\tmp\undefined\else
      407 [59]  \xbox{junior}{#5}\fi}
      408 [60]   \def\lastname@hook#1{\textit{#1}}
      409 {\def}
      410 {\def \lastname@hook #1->\textit {#1}}
      411 [61]   \expandafter\def\csname cititem-btitle\endcsname{%
      412 {\expandafter \def \csname}
      413 {\csname}
      414 {\csname->\cititem-btitle}
      415 {\def}
      416 [62]     \bgroup\catcode `\$=12 \@nomathml=1 \citembtitle}
      417 {\def \cititem-btitle ->\bgroup \catcode `\$=12 \@nomathml =1 \citembtitle }
      418 [63]      \def\citembtitle#1{\xbox{title}{#1}\egroup\@addnl}
      419 {\def}
      420 {\def \citembtitle #1->\xbox {title}{#1}\egroup \@addnl }
      421 [65]   \let\nfrac\dfrac
      422 {\let}
      423 {\let \nfrac \dfrac}
      424 [66]   \let\pfrac\dfrac
      425 {\let}
      426 {\let \pfrac \dfrac}
      427 [67]   \newtheorem{theorem}{Theorem}
      428 {\newtheorem}
      429 {\newtheorem theorem}
      430 [68]   \newtheorem{proof}{Proof}
      431 {\let \endtheorem \@endtheorem}
      432 {\let \thetheorem \relax}
      433 {\def \theorem ->\@begintheorem {Theorem}\thetheorem {}{theorem}{theorem}{plain}}
      434 {\countdef \c@theorem=\count24}
      435 {\def \thetheorem ->\arabic {theorem}}
      436 {\relax}
      437 {\newtheorem}
      438 {\newtheorem proof}
      439 [69]   \newtheorem{lemma}{Lemma}
      440 {\let \endproof \@endtheorem}
      441 {\let \theproof \relax}
      442 {\def \proof ->\@begintheorem {Proof}\theproof {}{proof}{proof}{plain}}
      443 {\countdef \c@proof=\count25}
      444 {\def \theproof ->\arabic {proof}}
      445 {\relax}
      446 {\newtheorem}
      447 {\newtheorem lemma}
      448 [70]   \newtheorem{rema*}{Remark}
      449 {\let \endlemma \@endtheorem}
      450 {\let \thelemma \relax}
      451 {\def \lemma ->\@begintheorem {Lemma}\thelemma {}{lemma}{lemma}{plain}}
      452 {\countdef \c@lemma=\count26}
      453 {\def \thelemma ->\arabic {lemma}}
      454 {\relax}
      455 {\newtheorem}
      456 {\newtheorem rema*}
      457 [71]   \newtheorem{remas*}{Remarks}
      458 {\let \endrema* \@endtheorem}
      459 {\let \therema* \relax}
      460 {\def \rema* ->\@begintheorem {Remark}\therema* {}{rema*}{rema*}{plain}}
      461 {\countdef \c@rema*=\count27}
      462 {\def \therema* ->\arabic {rema*}}
      463 {\relax}
      464 {\newtheorem}
      465 {\newtheorem remas*}
      466 [72]   \newtheorem{defi}{Definition}
      467 {\let \endremas* \@endtheorem}
      468 {\let \theremas* \relax}
      469 {\def \remas* ->\@begintheorem {Remarks}\theremas* {}{remas*}{remas*}{plain}}
      470 {\countdef \c@remas*=\count28}
      471 {\def \theremas* ->\arabic {remas*}}
      472 {\relax}
      473 {\newtheorem}
      474 {\newtheorem defi}
      475 [73]   \let \tn\text
      476 {\let \enddefi \@endtheorem}
      477 {\let \thedefi \relax}
      478 {\def \defi ->\@begintheorem {Definition}\thedefi {}{defi}{defi}{plain}}
      479 {\countdef \c@defi=\count29}
      480 {\def \thedefi ->\arabic {defi}}
      481 {\relax}
      482 {\let}
      483 {\let \tn \text}
      484 [74]   \let\appendix\relax
      485 {\let}
      486 {\let \appendix \relax}
      487 [75]   \let\notag\relax
      488 {\let}
      489 {\let \notag \relax}
      490 [76]   \def\sideset#1#2{}
      491 {\def}
      492 {\def \sideset #1#2->}
      493 [77]   \makeatother
      494 {\makeatother}
      495 [1] \documentclass[AIF]{cedram}
      496 {\documentclass}
      497 {Push argument 1}
      498 Character sequence: AIF.
      499 {Text:AIF}
      500 {Pop 1: document_v argument_v}
      501 {Push argument 1}
      502 Character sequence: cedram.
      503 {Text:cedram}
      504 {Pop 1: document_v argument_v}
      505 [2] 
      506 {\par}
      507 [3] \begin{document}
      508 {\begin}
      509 {\begin document}
      510 +stack: level + 2 for environment
      511 {\document}
      512 +stack: ending environment document; resuming document.
      513 +stack: level - 2 for environment
      514 +stack: level set to 1
      515 ++ Input stack ++ 1 (AtBeginDocument hook)
      516 [1] \let\do\noexpand\ignorespaces
      517 ++ End of virtual file.
      518 ++ Input stack -- 1 (AtBeginDocument hook)
      519 atbegindocumenthook= \let \AtBeginDocument \@notprerr \let \do \noexpand \ignorespaces 
      520 {\let}
      521 {\let \AtBeginDocument \@notprerr}
      522 {\let}
      523 {\let \do \noexpand}
      524 {\ignorespaces}
      525 [4] 
      526 {\par}
      527 [5] \title{Fourier coefficients for simple $L^\infty$ functions}
      528 \title ->\@reevaluate \Atitle \Btitle 
      529 {\@reevaluate}
      530 {Reeval: \Atitle {Fourier coefficients for simple $L^\infty$ functions}%
      531 \Btitle {Fourier coefficients for simple $L^\infty$ functions}%
      532 }
      533 ++ Input stack ++ 1 (reevaluate)
      534 [1] \Atitle {Fourier coefficients for simple $L^\infty$ functions}%
      535 {(Unknown)}
      536 {\titlepage 14}
      537 {\titlepage 14=\Atitle}
      538 {Push titre 1}
      539 +stack: level = 1 for titlepage argument
      540 Character sequence: Fourier coefficients for simple .
      541 {math shift character $}
      542 {Text:Fourier coefficients for simple }
      543 +stack: level + 2 for math
      544 +stack: level - 2 for math
      545 Math: $L^\infty $
      546 Character sequence:  functions.
      547 {end-group character }}
      548 +stack: level - 2 for titlepage argument
      549 {Text: functions}
      550 {Pop 1: document_v titre_t}
      551 [2] \Btitle {Fourier coefficients for simple $L^\infty$ functions}%
      552 {(Unknown)}
      553 {\titlepage 15}
      554 {\titlepage 15=\Btitle}
      555 {Push TeXtitre 1}
      556 +stack: level = 1 for titlepage argument
      557 +stack: level + 2 (spec)
      558 \Btitle@helper ->\@nomathml =-1 
      559 {\@nomathml}
      560 +scanint for \@nomathml->-1
      561 Character sequence: Fourier coefficients for simple .
      562 {math shift character $}
      563 {Text:Fourier coefficients for simple }
      564 +stack: level + 3 for math
      565 +stack: level - 3 for math
      566 Math: $L^\infty $
      567 Character sequence:  functions.
      568 {end-group character }}
      569 +stack: restoring integer value 0 for \@nomathml
      570 +stack: level - 3 for titlepage argument
      571 {Text: functions}
      572 +stack: level - 2 (spec)
      573 {Pop 1: document_v TeXtitre_t}
      574 ++ End of virtual file.
      575 ++ Input stack -- 1 (reevaluate)
      576 [6] \alttitle{Coefficients Fourier pour fonctions  $L^\infty$ simples}
      577 \alttitle ->\@reevaluate \Ctitle \Dtitle 
      578 {\@reevaluate}
      579 {Reeval: \Ctitle {Coefficients Fourier pour fonctions  $L^\infty$ simples}%
      580 \Dtitle {Coefficients Fourier pour fonctions  $L^\infty$ simples}%
      581 }
      582 ++ Input stack ++ 1 (reevaluate)
      583 [1] \Ctitle {Coefficients Fourier pour fonctions  $L^\infty$ simples}%
      584 {(Unknown)}
      585 {\titlepage 12}
      586 {\titlepage 12=\Ctitle}
      587 {Push titre 1}
      588 +stack: level = 1 for titlepage argument
      589 Character sequence: Coefficients Fourier pour fonctions .
      590 {math shift character $}
      591 {Text:Coefficients Fourier pour fonctions }
      592 +stack: level + 2 for math
      593 +stack: level - 2 for math
      594 Math: $L^\infty $
      595 Character sequence:  simples.
      596 {end-group character }}
      597 +stack: level - 2 for titlepage argument
      598 {Text: simples}
      599 {Pop 1: document_v titre_t}
      600 [2] \Dtitle {Coefficients Fourier pour fonctions  $L^\infty$ simples}%
      601 {(Unknown)}
      602 {\titlepage 13}
      603 {\titlepage 13=\Dtitle}
      604 {Push TeXtitre 1}
      605 +stack: level = 1 for titlepage argument
      606 +stack: level + 2 (spec)
      607 \Dtitle@helper ->\@nomathml =-1 
      608 {\@nomathml}
      609 +scanint for \@nomathml->-1
      610 Character sequence: Coefficients Fourier pour fonctions .
      611 {math shift character $}
      612 {Text:Coefficients Fourier pour fonctions }
      613 +stack: level + 3 for math
      614 +stack: level - 3 for math
      615 Math: $L^\infty $
      616 Character sequence:  simples.
      617 {end-group character }}
      618 +stack: restoring integer value 0 for \@nomathml
      619 +stack: level - 3 for titlepage argument
      620 {Text: simples}
      621 +stack: level - 2 (spec)
      622 {Pop 1: document_v TeXtitre_t}
      623 ++ End of virtual file.
      624 ++ Input stack -- 1 (reevaluate)
      625 [7] \author{\firstname{Donald} \middlename{E.} \lastname{Knuth}}
      626 {\relax}
      627 {begin-group character {}
      628 +stack: level + 2 for brace
      629 {(Unknown)}
      630 {\titlepage 6}
      631 {\titlepage 6=\firstname}
      632 {Push prenom 1}
      633 +stack: level = 2 for titlepage argument
      634 Character sequence: Donald.
      635 {end-group character }}
      636 +stack: level - 3 for titlepage argument
      637 {Text:Donald}
      638 {Pop 1: document_v prenom_t}
      639 {(Unknown)}
      640 {\titlepage 7}
      641 {\titlepage 7=\middlename}
      642 {Push middlename 1}
      643 +stack: level = 2 for titlepage argument
      644 Character sequence: E..
      645 {end-group character }}
      646 +stack: level - 3 for titlepage argument
      647 {Text:E.}
      648 {Pop 1: document_v middlename_t}
      649 {(Unknown)}
      650 {\titlepage 8}
      651 {\titlepage 8=\lastname}
      652 {Push nom 1}
      653 +stack: level = 2 for titlepage argument
      654 \lastname@hook #1->\textit {#1}
      655 #1<-Knuth
      656 {\textit}
      657 +stack: level + 3 for brace
      658 {font change \itshape}
      659 Character sequence: Knuth.
      660 {end-group character }}
      661 {Text:Knuth}
      662 {font restore }
      663 +stack: level - 3 for brace
      664 {end-group character }}
      665 +stack: level - 3 for titlepage argument
      666 {Pop 1: document_v nom_t}
      667 {end-group character }}
      668 +stack: level - 2 for brace
      669 [8] 
      670 {\par}
      671 [9] \address{\TeX\ Users Group \\P.O. Box 869\\
      672 {(Unknown)}
      673 {\titlepage 9}
      674 {\titlepage 9=\address}
      675 {Push adresse 1}
      676 +stack: level = 1 for titlepage argument
      677 {\TeX}
      678 {\ }
      679 Character sequence: Users Group .
      680 {\\}
      681 {Text:<TeX/> Users Group }
      682 Character sequence:  P.O. Box 869.
      683 {\\}
      684 {Text: P.O. Box 869}
      685 [10] Santa Barbara, CA 93102-0869 USA}
      686 Character sequence:  Santa Barbara, CA 93102-0869 USA.
      687 {end-group character }}
      688 +stack: level - 2 for titlepage argument
      689 {Text: Santa Barbara, CA 93102-0869 USA}
      690 {Pop 1: document_v adresse_t}
      691 [11] 
      692 {\par}
      693 [12] \email{d.e.knuth@somewhere.on.the.net}
      694 {(Unknown)}
      695 {\titlepage 10}
      696 {\titlepage 10=\email}
      697 {Push mel 1}
      698 +stack: level = 1 for titlepage argument
      699 Character sequence: d.e.knuth@somewhere.on.the.net.
      700 {end-group character }}
      701 +stack: level - 2 for titlepage argument
      702 {Text:d.e.knuth@somewhere.on.the.net}
      703 {Pop 1: document_v mel_t}
      704 [13] 
      705 {\par}
      706 [14] \subjclass{11M26,  11M36, 11S40}
      707 {(Unknown)}
      708 {\titlepage 23}
      709 {\titlepage 23=\subjclass}
      710 {Push msc 1}
      711 +stack: level = 1 for titlepage argument
      712 Character sequence: 11M26, 11M36, 11S40.
      713 {end-group character }}
      714 +stack: level - 2 for titlepage argument
      715 {Text:11M26, 11M36, 11S40}
      716 {Pop 1: document_v msc_t}
      717 [15] 
      718 {\par}
      719 [16] \keywords{simple $L^\infty$ functions, lambda function}
      720 {(Unknown)}
      721 {\titlepage 22}
      722 {\titlepage 22=\keywords}
      723 {Push motcle 1}
      724 +stack: level = 1 for titlepage argument
      725 Character sequence: simple .
      726 {math shift character $}
      727 {Text:simple }
      728 +stack: level + 2 for math
      729 +stack: level - 2 for math
      730 Math: $L^\infty $
      731 Character sequence:  functions, lambda function.
      732 {end-group character }}
      733 +stack: level - 2 for titlepage argument
      734 {Text: functions, lambda function}
      735 {Pop 1: document_v motcle_t}
      736 [17] 
      737 {\par}
      738 [18] \altkeywords{fonctions  $L^\infty$ simples, fonction lambda}
      739 {(Unknown)}
      740 {\titlepage 21}
      741 {\titlepage 21=\altkeywords}
      742 {Push motcle 1}
      743 +stack: level = 1 for titlepage argument
      744 Character sequence: fonctions .
      745 {math shift character $}
      746 {Text:fonctions }
      747 +stack: level + 2 for math
      748 +stack: level - 2 for math
      749 Math: $L^\infty $
      750 Character sequence:  simples, fonction lambda.
      751 {end-group character }}
      752 +stack: level - 2 for titlepage argument
      753 {Text: simples, fonction lambda}
      754 {Pop 1: document_v motcle_t}
      755 [19] 
      756 {\par}
      757 [20] \daterecieved{2004-06-14}%{14 juin 2004}
      758 {(Unknown)}
      759 {\titlepage 3}
      760 {\titlepage 3=\daterecieved}
      761 {Push date_reception 1}
      762 +stack: level = 1 for titlepage argument
      763 Character sequence: 2004-06-14.
      764 {end-group character }}
      765 +stack: level - 2 for titlepage argument
      766 {Text:2004-06-14}
      767 {Pop 1: document_v date_reception_t}
      768 [21] \dateaccepted{2004-12-09}%{9 d�cembre 2004}
      769 {(Unknown)}
      770 {\titlepage 4}
      771 {\titlepage 4=\dateaccepted}
      772 {Push date_acceptation 1}
      773 +stack: level = 1 for titlepage argument
      774 Character sequence: 2004-12-09.
      775 {end-group character }}
      776 +stack: level - 2 for titlepage argument
      777 {Text:2004-12-09}
      778 {Pop 1: document_v date_acceptation_t}
      779 [22] 
      780 {\par}
      781 [23] \begin{abstract}
      782 {\begin}
      783 {\begin abstract}
      784 +stack: level + 2 for environment
      785 \abstract ->\@reevaluate *{Aabstract}{Babstract}
      786 {\@reevaluate}
      787 [24]   This is an abstract with a beautiful inline formula % Comment!
      788 [25]   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      789 [26]    O(\sqrt{n}\log{n})$, where $C_1(\pi)$ is a real-valued constant.
      790 [27] \end{abstract}
      791 +stack: ending environment abstract; resuming document.
      792 +stack: level - 2 for environment
      793 {Reeval: \begin{Aabstract}This is an abstract with a beautiful inline formula % Comment!
      794   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      795    O(\sqrt{n}\log{n})$, where $C_1(\pi)$ is a real-valued constant.
      796 \end{Aabstract}%
      797 \begin{Babstract}This is an abstract with a beautiful inline formula % Comment!
      798   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      799    O(\sqrt{n}\log{n})$, where $C_1(\pi)$ is a real-valued constant.
      800 \end{Babstract}%
      801 }
      802 ++ Input stack ++ 1 (reevaluate)
      803 [1] \begin{Aabstract}This is an abstract with a beautiful inline formula % Comment!
      804 {\begin}
      805 {\begin Aabstract}
      806 +stack: level + 2 for environment
      807 {(Unknown)}
      808 {\titlepage 17}
      809 {\titlepage 17=\Aabstract}
      810 {Push resume 1}
      811 +stack: level = 2 for titlepage argument
      812 Character sequence: This is an abstract with a beautiful inline formula .
      813 [2]   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      814 {math shift character $}
      815 {Text:This is an abstract with a beautiful inline formula }
      816 +stack: level + 3 for math
      817 +stack: level + 4 for math
      818 +stack: level - 4 for math
      819 +stack: level + 4 for math
      820 +stack: level - 4 for math
      821 [3]    O(\sqrt{n}\log{n})$, where $C_1(\pi)$ is a real-valued constant.
      822 +stack: level + 4 for math
      823 +stack: level - 4 for math
      824 +stack: level + 4 for math
      825 +stack: level - 4 for math
      826 +stack: level - 3 for math
      827 Math: $\lambda _n(\pi ) = \frac {N}{2} n \log n + C_1(\pi ) n +
      828 O(\sqrt {n}\log {n})$
      829 Realloc xml math table to 20
      830 Realloc xml math table to 40
      831 Character sequence: , where .
      832 {math shift character $}
      833 {Text:, where }
      834 +stack: level + 3 for math
      835 +stack: level - 3 for math
      836 Math: $C_1(\pi )$
      837 Character sequence:  is a real-valued constant. .
      838 [4] \end{Aabstract}%
      839 {\end}
      840 {Text: is a real-valued constant.
      841 }
      842 {\end Aabstract}
      843 +stack: level - 2 for titlepage argument
      844 +stack: ending environment Aabstract; resuming document.
      845 +stack: level - 1 for environment
      846 {Pop 1: document_v resume_t}
      847 [5] \begin{Babstract}This is an abstract with a beautiful inline formula % Comment!
      848 {\begin}
      849 {\begin Babstract}
      850 +stack: level + 2 for environment
      851 {(Unknown)}
      852 {\titlepage 18}
      853 {\titlepage 18=\Babstract}
      854 {Push TEXresume 1}
      855 +stack: level = 2 for titlepage argument
      856 \Babstract@helper ->\@nomathml =-1 
      857 {\@nomathml}
      858 +scanint for \@nomathml->-1
      859 Character sequence: This is an abstract with a beautiful inline formula .
      860 [6]   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      861 {math shift character $}
      862 {Text:This is an abstract with a beautiful inline formula }
      863 +stack: level + 3 for math
      864 +stack: level + 4 for math
      865 +stack: level - 4 for math
      866 +stack: level + 4 for math
      867 +stack: level - 4 for math
      868 [7]    O(\sqrt{n}\log{n})$, where $C_1(\pi)$ is a real-valued constant.
      869 +stack: level + 4 for math
      870 +stack: level - 4 for math
      871 +stack: level + 4 for math
      872 +stack: level - 4 for math
      873 +stack: level - 3 for math
      874 Math: $\lambda _n(\pi ) = \frac {N}{2} n \log n + C_1(\pi ) n +
      875 O(\sqrt {n}\log {n})$
      876 Character sequence: , where .
      877 {math shift character $}
      878 {Text:, where }
      879 +stack: level + 3 for math
      880 +stack: level - 3 for math
      881 Math: $C_1(\pi )$
      882 Character sequence:  is a real-valued constant. .
      883 [8] \end{Babstract}%
      884 {\end}
      885 {Text: is a real-valued constant.
      886 }
      887 {\end Babstract}
      888 +stack: restoring integer value 0 for \@nomathml
      889 +stack: level - 2 for titlepage argument
      890 +stack: ending environment Babstract; resuming document.
      891 +stack: level - 1 for environment
      892 {Pop 1: document_v TEXresume_t}
      893 ++ End of virtual file.
      894 ++ Input stack -- 1 (reevaluate)
      895 [28] 
      896 {\par}
      897 [29] 
      898 {\par}
      899 [30] \begin{altabstract}
      900 {\begin}
      901 {\begin altabstract}
      902 +stack: level + 2 for environment
      903 \altabstract ->\@reevaluate *{Cabstract}{Dabstract}
      904 {\@reevaluate}
      905 [31]   Mon r�sum� avec ma formule
      906 [32]   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      907 [33]    O(\sqrt{n}\log{n})$, o� $C_1(\pi)$ est une constante r�elle.
      908 [34] \end{altabstract}
      909 +stack: ending environment altabstract; resuming document.
      910 +stack: level - 2 for environment
      911 {Reeval: \begin{Cabstract}Mon r�sum� avec ma formule
      912   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      913    O(\sqrt{n}\log{n})$, o� $C_1(\pi)$ est une constante r�elle.
      914 \end{Cabstract}%
      915 \begin{Dabstract}Mon r�sum� avec ma formule
      916   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      917    O(\sqrt{n}\log{n})$, o� $C_1(\pi)$ est une constante r�elle.
      918 \end{Dabstract}%
      919 }
      920 ++ Input stack ++ 1 (reevaluate)
      921 [1] \begin{Cabstract}Mon r�sum� avec ma formule
      922 {\begin}
      923 {\begin Cabstract}
      924 +stack: level + 2 for environment
      925 {(Unknown)}
      926 {\titlepage 19}
      927 {\titlepage 19=\Cabstract}
      928 {Push resume 1}
      929 +stack: level = 2 for titlepage argument
      930 Character sequence: Mon r�sum� avec ma formule .
      931 [2]   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      932 {math shift character $}
      933 {Text:Mon r�sum� avec ma formule
      934 }
      935 +stack: level + 3 for math
      936 +stack: level + 4 for math
      937 +stack: level - 4 for math
      938 +stack: level + 4 for math
      939 +stack: level - 4 for math
      940 [3]    O(\sqrt{n}\log{n})$, o� $C_1(\pi)$ est une constante r�elle.
      941 +stack: level + 4 for math
      942 +stack: level - 4 for math
      943 +stack: level + 4 for math
      944 +stack: level - 4 for math
      945 +stack: level - 3 for math
      946 Math: $\lambda _n(\pi ) = \frac {N}{2} n \log n + C_1(\pi ) n +
      947 O(\sqrt {n}\log {n})$
      948 Character sequence: , o� .
      949 {math shift character $}
      950 {Text:, o� }
      951 +stack: level + 3 for math
      952 +stack: level - 3 for math
      953 Math: $C_1(\pi )$
      954 Character sequence:  est une constante r�elle. .
      955 [4] \end{Cabstract}%
      956 {\end}
      957 {Text: est une constante r�elle.
      958 }
      959 {\end Cabstract}
      960 +stack: level - 2 for titlepage argument
      961 +stack: ending environment Cabstract; resuming document.
      962 +stack: level - 1 for environment
      963 {Pop 1: document_v resume_t}
      964 [5] \begin{Dabstract}Mon r�sum� avec ma formule
      965 {\begin}
      966 {\begin Dabstract}
      967 +stack: level + 2 for environment
      968 {(Unknown)}
      969 {\titlepage 20}
      970 {\titlepage 20=\Dabstract}
      971 {Push TEXresume 1}
      972 +stack: level = 2 for titlepage argument
      973 \Dabstract@helper ->\@nomathml =-1 
      974 {\@nomathml}
      975 +scanint for \@nomathml->-1
      976 Character sequence: Mon r�sum� avec ma formule .
      977 [6]   $\lambda_n(\pi) = \frac{N}{2} n \log n + C_1(\pi) n +
      978 {math shift character $}
      979 {Text:Mon r�sum� avec ma formule
      980 }
      981 +stack: level + 3 for math
      982 +stack: level + 4 for math
      983 +stack: level - 4 for math
      984 +stack: level + 4 for math
      985 +stack: level - 4 for math
      986 [7]    O(\sqrt{n}\log{n})$, o� $C_1(\pi)$ est une constante r�elle.
      987 +stack: level + 4 for math
      988 +stack: level - 4 for math
      989 +stack: level + 4 for math
      990 +stack: level - 4 for math
      991 +stack: level - 3 for math
      992 Math: $\lambda _n(\pi ) = \frac {N}{2} n \log n + C_1(\pi ) n +
      993 O(\sqrt {n}\log {n})$
      994 Character sequence: , o� .
      995 {math shift character $}
      996 {Text:, o� }
      997 +stack: level + 3 for math
      998 +stack: level - 3 for math
      999 Math: $C_1(\pi )$
      1000 Character sequence:  est une constante r�elle. .
      1001 [8] \end{Dabstract}%
      1002 {\end}
      1003 {Text: est une constante r�elle.
      1004 }
      1005 {\end Dabstract}
      1006 +stack: restoring integer value 0 for \@nomathml
      1007 +stack: level - 2 for titlepage argument
      1008 +stack: ending environment Dabstract; resuming document.
      1009 +stack: level - 1 for environment
      1010 {Pop 1: document_v TEXresume_t}
      1011 ++ End of virtual file.
      1012 ++ Input stack -- 1 (reevaluate)
      1013 [35] 
      1014 {\par}
      1015 [36] \maketitle
      1016 {(Unknown)}
      1017 {\titlepage 0}
      1018 {\titlepage 0=\maketitle}
      1019 {Push getproduction 1}
      1020 {getproduction->\getproduction}
      1021 \getproduction ->\xbox {production}{
      1022 \xbox {fichier\_tex}{\jobname }
      1023 \xbox {fichier\_bib}{\jobname }
      1024 \xbox {date\_prod}{\the \year -\the \month -\the \day }}
      1025 {\xbox}
      1026 {Push argument 2}
      1027 Character sequence: production.
      1028 {Text:production}
      1029 {Pop 2: document_v getproduction_t argument_t}
      1030 {Constructing a box named production}
      1031 +stack: level + 2 for brace
      1032 {Push hbox 2}
      1033 Character sequence:  .
      1034 {\xbox}
      1035 {Text:
      1036 }
      1037 {Push argument 3}
      1038 Character sequence: fichier.
      1039 {\_}
      1040 Character sequence: tex.
      1041 {Text:fichier_tex}
      1042 {Pop 3: document_v getproduction_t hbox_t argument_t}
      1043 {Constructing a box named fichier_tex}
      1044 +stack: level + 3 for brace
      1045 {Push hbox 3}
      1046 Character sequence: bo.
      1047 {end-group character }}
      1048 +stack: finish a box of type 513
      1049 {Text:bo}
      1050 {Pop 3: document_v getproduction_t hbox_t hbox_t}
      1051 +stack: level - 3 for brace
      1052 Character sequence:  .
      1053 {\xbox}
      1054 {Text:
      1055 }
      1056 {Push argument 3}
      1057 Character sequence: fichier.
      1058 {\_}
      1059 Character sequence: bib.
      1060 {Text:fichier_bib}
      1061 {Pop 3: document_v getproduction_t hbox_t argument_t}
      1062 {Constructing a box named fichier_bib}
      1063 +stack: level + 3 for brace
      1064 {Push hbox 3}
      1065 Character sequence: bo.
      1066 {end-group character }}
      1067 +stack: finish a box of type 513
      1068 {Text:bo}
      1069 {Pop 3: document_v getproduction_t hbox_t hbox_t}
      1070 +stack: level - 3 for brace
      1071 Character sequence:  .
      1072 {\xbox}
      1073 {Text:
      1074 }
      1075 {Push argument 3}
      1076 Character sequence: date.
      1077 {\_}
      1078 Character sequence: prod.
      1079 {Text:date_prod}
      1080 {Pop 3: document_v getproduction_t hbox_t argument_t}
      1081 {Constructing a box named date_prod}
      1082 +stack: level + 3 for brace
      1083 {Push hbox 3}
      1084 {\the}
      1085 {\the \year}
      1086 \the->2006.
      1087 Character sequence: 2006-.
      1088 {\the}
      1089 {\the \month}
      1090 \the->8.
      1091 Character sequence: 8-.
      1092 {\the}
      1093 {\the \day}
      1094 \the->1.
      1095 Character sequence: 1.
      1096 {end-group character }}
      1097 +stack: finish a box of type 513
      1098 {Text:2006-8-1}
      1099 {Pop 3: document_v getproduction_t hbox_t hbox_t}
      1100 +stack: level - 3 for brace
      1101 {end-group character }}
      1102 +stack: finish a box of type 513
      1103 {Pop 2: document_v getproduction_t hbox_t}
      1104 +stack: level - 2 for brace
      1105 {Pop 1: document_v getproduction_t}
      1106 {Push getid 1}
      1107 {getid->\getid}
      1108 {\relax}
      1109 {Pop 1: document_v getid_t}
      1110 {Push p 1}
      1111 Translation terminated after title page
      1112 {\endallinput}
      1113 ++ Input stack empty at end of file
      1114 Bib stats: seen 0 entries
      1115 Seen 3 bibliographic entries
      1116 {Push argument 2}
      1117 {Push biblio 3}
      1118 [1] % reading source bo.bib
      1119 [2] %
      1120 [3] \citation{Bar03}{cite:Ba03}{bid0}{year}{article}
      1121 {\citation}
      1122 {Push argument 4}
      1123 Character sequence: Bar03.
      1124 {Text:Bar03}
      1125 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1126 {Push argument 4}
      1127 Character sequence: cite:Ba03.
      1128 {Text:cite:Ba03}
      1129 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1130 {Push argument 4}
      1131 Character sequence: bid0.
      1132 {Text:bid0}
      1133 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1134 {Push argument 4}
      1135 Character sequence: year.
      1136 {Text:year}
      1137 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1138 {Push argument 4}
      1139 Character sequence: article.
      1140 {Text:article}
      1141 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1142 {Push citation 4}
      1143 [4] \bauthors{\bpers[E. W.]{E. W.}{}{Barnes}{}}
      1144 {\bauthors}
      1145 {Push bauteurs 5}
      1146 \bpers \undefined #2#3#4#5->\xbox {nom}{#4}\ifx #1\undefined \xbox {prenom}{#2}\else \xbox {prenom}{#1}\xbox {initiale}{#2}\fi \xbox {particule}{#3}\def \tmp {#1\undefined }\ifx \tmp \undefined \else \xbox {junior}{#5}\fi 
      1147 #1<-E. W.
      1148 #2<-E. W.
      1149 #3<-
      1150 #4<-Barnes
      1151 #5<-
      1152 {\xbox}
      1153 {Push argument 6}
      1154 Character sequence: nom.
      1155 {Text:nom}
      1156 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1157 {Constructing a box named nom}
      1158 +stack: level + 2 for brace
      1159 {Push hbox 6}
      1160 Character sequence: Barnes.
      1161 {end-group character }}
      1162 +stack: finish a box of type 513
      1163 {Text:Barnes}
      1164 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1165 +stack: level - 2 for brace
      1166 +\ifx1
      1167 +iftest1 false
      1168 +\else1
      1169 {\xbox}
      1170 {Push argument 6}
      1171 Character sequence: prenom.
      1172 {Text:prenom}
      1173 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1174 {Constructing a box named prenom}
      1175 +stack: level + 2 for brace
      1176 {Push hbox 6}
      1177 Character sequence: E. W..
      1178 {end-group character }}
      1179 +stack: finish a box of type 513
      1180 {Text:E. W.}
      1181 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1182 +stack: level - 2 for brace
      1183 {\xbox}
      1184 {Push argument 6}
      1185 Character sequence: initiale.
      1186 {Text:initiale}
      1187 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1188 {Constructing a box named initiale}
      1189 +stack: level + 2 for brace
      1190 {Push hbox 6}
      1191 Character sequence: E. W..
      1192 {end-group character }}
      1193 +stack: finish a box of type 513
      1194 {Text:E. W.}
      1195 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1196 +stack: level - 2 for brace
      1197 +\fi1
      1198 {\xbox}
      1199 {Push argument 6}
      1200 Character sequence: particule.
      1201 {Text:particule}
      1202 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1203 {Constructing a box named particule}
      1204 +stack: level + 2 for brace
      1205 {Push hbox 6}
      1206 {end-group character }}
      1207 +stack: finish a box of type 513
      1208 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1209 +stack: level - 2 for brace
      1210 {\def}
      1211 {\def \tmp ->E. W.\undefined }
      1212 +\ifx2
      1213 +iftest2 false
      1214 +\else2
      1215 {\xbox}
      1216 {Push argument 6}
      1217 Character sequence: junior.
      1218 {Text:junior}
      1219 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1220 {Constructing a box named junior}
      1221 +stack: level + 2 for brace
      1222 {Push hbox 6}
      1223 {end-group character }}
      1224 +stack: finish a box of type 513
      1225 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1226 +stack: level - 2 for brace
      1227 +\fi2
      1228 {Pop 5: document_v p_v argument_h biblio_t citation_t bauteurs_b}
      1229 Character sequence:  .
      1230 [5] \cititem{btitle}{On the expression of {E}uler's constant as a definite integral}
      1231 {\cititem}
      1232 \cititem-btitle ->\bgroup \catcode `\$=12 \@nomathml =1 \citembtitle 
      1233 {begin-group character {}
      1234 +stack: level + 2 for brace
      1235 {\catcode}
      1236 +scanint for \catcode->36
      1237 +scanint for \catcode->12
      1238 {\@nomathml}
      1239 +scanint for \@nomathml->1
      1240 \citembtitle #1->\xbox {title}{#1}\egroup \@addnl 
      1241 #1<-On the expression of {E}uler's constant as a definite integral
      1242 {\xbox}
      1243 {Push argument 5}
      1244 Character sequence: title.
      1245 {Text:title}
      1246 {Pop 5: document_v p_v argument_h biblio_t citation_t argument_b}
      1247 {Constructing a box named title}
      1248 +stack: level + 3 for brace
      1249 {Push hbox 5}
      1250 Character sequence: On the expression of .
      1251 {begin-group character {}
      1252 +stack: level + 4 for brace
      1253 Character sequence: E.
      1254 {end-group character }}
      1255 +stack: level - 4 for brace
      1256 Character sequence: uler's constant as a definite integral.
      1257 {end-group character }}
      1258 +stack: finish a box of type 513
      1259 {Text:On the expression of Euler's constant as a definite integral}
      1260 {Pop 5: document_v p_v argument_h biblio_t citation_t hbox_b}
      1261 +stack: level - 3 for brace
      1262 {end-group character }}
      1263 +stack: restoring integer value 0 for \@nomathml
      1264 +stack: restoring integer value 3 for \catcode36
      1265 +stack: level - 2 for brace
      1266 {\@addnl}
      1267 Character sequence:  .
      1268 [6] \cititem{bjournal}{Messenger of Math.}
      1269 {\cititem}
      1270 {Push bjournal 5}
      1271 Character sequence: Messenger of Math..
      1272 {Text:Messenger of Math.}
      1273 {Pop 5: document_v p_v argument_h biblio_t citation_t bjournal_t}
      1274 Character sequence:  .
      1275 [7] \cititem{bvolume}{33}
      1276 {\cititem}
      1277 {Push bvolume 5}
      1278 Character sequence: 33.
      1279 {Text:33}
      1280 {Pop 5: document_v p_v argument_h biblio_t citation_t bvolume_t}
      1281 Character sequence:  .
      1282 [8] \cititem{byear}{1903}
      1283 {\cititem}
      1284 {Push byear 5}
      1285 Character sequence: 1903.
      1286 {Text:1903}
      1287 {Pop 5: document_v p_v argument_h biblio_t citation_t byear_t}
      1288 Character sequence:  .
      1289 [9] \cititem{bpages}{59--61}
      1290 {\cititem}
      1291 {Push bpages 5}
      1292 Character sequence: 59-61.
      1293 {Text:59&ndash;61}
      1294 {Pop 5: document_v p_v argument_h biblio_t citation_t bpages_t}
      1295 Character sequence:  .
      1296 [10] \endcitation
      1297 {\endcitation}
      1298 {Pop 4: document_v p_v argument_h biblio_t citation_t}
      1299 [11] %
      1300 [12] \citation{Bom00}{cite:Bo99}{bid2}{year}{article}
      1301 {\citation}
      1302 {Push argument 4}
      1303 Character sequence: Bom00.
      1304 {Text:Bom00}
      1305 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1306 {Push argument 4}
      1307 Character sequence: cite:Bo99.
      1308 {Text:cite:Bo99}
      1309 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1310 {Push argument 4}
      1311 Character sequence: bid2.
      1312 {Text:bid2}
      1313 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1314 {Push argument 4}
      1315 Character sequence: year.
      1316 {Text:year}
      1317 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1318 {Push argument 4}
      1319 Character sequence: article.
      1320 {Text:article}
      1321 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1322 {Push citation 4}
      1323 [13] \bauthors{\bpers[E.]{E.}{}{Bombieri}{}}
      1324 {\bauthors}
      1325 {Push bauteurs 5}
      1326 \bpers \undefined #2#3#4#5->\xbox {nom}{#4}\ifx #1\undefined \xbox {prenom}{#2}\else \xbox {prenom}{#1}\xbox {initiale}{#2}\fi \xbox {particule}{#3}\def \tmp {#1\undefined }\ifx \tmp \undefined \else \xbox {junior}{#5}\fi 
      1327 #1<-E.
      1328 #2<-E.
      1329 #3<-
      1330 #4<-Bombieri
      1331 #5<-
      1332 {\xbox}
      1333 {Push argument 6}
      1334 Character sequence: nom.
      1335 {Text:nom}
      1336 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1337 {Constructing a box named nom}
      1338 +stack: level + 2 for brace
      1339 {Push hbox 6}
      1340 Character sequence: Bombieri.
      1341 {end-group character }}
      1342 +stack: finish a box of type 513
      1343 {Text:Bombieri}
      1344 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1345 +stack: level - 2 for brace
      1346 +\ifx3
      1347 +iftest3 false
      1348 +\else3
      1349 {\xbox}
      1350 {Push argument 6}
      1351 Character sequence: prenom.
      1352 {Text:prenom}
      1353 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1354 {Constructing a box named prenom}
      1355 +stack: level + 2 for brace
      1356 {Push hbox 6}
      1357 Character sequence: E..
      1358 {end-group character }}
      1359 +stack: finish a box of type 513
      1360 {Text:E.}
      1361 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1362 +stack: level - 2 for brace
      1363 {\xbox}
      1364 {Push argument 6}
      1365 Character sequence: initiale.
      1366 {Text:initiale}
      1367 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1368 {Constructing a box named initiale}
      1369 +stack: level + 2 for brace
      1370 {Push hbox 6}
      1371 Character sequence: E..
      1372 {end-group character }}
      1373 +stack: finish a box of type 513
      1374 {Text:E.}
      1375 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1376 +stack: level - 2 for brace
      1377 +\fi3
      1378 {\xbox}
      1379 {Push argument 6}
      1380 Character sequence: particule.
      1381 {Text:particule}
      1382 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1383 {Constructing a box named particule}
      1384 +stack: level + 2 for brace
      1385 {Push hbox 6}
      1386 {end-group character }}
      1387 +stack: finish a box of type 513
      1388 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1389 +stack: level - 2 for brace
      1390 {\def}
      1391 {\def \tmp ->E.\undefined }
      1392 +\ifx4
      1393 +iftest4 false
      1394 +\else4
      1395 {\xbox}
      1396 {Push argument 6}
      1397 Character sequence: junior.
      1398 {Text:junior}
      1399 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1400 {Constructing a box named junior}
      1401 +stack: level + 2 for brace
      1402 {Push hbox 6}
      1403 {end-group character }}
      1404 +stack: finish a box of type 513
      1405 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1406 +stack: level - 2 for brace
      1407 +\fi4
      1408 {Pop 5: document_v p_v argument_h biblio_t citation_t bauteurs_b}
      1409 Character sequence:  .
      1410 [14] \cititem{btitle}{Remarks on {W}eil's quadratic functional in the theory of prime numbers~{I}}
      1411 {\cititem}
      1412 \cititem-btitle ->\bgroup \catcode `\$=12 \@nomathml =1 \citembtitle 
      1413 {begin-group character {}
      1414 +stack: level + 2 for brace
      1415 {\catcode}
      1416 +scanint for \catcode->36
      1417 +scanint for \catcode->12
      1418 {\@nomathml}
      1419 +scanint for \@nomathml->1
      1420 \citembtitle #1->\xbox {title}{#1}\egroup \@addnl 
      1421 #1<-Remarks on {W}eil's quadratic functional in the theory of prime numbers~{I}
      1422 {\xbox}
      1423 {Push argument 5}
      1424 Character sequence: title.
      1425 {Text:title}
      1426 {Pop 5: document_v p_v argument_h biblio_t citation_t argument_b}
      1427 {Constructing a box named title}
      1428 +stack: level + 3 for brace
      1429 {Push hbox 5}
      1430 Character sequence: Remarks on .
      1431 {begin-group character {}
      1432 +stack: level + 4 for brace
      1433 Character sequence: W.
      1434 {end-group character }}
      1435 +stack: level - 4 for brace
      1436 Character sequence: eil's quadratic functional in the theory of prime numbers.
      1437 ~ ->\nobreakspace 
      1438 {\nobreakspace}
      1439 {begin-group character {}
      1440 +stack: level + 4 for brace
      1441 Character sequence: I.
      1442 {end-group character }}
      1443 +stack: level - 4 for brace
      1444 {end-group character }}
      1445 +stack: finish a box of type 513
      1446 {Text:Remarks on Weil's quadratic functional in the theory of prime numbers&nbsp;I}
      1447 {Pop 5: document_v p_v argument_h biblio_t citation_t hbox_b}
      1448 +stack: level - 3 for brace
      1449 {end-group character }}
      1450 +stack: restoring integer value 0 for \@nomathml
      1451 +stack: restoring integer value 3 for \catcode36
      1452 +stack: level - 2 for brace
      1453 {\@addnl}
      1454 Character sequence:  .
      1455 [15] \cititem{bjournal}{Rend. Mat. Acc. Lincei, Ser.~IX}
      1456 {\cititem}
      1457 {Push bjournal 5}
      1458 Character sequence: Rend. Mat. Acc. Lincei, Ser..
      1459 ~ ->\nobreakspace 
      1460 {\nobreakspace}
      1461 Character sequence: IX.
      1462 {Text:Rend. Mat. Acc. Lincei, Ser.&nbsp;IX}
      1463 {Pop 5: document_v p_v argument_h biblio_t citation_t bjournal_t}
      1464 Character sequence:  .
      1465 [16] \cititem{bvolume}{11}
      1466 {\cititem}
      1467 {Push bvolume 5}
      1468 Character sequence: 11.
      1469 {Text:11}
      1470 {Pop 5: document_v p_v argument_h biblio_t citation_t bvolume_t}
      1471 Character sequence:  .
      1472 [17] \cititem{byear}{2000}
      1473 {\cititem}
      1474 {Push byear 5}
      1475 Character sequence: 2000.
      1476 {Text:2000}
      1477 {Pop 5: document_v p_v argument_h biblio_t citation_t byear_t}
      1478 Character sequence:  .
      1479 [18] \cititem{bpages}{183--233}
      1480 {\cititem}
      1481 {Push bpages 5}
      1482 Character sequence: 183-233.
      1483 {Text:183&ndash;233}
      1484 {Pop 5: document_v p_v argument_h biblio_t citation_t bpages_t}
      1485 Character sequence:  .
      1486 [19] \endcitation
      1487 {\endcitation}
      1488 {Pop 4: document_v p_v argument_h biblio_t citation_t}
      1489 [20] %
      1490 [21] \citation{BPY01}{cite:BPY01}{bid1}{year}{article}
      1491 {\citation}
      1492 {Push argument 4}
      1493 Character sequence: BPY01.
      1494 {Text:BPY01}
      1495 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1496 {Push argument 4}
      1497 Character sequence: cite:BPY01.
      1498 {Text:cite:BPY01}
      1499 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1500 {Push argument 4}
      1501 Character sequence: bid1.
      1502 {Text:bid1}
      1503 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1504 {Push argument 4}
      1505 Character sequence: year.
      1506 {Text:year}
      1507 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1508 {Push argument 4}
      1509 Character sequence: article.
      1510 {Text:article}
      1511 {Pop 4: document_v p_v argument_h biblio_t argument_t}
      1512 {Push citation 4}
      1513 [22] \bauthors{\bpers[P.]{P.}{}{Biane}{}\bpers[J.]{J.}{}{Pitman}{}\bpers[M.]{M.}{}{Yor}{}}
      1514 {\bauthors}
      1515 {Push bauteurs 5}
      1516 \bpers \undefined #2#3#4#5->\xbox {nom}{#4}\ifx #1\undefined \xbox {prenom}{#2}\else \xbox {prenom}{#1}\xbox {initiale}{#2}\fi \xbox {particule}{#3}\def \tmp {#1\undefined }\ifx \tmp \undefined \else \xbox {junior}{#5}\fi 
      1517 #1<-P.
      1518 #2<-P.
      1519 #3<-
      1520 #4<-Biane
      1521 #5<-
      1522 {\xbox}
      1523 {Push argument 6}
      1524 Character sequence: nom.
      1525 {Text:nom}
      1526 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1527 {Constructing a box named nom}
      1528 +stack: level + 2 for brace
      1529 {Push hbox 6}
      1530 Character sequence: Biane.
      1531 {end-group character }}
      1532 +stack: finish a box of type 513
      1533 {Text:Biane}
      1534 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1535 +stack: level - 2 for brace
      1536 +\ifx5
      1537 +iftest5 false
      1538 +\else5
      1539 {\xbox}
      1540 {Push argument 6}
      1541 Character sequence: prenom.
      1542 {Text:prenom}
      1543 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1544 {Constructing a box named prenom}
      1545 +stack: level + 2 for brace
      1546 {Push hbox 6}
      1547 Character sequence: P..
      1548 {end-group character }}
      1549 +stack: finish a box of type 513
      1550 {Text:P.}
      1551 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1552 +stack: level - 2 for brace
      1553 {\xbox}
      1554 {Push argument 6}
      1555 Character sequence: initiale.
      1556 {Text:initiale}
      1557 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1558 {Constructing a box named initiale}
      1559 +stack: level + 2 for brace
      1560 {Push hbox 6}
      1561 Character sequence: P..
      1562 {end-group character }}
      1563 +stack: finish a box of type 513
      1564 {Text:P.}
      1565 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1566 +stack: level - 2 for brace
      1567 +\fi5
      1568 {\xbox}
      1569 {Push argument 6}
      1570 Character sequence: particule.
      1571 {Text:particule}
      1572 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1573 {Constructing a box named particule}
      1574 +stack: level + 2 for brace
      1575 {Push hbox 6}
      1576 {end-group character }}
      1577 +stack: finish a box of type 513
      1578 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1579 +stack: level - 2 for brace
      1580 {\def}
      1581 {\def \tmp ->P.\undefined }
      1582 +\ifx6
      1583 +iftest6 false
      1584 +\else6
      1585 {\xbox}
      1586 {Push argument 6}
      1587 Character sequence: junior.
      1588 {Text:junior}
      1589 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1590 {Constructing a box named junior}
      1591 +stack: level + 2 for brace
      1592 {Push hbox 6}
      1593 {end-group character }}
      1594 +stack: finish a box of type 513
      1595 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1596 +stack: level - 2 for brace
      1597 +\fi6
      1598 \bpers \undefined #2#3#4#5->\xbox {nom}{#4}\ifx #1\undefined \xbox {prenom}{#2}\else \xbox {prenom}{#1}\xbox {initiale}{#2}\fi \xbox {particule}{#3}\def \tmp {#1\undefined }\ifx \tmp \undefined \else \xbox {junior}{#5}\fi 
      1599 #1<-J.
      1600 #2<-J.
      1601 #3<-
      1602 #4<-Pitman
      1603 #5<-
      1604 {\xbox}
      1605 {Push argument 6}
      1606 Character sequence: nom.
      1607 {Text:nom}
      1608 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1609 {Constructing a box named nom}
      1610 +stack: level + 2 for brace
      1611 {Push hbox 6}
      1612 Character sequence: Pitman.
      1613 {end-group character }}
      1614 +stack: finish a box of type 513
      1615 {Text:Pitman}
      1616 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1617 +stack: level - 2 for brace
      1618 +\ifx7
      1619 +iftest7 false
      1620 +\else7
      1621 {\xbox}
      1622 {Push argument 6}
      1623 Character sequence: prenom.
      1624 {Text:prenom}
      1625 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1626 {Constructing a box named prenom}
      1627 +stack: level + 2 for brace
      1628 {Push hbox 6}
      1629 Character sequence: J..
      1630 {end-group character }}
      1631 +stack: finish a box of type 513
      1632 {Text:J.}
      1633 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1634 +stack: level - 2 for brace
      1635 {\xbox}
      1636 {Push argument 6}
      1637 Character sequence: initiale.
      1638 {Text:initiale}
      1639 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1640 {Constructing a box named initiale}
      1641 +stack: level + 2 for brace
      1642 {Push hbox 6}
      1643 Character sequence: J..
      1644 {end-group character }}
      1645 +stack: finish a box of type 513
      1646 {Text:J.}
      1647 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1648 +stack: level - 2 for brace
      1649 +\fi7
      1650 {\xbox}
      1651 {Push argument 6}
      1652 Character sequence: particule.
      1653 {Text:particule}
      1654 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1655 {Constructing a box named particule}
      1656 +stack: level + 2 for brace
      1657 {Push hbox 6}
      1658 {end-group character }}
      1659 +stack: finish a box of type 513
      1660 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1661 +stack: level - 2 for brace
      1662 {\def}
      1663 {\def \tmp ->J.\undefined }
      1664 +\ifx8
      1665 +iftest8 false
      1666 +\else8
      1667 {\xbox}
      1668 {Push argument 6}
      1669 Character sequence: junior.
      1670 {Text:junior}
      1671 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1672 {Constructing a box named junior}
      1673 +stack: level + 2 for brace
      1674 {Push hbox 6}
      1675 {end-group character }}
      1676 +stack: finish a box of type 513
      1677 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1678 +stack: level - 2 for brace
      1679 +\fi8
      1680 \bpers \undefined #2#3#4#5->\xbox {nom}{#4}\ifx #1\undefined \xbox {prenom}{#2}\else \xbox {prenom}{#1}\xbox {initiale}{#2}\fi \xbox {particule}{#3}\def \tmp {#1\undefined }\ifx \tmp \undefined \else \xbox {junior}{#5}\fi 
      1681 #1<-M.
      1682 #2<-M.
      1683 #3<-
      1684 #4<-Yor
      1685 #5<-
      1686 {\xbox}
      1687 {Push argument 6}
      1688 Character sequence: nom.
      1689 {Text:nom}
      1690 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1691 {Constructing a box named nom}
      1692 +stack: level + 2 for brace
      1693 {Push hbox 6}
      1694 Character sequence: Yor.
      1695 {end-group character }}
      1696 +stack: finish a box of type 513
      1697 {Text:Yor}
      1698 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1699 +stack: level - 2 for brace
      1700 +\ifx9
      1701 +iftest9 false
      1702 +\else9
      1703 {\xbox}
      1704 {Push argument 6}
      1705 Character sequence: prenom.
      1706 {Text:prenom}
      1707 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1708 {Constructing a box named prenom}
      1709 +stack: level + 2 for brace
      1710 {Push hbox 6}
      1711 Character sequence: M..
      1712 {end-group character }}
      1713 +stack: finish a box of type 513
      1714 {Text:M.}
      1715 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1716 +stack: level - 2 for brace
      1717 {\xbox}
      1718 {Push argument 6}
      1719 Character sequence: initiale.
      1720 {Text:initiale}
      1721 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1722 {Constructing a box named initiale}
      1723 +stack: level + 2 for brace
      1724 {Push hbox 6}
      1725 Character sequence: M..
      1726 {end-group character }}
      1727 +stack: finish a box of type 513
      1728 {Text:M.}
      1729 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1730 +stack: level - 2 for brace
      1731 +\fi9
      1732 {\xbox}
      1733 {Push argument 6}
      1734 Character sequence: particule.
      1735 {Text:particule}
      1736 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1737 {Constructing a box named particule}
      1738 +stack: level + 2 for brace
      1739 {Push hbox 6}
      1740 {end-group character }}
      1741 +stack: finish a box of type 513
      1742 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1743 +stack: level - 2 for brace
      1744 {\def}
      1745 {\def \tmp ->M.\undefined }
      1746 +\ifx10
      1747 +iftest10 false
      1748 +\else10
      1749 {\xbox}
      1750 {Push argument 6}
      1751 Character sequence: junior.
      1752 {Text:junior}
      1753 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b argument_b}
      1754 {Constructing a box named junior}
      1755 +stack: level + 2 for brace
      1756 {Push hbox 6}
      1757 {end-group character }}
      1758 +stack: finish a box of type 513
      1759 {Pop 6: document_v p_v argument_h biblio_t citation_t bauteurs_b hbox_b}
      1760 +stack: level - 2 for brace
      1761 +\fi10
      1762 {Pop 5: document_v p_v argument_h biblio_t citation_t bauteurs_b}
      1763 Character sequence:  .
      1764 [23] \cititem{btitle}{Probability laws related to the {J}acobi $\theta$ and {R}iemann $\zeta$ functions, and {B}rownian excursions}
      1765 {\cititem}
      1766 \cititem-btitle ->\bgroup \catcode `\$=12 \@nomathml =1 \citembtitle 
      1767 {begin-group character {}
      1768 +stack: level + 2 for brace
      1769 {\catcode}
      1770 +scanint for \catcode->36
      1771 +scanint for \catcode->12
      1772 {\@nomathml}
      1773 +scanint for \@nomathml->1
      1774 \citembtitle #1->\xbox {title}{#1}\egroup \@addnl 
      1775 #1<-Probability laws related to the {J}acobi $\theta $ and {R}iemann $\zeta $ functions, and {B}rownian excursions
      1776 {\xbox}
      1777 {Push argument 5}
      1778 Character sequence: title.
      1779 {Text:title}
      1780 {Pop 5: document_v p_v argument_h biblio_t citation_t argument_b}
      1781 {Constructing a box named title}
      1782 +stack: level + 3 for brace
      1783 {Push hbox 5}
      1784 Character sequence: Probability laws related to the .
      1785 {begin-group character {}
      1786 +stack: level + 4 for brace
      1787 Character sequence: J.
      1788 {end-group character }}
      1789 +stack: level - 4 for brace
      1790 Character sequence: acobi $.
      1791 {\theta}
      1792 Character sequence: $ and .
      1793 {begin-group character {}
      1794 +stack: level + 4 for brace
      1795 Character sequence: R.
      1796 {end-group character }}
      1797 +stack: level - 4 for brace
      1798 Character sequence: iemann $.
      1799 {\zeta}
      1800 Character sequence: $ functions, and .
      1801 {begin-group character {}
      1802 +stack: level + 4 for brace
      1803 Character sequence: B.
      1804 {end-group character }}
      1805 +stack: level - 4 for brace
      1806 Character sequence: rownian excursions.
      1807 {end-group character }}
      1808 +stack: finish a box of type 513
      1809 {Text:Probability laws related to the Jacobi $\theta $ and Riemann $\zeta $ functions, and Brownian excursions}
      1810 {Pop 5: document_v p_v argument_h biblio_t citation_t hbox_b}
      1811 +stack: level - 3 for brace
      1812 {end-group character }}
      1813 +stack: restoring integer value 0 for \@nomathml
      1814 +stack: restoring integer value 3 for \catcode36
      1815 +stack: level - 2 for brace
      1816 {\@addnl}
      1817 Character sequence:  .
      1818 [24] \cititem{bjournal}{Bull. Amer. Math. Soc.}
      1819 {\cititem}
      1820 {Push bjournal 5}
      1821 Character sequence: Bull. Amer. Math. Soc..
      1822 {Text:Bull. Amer. Math. Soc.}
      1823 {Pop 5: document_v p_v argument_h biblio_t citation_t bjournal_t}
      1824 Character sequence:  .
      1825 [25] \cititem{bvolume}{38}
      1826 {\cititem}
      1827 {Push bvolume 5}
      1828 Character sequence: 38.
      1829 {Text:38}
      1830 {Pop 5: document_v p_v argument_h biblio_t citation_t bvolume_t}
      1831 Character sequence:  .
      1832 [26] \cititem{byear}{2001}
      1833 {\cititem}
      1834 {Push byear 5}
      1835 Character sequence: 2001.
      1836 {Text:2001}
      1837 {Pop 5: document_v p_v argument_h biblio_t citation_t byear_t}
      1838 Character sequence:  .
      1839 [27] \cititem{bpages}{435--465}
      1840 {\cititem}
      1841 {Push bpages 5}
      1842 Character sequence: 435-465.
      1843 {Text:435&ndash;465}
      1844 {Pop 5: document_v p_v argument_h biblio_t citation_t bpages_t}
      1845 Character sequence:  .
      1846 [28] \endcitation
      1847 {\endcitation}
      1848 {Pop 4: document_v p_v argument_h biblio_t citation_t}
      1849 ++ Input stack empty at end of file
      1850 {Pop 3: document_v p_v argument_h biblio_t}
      1851 {Pop 2: document_v p_v argument_h}
      1852 Used 1866 commands
      1853 Math stats: formulas 16, non trivial kernels 10,
      1854    special 0, trivial 0, \mbox 0, large 0, small 8.
      1855 Buffer realloc 8, string 1881, size 25731, merge 2
      1856 Macros created 114, deleted 10.
      1857 Save stack +154 -154.
      1858 Attribute list search 1847(1549) found 1010 in 1620 elements (1450 after boot).
      1859 Number of ref 0, of used labels 0, of defined labels 0, of ext. ref. 0.
      1860 Modules with 0, without 0, sections with 0, without 0
      1861 There was no image.
      1862 Output written on bo.xml (5209 bytes).
      1863 No error found.
      1864 (For more information, see transcript file bo.log)

----

docs/raweb.rst
--------------

=====================
Tralics and the Raweb
=====================

.. warning::

   The contents of this page describe the use of *Tralics* to generate the
   activity report of INRIA. As far as I am aware, it is not used for that
   anymore, and the specific functionality involved should be considered to be
   deprecated; it is likely to disappear in a future version of the program. The
   page will remain here for historical reasons.

Introduction
============

1.1 A short history
-------------------

This file explains the link between *Tralics* and the Raweb.

A short history of the Raweb may be found on the Inria internal web site
`Inria internal
website <http://www.inria.fr/interne/disc/apropos/chantiers/raweb-xml/histoire.html>`__.
The question concerns Inria's Annual Activity Report, also known as
“Rapport d'activité”, or “Annexe technique” to the RA or “annexes
scientifiques” to the RA. This is a document, written by the research
teams, at the end of the year N (October, November), and published in
March of year N+1.

Until the 1993 edition (published in 1994), only a paper version
existed. A LaTeX model was used since 1987, designed by Jacques André
then Martin Jourdan. See the following paper, `Une expérience
d'utilisation de LaTeX : le Rapport d'activité de
l'INRIA <http://cahiers.gutenberg.eu.org/cg-bin/article/CG_1988___0_17_0.pdf>`__
by Louarn in the first Cahiers Gutenberg.

In 1993, contacts were made with the Grif S.A. society, for the design
of a SGML DTD and a LaTeX-to-SGML converter. As a result, Philippe
Louarn was able to put on the web the `RA (year
1994) <http://www.inria.fr/rapportsactivite/RA94/RA94.html>`__ in its
HTML version. But this was judged too complicated, and for several
years, the HTML was directly produced from the LaTeX source, using
latex2html (example:
`miaou95 <http://raweb.inria.fr/rapportsactivite/RA95/miaou/miaou.html>`__).

In 1996, a working group (conducted by Albert Benveniste) gave new
specifications: independent modules, grouped into ten sections, etc. A
technical group was created, whose objective was to find a company that
could sell a software (maybe using XML as intermediate language). None
was found, but the design of modules (in LaTeX syntax) was well-defined
by Laurent Pierron and José Grimm. For the Ra98, a Perl script did some
preprocessing, splitting the LaTeX source into modules (one module per
HTML page) (example:
`miaou98 <http://raweb.inria.fr/rapportsactivite/RA98/miaou/miaou.html>`__).

In 1999, the Scientific Annexes to Inria's Annual Report were renamed
RAWEB, to emphasize the role played by the Web (it is available as a
CD-Rom, but no more printed by Inria).

In 2001, the Perl scripts mentioned above evolved into a LaTeX-to-XML
converter (some ideas were borrowed from latex2html, which is also a
Perl script). The main trouble was conversion from XML to Pdf, and we
used tools from the TeX community (by S. Rahtz and D. Carlisle) and
PdfLaTeX. On the other hand, the images in the HTML files were converted
by LaTeX. Additional software (indexes, etc.) was written/used by
Marie-Pierre Durollet.

This gave a complicated object: a Perl script, that converts a LaTeX
file into XML (using Omega as a subprocess for the math) followed by
another Perl script that extracts the math, calls latex, then dvips,
then pstoimg (a Perl script that calls ppmquant, pncrop, and so forth,
whose job is to produce a png image for the math formula), and finally
an XSLT processor for the effective conversion. (example:
`miaou2001 <http://raweb.inria.fr/rapportsactivite/RA2001/miaou/miaou.html>`__).

1.2 Birth of Tralics
--------------------

The big Perl script was rewritten as a C++ translator, renamed
*Tralics*, and got (for version 1.6) a first IDDN number in Dec. 2002.
This software was still able to produce a LaTeX preview of the Raweb:
The source is read, the syntax is tested, a LaTeX file is written for
each module, latex and bibtex are called, the resulting dvi is converted
to PostScript. But the same *Tralics* can be used in a different way:
the source is read, the syntax is tested, an XML file is created, an
XSLT processor is called to generate the XSL/FO, and PdfLaTeX generates
the Pdf (you can also generate an HTML version). (example:
`miaou2003 <http://raweb.inria.fr/rapportsactivite/RA2003/miaou/uid0.html>`__).

Note that in 2003, there were a few people writing their RA directly in
XML. As a consequence, the new *Tralics*, to be be used in 2004, does
only the bare minimum: it converts the LaTeX into XML. There is a Perl
script that does everything else (calling external programs like latex,
xsltproc, etc). A non-obvious point concerns conversion of math and
images into HTML. Currently, a Perl script extracts the math, uses LaTex
to produce a dvi file, which in converted to PostScript then png format.

Since 2005, the XML version of the Raweb is available on the web; its
DTD is different from what *Tralics* produces; the research report
`inria-0000077 <http://hal.inria.fr/inria-00000777>`__ describes both
DTDs and the XSL style sheet that does the conversion.

Since 2008, a raweb file is like another file. The pre-processor (with
all its fatal errors) has been removed, as well as the postprocessor.
All commands, specific to the raweb like ``\project`` are now defined in
a style file (to be used via a class file), they may use some primitives
that extract data from a configuration file.

.. _overview:

2. Overview of the system
=========================

.. _requi:

2.1 Requirements of the Raweb
-----------------------------

We give `here <raweb1.html>`__ an example of a real file. It is an
abridged version of the `Report of the MIAOU
project. <http://www.inria.fr/rapportsactivite/RA2003/miaou/uid0.html>`__
The input to *Tralics* is: one TeX file (that can input other TeX
files), one, two or three bibliography files, and some image files.
These three bibliography files can be merged into a single one; and the
filecontents environment might be used to insert the bibliography in the
TeX source.

In the example, we have three bibliography files:
`miaou2003.bib <raweb1.html#miaou2003bib>`__,
`miaou_foot2003.bib <raweb1.html#miaoufootbib>`__, and
`miaou_refer2003.bib <raweb1.html#miaoureferbib>`__ and one
`image <xml-route.png>`__ (The image is extracted from a power-point
presentation, converted to PostScript, then Pdf; the image shown here is
the png version of the PostScript file obtained via convert; you can see
`this on the web <xml-route-ra.png>`__, and notice a loss of quality.)
The image explains how *Tralics* is connected to the other processes.

When translating a file, *Tralics* can be in Raweb mode or not.
Differences between Raweb and non-raweb modes are tiny: they concern
essentially the bibliography (there are some tests that check if an item
is in the correct bibliography file). In Raweb mode, the input file
should be foo2004.tex, where foo matches the name of team, and the
document class should be ra2004 (replace 2004 by the current year).
Non-ascii characters, as well as uppercase letters are forbidden.

.. _triv-exp:

2.2 Trivial examples
--------------------

**Example 1.** An important point is that *Tralics* compiles only TeX
files, i.e. whose names end with .tex. If no extension is given, one is
added. The .xml extension is replaced by .tex.

.. container:: tty_out

   ::

      grimm@medee$ tralics my_file.xml
      This is tralics 2.13.0, a LaTeX to XML translator, running on medee
      Copyright INRIA/MIAOU/APICS 2002-2008, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Fatal error: Cannot open input file my_file.tex

**Example 2.** Earlier versions of *Tralics* refused to translate files
that are not in the current directory.

.. container:: tty_out

   ::

      grimm@medee$ tralics /floppy/foo etc
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Fatal error
      Absolute or relative pathnames not allowed: /floppy/foo 

**Example 2bis.** Since version 2.10.7 *Tralics* accepts to translate
files that are not in the current directory. By default, the XML result
and transcript files are put in the same directory as the input, but
this can be changed.

.. container:: tty_out

   ::

      maclaurin@grimm$  tralics ../Test/hello -outputdir=/tmp -logfile=x -silent
      This is tralics 2.15.4, a LaTeX to XML translator, running on maclaurin
      Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file ../Test/hello.tex.
      Output written on /tmp/hello.xml (187 bytes).
      No error found.
      (For more information, see transcript file /tmp/x.log)

**Example 3.** In the examples 3 to 6, we use the -silent switch to
reduce verbosity, and we translate a trivial TeX file. Here we
demontrate the -dir switch. This option has currrently no effect
anymore.

.. container:: tty_out

   ::

      maclaurin@grimm$ tralics hello -dir none -silent
      This is tralics 2.15.4, a LaTeX to XML translator, running on maclaurin
      Copyright INRIA/MIAOU/APICS/MARELLE 2002-2015, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file hello.tex.
      Output written on hello.xml (187 bytes).
      No error found.
      (For more information, see transcript file hello.log)

**Example 4.** Here we say that we do not want a configuration file.

.. container:: tty_out

   ::

      grimm@medee$ tralics -noconfig hello -silent
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for hello.
      No configuration file.
      Output written on hello.xml (171 bytes).
      No error found.
      (For more information, see transcript file hello.log)

**Example 5.** In version 2.8, you could set the shell variable
``TRALICSDIR`` to a directory containing the configuration file. This
has no effect any more, and the translation is the same as in example 3.

.. container:: tty_out

   ::

      grimm@medee$ TRALICSDIR=.. tralics hello -silent
      This is tralics 2.13.0, a LaTeX to XML translator, running on medee
      ...
      (For more information, see transcript file hello.log)

**Example 6.** Here the configuration file is found via default rules.
Translation is the same as in example 3.

.. container:: tty_out

   ::

      grimm@medee$ tralics hello -silent
      ...
      (For more information, see transcript file hello.log)

In all these examples, the TeX file contains a single line
``Hello, world!``. The translation is

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- translated from latex by tralics 2.8-->
      <unknown>
      <p>Hello, world!
      </p></unknown>

There are some differences between version 2.8 and the current version.
For instance the compilation date has been added in the XML, thus making
it a bit larger (192 bytes instead of 171). The default encoding is now
UTF-8, this makes the file smaller; finally, the length of the version
number impacts the length of the XML result. The sentence “starting xml
processing for hello” has been replaced by “Starting translation of file
hello.tex”. If the -silent option is given, information about
configuration file is not printed on the terminal.

**Raweb mode** is entered if the *type* is ``ra``. The *type* can be
specified in the configuration file (the .tralics_rc file; we assume
that either no configurationn file, or the standard configuration one
will be used). If you call *Tralics* with option type=foo, then the
*type* will be ``foo``. Otherwise, if you call *Tralics* with option
config=bar2005, and if bar2005.tcf exists, the *type* will be ``bar``.
Otherwise, if the file has ``\documentclass{gee2003}``, and gee2003.tcf
or gee.tcf exists, then the *type* will be ``gee``; otherwise some
default type will be used. The tcf file will be loaded, if given or
deduced.

Let's assume that we have a file containing two lines, the first one is
``\documentclass{ra2003}``, the second one is ``Hello,     world!`` as
above. Assume that the file has three names xhello.tex, hello2003.tex
and hello2006.tex. All these files will be translated in Raweb mode. No
XML file will be produced unless the four digits that appear in the
document class are also in the file name, this is the case only for
hello2003.

**Example 7.** We translate here file xhello.tex. Since the file name
has no digits in it, you will get an error of the form *Input file name
must be team name followed by 2008*. With version 2.8, the -verbose
switch produces a great number of lines, explaining what happens
(current version is less verbose).

.. container:: tty_out

   ::

      grimm@medee$ tralics xhello -verbose
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for xhello.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file /user/grimm/home/cvs/tralics/.tralics_rc.
      Configuration file has type \documentclass
      Seen \documentclass ra2003
      Potential type is ra2003
      ...
      Configuration file identification: standard-ra $ Revision: 2.1 $
      Read tcf file for type: ../confdir/ra.tcf
      Using type ra
      ...
      dtd is raweb from raweb3.dtd (mode RAWEB2006)
      Fatal error: Please add 2006 in the name of the input file
      Fatal_error for xhello
      Say tralics --help to get some help

**Example 8.** You can use the option -year=2008; this sets a variable
to be 2008; in Raweb mode, this can produce an error of the form *Option
-year=2008 incompatible with year in source file*, is ignored otherwise.
Even without this switch, the file will not compile, because of a
mismatch between the year of the file, and that of the document class.

.. container:: tty_out

   ::

      grimm@medee$ tralics hello2006
      This is tralics 2.13.0, a LaTeX to XML translator, running on medee
      Copyright INRIA/MIAOU/APICS 2002-2008, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file hello2006.tex.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file ../confdir/.tralics_rc.
      Configuration file identification: standard-ra $ Revision: 2.4 $
      Read tcf file ../confdir/ra.tcf
      Illegal document class ra2003 should be ra2006

**Example 9.** Final test: we translate the file hello2003. *Tralics*
version 2.8 uses a preprocessor that complains in case of unbalanced
environments.

.. container:: tty_out

   ::

      [2]grimm@medee$ tralics hello2003
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for hello2003.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file /user/grimm/home/cvs/tralics/.tralics_rc.
      Configuration file identification: standard-ra $ Revision: 2.1 $
      Read tcf file for type: ../confdir/ra.tcf
      Error signaled at line 3:
      Missing \end{document}.
      Fatal_error for hello2003

**Example 10.** In version 2.10.7, the preprocessor is not called if the
year is 2007 or greater (this is indicated by the line *Simplified RA*).
Thus, we can copy hello2003 into hello2007, replacing 2003 by 2007 is
the document class. Compilation succeeds.

.. container:: tty_out

   ::

      grimm@macarthur$ tralics hello2007 -silent
      This is tralics 2.10.7, a LaTeX to XML translator, running on macarthur
      Copyright INRIA/MIAOU/APICS 2002-2007, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file hello2007.tex.
      Read tcf file ../confdir/ra2007.tcf
      Simplified RA
      Translation done 
      Output written on hello.xml (249 bytes).
      No error found.
      (For more information, see transcript file hello2007.log)
      rahandler.pl v2.15, (C) 2004 2006 INRIA, Jos\'e Grimm, Team Apics
      Postprocessor did nothing

**Example 11.** In version 2.13, both the preprocessor and
postprocessors are removed. Note the following differences between
examples 10 and 11. The line *Simplified RA* has been removed, as well
as the two lines dealing with the postprocessor. There is a file
ra2007.tcf but no file ra2003.tcf (because ra.tcf can be used instead).
Finally, the class file ra2007.clt was added to the system after example
10 was run.

.. container:: tty_out

   ::

      grimm@medee$ tralics hello2003
      This is tralics 2.13.0, a LaTeX to XML translator, running on medee
      Copyright INRIA/MIAOU/APICS 2002-2008, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file hello2003.tex.
      Read tcf file ../confdir/ra.tcf
      Document class: ra2003 2008/07/12 v1.0 Activity Report, Inria 2003
      Output written on hello.xml (249 bytes).
      No error found.
      (For more information, see transcript file hello2003.log)

In Raweb mode, the magic line ``\AtBeginDocument{\rawebstartdocument}``
is executed. The effect of this command is to translate the metadata
(name of the team, etc); it is defined by the class file. Our little
file compiles because there is no ``\begin{document}``. Translation is

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE raweb SYSTEM 'raweb7.dtd'>
      <!-- Translated from latex by tralics 2.10.7, date: 2007/11/03-->
      <raweb language='english' creator='Tralics version 2.10.7' year='2007'>
      <p>Hello, world!</p>
      </raweb>

*Tralics* version 2.15.4 however complains with *No module in section
composition* and four other errors; this is because the configuration
file imposes these sections to be non-empty (they are marked “special”
in the configuration file). On the other hand, there is no problem with
hello2007. Note: the year field in ``raweb`` element is the same as the
document class, and not the compilation date.

.. _main-doc:

2.3 Main document
-----------------

We make here the following assumption: the document is named
foo2003.tex, the document class is ra2003 (same year), and a
configuration file specifying type RA is seen. In this case, RA mode is
entered. Before 2007, there was a preprocessor, that did some checks,
rearranged the code, etc. In what follows, we explain what happens with
the example of 2003 and what is new in 2007 or 2008.

A first difference in 2007 is that you will not see *fatal error,
missing \\project* anymore (a normal error will be signaled instead when
translating the start of the document). A well-formed configuration file
is required. If you get a message like the following, please contact the
raweb team.

.. container:: tty_out

   ::

      Read tcf file ra2007.tcf
      The configuration file for the RA is ra2007.tcf or ra.tcf
      It must define a value for the parameter ur_vals
      See transcript file apics2007.log for details
      No xml file generated
      Fatal_error for apics2007

.. _conffile:

2.3.1 The Configuration File
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The configuration file for the raweb is named ra.tcf (generic code) or
ra2008.tcf (this one is specific to the year 2008). Its content is
similar to what is described `here <doc-step.html#fourth-doc>`__. The
generic ra.tcf configuration file has a block of commands, the specific
files have none (all commands specific to the raweb are now in the
ra.plt file, included by the ``\documentclass`` command). The file
starts with

.. container:: ltx-source
   :name: confspec8

   ::

        DocType = raweb raweb7.dtd
        DocAttrib = year \specialyear
        DocAttrib = creator \tralics

This has as effect to define the preamble of the XML result file (see
translation of example 10 above). There are lines of the following form:

.. container:: ltx-source

   ::

        bibtex_fields = "x-editorial-board" 
        bibtex_fields = "+x-international-audience" 
        bibtex_fields = "+x-proceedings" 
        bibtex_fields = "+x-invited-conference"
        bibtex_fields = "+x-scientific-popularization" 
        bibtex_fields = "+x-pays"
        bibtex_fields = "+url-hal" 
        bibtex_extensions = "patent standard"
        bibtex_extensions = "+hdrthesis" 

The left hand side may be bibtex_extensions or bibtex_fields, the right
hand side is a space-separated list of items (you can insert line breaks
as in the case of fullsection_vals below). The list may start with a
plus sign; this means append to the previous value (default is overwrite
it). The meaning of these lines is the following: when *Tralics*
interprets the bibliography, it recognizes (for every entry type) the
fields x-editorial-board, x-international-audience, etc, including
url-hal; it also recognizes the entry types patent, standard and
hdrthesis. An element in the list may be preceded by a minus sign; in
which case, it will be ignored (ignoring entry types may provoke
undefined references). Assume for instance that the bibliography
contains

.. container:: ltx-source

   ::

      @phdthesis{TEILR09,
      title = {TEI},
      author = {Laurent Romary},
      school = {Humboldt-Universitat zu Berlin},
      url =  "http://www.hu-berlin.de/",
      year = 2015, 
      x-editorial-board = "yes",
      x-international-audience = "yes",
      x-proceedings = "no",
      x-invited-conference = "yes",
      x-scientific-popularization = "yes",
      x-pays = {xx,yy}  ,
      x-other = "ignored" ,
      url-hal ="http://hal.inria.fr/",
      }
      @patent{Algo09,
      author = {Gaëtan Bisson and Răzvan Bărbulescu},
      Title = {Algorithmes unicode pour les lettres Ààéçœ et Ñ},
      year = 2015,
      x-pays= {CH,HK}
      }

Assume moreover that the school field has to be omitted. The translation
is now

.. container:: xml_out

   ::

      <citation from='year' key='7' id='bid15' userid='cite:TEILR09' type='phdthesis'>
      <bauteurs><bpers prenom='L.' nom='Romary' prenomcomplet='Laurent'/></bauteurs>
      <btitle>TEI</btitle>
      <btype>Ph. D. Thesis</btype>
      <xref url='http://www.hu-berlin.de/'>http://<allowbreak/>www.<allowbreak/>hu-berlin.
        <allowbreak/>de/</xref><x-editorial-board>yes</x-editorial-board>
      <x-international-audience>yes</x-international-audience>
      <x-proceedings>no</x-proceedings>
      <x-invited-conference>yes</x-invited-conference>
      <x-scientific-popularization>yes</x-scientific-popularization>
      <x-pays>xx,yy</x-pays>
      <url-hal>http://hal.inria.fr/</url-hal>
      </citation>
      <citation from='year' key='15' id='bid2' userid='cite:Algo09' type='patent'>
      <bauteurs><bpers prenom='G.' nom='Bisson' prenomcomplet='Gaëtan'/>
        <bpers prenom='R.' nom='Bărbulescu' prenomcomplet='Răzvan'/></bauteurs>
      <btitle>Algorithmes unicode pour les lettres Ààéçœ et Ñ</btitle>
      <x-pays>CH,HK</x-pays>
      </citation>

Finally, the ra2008.tcf file contains also the following lines that
defines five lists.

.. container:: ltx-source
   :name: confspec

   ::

        section_vals = "composition*/presentation*/fondements/domaine/logiciels/"
        section_vals = "+resultats/contrats*/international*/diffusion*/"
        theme_vals = "Com Cog Num Sym Bio"
        ur_vals = "Rocquencourt//Sophia/Sophia Antipolis/Rennes//Lorraine//";
        ur_vals = "+RhoneAlpes/Rh\^one-Alpes/Futurs//"
        affiliation_vals ="Inria//Cnrs//University//ForeignUniversity//"
        affiliation_vals ="+Public//Other//"
        profession_vals = "Scientist//Assistant//Technical//PHD//"
        profession_vals = "+PostDoc//StudentIntern//Other//"

The quantity theme_vals is a list of words, separated by spaces,
converted to lower case. The quantity section_vals is a list of words,
separated by slash characters (with possibly a star at the end; these
are called “special”). For all other variables of the form
something_vals, it is a list of pairs, name and value, separated by
slashes. If the value is empty, the name is used instead. An initial
plus sign means continuation. The final slash can be omitted; an initial
slash is ignored.

Since 2007, the English title associated to a (French) section name has
been moved to the configuration file; it is given by fullsection_vals
(that should be used instead of section_vals; with this syntax, there
are no “special” sections anymore). As the following demonstrates, you
can put a string on more than one line, provided that the last character
on the line is a backslash.

.. container:: ltx-source
   :name: confspec1

   ::

        fullsection_vals = "/composition/Team/presentation/Overall Objectives/\
           fondements/Scientific Foundations/domaine/Application Domains/\
           logiciels/Software/resultats/New Results/\
           contrats/Contracts and Grants with Industry/\
           international/Other Grants and Activities/diffusion/Dissemination"
        xml_rasection = "section"

The translation of a section, for instance composition, is
``<composition>``. If the configuration file defines xml_rasection, this
will be the name of the element; the value extracted from
fullsection_vals becomes an attribute; example
``<section titre='Team'>``. Note that the start and end of a section is
determined by the modules it contains.

The transcript file contains some lines, showing how *Tralics*
interprets the configuration file. You might see the following lines.

.. container:: log_out

   ::

      theme_vals=Com Cog Num Sym Bio
      Section: composition -> Team
      Section: presentation -> Overall Objectives
      Section: fondements -> Scientific Foundations
      Section: domaine -> Application Domains
      Section: logiciels -> Software
      Section: resultats -> New Results
      Section: contrats -> Contracts and Grants with Industry
      Section: international -> Other Grants and Activities
      Section: diffusion -> Dissemination
      UR: Rocquencourt -> Rocquencourt
      UR: Sophia -> Sophia Antipolis
      UR: Rennes -> Rennes
      UR: Lorraine -> Lorraine
      +UR: RhoneAlpes -> Rh\^one-Alpes
      UR: Futurs -> Futurs

2.3.2 Interpreting the Configuration File
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

*Tralics* has a command
```\tralics@get@config{X}{Y}`` <doc-t.html#cmd-tralicsfindconfig>`__
that returns a value Z, according to the following rules.

-  It is an error if X is ``foo``, and if the configuration file does
   not specifies foo_vals, or if Y is not in the list.
-  The value associated to Y in the list is returned.
-  If X is ``theme``, then Y is converted to lower case; this will be Z.
-  If you say
   ```\tralics@interpret@rc{foo,bar}`` <doc-t.html#cmd-tralicsinterpretrc>`__,
   this checks that all arguments are in the list ur_vals and marks them
   as possible locations. If a single item is given, it will be the
   default location.
-  If X is ``ur``, then Z is Y, if Y is a possible location. An initial
   plus sign is discarded: if Y is correct, it becomes the default
   location. If Y is empty, the default location will be used. An error
   is signaled otherwise.
-  If X is ``fullsection``, let k be the current section number, and K
   the position of Y in the section list (this could be section_vals or
   fullsection_vals). If Y is empty, an error is signaled if there is no
   current section, otherwise K is k. An error is signaled if Y is not
   in the list; an error is signaled if K is less than k ; an error also
   is signaled if K=k and Y is ``composition`` (details are given
   later). After that, K becomes the current section number. The value Z
   is empty if K=k, the value associated to Y otherwise.
-  If X is ``section``, then if the section number *k* (defined as
   above) is “special”, then Z is empty. Otherwise Z is Y (or
   ``default`` if Y is empty).

2.3.3 The main document
~~~~~~~~~~~~~~~~~~~~~~~

The main Raweb document has the following structure

.. container:: ltx-source

   ::

      \documentclass{ra2003}         %001
      <Header>
      \begin{document}               %016
      \maketitle                     %019
      <Modules>
      \loadbiblio                    %488
      \end{document}                 %489

Here, and in the examples that follow, blue numbers are the line numbers
of the corresponding lines in the example file. Things like <Modules>
are explained below. The ``\documentclass`` should be ``ra2006`` for the
year 2006.

**Note.** The two commands ``\maketitle`` and ``\loadbiblio`` are now
obsolete.

2.3.4 The header
~~~~~~~~~~~~~~~~

The header of the file is everything before ``\begin{document}``. It
should not produce any text. There is a free part and a required one,
they can be intermixed. The free part contains definitions and
``\usepackage`` commands. We recommend to always use ``\newcommand``
instead of ``\def`` (do not follow the example). You should *not* load
packages like ``french`` or ``babel``, because the current language of
the Raweb is English. For instance:

.. container:: ltx-source

   ::

      \usepackage{amsfonts}          %002
      \usepackage{amsmath}
      \def\CC{{\mathbb C}}           %009
      \newcommand{\etc}{etc}
      \def\corresp{manager}

The required part of the header contains lines like the following

.. container:: ltx-source

   ::

      \projet{MIAOU}{Miaou}{Mathématiques et 
           Informatique de l'Automatique et de l'Optimisation pour 
        l'Utilisateur}               %006
      \theme{4a}                     %004
      \isproject{YES} % \isproject{OUI} works also %005
      \UR{\URSophia}                 %007

See `Changes in 2007 <#fmodule7>`__ and `Changes in 2008 <#fmodule8>`__
for some changes introduced for the RA2007 or RA2008. There are no fatal
errors any more.

2.3.5 The Team Name and Properties
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ``\isproject`` command take one argument that should be true if the
team is a Project-Team (according to local terminology). The current
version of the ra.plt package uses the xkeyval mechanism in order to
allow variants (équipes, actions transversales, whatever, see
instructions).

The ``\project`` command (it can be spelled as ``\projet``) takes three
arguments Uname, Sname and Lname. Here Sname is the short name of the
Team, and Lname its long name. The short name could be as complicated as
πr\ :sup:`2`. The long name is a bit more explicit and should be in
English.

The first argument Uname should match the file name, miaou2003.tex. The
code that follows uses ```\ra@jobname`` <doc-r.html#cmd-rajobname>`__,
this holds ``miaou``. It is like ``jobname``, except that the directory
part, and the year has been stripped; in particular, all characters have
category code 12 (except for space), so ``detokenize`` has to be used.
In earlier versions, Uname had to be all uppercase.

.. container:: ltx-source

   ::

        \edef\tmpB{\ra@jobname}
        \def\tmpA##1{\lowercase{\xdef\tmpA{\detokenize{##1}}}}
        \expandafter\tmpA\expandafter{\ra@proj@a}
        \ifx\tmpA\tmpB \else\PackageError{Raweb}{Invalid Team name \ra@proj@a}{}\fi

2.3.6 The Theme
~~~~~~~~~~~~~~~

The ``\theme`` command takes as argument a Theme (Research Teams are
grouped into domains, split into themes). Between 1996 and 2003,
research themes were identified by a digit, between 1 and 4, followed by
a letter; giving ``4a`` as argument has as effect to insert in the HTML
a link to the `theme
4 <http://www.inria.fr/recherche/equipes/listes/theme_4.en.html>`__
(this link is probably broken now). In 2004, the list of domains/themes
changed, and checking become more complex. You can see errors of the
form *Invalid theme 4a, Valid themes are com cog num sym bio*, where the
list comes from the configuration file (converted to lower case). Here
COM stands for “Communicating systems”, one of its themes being
“Distributed systems and software architecture”). In 2009, the list
changed again: *apics* (successor of *miaou*) is in domain
“Mathématiques appliquées, calcul et simulation” (in English “Applied
Mathematics, Computation and Simulation”), and theme “Modeling,
Optimization, and Control of Dynamic Systems”. This information, as well
as a link to the correct URL, is now inserted into the HTML or Pdf
version of the RA by an xsl stylesheet, according to the value of the
team name. As a consequence, the argument of the ``\theme`` command is
now ignored.

2.3.7 The Localisation
~~~~~~~~~~~~~~~~~~~~~~

The ``\UR`` command takes as argument a list of Research Units. The
default configuration file shown above gives the list of valid names. In
2007 they are ``Rocquencourt``, ``Sophia``, ``Rennes``, ``Lorraine``,
``RhoneAlpes`` and ``Futurs``. Since then ``Futurs`` has been replaced
by ``Bordeaux``, ``Lille`` and ``Saclay``. Before 2007, you had to say
``\UR{\URSophia}`` (for a team in a single UR) or
``\UR{\URFuturs\URSophia}`` for a team in two URs. This is still
accepted, but the recommended syntax is now ``\UR{Sophia}`` (for a team
in a single UR) or ``\UR{Futurs,Sophia}`` where the comma could be
replaced by a space. The list is interpreted by
```\tralics@interpret@rc`` <doc-t.html#cmd-tralicsinterpretrc>`__ that
can signal an error of the form:

.. container:: tty_out

   ::

      Error signaled at line 22 of file exemple2006.tex:
      Illegal localisation value: Saclay
      Use one or more of: Rocquencourt Sophia Rennes Lorraine RhoneAlpes Futurs.

2.3.8 The Topics
~~~~~~~~~~~~~~~~

The last part of the header is the Topic declaration. Example

.. container:: ltx-source

   ::

      \declaretopic{abc}{Topic abc}  %013
      \declaretopic{def}{Topic def}

Topics are defined if the ra.plt package is called with option
``topic``. Otherwise the two lines above are ignored as well as the
optional argument of the module environment. Topics have been declared
obsolete in 2007, so they exist only for compatibility reason, and no
error is signaled anymore. Each topic has a name and a title. The name
can be an optional argument of ``module`` (see the example, lines
`79 <raweb1.html#079>`__, `207 <raweb1.html#207>`__
`212 <raweb1.html#212>`__ and `322 <raweb1.html#322>`__.) Topics are
handled via a call to ``\tralics@get@config{section}{XX}``. See for
instance the reports of `isa
2003 <http://www.inria.fr/rapportsactivite/RA2003/isa2003/isa_tf.html>`__,
`isa
2004 <http://www.inria.fr/rapportsactivite/RA2004/isa2004/isa_tf.html>`__
or `odyssee
2005 <http://www.inria.fr/rapportsactivite/RA2005/odyssee/odyssee_tf.html>`__.

2.3.9 Preprocessor Limitations
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

We list here some errors signaled by the preprocessor; this concerns
only the RA2006 and before.

Lines containing ``\theme`` etc, should not contain anything else after
the arguments. Replacing the % line 5 by a \_ will give this message

.. container:: tty_out

   ::

      Error signaled at line 5:
      Characters ignored at end of line
      current line is  _ \isproject{OUI} works also
      error is at position 1 at character _ (ascii 95).
      Fatal_error for miaou2003

You cannot say ``\def\foo{YES}\isproject\foo``, because the program
looks for explicit braces. Example:

.. container:: tty_out

   ::

      Error signaled at line 5:
      Characters ignored before open brace
      error signaled while scanning isproject
      current line is \foo % \isproject{OUI} works also
      error is at position 0 at character \ (ascii 92).
      Fatal_error for miaou2003

Before 2006, *Tralics* created file, named \_hyperref.cfg, containing
all the keywords in alphabetic order. You could see errors of the form

.. container:: tty_out

   ::

      Error at line 107
      Strange keywords 

      meromorphic approximation, frequency-domain identification,
      extremal problems {$(\max,+)$}

The ``participants`` environment should contain only ``\pers{}{}[]``
commands, separated by commas.

.. container:: tty_out

   ::

      Error signaled at line 253:
      Syntax error near `and \pers{xx}{yy}'

      \pers{Jean-Paul}{Marmorat} and \pers{xx}{yy}.
      Fatal_error for miaou2003

or

.. container:: tty_out

   ::

      Error signaled at line 253:
      Superfluous comma

      \pers{Jean-Paul}{Marmorat},, \pers{xx}{yy}
      \pers{Martine}{Olivi}[\corresp]
      .
      Fatal_error for miaou2003

The ``\pers`` command can be used in a ``participants`` or ``catperso``
environment. In one case, you must use commas as separators, in the
other case, you cannot. In the current version, the comma after
``\pers`` is optional, so that you won't see

.. container:: tty_out

   ::

      Error signaled at line 253:
      There must be a comma between two \pers

      \pers{Jean-Paul}{Marmorat}\pers{xx}{yy}
      \pers{Martine}{Olivi}[\corresp]
      .
      Fatal_error for miaou2003

nor

.. container:: tty_out

   ::

      Error signaled at line 44:
      Syntax error near `, \pers{x}{y}'
      {Ph. D. Students}
      \pers{David}{Avanessoff}[Fellow, INRIA], \pers{x}{y}.
      Fatal_error for miaou2003

The distiction between environments participants and participants has
been removed, there is no more

.. container:: tty_out

   ::

      For the environment ending near line 191
      please use `participant' or `participante' for the name,
      as there is only one \pers in the list.
      For the environment ending near line 253:
      please use `participants' or `participantes' for the name,
      as there are 2 \pers in the list.

The following error message was introduced in 2007, after removal of the
preprocessor. You will not see anymore in 2008.

.. container:: tty_out

   ::

      Error signaled at line 3095 of file apics2007.tex:
      Text found in a mode where no text is allowed.
      Only \pers commands should appear in a participants environment

2.4 Modules
-----------

A module is an environment, with some arguments: an optional topic
reference (see above), and three required arguments (section, name,
title). It is followed by an optional interface (formed of contributors,
keywords, glossary, and moreinfo) and text. Since a module is
essentially a ``\subsection``, the text should contain only
``\subsubsection`` and ``\paragraph`` commands. Modules cannot be
nested. The first module is special, we shall explain it later. The
second module looks like this

.. container:: ltx-source

   ::

      \begin{module}{presentation}{presentation}{} %047
      \begin{moreinfo}                             %048
      The project was terminated June the 30th, 2003. 
      A proposal for a new project named APICS has been submitted to the steering
      committee of Inria Sophia Antipolis.
      \end{moreinfo}
      ...
      \end{module}                                 %076

It should be a small description of the main research objectives of the
Team. You can use the ``moreinfo`` environment for emphasizes (in this
example, to indicate that this is the last RA for the miaou Team).
Historical note: Miaou has been effectively dissolved on 2003-31-12, was
replaced by Apics on 2004-01-01, which became a Project on 2005-01-01.

The standard configuration file `(see above) <#confspec>`__ defines nine
sections. The Raweb DTD associates to each section an English name,
shown in parenthesis here. Since 2007, the names have been moved to the
configuration file `(see above) <#confspec1>`__

#. composition (Team) example `line 22 <raweb1.html#022>`__
   This section gives the list of the members of the Team; see below.
#. presentation (Overall Objectives), example `line
   47 <raweb1.html#047>`__
   General presentation of the team, and overall objectives.
#. fondements (Scientific Foundations), example `line
   79 <raweb1.html#079>`__.
   This should explain the (scientific) tools and methodology used by
   the Team.
#. domaine (Application Domains), `example line
   183 <raweb1.html#183>`__, `line 187 <raweb1.html#187>`__, `line
   201 <raweb1.html#201>`__, `line 207 <raweb1.html#207>`__, `line
   212 <raweb1.html#212>`__, `line 217 <raweb1.html#217>`__.
   This is a very important section. You should use the following
   official keywords: telecommunications, multimedia, biology, health,
   process engineering, transportation systems, environment.
#. logiciels (Software), `example line 231 <raweb1.html#231>`__, `line
   241 <raweb1.html#241>`__, `line 249 <raweb1.html#249>`__, `line
   262 <raweb1.html#262>`__, `line 273 <raweb1.html#273>`__
   Each piece of software should be described here. You should use
   ``[correspondant]`` as moreinfo field for one of the team members.
#. resultats (New Results), example `line 286 <raweb1.html#286>`__,
   `line 314 <raweb1.html#314>`__, `line 318 <raweb1.html#318>`__, `line
   359 <raweb1.html#359>`__.
   This section explains the new results found by the Team.
#. contrats (Contracts and Grants with Industry), example `line
   322 <raweb1.html#322>`__, `line 338 <raweb1.html#338>`__, `line
   346 <raweb1.html#346>`__.
   You should explain here the work funded by Industry.
#. international (Other Grants and Activities), example `line
   366 <raweb1.html#366>`__, `line 380 <raweb1.html#380>`__, `line
   401 <raweb1.html#401>`__, `line 407 <raweb1.html#407>`__.
   In this section, you describe contacts with other Teams (in France,
   Europe, and rest of the Word).
#. diffusion (Dissemination), example `line 433 <raweb1.html#433>`__,
   `line 468 <raweb1.html#468>`__, `line 474 <raweb1.html#474>`__.
   Here you describe Teaching activities, etc.

The first argument of a module, the section, is handled by calling
``\tralics@get@config{fullsection}{#1}`` whose behavior is described
`above <#fullsection>`__. If this defines a new section, the previous
section (if any) is popped via
```\tralics@pop@section`` <doc-t.html#cmd-tralicspopsection>`__ and a
new section is created via
```\tralics@push@section{#1}`` <doc-t.html#cmd-tralicspushsection>`__.

The section may be empty, case where no new section is created. If there
is no current section, you will see an error of the form *No default
section*. Normally, “composition” is the first module (see below) and
the first section. So, if the first module has an empty section and is
followed by the composition, you will see a second error *Composition
must be before first module* and a third *Only one module accepted in
composition*. If a module with empty section follows the composition,
you will only see the last of these three message.

If the section is not in the list of valid sections defined by the
configuration file, you will get an error of the form *Invalid section
Domaine* followed by *Valid sections are composition presentation
fondements domaine logiciels resultats contrats international diffusion*
(it could be followed by the errors listed above).

**Note** You can notice that the module starting at `line
359 <raweb1.html#359>`__ is in the section “resultats”, but it comes
after the modules of the section “contrats”. This is allowed by the
preprocessor : modules are re-ordered. This feature is removed in 2007.
You will see the error *Bad section fondements after diffusion* followed
by *Order of sections is composition presentation fondements domaine
logiciels resultats contrats partenariat diffusion* (it could be
followed by a second error).

The second item in a module, name, is a symbolic name, that uniquely
defines the module; it must be unique, or else an error of the form
*Class Raweb Error: Duplicate module: dif-anim* is signaled. Since a
label (for instance ``mod:presentation``, is created and anchored to the
module, there will be another error *Label 'mod:dif-anim' multiply
defined (first use line 667 file exemple2006.tex)*. Trying to use
special commands (for instance math formulas) can produce errors of the
form *unexpected element formula*.

Finally a module has a title. In the example, three modules have an
empty title: `line 22 <raweb1.html#022>`__, `line
47 <raweb1.html#047>`__, and `line 183 <raweb1.html#183>`__. This is
somehow weird, so, unless ra.plt is loaded with option ``emptymodule``,
an empty title is replaced by ``(Sans Titre)``. Before 2008, a
complicated algorithm was used by the post-processor to deal with the
case of empty modules titles. In the current version, an error is
signaled and a default title is used.

.. _modules-i:

2.5 Module Interface
--------------------

A typical module should contain an interface and a body. The interface
is formed of contributors, keywords, glossary, and moreinfo. The
original idea was that body is defined by a ``body`` environment. This
has been simplified: it can be any text, including subsections with
their own interface. In a section like “Overall objectives”, you do not
cite contributors (because you talk about the whole Team), and in a
section like “Dissemination”, you do not cite them either (in fact,
names appear in the body of the module, for instance `line
436 <raweb1.html#436>`__ and `line 470 <raweb1.html#470>`__). Example

.. container:: ltx-source

   ::

      \begin{module}{}{calcul formel}{Software aspects of computer algebra}
        \begin{participants}
          \pers{Jean}[de]{La Fontaine}[1621-1695]
          \pers{Cecil Blount}{De Mille}
        \end{participants}
        \begin{motscle}
          mot1, mot2, mot3
        \end{motscle}
        \begin{glossaire}
          \glo{trick}{the thing which makes go the thingummy}
          \glo{BabelFish}{the translator of the previous sentence}
        \end{glossaire}
        \begin{moreinfo}
          This work was sponsored by all the sponsors
        \end{moreinfo}
        This is the body of the module.
      \end{module}

The moreinfo is technically a ``moreinfo`` environment. It is formed of
a short paragraph (of the form: “this work done in collaboration with
X”).

The keywords are indicated by the ``motscle`` environment; examples are
given at `line 104 <raweb1.html#104>`__, `line 136 <raweb1.html#136>`__,
`line 193 <raweb1.html#193>`__, `line 202 <raweb1.html#202>`__, and
`line 225 <raweb1.html#225>`__. The environment contains a comma
separated list of keywords. The last example shows how to put commas
into a keyword. Keywords have become obsolete. Later on, the powers that
be have reintroduced a global list of keywords, with a different syntax.

A glossary is a ``glossaire`` environment in which you can put ``\glo``
commands; they take two arguments: a word and its description. There is
a dummy example `line 475 <raweb1.html#104>`__. In the current version,
there is no possibility to make a reference to the items of the
glossary.

A contributors list is given by a ``participants`` environment. Since
2008, this produces a ``<participants>`` element. For compatibility
reasons with the initial (French) version, you can use ``participant``,
``participante`` or ``participantes``. If the ra package is called with
option ``participant``, then the name of the element is the name of the
environment. Inside the environment, empty lines are ignored and
``\pers`` is defined to be ``\persA``. Examples are `line
094 <raweb1.html#094>`__, `line 126 <raweb1.html#126>`__, `line
189 <raweb1.html#189>`__, `line 219 <raweb1.html#219>`__, `line
233 <raweb1.html#233>`__, `line 243 <raweb1.html#243>`__, `line
250 <raweb1.html#250>`__, `line 265 <raweb1.html#265>`__, and `line
274 <raweb1.html#274>`__.

.. _f-module:

2.6 First Module
----------------

.. _fmodule3:

2.6.1 Original syntax
~~~~~~~~~~~~~~~~~~~~~

The first section contains a single module, for instance, the one
starting at `line 22 <raweb1.html#022>`__. Its name is useless. It
should contain only ``catperso`` environments (but this is not checked).
Examples are `line 24 <raweb1.html#024>`__, `line
28 <raweb1.html#028>`__, `line 32 <raweb1.html#032>`__, `line
36 <raweb1.html#036>`__, and `line 40 <raweb1.html#040>`__. Each such
environment has a title, and contains a list of names, like the
``participants`` environment, without commas.

The syntax of the ``\pers`` command is the following: first name,
particle, last name and moreinfo. An example is the following:
\\pers{Jean}[de]{La Fontaine}[1621-1695]. Arguments in braces an
mandatory, arguments in brackets are optional. We recommend the syntax
``\pers{Jean}{de la   Fontaine}``, since *Tralics* does nothing with the
particle apart prefixing it to the last name. In the first module, the
moreinfo may indicate that some contributor has a grant from Inria, or
whatever, and for non permanent people, their arrival, and departure
date (as in `line 43 <raweb1.html#043>`__); this could also indicate a
collaboration of another organism, for instance like in `line
97 <raweb1.html#097>`__;

.. _fmodule6:

2.6.2 The 2006 semantics
~~~~~~~~~~~~~~~~~~~~~~~~

In 2006, the syntax of ``\pers`` changed. The ``\persA`` command is the
one described above, the syntax of ``\persB`` is first name, particle,
last name (same meaning as above), CR, profession, affiliation,
moreinfo, HDR. The last two arguments are optional; a non-empty value of
HDR means that the person has a “Thèse d'état” or a “Habilitation à
diriger les Recherches”. The CR argument was introduced in 2007, and is
described in section 2.6.3.

The profession and affiliation arguments must be used after the last
name. The value is restricted to what is defined by the `configuration
file <#confspec>`__. Example

.. container:: ltx-source

   ::

      \begin{catperso}{Ph. D. Students}
      \pers{Jean}{Dupond}{Scientist}{Inria}
      \pers{Jean}{Dupont}{Assistant}{Cnrs}[][yes]
      \pers{Jean}{Durand}{Technical}{University}[][]
      \pers{Jean}{Dumat}{StudentIntern}{Other}[bla bla ][no]
      \pers{Jean}{Durant}{PHD}{ForeignUniversity}[with a T]
      \pers{Jean}{Dumas}{PostDoc}{Public}[with a S][scheduled november 2007]
      \pers{Jean}{Dumont}{ Other }{Other}[bla bla ][no]
      \end{catperso}

.. _fmodule7:

2.6.3 The 2007 changes
~~~~~~~~~~~~~~~~~~~~~~

Topics have become obsolescent. This means that *Tralics* recognises the
syntax, but ignores all values. A new feature has been added: the start
of the document optionally contains a line of the form
``\TeamHasHdr{yes}``. A true value means: at least one staff member has
a Hdr (see discussion about the ``\pers`` command). This feature has
been removed in 2008.

The following three lines are equivalent; they say that the team is
located in both Rocquencourt and Sophia. Recall that “UR” stands for
Unité de Recherche (Research Unit), and this is nowadays called Research
Center.

.. container:: ltx-source

   ::

      \UR{\URRocquencourt\URSophia }
      \UR{Rocquencourt,Sophia }
      \ResearchCentreList{Rocquencourt,Sophia}

Since 2007 you must indicate, for every staff member, its localisation
(Rocquencourt or Sophia, in the example above). This is done by adding
an optional argument to the ``\pers`` command. Of course, the optional
argument is required only if the RC list has more than one element.
Example

.. container:: ltx-source

   ::

      \begin{catperso}{Team Leader}
      \pers{Laurent}{Baratchart}[Sophia]{Chercheur}{INRIA}[DR Inria][Habilite]
      \end{catperso}

In the example that follows, the equals sign says that Sophia becomes
the default value (so that there is no need to repeat it).

.. container:: ltx-source

   ::

      \begin{catperso}{Reserch scientists (external)}
        \pers{Jean}{Louchet}[=Sophia]{Chercheur}{INRIA}[CR]
        \pers{Jean-Marie}{Rocchisani}{Chercheur}{UnivFr}[Université Paris XIII]
      \end{catperso}

.. _fmodule8:

2.6.4 The 2008 changes
~~~~~~~~~~~~~~~~~~~~~~

Before 2008, the first section consisted in a module consisting of a
sequence of ``catperso`` environments. Such an environment takes one
argument, a category of people. As the examples show, the values are
very diverse (compare ``Head of project team`` with ``Team leader``), so
there was an attempt to limit the values to those defined in the
configuration file, before the replacement by a unique environment
``composition``, outside any module.

Remember that the ``\pers`` command comes in two versions ``\persA``
(simple) and ``\persB`` (complicated). These are commands are defined in
the ra.plt package file, included from the class file (for instance
ra2009.clt) with some options. You should use the ``\pers`` command only
in two cases: inside a ``participant`` environment (and then it is
``\persA``), or in the first module. If this one is defined by
``composition`` (2008 and later), then ``\pers`` is made undefined
outside ``participant`` and ``composition``. It is ``\persA`` if the
package is loaded with option ``old`` (2005 and before) and ``\persB``
otherwise (2006 and later). Example for 2008:

.. container:: ltx-source

   ::

      \begin{composition}
        \pers{Christine}{Eisenbeis}{Chercheur}{INRIA}[Team Leader (CR) Inria][Habilite]
        \pers{Nathalie}{Gaudechoux}{Assistant}{INRIA}[Secretary (SAR) Inria]
        \pers{François}{Thomasset}{Chercheur}{INRIA}[Research Director (DR) Inria]
        \pers{Jean}{Louchet}{Chercheur}{AutreEtablissementPublic}[Ing. en chef Armement (CR)]
        \pers{Jean-Marie}{Rocchisani}{Chercheur}{UnivFr}[Université Paris XIII]
        \pers{Moussa}{Lo}{Visiteur}{UnivEtrangere}[AUF Grant/ Gaston Berger University, 
          Saint-Louis, Senegal, from March 1st till August 31 2008]
      \end{composition}

2.6.5 The 2013 changes
~~~~~~~~~~~~~~~~~~~~~~

The affiliation part of the ``\pers`` command has been removed (and the
command is defined as ``\persC``). Example (with a CR part).

.. container:: ltx-source

   ::

      \begin{composition}
        \pers{Tim}{Berners-Lee}[=Grenoble]{Chercheur}[Team leader, Senior Researcher Inria][Habilite]
        \pers{Ada}{Lovelace}{Assistant}[shared with another team]
        \pers{Richard}{Stallman}[Saclay]{Chercheur}[Senior Researcher Inria]
        \pers{Linus}{Torvalds}{Chercheur}[Ing. en chef Armement]
        \pers{Marc}{Andreessen}{Enseignant}[Professor, Université Paris 13]
        \pers{Donald E.}{Knuth}{Visiteur}[AUF Grant/ Gaston Berger University, Saint-Louis, Senegal, from March 1st till August 31]
        \pers{François}{Gernelle}{Technique}[IGHCA, Unicode team]
      \end{composition}

2.7 References
--------------

Our example contains `line 92 <raweb1.html#092>`__ a ``\label`` that is
referenced at `line 329 <raweb1.html#329>`__. This label is associated
to a section (starting at line `line 90 <raweb1.html#090>`__). You can
also associate a label with an equation (`line 141 <raweb1.html#141>`__)
or a figure (`line 304 <raweb1.html#304>`__) (note that the label has
nothing to do with the ``\caption`` that follows; references to the
figure will be correct after translation, but incorrect if LaTeX is
called directly).

You can reference a module via the ``\moduleref[y]{p}{s}{name}``. Since
2006, the optional argument has been removed, and the command is
equivalent to ``\ref{mod:name}`` (if the last argument is non-empty, to
``\ref{section:s}`` otherwise). The original idea was to refer to the
module “name” in section “s” of the activity report of team “p” for year
“y” (this worked in principle for the HTML version of the RA as the name
of the HTML page depended only on this quantities; it never worked in
the PDF version). So the year has to be the current year, the team has
to be the current team and the section could be deduced from the module
name, whence the current implementation. There is an example `line
330 <raweb1.html#330>`__ and some more at `line 410 <raweb1.html#410>`__
(if the module name is empty, the link points to the section).

You can use the ``\href`` command for external references, like in `line
258 <raweb1.html#258>`__, `line 280 <raweb1.html#280>`__, `line
384 <raweb1.html#384>`__, `line 394 <raweb1.html#394>`__, `line
398 <raweb1.html#398>`__, `line 481 <raweb1.html#481>`__.

In the bibliography, you can add a ``url`` field, like `this
one <raweb1.html#bib-Avan-Bar-Pom03rr>`__. We provide the ``\rrrt``
command: its argument is the number of a Inria Research report. Example
`here <raweb1.html#bib-Bara-Chy-Pom03>`__.

It is also possible to give the ``doi``: in `this
example <raweb1.html#bib-lswprep>`__, indicating the ``doi=`` is the
same as the ``xxurl``, without the xx.

.. _rabib:

2.8 Bibliography
----------------

.. _rabib1:

2.8.1 Bibliography: the raweb case
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

There are three bibliography files for the raweb: ``miaou2003.bib``,
``miaou_foot2003.bib``, and ``miaou_refer2003.bib``.

A reference from the main file miaou2003.bib appears in the bibliography
if it is cited via ``\cite`` (there is an example `line
122 <raweb1.html#122>`__) or via ``\nocite`` (example `line
246 <raweb1.html#246>`__) or if the ``\nocite{*}`` has been issued
(example `line 20 <raweb1.html#020>`__). The example file contains an
instance of each of the standard bibtex entries, with all the required
and optional fields, named std1 to std13, with two famous authors. The
main bibliography should contain only references of the Team in the
current year. Since 2013, this file is automatically generated.

Entries from miaou_refer2003.bib can be referred to via ``\cite`` or
``\refercite``, there is an implicit ``\nocite{*}``, so that the whole
database is included. The miaou_refer2003.bib should contain the ten
most important published papers (or books) of the team.

Reference to other bibliography entries (not from the team, not from the
current year, or not one of the most important publications of the team)
can be made, provided that the entry is in miaou_foot2003.bib, and you
use the command ``\footcite`` (there is an example `line
122 <raweb1.html#122>`__).

.. _rabib2:

2.8.2 Bibliography: the general case
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Normally, you say ``\cite{foo,bar}``, and this makes two references to
some bibliographic entries, defined by ``\bibitem{foo}`` and
``\bibitem{bar}``. Very often, an external program, bibtex, is used to
compute the list of these ``\bibitem`` and their content, using the
argument of the ``\bibliography`` command as the list of the database
files to look at. The output of bibtex is put in the file miaou2003.bbl,
it contains essentially one ``thebibliography`` environment (more than
one in the raweb case), and lots of ``\bibitem{foo}`` commands. The
content of these is defined by the current bibliography style, the value
of the argument of the ``\bibliographystyle`` command.

The default behavior of *Tralics* is not to call bibtex, but to compute
and translate an intermediate file, say ``miaou2003_.bbl`` (note the
underscore), that is equivalent to the miaou2003.bbl file produced by
bibtex. It contains no ``thebibliography`` environment, but a lot of
``\citation`` commands (that are in reality environments, since they are
explicitly terminated by an ``\endcitation`` command). This file is
translated (in case of errors while translating the bibliography, line
numbers refer to this file). An example is given under
```\citation`` <doc-c.html#cmd-citation>`__.

The result is independent of any bibliographystyle. It contains commands
of the form ``\cititem{btitle}{title of the book}``. If the command
``\cititem-btitle`` is defined, it will be called with
``title of the book`` as argument. It can also contain commands as
``\bauteurs`` and ``\beditors``, that take as argument a list of
``\bpers`` commands. All these commands can be redefined, they are
independent of commands used elsewhere.

The bibliography is translated at the end of the run, when the list of
all citations is found. The result is a ``<biblio>`` element (the name
can be changed, via the configuration file, using something like
xml_biblio = "Biblio"). This element is inserted in the XML tree at the
end. If you use the ``\bibliography`` command, the first occurrence of
it defines the location (bibtex complains if more than one
``\bibliography`` is issued, but *Tralics* is happy with more than one).
You can also use ``\insertbibliohere``, this command has precedence over
everything else.

Assume that the configuration file contains a line with bibtex_fields =
"firstpage lastpage". The effect of this line is to tell *Tralics* to
read also the fields ``firstpage`` and ``lastpage`` and to include them
in the bbl file as ``\cititem{firstpage}{50}``. If the configuration
file contains also bibtex_extension = "foo bar" then entry types ``foo``
and ``bar`` are recognised, together with the standard types.

.. _rabib3:

2.8.3 Bibliography: extended syntax
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The mechanism explained in §2.8.1 above works by extending the syntax of
the ``\cite`` command. It takes three arguments type (optional), prenote
(optional) and keys (a comma separated list of keys) for instance
``\cite[foo][bar]{gee1, gee2}``. If only one optional argument is given,
it is prenote. The translation is a sequence of
``<cit><ref>   </ref></cit>`` elements, one for each key.

The three commands ``\footcite``, ``\yearcite`` and ``\refercite`` do
not read a type but assume it is, respectively, ``foot``, ``year`` and
``refer``. In the case of ``\footcite``, the first ``<cite>`` is
preceded by the value of ``\footcitepre`` (that does nothing by
default). See also `\\yearcite <doc-y.html#cmd-yearcite>`__,
`\\refercite <doc-r.html#cmd-refercite>`__ and
`\\footcite <doc-f.html#cmd-footcite>`__. The commands ``\yearcite`` and
``\refercite`` were introduced in version 2.8 of *Tralics*, while
``\footcite`` is inspired from the footcite package by Eric Domenjoud.
The command ``\nocite`` is similar, but it takes no prenote. Its
translation is empty. A special key is ``*``; in this case a global
variable is set (meaning that the whole bibliography data base should be
included). The command ``\natcite`` command takes three optional
arguments nat-type, prenote, postnote. Translation is one ``<Cit>``
element, containing one ``<ref>`` per key.

If type is ``year``, it will be replaced by an empty value; if type is
``refer`` and DRY (see below) is false, it will be replaced as well. An
auxiliary command is then applied to each key. For instance
``\cite[year][aa]{r1,r2}`` is converted into
``\cite@one {}{r1}{aa}\citepunct \cite@one {}{r2}{}`` (the first empty
argument is the converted type type), and ``\footcite[bar]{gee1, gee2}``
is converted into
``\footcitepre \cite@one {foot}{gee1}{bar}\footcitesep \cite@one   {foot}{gee2}{}``
(the first command, by default does nothing). Finally,
``\natcite[aa][bb][cc]{r1,r2}`` is converted to
``\NAT@open bb \cite@simple {r1}\NAT@sep \cite@simple {r2}\NAT@cmt   cc\NAT@close \endnatcite``;
this uses some commands defined by the natbib.plt package. Translation
is
``<Cit type='aa'>(bb <ref   target='bid0'/>;<ref target='bid1'/>,   cc)</Cit>``.
The purpose of the ``\endnat`` token is to finish the ``<Cit>`` element.
Translation of ``\cite{xx}`` is ``<cit><ref target='bid8'/></cit>``.

Let's explain the commands ``\cite@simp{key}`` and
``\cite@one{type}{val}{key}``. They first generate a cite key, formed of
the type, the string “cite:” and the key, for instance
``footcite:gee2``. A unique identifier (for instance ``bid1``) is
associated to the key. If the identifier does not exists, the reference
is marked to be solved; it is an error if ``\cite`` is called after
*Tralics* has started translating the bibliography (for instance, you
cannot use the command in a bibliography file). In the case of
``\nocite`` no further action is taken; otherwise a reference is
created, of the form ``<ref target='bid1'/>``. In the case of
``\cite@simp``, this element is inserted in the XML tree, and no further
action is taken. Otherwise, the translation of the second argument
becomes the content of the element. A new paragraph is started if
necessary, and a ``<cit>`` element is inserted in the current XMl tree;
its value is the ``<ref>`` element. It may have three attribute:
``rend='type'`` (where the value of the attribute is the type),
``type='w'`` (in case ``\def\cite@@type{w}`` has been executed), and
``prenote='xx'`` (in case ``\def\cite@prenote{xx}`` has been executed).

One task of *Tralics* is to solve the citations, this means, for every
cite key, for instance ``footcite:gee2`` with unique id ``bid1``, there
is a unique element whose id attribute is bid1. There are different
ways, see below. After the whole document is translated, *Tralics*
checks if there are unsolved citations. If so, it translates the
bibliography. After that, for unsolved citations, an error is signaled
of the form *Error signaled while handling entry footcite:gee2 undefined
reference*. The ``\bibliography`` command specifies the list of data
files to consider. In the case of ``torture+foot`` (assuming there is no
file torture+foo.bib) the file torture.bib is read, and
``footcite:gee2`` is solved by a reference whose key is gee2. In the
case of the raweb, for instance for miaou2006, there are three
bibliography files miaou2006.bib (should contain all references of the
year 2006 of the team), miaou_refer2006.bib (contains major publications
of the team in recent years) and miaou_foot2006.bib (for everything
else). These file solve entries of type year, refer and foot
respectively. It may happen that *Tralics* moves an entry from one
category to the other, withe a message of the type *entry moved from
refer to year* for different reasons.

There is a special hack, DRY (for distinguish-refer-year) introduced in
version 2.8. If *Tralics* is called with the switch
-distinguish_refer_in_rabib=false, then DRY mode is set to false (see
details in `Options of the program <options.html#drir>`__). It is true
by default. If DRY is true, you can put the same entry (with the same
key, and the same value) in both files miaou2006.bib and
miaou_refer2006.bib. This is however not recommended.

.. _rabib4:

2.8.4 Bibliography: more hacks
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

There are different ways to put solve an entry. For instance
``\xbox {foo} {\XMLsolvecite [] [foot] {toto} {text}}`` (see
`\\XMLsolvecite <doc-x.html#cmd-XMLsolvecite>`__) solves the entry
associated to ``\footcite{toto}``. You can also use
``\bibitem[xx]{toto]`` (see `\\bibitem <doc-b.html#cmd-bibitem>`__),
that solves the entry with a ``<citation>`` element. You can ask
*Tralics* to generate the bibliography, or use an external program that
get all data from one or more bibliography databases. Note: you must use
the -shell-escape argument of *Tralics* in order to execute an external
program.

*Tralics* interprets the argument of the ``\bibliographystyle`` command
as follows. If it is ``bibtex:foo``, this means that ``bibtex testb`` is
executed; if it is ``program:cat``, this means that the program
``cat testb.aux`` will be executed. In all other cases, it defines the
style to be used (default is plain). This command can be used more then
once: first to define the style, second to define the command; note that
``bibtex:foo`` sets the style to foo, and ``bibtex:`` uses the defined
style. We assume here that testb is the name of the document to
translate. Example

.. container:: ltx-source

   ::

       
      \documentclass{article}
      \begin{document}
      \AtEndDocument{\bibitem{unused}Hey}
      \bibliography{torture}
      \bibliographystyle{bibtex:}
      \cite{poussin,cruz,many,strange,unused}
      \end{document}

If an external program is given, a minimal auxiliary file is created,
named, testb.aux, containing

.. container:: ltx-source

   ::

       
      \citation{poussin}
      \citation{cruz}
      \citation{many}
      \citation{strange}
      \bibstyle{plain}
      \bibdata{torture}

It is assumed that the external program generates a file named
testb.bbl; this is obviously not the case for ``cat testb.aux``. This
file is loaded (if possible) and executed. It is assumed that
translating this file will solve all entries, but no further checks are
done.

If no external program is given, *Tralics* will read the database files, and
construct a bbl file (named ``testb_.bbl``) and executes it. Given the following
command ``\newcommand \usebib[2] {\bibliography{#1#2, #1_foot#2+foot,
#1_refer#2+refer}}``, you can say ``\usebib{miaou}{2003}``, if you want to mimic
what *Tralics* does for the RA2003. (note: only suffixes year, foot and refer
are considered; this could be generalized).

.. _rabib5:

2.8.5 Bibliography: reducing entropy
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A new feature was introduced in 2006, it allows the use of a single data
base instead of three different ones. This means that you can provide
miaou_all2006.bib instead of three files. This feature is incompatible
with the idea that one of the three files is automatically generated. An
entry in the file has type year, foot or refer, if it is cited by
``\yearcite``, ``\footcite`` or ``\refercite`` or ``\nocite`` with the
corresponding flag.

When *Tralics* reads the file miaou_all2006.bib, and sees an entry, say
\`Knuth', it considers it as solving ``\cite{Knuth}``,
``\refercite{Knuth}`` or ``\footcite{Knuth}``. In general, a single
alternative is chosen, but as explained above, it is allowed to use both
``\cite{Knuth}`` and ``\refercite{Knuth}``.

What happens if you say ``\nocite{*}``? One possibility would be to
insert the whole data base thrice (as foot, refer and year), a second
possibility would be to insert it once, but not as year, neither as
refer. Hence, the only logical solution: the behavior is the same as
before version 2.9.3. If you say ``\nocite{*}``, all entries from
miaou2006.bib are included, by defaut all entries from
miaou_refer2006.bib are included. As a consequence, an entry from
miaou_foot2006.bib or miaou_all2006.bib is included only if explicitly
cited. This can be done via ``\nocite[foot]{Knuth}`` or
``\nocite[refer]{Knuth}`` if the reference should have type \`foot' or
\`refer'.

Important note. Assume that you say ``\cite{Knuth}`` and
``\footcite{knuth}``, but no other variants like KNUTH of KNuth, etc. It
is possible to have two files miaou2006.bib and miaou_foot2006.bib with
the entry \`Knuth'. When the second data base is read, then \`Knuth'
will solve \`knuth' (assuming that the data base does not contain any
variants like KNUTH, etc.) However, if you merge these two files in a
single one, you will be in trouble: \`Knuth' will solve
``\cite{Knuth}``, and no tentative is made for variants; in this case
the data base must contain \`knuth' that solves ``\footcite{knuth}``.

.. _run0:

3. Running the programs
=======================

Options to the *Tralics* program can be found on a `separate
page <options.html>`__. Some of them have been removed in 2008, there
description can be found `here <raweb4.html>`__, where we explain the
different strategies that could be used to produce the Raweb before
2008.

You have the following choices:

#. You are not interested in the raweb, and you just say tralics myfile.
   This produces a beautiful XML document.
#. You do not have tralics on your machine: you run latex (bibtex,
   dvips, etc) on your TeX document. The gives a dvi or PS version of
   your document (with \`draft' on each page in the case of the Raweb).
#. You can say tralics -check. This will check the syntax, and produce a
   transcript file, and nothing more.
#. You can say tralics myfile -ps. This is more or less the combination
   of the two previous options. However, the order of the modules might
   be changed. This generates a PostScript file with the Inria Logo on
   it.
#. You can say tralics myfile -myoptions. This produces a beautiful XML
   document, and more. For instance, if you tralics -xmltex, you will
   get a pdf file, provided that all files and scripts are available on
   your machine (normally, everything should be included in the raweb
   package, contact maintainers of this package in case of problem).

Since 2008, all these funny options have been removed, and *Tralics*
just produces the XML file.

3.1 Options of the program
--------------------------

Options of the program are available on a `separate
page <options.html>`__.

3.2 Running latex
-----------------

You can run latex on the file. This works provided that the raweb class
file is available (until 2006). This is the first run

.. container:: tty_out

   ::

      grimm@medee$ latex miaou2003
      This is TeX, Version 3.14159 (Web2C 7.3.1)
      (miaou2003.tex
      LaTeX2e <2003/12/01>
      Babel <v3.8c> and hyphenation patterns for english, UKenglish, french, german, 
      ngerman, italian, spanish, dumylang, nohyphenation, loaded.
      (/usr/local/lib/texmf.local/tex/generic/inria/inputs/ra2003.cls
      Document Class: ra2003 2003/06/12 v3,1 Copyright INRIA/MIAOU 2003 (E version)
      (/usr/local/lib/texmf/tex/latex/base/article.cls
      Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
      %%Stuff about packages omitted
      No file miaou2003.aux.
      No file miaou2003.fb.bbl.
      No file miaou2003.fb.aux.
      No file miaou2003.toc.
      No file miaou2003.refer.bbl.
      No file miaou2003.bbl.
      %% Lots of warnings omitted
      LaTeX Warning: There were undefined references.
      LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.)
      (see the transcript file for additional information)
      Output written on miaou2003.dvi (11 pages, 22628 bytes).
      Transcript written on miaou2003.log.

The start of the run could also be, in 2006, something like

.. container:: tty_out

   ::

      grimm@medee$ latex apics2006
      This is pdfeTeX, Version 3.141592-1.30.3-2.2 (Web2C 7.5.5)
      entering extended mode
      (./apics2006.tex
      LaTeX2e <2003/12/01>
      Babel <v3.8d< and hyphenation patterns for american, french, german, ngerman, 
      bahasa, basque, bulgarian, catalan, croatian, czech, danish, dutch, esperanto,
      estonian, finnish, greek, icelandic, irish, italian, latin, magyar, norsk, 
      polish, portuges, romanian, russian, serbian, slovak, slovene, spanish, 
      swedish, turkish, ukrainian, nohyphenation, loaded.
      (./ra2006.cls
      Document Class: ra2006 2006/07/25 v3,2 
         Copyright INRIA/MIAOU/APICS 2006 Raweb in DRAFT mode
      (/usr/local/teTeX/share/texmf-dist/tex/latex/base/article.cls

Run bibtex on each of the three files. **Note**: the arguments of bibtex
are not completely obvious. The file miaou2003.fb.aux is created by the
footbib package, and the use of the ``\footcite`` command, the file
miaou2003.refer.aux is created by the ``\loadbiblio`` command.

.. container:: tty_out

   ::

      grimm@medee$ bibtex miaou2003
      This is BibTeX, Version 0.99c (Web2C 7.3.1)
      The top-level auxiliary file: miaou2003.aux
      The style file: raweb.bst
      Database file #1: miaou2003.bib
      Warning--empty booktitle in seyfertIMS2003
      (There was 1 warning)
      grimm@medee$ bibtex miaou2003.fb
      This is BibTeX, Version 0.99c (Web2C 7.3.1)
      The top-level auxiliary file: miaou2003.fb.aux
      The style file: rawebalpha.bst
      Database file #1: miaou_foot2003.bib
      grimm@medee$ bibtex miaou2003.refer
      This is BibTeX, Version 0.99c (Web2C 7.3.1)
      The top-level auxiliary file: miaou2003.refer.aux
      The style file: rawebnum.bst
      Database file #1: miaou_refer2003.bib

Run latex a second time

.. container:: tty_out

   ::

      grimm@medee$ latex miaou2003
      This is TeX, Version 3.14159 (Web2C 7.3.1)
      (miaou2003.tex
      %% Lots of warnings/messages omitted
      LaTeX Warning: There were undefined references.
      LaTeX Warning: There were multiply-defined labels.)
      (see the transcript file for additional information)
      Output written on miaou2003.dvi (15 pages, 42256 bytes).
      Transcript written on miaou2003.log.

Run latex a third time. This will suppress the \`undefined references'
message.

.. container:: tty_out

   ::

      grimm@medee$ latex miaou2003
      This is TeX, Version 3.14159 (Web2C 7.3.1)
      (miaou2003.tex
      %% Lots of messages omitted
      LaTeX Warning: Label `MIAOU@resultats@' multiply defined.
      %% Lots of messages omitted
      LaTeX Warning: There were multiply-defined labels. )
      (see the transcript file for additional information)
      Output written on miaou2003.dvi (15 pages, 42264 bytes).
      Transcript written on miaou2003.log.
      grimm@medee$ dvips  miaou2003 -o
      This is dvips(k) 5.94a Copyright 2003 Radical Eye Software (www.radicaleye.com)
      ' TeX output 2004.07.29:1056' -> miaou2003.ps
      <tex.pro><special.pro>. [1] [2] [3] [4] [5] [6] [7] [8] [9<xml-route.ps>] 
      [10] [11] [12] [13] [14] [15]

The result is the following :download:`miaou2003.ps </pdf/miaou2003.ps>`. There
are two sections \`New results' (section 6 and 8), because there is a module in
section \`new results' after a module in section \`Contracts'. This explains why
LaTeX sees multiply-defined labels. There is an: Overfull \\hbox (22.7474pt too
wide) in paragraph at lines 19--19. Line 19 contains the ``\maketitle`` command.
The overfull box contains the long name of the Team. It is hard to remove it.
Note: this is a draft version. You should not try to add commands that remove
overfull and underfull boxes, this is completely useless.

3.3 Running Tralics
-------------------

When you run *Tralics*, whatever the arguments, it will print the
following lines. The third line (``Starting XX processing for YYY`` may
change).

.. container:: tty_out

   ::

      This is tralics 2.2, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2004, Jos\'e Grimm
      Starting latex processing for miaou2003.
      Configuration file identification: standard $Revision: 2.3 $
      Read configuration file /net/home/grimm/cvs/tralics/.tralics_rc.
      For the environment ending near line 191
      please use `participant' or `participante' for the name,
      as there is only one \pers in the list.
      For the environment ending near line 253:
      please use `participants' or `participantes' for the name,
      as there are 2 \pers in the list.
      There are 63 environments
      Checked 5 keyword env with 19 keywords
      Checked 5 catperso and 9 participant(es) envs with 34 \pers
      There were 2 topics
      Sections (and # of modules): 1(1) 2(1) 3(1) 4(6) 5(5) 6(4) 7(3) 8(4) 9(3).

We already explained the messages about singular/plural in the
``participant`` environment. The preprocessor has seen 63 environments
(5 ``motscle``, 5 ``catperso``, 9 ``participant``, 28 ``module``, and
some others, namely one ``moreinfo,`` one ``glossaire``, one ``array``,
one ``figure``, two ``description``, two ``equation``, and 8
``itemize``). The total number of keywords is 19, the number of
``\pers`` commands is 34. They were two declared topics, and the last
line indicates the number of modules per section.

You can run tralics with option -check. In this case, the program checks
the syntax, prints some information, and that's all.

.. container:: tty_out

   ::

      grimm@medee$ tralics miaou2003 -check
      This is tralics 2.2, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2004, Jos\'e Grimm
      Starting check for miaou2003.
      %% Common output as above omitted

For the 2006 version, this changes a little bit. Note that there are no
artificial topics in the Apics RA.

.. container:: tty_out

   ::

      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for apics2006.
      Configuration file identification: standard $ Revision: 2.18 $
      Read configuration file .tralics_rc.
      Configuration file identification: standard-ra $ Revision: 2.2 $
      Read tcf file for type: ../confdir/ra.tcf
      There are 157 environments
      You did not use any topic
      Sections (and # of modules): 1(1) 2(1) 3(2) 4(6) 5(5) 6(15) 7(2) 8(6) 9(3).

3.4 Running Tralics -ps
-----------------------

Let's try tralics -ps miaou2003. The effect of this command is to check
the source file, re-arrange the modules in the right order, and call
LaTeX. The ps option is not supported anymore in the 2008 version.

From the input file miaou2003.tex another source file miaou.tex (whose
content is given `here <raweb2.html>`__) is created. Essentially, it is
the initial file, with the modules in the right order; commands like
``\begin{module}`` are replaced by
``\RAstartmodule{1} {MIAOU} {6} {tralics}{...}`` (the first number is
the topics, the second number is the section). The document class is
``raweb``.

This file is compiled by an external program, launched directly by
*Tralics* some years ago, a Perl script later on. On some systems the
latex command does not recognize the -interaction switch, and you have
to say something like /mypath/mylatex \\nonstopmode\input{thefile}. For
these reasons, the names of the command to execute is not built-in, but
in the configuration file. We assume that the relevant lines are:

.. container:: ltx-source

   ::

        makefo="xsltproc --catalogs -o %A.fo %B %C";
        makehtml = "xsltproc --catalogs  %B %C";
        call_lint = "xmllint --catalogs --valid  --noout %C"
        makepdf = "pdflatex -interaction=nonstopmode %w"
        generatedvi = "latex -interaction=nonstopmode %t"
        generateps = "dvips %t.dvi -o %t.ps"

These lines are copied in the file user_param.pl and the Perl script
rahandler.pl is called on it (there is a command line option that allows
the use of another program). In the example that follows, there are
lines of the form todo_something=x. They correspond to the options of
tralics. Here ps is set to true, this explains that the script must call
latex on the file apics.tex. Here html is set to false, true would mean
that conversion from apics.xml to apics.html is required.

.. container:: ltx-source
   :name: user-param

   ::

      $::makefo='xsltproc --catalogs -o %A.fo %B %C';
      $::makehtml='xsltproc --catalogs  %B %C';
      $::checkxml='xmllint --catalogs --valid  --noout %C';
      $::makepdf='pdflatex -interaction=nonstopmode %w';
      $::makedvi='';
      $::dvitops='';
      $::generate_dvi='latex -interaction=nonstopmode %t';
      $::generate_ps='dvips %t.dvi -o %t.ps';
      $::tralics_dir='/user/grimm/home/cvs/tralics';
      $::ra_year='2006';
      $::no_year='apics';
      $::tex_file='apics';
      $::todo_fo=0;
      $::todo_html=0;
      $::todo_tex=0;
      $::todo_lint=0;
      $::todo_ps=1;
      $::todo_xml=0;
      1;

This is now what you see on the screen.

.. container:: tty_out

   ::

      grimm@medee$ tralics miaou2003 -ps
      This is tralics 2.2, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2004, Jos\'e Grimm
      Starting latex processing for miaou2003.
      %% Common output as above omitted
      /user/grimm/home/bin/rahandler.pl v2.5, (C) 2004 INRIA, José Grimm, projet APICS
      copy-and-exec for miaou
      latex -interaction=nonstopmode miaou
      This is TeX, Version 3.14159 (Web2C 7.3.1)
      (miaou.tex
      LaTeX2e <2003/12/01>
      Babel <v3.8c> and hyphenation patterns for english, UKenglish, french, german, 
      ngerman, italian, spanish, dumylang, nohyphenation, loaded.
      (raweb.cls
      Document Class: raweb 2001/06/14 v2,2 Copyright INRIA/MIAOU 2001
      (/usr/local/lib/texmf/tex/latex/base/article.cls
      Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
      %%more latex trace
      No file miaou.aux.
      No file miaou.fb.bbl.
      No file miaou.fb.aux.
      No file miaou.toc.
      %%more latex trace
      No file miaou.refer.bbl.
      No file miaou.bbl.
      [10] (miaou.fb.aux) (miaou.aux)

      LaTeX Warning: There were undefined references.
      LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.)
      (see the transcript file for additional information)
      Output written on miaou.dvi (11 pages, 19004 bytes).
      Transcript written on miaou.log.
      exit status of latex is 0
      bibtex -min-crossrefs=1000 miaou
      bibtex exit status 0
      bibtex -min-crossrefs=1000 miaou.refer
      bibtex exit status 0
      bibtex -min-crossrefs=1000 miaou.fb
      bibtex exit status 0
      latex -interaction=nonstopmode miaou
      This is TeX, Version 3.14159 (Web2C 7.3.1)
      (miaou.tex
      %%more latex trace
      LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.
      (see the transcript file for additional information)
      Output written on miaou.dvi (15 pages, 38616 bytes).
      Transcript written on miaou.log.
      exit status of latex is 0
      latex -interaction=nonstopmode miaou
      This is TeX, Version 3.14159 (Web2C 7.3.1)
      (miaou.tex
      %%more latex trace
      (miaou.aux) )
      (see the transcript file for additional information)
      Output written on miaou.dvi (15 pages, 38624 bytes).
      Transcript written on miaou.log.
      exit status of latex is 0
      dvips miaou.dvi -o miaou.ps
      This is dvips(k) 5.94a Copyright 2003 Radical Eye Software (www.radicaleye.com)
      ' TeX output 2004.07.29:1125' -> miaou.ps
      <tex.pro><8r.enc><texps.pro><special.pro>. [1<LogoRA2003.eps>
      <Logo-INRIA-couleur.ps>] [2] [1] [2] [3] [4] [5] [6] [7<xml-route.ps>] [8] 
      [9] [10] [11] [12] [13] 
      exit status of dvips is 0
      (Transcript written on miaou.rh.log)
      done

The result is the following :download:`miaou.ps </pdf/miaou.ps>`.

There is one warning: Underfull \\vbox (badness 10000) has occurred
while \\output is active. Tracing TeX shows the following. The selected
breakpoint at end of page 7 has: t=151.71101 plus 4.88531, g=200.427
(here g is the size of the page, minus the size of the image, and t the
size of the text, the big difference between t and g explains the
underfull box). There is no page break between the title of module 6.2
and the first line of the text. There is possible page break between
this line and the start of 6.3. Parameters are t=201.6997 plus 12.54138
minus 0.94266 and g=200.427. This pagebreak is not chosen because it
would overflow by 0.33pt! Adding a bit of shrinkability to the parskip,
for instance ``\parskip =0pt plus 1pt minus 1pt``, is enough in this
case. But, remember: this is not the final document.

In case of errors, latex may complain, for instance as “Undefined
control sequence”. In this case, you will see something like “exit
status of latex is 256”. A zero status is OK, a non-zero one means an
error. If your code contains ``\def\foobar{0\foobar}\foobar``, you will
overflow TeX's memory. However, if you remove the 0, you will go in an
endless loop. If you kill the process, normally, this will kill the Perl
script, and the latex process. After that, you will have to debug (add
``\tracingall`` somewhere, and look at the transcript file, its name is
miaou.log)

3.5 Running Tralics -xml
------------------------

Let's start with a call of *Tralics* without options. This is what you
will see (you may notice that module statistics are no longer computed)

.. container:: tty_out

   ::

      This is tralics 2.13.0, a LaTeX to XML translator, running on medee
      Copyright INRIA/MIAOU/APICS 2002-2008, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting translation of file apics2007.tex.
      Configuration file identification: standard $ Revision: 2.24 $
      Read configuration file /user/grimm/home/cvs/tralics/confdir/.tralics_rc.
      Configuration file identification: standard-ra $ Revision: 2.3 $
      Read tcf file /user/grimm/home/cvs/tralics/confdir/ra2007.tcf
      Document class: ra2007 2008/07/16 v1.1 Activity Report, Inria 2007
      Translating section composition
      Translating section presentation
      Translating section fondements
      Translating section domaine
      Translating section logiciels
      Translating section resultats
      Translating section contrats
      Translating section international
      Translating section diffusion
      Bib stats: seen 91 entries.
      Seen 91 bibliographic entries.
      Math stats: formulas 612, kernels 212, trivial 3, \mbox 6, large 0, small 65.
      Buffer realloc 40, string 18431, size 669087, merge 13
      Macros created 2013, deleted 1766; hash size 2493; foonotes 1.
      Save stack +2635 -2635.
      Attribute list search 11990(1484) found 3831 in 6638 elements (1117 at boot).
      Number of ref 105, of used labels 47, of defined labels 109, of ext. ref. 24.
      Input conversion: 137 lines converted.
      There were 20 images.
      Output written on apics.xml (289437 bytes).
      No error found.
      (For more information, see transcript file apics2007.log)

Let's try apics2006 with version 2.8. We get

.. container:: tty_out

   ::

      grimm@medee$ tralics apics2006     
      This is tralics 2.8, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2006, Jos\'e Grimm
      Licensed under the CeCILL Free Software Licensing Agreement
      Starting xml processing for apics2006.
      %% Common output as above omitted
      Translating section composition
      Translating section presentation
      Translating section fondements
      Translating section domaine
      Translating section logiciels
      Translating section resultats
      Translating section contrats
      Translating section international
      Translating section diffusion
      Bib stats: seen 71 entries
      Seen 75 bibliographic entries
      %% Memory usage
      Used 1784 commands
      Math stats: formulas 607, non trivial kernels 321,
         special 7, trivial 141, \mbox 6, large 0, small 142.
      Buffer realloc 32, string 18447, size 704375, merge 13
      Macros created 85, deleted 0.
      Save stack +1828 -1828.
      Attribute list search 8640(1549) found 3514 in 6351 elements (1450 after boot).
      Number of ref 96, of used labels 46, of defined labels 90, of ext. ref. 26.
      Modules with 26, without 15, sections with 9, without 19
      There were 16 images.
      Output written on apics.xml (284415 bytes).
      No error found. %% Very important information here
      (For more information, see transcript file apics2006.log)
      %% Raweb specific commands, via the Perl script
      rahandler.pl v2.12, (C) 2004 2006 INRIA, Jos\'e Grimm, Team Apics
      Postprocessor did nothing

You can see that the Perl script has been called. It is configurated to
call a XSLT processor twice (producing a file miaou.fo, or a bunch of
HTML files), then calling pdflatex twice, then xmllint. In fact nothing
is done.

You could try tralics apics2006 -xmllint. No error is signaled: the file
apics2006.tex that we use to check the tools produces correct output!
You could try tralics miaou2003 -xmllint. The answer is that the
document produced by *Tralics* does not conform the DTD, because the
module starting at `line 201 <raweb1.html#201>`__ contains no text; in
reality, xmllint says the following:

.. container:: tty_out

   ::

      miaou.xml:152: element module: validity error : Element module content does 
      not follow the DTD, expecting (head , (moreinfo | keywords | participant | 
      participants | participante | participantes | anchor)* , ((div2 | div3 | 
      div4)+ | ((cit | p | list | note | formula | table | figure)+ , (div2 | 
      div3 | div4)*))), got (head keywords)
      </keywords></module>
                          ^

If you say tralics miaou2003 -xmltex, you will see the following.
**Note**: you ask TeX to interpret the XML code, this is much slower
anything else. Timings for apics 2006: Tralics 0.1 s, Latex 0.5s, Pdf
via XML 24s.

.. container:: tty_out

   ::

      [2]grimm@medee$ tralics miaou2003 -xmltex
      This is tralics 2.2, a LaTeX to XML translator
      Copyright INRIA/MIAOU/APICS 2002-2004, Jos\'e Grimm
      Starting xml processing for miaou2003.
      %% as above
      Output written on miaou.xml (38393 bytes).
      No error found.
      (For more information, see transcript file miaou2003.log)
      /user/grimm/home/bin/rahandler.pl v2.4, (C) 2004 INRIA, José Grimm, projet APICS
      exec-xml for miaou
      %% This converts miaou.xml into miaou.fo
      xsltproc --catalogs -o miaou.fo /net/home/grimm/cvs/raweb/src/rawebfo.xsl miaou.xml
      exit status of makefo is 0
      (not done) xsltproc --catalogs  /net/home/grimm/cvs/raweb/src/rawebhtml.xsl miaou.xml
      %% Call pdflatex on wmiaou
      pdflatex -interaction=nonstopmode wmiaou
      This is pdfTeXk, Version 3.14159-1.10b (Web2C 7.4.5)
       %&-line parsing enabled.
      (./wmiaou.tex{/usr/local/lib/texmf/pdftex/config/pdftex.cfg}
      LaTeX2e <2003/12/01>
      Babel <v3.8c>  and hyphenation patterns for english, UKenglish, french, german, 
      ngerman, italian, spanish, dumylang, nohyphenation, loaded.
      (/usr/local/lib/texmf/tex/xmltex/base/xmltex.tex
      xmltex version: 2002/06/25 v1.9 (Exp)

      Encoding = utf-8 (/usr/local/lib/texmf/tex/xmltex/base/xmltex.cfg)
      (./wmiaou.cfg
      Loading mathml support and raweb extensions
      ) (./miaou.fo (/usr/local/lib/texmf/tex/xmltex/passivetex/fotex.xmt)
      (/usr/local/lib/texmf/tex/latex/base/article.cls
      Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
      %% More latex packages
      (/usr/local/lib/texmf/tex/latex/hyperref/pd1enc.def) (./hyperref.cfg)
      (/usr/local/lib/texmf/tex/latex/hyperref/hpdftex.def) (./fotex.cfg))
      No file wmiaou.aux.
      No file wmiaou.out.
      No file wmiaou.out.
      <Logo-INRIA-couleur.pdf, id=7, 411.5375pt x 106.3975pt>
      <use Logo-INRIA-couleur.pdf> <LogoRA2003.pdf, id=8, 299.1175pt x 341.275pt>
      <use LogoRA2003.pdf>
      LaTeX Warning: Reference `uid1' on page 1 undefined on input line 3.
      %% More latex warnings

      LaTeX Warning: There were undefined references.
      LaTeX Warning: Label(s) may have changed.Rerun to get cross-references right.
       ) ) )
      (see the transcript file for additional information)
      Output written on wmiaou.pdf (14 pages, 137378 bytes).
      Transcript written on wmiaou.log.

      exit status of pdflatex is 0
      %% Second run
      pdflatex -interaction=nonstopmode wmiaou
      This is pdfTeXk, Version 3.14159-1.10b (Web2C 7.4.5)
       %&-line parsing enabled.
      (./wmiaou.tex{/usr/local/lib/texmf/pdftex/config/pdftex.cfg}
      %% some messages omitted
      [2] [1] [2] [3]
      [4 <./xml-route.pdf>] [5] [6] [7] [8] [9] (./wmiaou.aux) ) ) )
      (see the transcript file for additional information)</usr/local/lib/texmf/fonts
      /type1/bluesky/cm/cmtt10.pfb></usr/local/lib/texmf/fonts/type1/bluesky/cm/cmbx1
      0.pfb></usr/local/lib/texmf/fonts/type1/bluesky/cm/cmsy7.pfb></usr/local/lib/te
      xmf/fonts/type1/bluesky/cm/cmr5.pfb></usr/local/lib/texmf/fonts/type1/bluesky/c
      m/cmex10.pfb></usr/local/lib/texmf/fonts/type1/bluesky/symbols/msbm7.pfb></usr/
      local/lib/texmf/fonts/type1/bluesky/cm/cmr7.pfb></usr/local/lib/texmf/fonts/typ
      e1/bluesky/cm/cmmi5.pfb></usr/local/lib/texmf/fonts/type1/bluesky/symbols/msbm1
      0.pfb></usr/local/lib/texmf/fonts/type1/bluesky/cm/cmmi7.pfb></usr/local/lib/te
      xmf/fonts/type1/bluesky/cm/cmr10.pfb></usr/local/lib/texmf/fonts/type1/bluesky/
      cm/cmmi10.pfb></usr/local/lib/texmf/fonts/type1/bluesky/cm/cmsy10.pfb>{/usr/loc
      al/lib/texmf/dvips/base/8r.enc}
      Output written on wmiaou.pdf (14 pages, 152502 bytes).
      Transcript written on wmiaou.log.
      exit status of pdflatex is 0
      (not done) xmllint --catalogs --valid  --noout miaou.xml
      (Transcript written on miaou.rh.log)
      done

The pdf is :download:`here </pdf/wmiaou.pdf>`. It is named wmiaou.pdf, a name
that does not conflict with the names miaou2003.ps and miaou.ps. Running
*Tralics* ten times in a row give the following size for the Pdf file: 152499
152499 152500 152500 152500 152500 152497 152497 152497 152497. Strange, isn't
it?

.. _script0:

4. The auxiliary perl script
============================

Before 2008, an auxiliary Perl script was used for the Raweb.The behavior of
*Tralics* is not the same in Raweb mode or in normal mode. Raweb mode if entered
if the document type (deduced from the options, the configuration file, and the
document) is ``RA`` (or ``ra``). In the case, the file name should be
apics2006.tex, and the document class should be ``ra2006`` (the year can be
replaced by 2004, etc, provided that it is the same). If an XML file is created,
it will be apics.xml and the year will be an attribute of the document element.
If a TeX file is created, it will be named apics.tex, and it will use the
``raweb`` documentclass.

-  If you say tralics apics2006 -check, the software will read your
   file, analyze it and, that's all (the transcript file is
   apics2006.log).
-  If you say tralics apics2006 -ps, the software will read your file,
   analyze it, create a new TeX file, and use an external program to
   compile it; communication is via a file named user_param.pl. The file
   apics.rh.log will hold the logs of all the external programs
   (apics2006.log is the transcript file of *Tralics*, apics.log the
   transcript file of LaTeX).
-  If you say tralics apics2006, the software will read your file,
   analyze it, and translate it. It will call the external program, but
   nothing will happen.
-  If you say tralics apics2006 -xmlall (or some other options) the
   software will read your file, analyze it, and translate it. It will
   call the external program, that will convert the XML file. As above,
   communication is via user_param.pl, transcript in apics.rh.log.

The auxiliary script starts like this

.. container:: ltx-source

   ::

      #!/usr/bin/perl
      # additional header info here
      print "(C) 2004 2006 INRIA, Jos\\'e Grimm, Team Apics\n";

All variables used by the program can be redefined by the \`require' at
the end of the file. If ``todo_ps`` is true (non-zero), then you want a
preview (conversion from latex to dvi and Postscript). Otherwise, if
``todo_xml`` is true, you want conversion from latex to XML; this is
done by *Tralics*. The post-processor allows you to check the XML (if
``todo_lint`` is true), convert it to HTML (if ``todo_html`` is true),
to XMLFO (if ``todo_fo`` is true), and to Pdf or Postscript (if
``todo_tex`` is true). The variables are initialized like this.

.. container:: ltx-source

   ::

      $::todo_fo = 1;
      $::todo_html = 1;
      $::todo_tex = 1;
      $::todo_lint = 1;
      $::todo_ps = 0;
      $::todo_xml = 1;

If you run *Tralics* on the file apics2006.tex, the preview will be in
the file apics.tex (from the variable ``tex_file``), while the XML file
will be apics.xml (from the variable ``no_year``). And the year is 2006.
Other variable contain a percent sign. Make sure that Perl does not
interpret them as a hash reference, since we will modify them later.
(`explanations here <#percent>`__).

.. container:: ltx-source

   ::

      # Predeclare all variables here.
      $::tralics_dir= "/user/grimm/home/cvs/tralics";
      $::ra_year = "2006";
      $::tex_file = "miaou";
      $::no_year = "miaou";
      $::generate_dvi = q/latex -interaction=nonstopmode %t/;
      $::generate_ps = q/dvips %t.dvi -o %t.ps/;
      $::makefo = 'xsltproc --catalogs -o %A.fo %B %C';
      $::makehtml ='xsltproc --catalogs  %B %C';
      $::makepdf = 'pdflatex -interaction=nonstopmode %w';
      $::makedvi = 'latex -interaction=nonstopmode %w';
      $::dvitops = 'dvips %w.dvi -o %w.ps';
      $::checkxml = 'xmllint --catalogs --valid  --noout %C';

      $::dtd_file = "raweb3.dtd"; # New in 2004.

The variables shown above are overwritten by the content of the
user_param.pl, an example is `given here <raweb4.html#user-param>`__. In
particuler, the user-param file must give the name of the TeX file, and
``tralics_dir``, the location where additional files are located.

4.1 Postscript mode
-------------------

The objective is easy to understand: we have to call latex three times,
then dvips; after the first call, we execute bibtex. Three auxiliary
file are needed for bibtex: one is created by the footbib package, and
one by the script. The last one is standard.

.. container:: ltx-source

   ::

      sub copy_and_exec {
        print "copy-and-exec for $::tex_file\n";
        link_some_files();
        open OUTFILE, ">$::no_year.refer.aux";
        print OUTFILE "\\bibstyle{rawebnum}\n";
        print OUTFILE "\\citation{*}\n";
        print OUTFILE "\\bibdata{$::no_year" . "_refer" . $::ra_year . "}\n";
        close OUTFILE;
        open LOGFILE, ">$::no_year.rh.log";
        call_latex();
        call_bibtex ("","");
        call_bibtex (".refer","_refer");
        call_bibtex (".fb","_foot");
        call_latex();
        call_latex();
        interpret_and_launch($::generate_ps,"junk",1,"dvips","");
        close LOGFILE;
        print "(Transcript written on $::no_year.rh.log)\n";
        print "done\n";
      }

This is an auxiliary routine that takes 5 arguments. The first one is a
string to be evaluated (as explained below), it comes from the
configuration file; the second argument is either \`junk', or the name
of a xslt file, it can be used by the evaluator of the argument. Then
comes a boolean, if false nothing is done. Argument number four is a
symbolic name of the command, and if the last argument is true, the
command is executed twice.

If you do not want to generate PS, just put the empty string in
``$::generate_ps``, because here, nothing is done if ``$template`` is
empty.

.. container:: ltx-source

   ::

      sub interpret_and_launch {
        my ($template,$aux,$tr,$name,$twice) = @_;
        $_ = $template;
        return unless $_;
        interpret_str($aux);
        launch_cmd($_,$tr,$name);
        launch_cmd($_,$tr,$name) if $twice;
      }

This launches latex.

.. container:: ltx-source

   ::

      sub call_latex {
        interpret_and_launch($::generate_dvi,"junk",1,"latex",0);
        copy_to_log("$::no_year.log");
      }

This launches bibtex. We do not use the ``interpret_str`` subroutine (if
your executable is called BibTex, just edit the Perl script). There are
three bibtex files, apics2006.bib, apics_foot2006.bib and
apics_refer2006.bib. The procedure gets \`apics' from ``$::no_year``,
the \`2006' from ``$::ra_year``, and what is between as second argument.
The bibliography files are optional, so nothing is done in case the
files do not exist. On the other hand, the auxiliary files have the same
name as in section 3.1, without the year. For instance, it would be
apics.fb.aux. The quantity between \`apics' and \`aux' is the first
argument.

.. container:: ltx-source

   ::

      sub call_bibtex {
        my ($exta, $extb) = @_;
        my ($bib);
        $bib = "$::no_year$extb$::ra_year.bib";
        return unless -f $bib;
        $_ = $::no_year . $exta;
        print "bibtex -min-crossrefs=1000 $_\n";
        print LOGFILE "result of bibtex $_\n";
        `bibtex -min-crossrefs=1000 $_`;
        print "bibtex exit status $?\n";
        print LOGFILE "bibtex exit status $?\n";
        copy_to_log("$_.blg");
      }

This allows us to merge the transcript files of the different processes.

.. container:: ltx-source

   ::

      sub copy_to_log  {
        my($file) = @_;
        open(INPUT,"<$file");
        while (<INPUT>) {
          print LOGFILE;
        };
        close INPUT;
      }

This executes the first argument if the second is true. Everything
printed on the screen is also copied in the transcript file. Note: *this
means that all messages of LaTeX are stored in a buffer and printed at
end of job*. Said otherwise, in case of trouble, you will see the error
messages only after you abort the job.

.. container:: ltx-source

   ::

      sub launch_cmd {
        my ($cmd,$test,$name) = @_;
        if(! $test) {
          print LOGFILE "(not done) $cmd\n";
          print  "(not done) $cmd\n";
          return;
        }
        print LOGFILE "$cmd\n";
        print "$cmd\n";
        print LOGFILE "-------------------------\nStart trace of $name\n";
        my $value;
        $value = `$cmd`;
        print LOGFILE $value;
        print $value;
        print LOGFILE "End trace of $name\n-------------------------\n";
        print LOGFILE "exit status of $name is $?\n";
        print "exit status of $name is $?\n";
      }

The raweb directory of *Tralics* contains a lot of useful files. What we
do here is to put a symbolic link for the following files: the three bst
files, the class file, and the two logos (in PostScript and Pdf form).

Todo. Some files depend on the year, and other do not. In particular,
raweb.cls and raweb.bst depend on the year. The class file contains the
current year for headings, name of logo, name of foot bibliography, the
bst file output warnings in case of a bad year. The name \`raweb.bst'
comes from the class file, this is easy to change, but the name of the
document class is generated by Tralics.

.. container:: ltx-source

   ::

      sub link_some_files {
        link_src ("rawebalpha.bst");
        link_src ("raweb.bst");
        link_src ("rawebnum.bst");
        link_src ("raweb.cls");
        link_src ("Logo-INRIA-couleur.pdf");
        link_src ("Logo-INRIA-couleur.ps");
        link_src ("LogoRA" . $::ra_year . ".eps");
        link_src ("LogoRA" . $::ra_year . ".pdf");
      }

This takes three arguments, A, B and C. The effect is to make a symbolic
link from file A in the source directory, in the directory B, to file C.
Nothing is done if the target exists, or if the source does not exists.

.. container:: ltx-source

   ::

      sub link_file {
         my($in,$out,$short_in);
         $in = @_[0]; $out = @_[1]; $short_in = @_[2];
         $in = "$::raweb_dir/$in";
         `ln -s $in $out` if (-f $in && !-f "$out/$short_in");
      }

Same as above, but B (the directory in which is put the link) is the
current directory.

.. container:: ltx-source

   ::

      sub link_src {
         my($in,$out,$short_in);
         $short_in =@_[0];
          $in = "$::tralics_dir/raweb/$short_in";
         `ln -s $in` if (-f $in && !-f "$short_in");
      }

Some other files come from the xml directory of *Tralics*, and neeed a
different function.

.. container:: ltx-source

   ::

      sub link_xml {
         my($in,$out,$short_in);
         $short_in =@_[0];
         $in = "$::tralics_dir/xml/$short_in";
         `ln -s $in` if (-f $in && !-f "$short_in");
      }

4.2 XML mode
------------

This is done in XML mode. Note that *Tralics* creates a file named
\_hyperref.cfg that contains useful information. On the other hand, the
hyperref.cfg file is used by the hyperref package. For this reason, we
are a bit careful, when copying.

The script constructs also a TeX file, that reads the XML file (value of
``\xmlfile``). This file loads the xmltex.tex package (by Carlisle)
explicitly, and the fotex.xmt (by Rahtz) implicitly, according to some
obscure rules. There are some scheduling problems; as a consequence, the
file wapics.cfg loads the MathML stuff. The fotex.cfg file is loaded
much too late (it is needed however, since it explains how to insert the
Logo on the front page).

After these files are created, all the shell scripts are run.

.. container:: ltx-source

   ::

      sub exec_xml {
        if(!($::todo_html || $::todo_fo || $::todo_tex || $::todo_lint) ) {
          print "Postprocessor did nothing\n";
          return;
        }
        print "exec-xml for $::tex_file\n";
        link_xml_files();# links files, for instance fotex.cfg 
        make_icons();# for HTML 
        if(-f "_hyperref.cfg") { # keywords and such 
          `rm hyperref.cfg`  if(-f "hyperref.cfg");
          `mv _hyperref.cfg hyperref.cfg`;
        }
        my $name1 = "w" . $::no_year . ".cfg";
        my $name2 = $::tralics_dir . "raweb-cfg.sty";
        `rm $name1` if -f $name1;
        `ln -s $name2 $name1` if -f $name2;
        make_catalog();
        open OUTFILE, ">w$::no_year.tex";
        print OUTFILE "\\def\\xmlfile{$::no_year.fo}\n";
        print OUTFILE "\\def\\LastDeclaredEncoding{T1}\n";
        print OUTFILE "\\input{xmltex.tex}\n";
        print OUTFILE "\\end{document}\n";
        close OUTFILE;

        open LOGFILE, ">$::no_year.rh.log";
        if($::todo_html) {
          `rm -rf $::no_year$::ra_year`;   # a bit aggressive? ;
          `mkdir $::no_year$::ra_year`;
        }
        interpret_and_launch($::makefo,"raweb3fo", $::todo_fo,"makefo",0);
        interpret_and_launch($::makehtml,"rawebhtml", $::todo_html,"makehtml",0);
        interpret_and_launch($::makepdf,"junk", $::todo_tex,"pdflatex",1);
        interpret_and_launch($::makedvi,"junk", $::todo_tex,"latex",1);
        interpret_and_launch($::dvitops,"junk", $::todo_tex,"dvips",0);
        interpret_and_launch($::checkxml,"junk", $::todo_lint,"lint",0);
        close LOGFILE;
        print "(Transcript written on $::no_year.rh.log)\n";
        print "done\n";
      }

Obtaining the Pdf from the XML requires the same logos. It also needs a
hook: this is fotex.cfg. We also make sure that the DTD is visible.
Maybe, we should have a raweb2004.dtd ?

.. container:: ltx-source

   ::

      sub link_xml_files {
        link_xml ($::dtd_file);
        link_xml ("fotex.cfg");
        link_xml ("fotex.sty");
        link_xml ("fotex.sty");
        link_xml ("raweb-uni.sty");
        link_xml ("fotex-add.sty");
        link_src ("Logo-INRIA-couleur.pdf");
        link_src ("Logo-INRIA-couleur.ps");
        link_src ("LogoRA" . $::ra_year . ".eps");
        link_src ("LogoRA" . $::ra_year . ".pdf");
      }

This routine creates a icons directory and links some files. The names
of the icons that are needed can be found in the different styles
sheets. Note that the HTML files are put in a directory below the
current directory, so that it accesses them via ../icons/xx.png. As a
result, if you call the script with different teams, the icons directory
will be shared. This is only useful if you generate HTML.

.. container:: ltx-source

   ::

      sub make_icons {
        `mkdir icons` unless -d "icons";
        link_file ("icons/contents_motif.png", "icons", "contents_motif.png");
        # more lines omitted
      }

The ``make_catalog`` routine copies the file catalog.src (found in the
source directory) into the file named catalog. However, it does not
overwrite it. The string ``source_directory`` is replaced by the source
directory (check for ``$ENV`` at the end of the script).

.. container:: ltx-source

   ::

      sub make_catalog {
        return if -f "catalog";
        my $src_name = $::tralics_dir . "catalog.src";
        open(INPUT,"<$src_name");
        my(@file_string);
        while (<INPUT>) {
          push(@file_string, $_ );
        };
        $_ = join('',@file_string);
        return unless $_;
        s!source_directory/dtd/!$::tralics_dir/xml/!g;
        s!source_directory/xml/!$::tralics_dir/xml/!g;
        open OUTFILE, ">catalog";
        print OUTFILE;
        close OUTFILE;
      }

This is a very complicated procedure, whose purpose is to produce a file
with the following two lines

.. container:: ltx-source

   ::

      PUBLIC "mathml" /user/grimm/home/cvs/tralics/xml/mathml2/mathml2.dtd
      PUBLIC "teixlite" "/user/grimm/home/cvs/tralics/xml/teixlite.dtd" 

4.3 Evaluation of parameters
----------------------------

We have seen that the configuration file of *Tralics* contains lines
like: ``makefo="xsltproc --catalogs -o %A.fo %B %C";``. These lines are
copied verbatim in the user_param.pl file (with single quotes instead of
double quotes). The lines are evaluated according to the following rules

-  %A and %a are replaced by \`apics' (the name of the team),
-  %B and %b are replaced by the value of the argument (in the source
   directory), with, or without the ``.xsl`` extension.
-  %C and %c are replaced by \`apics' (the name of the team), with and
   without the ``.xml`` suffix,
-  %W and %w are replaced by \`wapics' (team name, with an initial w),
   with and without the ``.tex`` suffix,
-  %T and %t are replaced by \`apics' (alternate team name) with and
   without the ``.tex`` suffix.

.. container:: ltx-source

   ::

      sub interpret_str {
        my $B = @_[0];
        my ($Y,$S,$P) = ($::no_year,$::raweb_dir_src,$::tex_file);
        # hack here in case replacement contains %
        s/%A/$Y/g;
        s/%a/$Y/g;
        s/%B/$S$B.xsl/g;
        s/%b/$S$B/g;
        s/%C/$Y.xml/g;
        s/%c/$Y/g;
        s/%W/w$Y.tex/g;
        s/%w/w$Y/g;
        s/%T/$P.tex/g;
        s/%t/$P/g;
      }

4.4 End of rahandler.pl
-----------------------

The rahandler.pl file contains all variables and procedures shown above,
maybe in a different order. The action of the script is given here. This
read the user parameters (created by Tralics, possibly modified by the
user). Since the file is read by \`require' it should terminate with
something that does not evaluate to zero.

.. container:: ltx-source

   ::

      require "user_param.pl";

It is important to export the catalog. It is also important to export
the ``TEXMFCNF`` variable. For security reasons, it is better not to put
this in the current directory. On the other hand, you need a huge
pdflatex when reading XML.

.. container:: ltx-source

   ::

        $ENV{SGML_CATALOG_FILES}= "./catalog";   
        $ENV{TEXMFCNF} = "$::tralics_dir" . "/xml:"
           . ( defined($ENV{TEXMFCNF}) ? "$ENV{TEXMFCNF}" : "");

Action.

.. container:: ltx-source

   ::

      if($::todo_ps) { copy_and_exec(); }
      elsif ($::todo_xml) { exec_xml(); }

.. _fotex:

5. The raweb-cfg.sty file
=========================

The pdf files of the activity report are produced via a Makefile as
follows. The TeX source is converted by *Tralics* into some XML file; an
XML processor converts this into another XML file, conforming to the new
DTD (whatever this means). Another XML processor converts the result
into XSL/FO format, which is interpreted by TeX via the tools of S.
Rahtz and D. Carlisle. 

5.1 Details
-----------

Some patches to these files are required. We explain here the content of the
file raweb-cfg.sty. It starts like this.

.. container:: ltx-source

   ::

      \makeatletter
      \immediate\write20{Loading mathml support and raweb extensions}
      % patch of xmltex.tex

There are some lines that try to solve the problem: how to put an &
character in an URL, i.e. in an attribute. See
`here <raweb3.html#ampersand>`__.

The command ``\utfeight@protect@internal`` redefines, among other, the
command ``\utfeightaz`` as
``\def\utfeightaz {\noexpand \utfeightaz \noexpand}``. A more efficient
code would be: ``\let \utfeightaz \utfeightaz@jg@int``. See
`here <raweb3.html#added-cmds>`__ the definition of
``\utfeightaz@jg@int`` and the like.

We redefine ``\utfeight@protect@internal`` and
``\utfeight@protect@chars``. Code is given
`here <raweb3.html#modified-cmds>`__.

.. container:: ltx-source

   ::

      \def\utfeight@protect@chars{ source code shown here }
      \begingroup
      \catcode`<\active
      \catcode`&\active
      \gdef\utfeight@protect@internal{ source code shown here}

5.2 Ampersands in URL
---------------------

The problem is that the fotex.fmt file has a declaration like this
``\XMLnamespaceattributeX {fo} {external-destination} {\FOexternaldestination} {}``.
As a result, the property list of the \`fo' namespace will contain
(among others) the following tokens
``\XML@attrib  0:external-destination\relax \FOexternaldestination {}\utfeight@chardef  \FOexternaldestination``.
In some places, ``\XMLattributeX`` is called: this defines an attribute
for a single element. In both cases, the X means: call
``\utfeight@chardef``, and these are the only cases where the macro is
used. The X is for \`expand'; the trouble is that entities cannot be
expanded, and we need a way to inhibit this expansion.

We redefine ``\utfeight@chardef`` with a little hack for the &
character, as follows. Normally, ampersand is the same as
``\XML@amp@markup``. We change its value locally. Thus, we change the
behavior only inside some attributes.

.. container:: ltx-source

   ::

      \gdef\utfeight@chardef#1{%
        \begingroup
        \utfeight@protect@chars
        \let&\XML@amp@markup@jg  % line added
        \xdef\x@temp{#1}%
        \endgroup
        \let#1\x@temp}

Original code was complicated. What we do here is just test if the
argument is \`amp;' and replace it with an ampersand. We test the value
of the argument by adding \`amp;' and we look for the string.

.. container:: ltx-source

   ::

      \def\XML@amp@markup@jg#1;{%
        \XML@amp@markup@jgw#1;amp;\@nil}
      \def\XML@amp@markup@jgw#1amp;#2\@nil{%
        \ifx b#2b \XML@amp@markup#1;\else\string&\fi}

5.3 MathML
----------

Here we redefine a lot of MathML functions from mathml2.xmt, and add a
great number of other procedures.

.. container:: ltx-source

   ::

      % Is this needed ? we redefine everything here
      %\inputonce{mathml2.xmt}
      % We do not want mathml to be loaded after this file
      \global\expandafter\let\csname xmt:mathml2.xmt\endcsname\@ne

This declares the three namespaces that will be used later in this file.

.. container:: ltx-source

   ::

      \DeclareNamespace{m}{http://www.w3.org/1998/Math/MathML}
      \DeclareNamespace{fotex}{http://www.tug.org/fotex}
      \DeclareNamespace{fo}{http://www.w3.org/1999/XSL/Format}

We declare `here <raweb3.html#string-decls1>`__ and
`here <raweb3.html#string-decls2>`__ some strings via commands of the
form ``\XMLstring\att@true<>true</>``. After that, we can test that an
attribute is true with a test like ``\ifx\foo\att@true``. Some strings
are prefixed by \`jg' others by \`att'.

.. container:: ltx-source

   ::

      \global\delcode`{"66308
      \global\delcode`}"67309

      % We have to redefine some operators...
      \def\jg@tilde@acc{\mathaccent"707E }
      \def\jg@check@acc{\mathaccent"7014 }
      \def\jg@breve@acc{\mathaccent"7015 }
      \def\jg@hat@acc{\mathaccent"705E }
      \def\jg@dot@acc{\mathaccent"705F }
      \def\jg@ddot@acc{\mathaccent"707F }
      \def\jg@grave@acc{\mathaccent"7012 }
      \def\jg@ring@acc{\protect \mathaccentV {mathring}017 }
      \def\jg@overRarrow@acc{\let\rightarrow\JGG@orig@rarrow\mathpalette{\overarrow@\rightarrowfill@}}
      \def\jg@overLarrow@acc{\let\leftarrow\JGG@orig@larrow\mathpalette{\overarrow@\leftarrowfill@}}
      \def\jg@underRarrow@acc{\let\rightarrow\JGG@orig@rarrow\mathpalette{\underarrow@\rightarrowfill@}}
      \def\jg@underLarrow@acc{\let\leftarrow\JGG@orig@larrow\mathpalette{\underarrow@\leftarrowfill@}}

This makes the underscore character produce an underscore.

.. container:: ltx-source

   ::

      \expandafter\def\csname 8:_\endcsname{%
       \relax\ifmmode\hbox{\textunderscore}\else \textunderscore\fi}

This defines the behavior of the ``<math>`` element. Note. Our style
sheet puts display math elements into ``<fotex:displaymath>`` elements,
whose translation is a ``displaymath`` environment. As a result,
``\GATHER`` could be undefined...

.. container:: ltx-source

   ::

      \XMLelement{m:math}
        {\XMLattribute{display}{\XML@mathmlmode}{foo}}
        {\def\GATHER{1}%
           \ifx\XML@mathmlmode\att@BLOCK\[\else\(\fi
         }
        {
           \ifx\XML@mathmlmode\att@BLOCK\]\else\)\fi
        }

This implements ``<mover>``, ``<munder>``, ``<munderover>`` and
``<mfrac>``. Actual code is elsewhere. *Tralics* does not use
``<munderover>``.

.. container:: ltx-source

   ::

      \XMLelement{m:mover}
        {\XMLattribute{accent}{\XML@overaccent}{none}}
        {\xmlgrab}
        {\xmltextwochildren\xml@implement@over{}#1}

      \XMLelement{m:munder}
        {\XMLattribute{accentunder}{\XML@underaccent}{none}}
        {\xmlgrab}
        {\xmltextwochildren\xml@implement@under{}#1}

      \XMLelement{m:munderover}
        { }
        {\xmlgrab}
        {\xmltexthreechildren\@firstofone\sb\sp#1}

      \XMLelement{m:mfrac}
        {\XMLattribute{linethickness}{\XML@linethickness}{true}%
         \XMLattribute{numalign}{\XML@numalign}{center}%
         \XMLattribute{denomalign}{\XML@denomalign}{center}%
        }
        {\xmlgrab}
        {\xmltextwochildren\xml@implement@frac{}#1}

This implements the ``<mo>`` element. In the special case of
``<mo form="prefix">ln</mo>`` or
``<mo movablelimits="true" form="prefix">lim</mo>`` we use an upright
font, and ``\limits`` or ``\nolimits``. General case is handled below.

.. container:: ltx-source

   ::

      \XMLelement{m:mo}
        {\XMLattribute{form}{\XML@mathmlform}{inline}%
         \XMLattribute{movablelimits}{\XML@movablelimits}{false}}
        {\xmlgrab}
        {\ifx\XML@mathmlform\att@PREFIX
           \ifx\XML@movablelimits\att@true
             \mathop{\operator@font #1}\limits
           \else
             \mathop{\operator@font #1}\nolimits
           \fi
         \else\special@mo{#1}\fi
         }

When you say ``$\bar x$``, the MathML equivalent is
``<mover accent="true"><mi>x</mi>  <mo>&#xAF;</mo></mover>``. When we
see the ``<mo>`` element, we know that it is an accent because
``\notinover`` is no ``\relax``. In this case, we have to do something
special with the content. In some cases, we put the content in
``\cur@mo@content``, in other cases, we set ``\jg@cur@acc``. For some
strange reasons ``&lt;`` translates like ``\lbra``, we change this.

.. container:: ltx-source

   ::

      \let\notinover\relax
      \def\cur@mo@content{TOTO}

      \def\special@mo#1{%
           \def\jg@tck{#1} % save the argument
           \ifx\notinover\over% we cannot typeset here
              \ifx\jg@tck\jg@accgrave % strange 
                \global\let\jg@cur@acc\jg@grave@acc
                \global\let\cur@mo@content\relax
              \else \ifx\jg@tck\jg@accdddot % strange 
                \global\let\jg@cur@acc\dddot
                \global\let\cur@mo@content\relax
              \else \ifx\jg@tck\jg@accddddot % strange 
                \global\let\jg@cur@acc\ddddot
                \global\let\cur@mo@content\relax
              \else\gdef\cur@mo@content{#1}\fi\fi\fi
           \else % typeset the argument, handle < and > in the correct way
           \ifx\jg@tck\jg@gt\string>\else
           \ifx\jg@tck\jg@lt\string<\else
           #1\fi\fi\fi
      }

We can avoid testing against every accent in the following way: If you
want to put a tilde, the XML will contain ``<mo>&#x2DC;</mo>``. This is
defined as ``\texttildelow`` in the file ucharacters.sty. We redefine
this command, so as to define ``\jg@cur@acc``. We use two functions, one
for over accents, another one for underaccents.

.. container:: ltx-source

   ::

      \let\XXacute\acute
      \def\jg@bindings{%
        \def\texttildelow {\global\let\jg@cur@acc\jg@tilde@acc}%
        (complete code here)
        \def\ring{\global\let\jg@cur@acc\mathring}
      }
      \def\jg@ubindings{%
         \let\JGG@orig@rarrow\rightarrow
         \let\JGG@orig@larrow\leftarrow
         \def\texttildelow {\global\let\jg@cur@acc\jg@tilde@acc}%
          (complete code here)
         \def\jgunderline{\global\let\jg@cur@acc\underline}
      }

Translation of ``<mover>xy</mover>`` uses ``\stackrel``, unless it is an
accent. Otherwise, we call ``\jg@bindings``, evaluate the second
argument in a context where ``\notinover`` is ``\over``. We assume that
``\cur@mo@content\jg@cur@acc`` will typeset what is needed.

.. container:: ltx-source

   ::

      \def\xml@implement@over#1#2{%
       \ifx\XML@overaccent\att@true {%
         \jg@bindings
         \let\notinover\over #2\let\notinover\relax \cur@mo@content\jg@cur@acc{#1}%
       }\else\stackrel{#2}{#1}\fi
      }

      \def\xml@implement@under#1#2{%
       \ifx\XML@underaccent\att@true {%
         \jg@ubindings
         \let\notinover\over #2\let\notinover\relax \cur@mo@content\jg@cur@acc{#1}%
       }\else \underset{#2}{#1}\fi%
      }

The code of a fraction is trivial. However, there is an `alternate
version <raweb3.html#unimp-frac>`__ that honors the ``scriptlevel``
attribute (*Tralics* uses a ``<mstyle>`` element for ``\frac`` and
such).

.. container:: ltx-source

   ::

      \def\xml@implement@frac#1#2{%
        \ifx\XML@linethickness\att@true\frac{#1}{#2}%
        \else \genfrac{}{}\XML@linethickness{}{#1}{#2}\fi
      }

The ``\defaultunits`` command calls ``\afterassignment`` in order to
skip all tokens up to ``\@nnil``. As a result, ``\XML@mspacewidth`` can
contain a dimension (for instance 33mm) or a number (like 2.3) case
where a \`pt' unit is inserted.

.. container:: ltx-source

   ::

      \XMLelement{m:mspace}
        {\XMLattribute{width}{\XML@mspacewidth}{0}}
        {}
        {\@defaultunits\dimen@\XML@mspacewidth pt\relax\@nnil
         \ifnum\dimen@=\z@\else\kern\dimen@\fi}

This implements the ``<mstyle>`` element.

.. container:: ltx-source

   ::

      \XMLelement{m:mstyle}
       {\XMLattribute{displaystyle}{\XML@att@displaystyle}{foo} %
         \XMLattribute{scriptlevel}{\XML@scriptlevel}{none}%
       }
       {\xmlgrab}
       {{\ifx\XML@att@displaystyle\att@true\displaystyle
         \else\ifx\XML@att@displaystyle\att@false
          \ifx\XML@scriptlevel\att@dzero\textstyle
           \else\ifx\XML@scriptlevel\att@done\scriptstyle
            \else \scriptscriptstyle\fi\fi
         \fi %do nothing if neither true nor false
         \fi#1}}

We give here the code of some trivial functions.

.. container:: ltx-source

   ::

      \XMLelement{m:mrow}
        {}
        {}
        {}

      \XMLelement{m:msub}
        {}
        {\xmlgrab}
        {\xmltextwochildren\@firstofone\sb#1}

      \XMLelement{m:msup}
        {}
        {\xmlgrab}
        {\xmltextwochildren\@firstofone\sp#1}

      \XMLelement{m:msubsup}
        {}
        {\xmlgrab}
        {\xmltexthreechildren\@firstofone\sb\sp#1}

      \XMLelement{m:mroot}
        {}
        {\xmlgrab}
        {\xmltextwochildren\mathmlroot{}#1}
      \def\mathmlroot#1#2{\root#2\of{#1}}

      \XMLelement{m:msqrt}
        {}
        {\xmlgrab}
        {\sqrt{#1}}

      \XMLelement{m:mtext}
        {}
        {\xmlgrab}
        {\hbox{#1}}

This implements the ``<mn>`` element. Is ``\mathrm`` a good choice? We
implement also the ``<mi>`` element. You can specify a font in the
attribute. There is also the infamous test on the length. This means
that you should not insert spaces. This means also that you cannot use
entities.

.. container:: ltx-source

   ::

      \XMLelement{m:mi}
        {\XMLattribute{mathvariant}{\XML@mathmlvariant}{normal}}
        {\xmlgrab}
        {\mi@test#1\relax}

      \gdef\mi@test#1#2\relax{
       \ifx\XML@mathmlvariant\att@mathml@bold
        \mathbf{#1#2}\else
       \ifx\XML@mathmlvariant\att@mathml@sansserif
        \mathsf{#1#2}\else
       \ifx\XML@mathmlvariant\att@mathml@tt
        \texttt{#1#2}\else
        \ifx\mi@test#2\mi@test
         \expandafter#1
        \else
         \mathrm{#1#2}
        \fi\fi\fi\fi}

      \XMLelement{m:mn}
        {}
        {\xmlgrab}
        {\mathrm{#1}}

This implements the ``<mfence>`` element. The trouble is that the
``\left`` and ``\right`` commands expect (after expansion) a delimiter.
What we have is a character string, that we must convert into a token.
The code is trivial, but a bit longish.

.. container:: ltx-source

   ::

      \XMLelement{m:mfenced}
        { \XMLattribute{open}{\XML@fenceopen}{(}
          \XMLattribute{close}{\XML@fenceclose}{)}  }
        {\jg@hacko\left\XML@fenceopen}
        {\jg@hackc\right\XML@fenceclose}

      \def\jg@hacko{%
        \ifx\XML@fenceopen\jg@lt\let\XML@fenceopen\langle\fi
        (complete code shown here)
      }

      \def\jg@hackc{%
        \ifx\XML@fenceclose\jg@gt\let\XML@fenceclose\rangle\fi}
        (complete code shown here)
      }

5.4 Tables in MathML
--------------------

Original code tested attribute ``class=equation``. Called \`gathered' in
this case. This uses three global variables: ``\GATHER``,
``\StartTable`` and ``\StartRow``

.. container:: ltx-source

   ::

      \XMLelement{m:mtable}
        {}
        {
        \def\StartTable{1}%
        \def\GATHER{0}%
           \begin{array}{*{99}{c}}
        }
        {
          \end{array}
        }

A non trivial question: where the does group start of finish? We
globally define a command ``\temp`` that is executed just after the
current group. This command defines ``\StartRow`` to 1 (true), then
executes the argument. Moreover, if ``\StartTable`` is 0 (first row of
the table) it toggles it to 1; otherwise, it inserts a ``\\``, this
creates a new row.

.. container:: ltx-source

   ::

      \XMLelement{m:mtr}
       {}
       {\xmlgrab}
       {\ifnum\StartTable=1
          \gdef\temp{ \gdef\StartTable{0}\def\StartRow{1}#1}%
        \else
          \gdef\temp{\\\def\StartRow{1}#1}%
        \fi
        \aftergroup\temp}

This piece of code is not complete. It does not handle the multicolumn
case. We construct a ``\temp`` command as above. If ``StartRow`` is one,
we toggle to 0, otherwise insert a ampersand (here ``\tabcellsep``). We
test also alignments (left, right, center). What is the purpose of the
space after ``\hfill``?

.. container:: ltx-source

   ::

      \XMLelement{m:mtd}
       {\XMLattribute{columnalign}{\XML@mtdalign}{center}
        \XMLattribute{columnspan}{\XML@mtdspan}{1}}
       {\xmlgrab}
       {
         %  \ifnum\XML@mtdspan=1 
         \ifnum\StartRow=1
           \ifx\XML@mtdalign\att@mtd@left
              \gdef\temp{\gdef\StartRow{0}#1\hfill{ }}%
              \else \ifx\XML@mtdalign\att@mtd@right
                \gdef\temp{\gdef\StartRow{0}\hfill#1}%
                \else \gdef\temp{\gdef\StartRow{0}#1}\fi\fi%
         \else%
           \ifx\XML@mtdalign\att@mtd@left
              \gdef\temp{\tabcellsep#1\hfill{ }}%
              \else \ifx\XML@mtdalign\att@mtd@right
                \gdef\temp{\tabcellsep\hfill #1}%
                \else \gdef\temp{\tabcellsep#1}\fi\fi%
          \fi
        \aftergroup\temp
       }

5.5 Pictures
------------

We show there the TeX command used to implement the picture environment.

The translation of
``<picture width='A' height='B' xpos='C' ypos='D'> etc </picture>`` is
``\begin{picture}(A,B)(C,D) etc \end{picture}``.

.. container:: ltx-source

   ::

      \XMLelement{picture}
        {\XMLattribute{width}{\XML@width}{1}
         \XMLattribute{height}{\XML@height}{1}
         \XMLattribute{xpos}{\XML@xpos}{0}
         \XMLattribute{ypos}{\XML@ypos}{0}
        }
        {\begin{picture}(\XML@width,\XML@height)(\XML@xpos,\XML@ypos)}
        {\end{picture}}

The translation of ``<pic-put xpos='A' ypos='B'> object </pic-put>`` is
``\put(A,B){object}``.

.. container:: ltx-source

   ::

      \XMLelement{pic-put}
        {\XMLattribute{xpos}{\XML@xpos}{0}
         \XMLattribute{ypos}{\XML@ypos}{0}}
        {\xmlgrab}
        {\put(\XML@xpos,\XML@ypos){#1}}

The translation of ``<pic-arc xpos='A' ypos='B' angle='C'/>`` is
``\arc(A,B){C}``.

.. container:: ltx-source

   ::

      \XMLelement{pic-arc}
        {\XMLattribute{xpos}{\XML@xpos}{0}
         \XMLattribute{angle}{\XML@angle}{0}
         \XMLattribute{ypos}{\XML@ypos}{0}}
        {\xmlgrab}
        {\arc(\XML@xpos,\XML@ypos){\XML@angle}}

The translation of
``<pic-scaleput xscale='A' yscale='B'  xscaley='C' yscalex='D' xpos='E' ypos='F'> argument </pic-scaleput>``
is
``\def\xscale{A} \def\yscale{B} \def\xscaley{C} \def\yscalex{D} \scaleput(E,F){argument}``.
The ``\def``\ s are automatic.

.. container:: ltx-source

   ::

      \XMLelement{pic-scaleput}
        {\XMLattribute{xscale}{\xscale}{1.0}
         \XMLattribute{yscale}{\yscale}{1.0}
         \XMLattribute{xscaley}{\xscaley}{0.0}
         \XMLattribute{yscalex}{\yscalex}{0.0}
         \XMLattribute{xpos}{\XML@xpos}{0}
         \XMLattribute{ypos}{\XML@ypos}{0}}
        {\xmlgrab}
        {\scaleput(\XML@xpos,\XML@ypos){#1}}

The translation of ``<pic-thicklines/>`` is ``\thicklines``; that of
``<pic-thinlines/>`` is ``\thinlines``; and that of
``<pic-linethickness size='A'>`` is ``\linethickness{A}``.

.. container:: ltx-source

   ::

      \XMLelement{pic-thicklines}
        {}{\xmlgrab}{\thicklines}

      \XMLelement{pic-thinlines}
        {}{}{\thinlines}

      \XMLelement{pic-linethickness}
        {\XMLattribute{size}{\XML@size}{1pt}}
        {}
        {\linethickness{\XML@size}}

The previous code works only if the commands modify global variables.
Thus we redefine these.

.. container:: ltx-source

   ::

      \gdef\thinlines{\global\let\@linefnt\tenln \global\let\@circlefnt\tencirc
        \global\@wholewidth\fontdimen8\tenln \global\@halfwidth .5\@wholewidth}

      \gdef\thicklines{\global\let\@linefnt\tenlnw \global\let\@circlefnt\tencircw
        \global\@wholewidth\fontdimen8\tenlnw \global\@halfwidth .5\@wholewidth}

      \gdef\linethickness#1{%
         \global\@wholewidth #1\relax \global\@halfwidth .5\@wholewidth}

The translation of
``<pic-multiput xpos='A' ypos='B' repeat='C' dx='D' dy='E'>  argument </pic-multiput>``
is ``\multiput(A,B)(D,E){C}{argument}``.

.. container:: ltx-source

   ::

      \XMLelement{pic-multiput}
        {\XMLattribute{xpos}{\XML@xpos}{0}
         \XMLattribute{ypos}{\XML@ypos}{0}
         \XMLattribute{repeat}{\XML@repeat}{1}
         \XMLattribute{dx}{\XML@dx}{1}
         \XMLattribute{dy}{\XML@dy}{1}}
        {\xmlgrab}
        {\multiput(\XML@xpos,\XML@ypos)(\XML@dx,\XML@dy){\XML@repeat}{#1}}

The translation of
``<pic-bezier a1='A' a2='B' b1='C' b2='D'  c1='E' d1='F' repeat ='G'/>``
is ``\qbezier[G](A,B)(C,D)(E,F)``. The value of the optional argument
\`repeat' is zero.

.. container:: ltx-source

   ::

      \XMLelement{pic-bezier}
        {\XMLattribute{a1}{\XML@ai}{0}
         \XMLattribute{a2}{\XML@aii}{0}
         \XMLattribute{b1}{\XML@bi}{0}
         \XMLattribute{b2}{\XML@bii}{0}
         \XMLattribute{c1}{\XML@ci}{0}
         \XMLattribute{c2}{\XML@cii}{0}
         \XMLattribute{repeat}{\XML@repeat}{0}}
        {\xmlgrab}
        {\qbezier[\XML@repeat](\XML@ai,\XML@aii)(\XML@bi,\XML@bii)(\XML@ci,\XML@cii)}

Lines and vectors are handled in the same way. The translation of
``<pic-line xdir='A' ydir='B' width='C'/>`` or
``<pic-vector xdir='A' ydir='B' width='C'/>`` is ``\line(A,B){C}`` and
``\vector[G](A,B){C}``.

.. container:: ltx-source

   ::

      \XMLelement{pic-line}
        {\XMLattribute{xdir}{\XML@xdir}{0}
         \XMLattribute{ydir}{\XML@ydir}{0}
         \XMLattribute{width}{\XML@width}{0}}
        {\xmlgrab}
        {\line(\XML@xdir,\XML@ydir){\XML@width}}

      \XMLelement{pic-vector}
        {\XMLattribute{xdir}{\XML@xdir}{0}
         \XMLattribute{ydir}{\XML@ydir}{0}
         \XMLattribute{width}{\XML@width}{0}}
        {\xmlgrab}
        {\vector(\XML@xdir,\XML@ydir){\XML@width}}

Three similar routines. The translation of
``<pic-curve unit-length=unit-length="0.4">300,0, 340,100, 380,0</pic-curve>``
is ``{\setlength\unitlength{0.4pt}\curve(300,0, 340,100, 380,0)}``.
There is a big hack here. Spaces are defined to be space plus
``\ignorespaces`` by xmltex.tex. When the package tries to convert the
340 into a dimension, via ``\mylength=argument\unitlength``, the
``\ignorespaces`` gives a *Missing number, treated as zero* error. For
this reason, we redefine ``\ignorespaces``.

.. container:: ltx-source

   ::

      \XMLelement{pic-curve}
        {\XMLattribute{unit-length}{\XML@ulength}{1}}
        {\xmlgrab}
        {{\def\ignorespaces{}\setlength\unitlength{\XML@ulength pt}\curve(#1)\global\unitlength=1pt }}

      \XMLelement{pic-closecurve}
        {\XMLattribute{unit-length}{\XML@ulength}{1}}
        {\xmlgrab}
        {{\def\ignorespaces{}\setlength\unitlength{\XML@ulength pt}\closecurve(#1)\global\unitlength=1pt}}

      \XMLelement{pic-tagcurve}
        {\XMLattribute{unit-length}{\XML@ulength}{1}}
        {\xmlgrab}
        {{\def\ignorespaces{}\setlength\unitlength{\XML@ulength pt}\tagcurve(#1)\global\unitlength=1pt }}

The translation of ``<pic-frame> argument  </pic-frame>`` is
``\frame{argument}``

.. container:: ltx-source

   ::

      \XMLelement{pic-frame}
       {}
       {\xmlgrab}
       {\frame{#1}}

The translation of ``<pic-circle size='A' full='false'/>`` or
``<pic-circle size='A' full='notfalse'/>`` is ``\circle{A}`` or
``\circle*{A}``. *Tralics* uses nothing or ``true`` as value of the
``full`` attribute.

.. container:: ltx-source

   ::

      \XMLelement{pic-circle}
        {\XMLattribute{size}{\XML@size}{1}
         \XMLattribute{full}{\XML@full}{false}}
        {\xmlgrab}
        {\ifx\XML@full\att@false\circle{\XML@size}\else \circle*{\XML@size}\fi}

The translation of ``<pic-bigcircle size='A' unitlength='B'/>`` should
be ``{\unitlength=Bpt \bigcircle{A}}``. For some reasons, the
``\bigcircle`` command modifies globally ``\unitlength``, so that the
piece of code given above modifies ``\unitlength``. For this reason, we
use another variable, and use a global assignment.

.. container:: ltx-source

   ::

      \newdimen\jgunitlength
      \XMLelement{pic-bigcircle}
        {\XMLattribute{size}{\XML@size}{1}
         \XMLattribute{unit-length}{\XML@ulength}{1}}     
        {\xmlgrab}
        {\jgunitlength=\unitlength\setlength\unitlength{\XML@ulength pt}
          \bigcircle{\XML@size}
          \global\unitlength=\jgunitlength}

This should be changed. This evaluates the command (first argument),
with an argument (second argument), using an optional argument which is
one of L, R, and one of T, B, computed from the global variable
``\XML@pos``.

.. container:: ltx-source

   ::

      \def\@att@to@rtb#1#2{%
        \ifx\XML@pos\att@l \def\foo{#1[l]{#2}}
        \else\ifx\XML@pos\att@r \def\foo{#1[r]{#2}}%
        \else\ifx\XML@pos\att@t \def\foo{#1[t]{#2}}%
        \else\ifx\XML@pos\att@b \def\foo{#1[b]{#2}}%
        \else\ifx\XML@pos\att@lt \def\foo{#1[lt]{#2}}%
        \else\ifx\XML@pos\att@lb \def\foo{#1[lb]{#2}}%
        \else\ifx\XML@pos\att@rt \def\foo{#1[rt]{#2}}%
        \else\ifx\XML@pos\att@rb \def\foo{#1[rb]{#2}}%
        \else\ifx\XML@pos\att@tl \def\foo{#1[lt]{#2}}%
        \else\ifx\XML@pos\att@bl \def\foo{#1[lb]{#2}}%
        \else\ifx\XML@pos\att@tr \def\foo{#1[rt]{#2}}%
        \else\ifx\XML@pos\att@br \def\foo{#1[rb]{#2}}%
        \else \def\foo{#1{#2}}
       \fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi
      \foo
      }

The translation of
``<pic-framebox width='A'  height='B' position='xx'> argument </pic-framebox>``
is ``\makebox(A,B)[opt]{argument}``, where the optional argument is
given by the procedure above. In case an non-false ``framed`` attribute
is given, the ``\framebox`` command is used instead of ``\makebox``.

.. container:: ltx-source

   ::

      \XMLelement{pic-framebox}
        {\XMLattribute{width}{\XML@width}{0}
         \XMLattribute{height}{\XML@height}{0}
         \XMLattribute{position}{\XML@pos}{}
         \XMLattribute{framed}{\XML@framed}{false}
        }
       {\xmlgrab}
       {\let\cmd\framebox\ifx\XML@framed\att@false\let\cmd\makebox\fi
        \@att@to@rtb{\cmd(\XML@width,\XML@height)}{#1}}

The translation of
``<pic-dashbox  width='A' height='B' dashdim='C' position='xx'> argument </pic-dashbox>``
is ``\dashbox{C}(A,B)[opt]{argument}``, where the optional argument is
given by the procedure above.

.. container:: ltx-source

   ::

      \XMLelement{pic-dashbox}
        {\XMLattribute{width}{\XML@width}{0}
         \XMLattribute{height}{\XML@height}{0}
         \XMLattribute{position}{\XML@pos}{w}
         \XMLattribute{dashdim}{\XML@dashdim}{1pt}
        }
       {\xmlgrab}
       {\@att@to@rtb{\dashbox{\XML@dashdim}(\XML@width,\XML@height)}{#1}}

The translation of
``<pic-oval  xpos='A' ypos='B' specs='xx'> argument </pic-oval>`` is
``\oval(A,B)[opt]{argument}``, where the optional argument is given by
the procedure above.

.. container:: ltx-source

   ::

      \XMLelement{pic-oval}
        {\XMLattribute{xpos}{\XML@xpos}{0}
         \XMLattribute{specs}{\XML@pos}{}
         \XMLattribute{ypos}{\XML@ypos}{0}}
        {\xmlgrab}
        {\@att@to@rtb{\oval(\XML@xpos,\XML@ypos)}{#1}}

Useful for typesetting TeX and LaTeX logos.

.. container:: ltx-source

   ::

      \XMLelement{TeX}
        {}{\TeX{}}{}
      \XMLelement{LaTeX}
        {}{\LaTeX{}}{}

All images in examples of *Tralics* are obtained by putting the
expression into ``<preview>`` element, whose translation is given here.

.. container:: ltx-source

   ::

      \XMLelement{preview}
        {}
        {\begin{preview}}
        {\end{preview}}

5.6 Tables
----------

In the file fotex.sty, tables are implemented via the \`NoTable'
mechanism. We modify this a bit.

In this piece of code, we do not set ``\TableWidth`` if the width is
declared auto.

.. container:: ltx-source

   ::

      \newif\ifnoheightcheck
      \catcode`\:\active

      \def\myNoTableSetup{%
        \ifx\FOwidth\att@auto\else
         \TableWidth\FOwidth
         \advance\TableWidth by -\tabcolsep
         \advance\TableWidth by -\FOmarginleft
         \advance\TableWidth by -\FOmarginright
       \fi
        \global\advance\AbsoluteTableCount by 1 %
        \DeclareArray{fotable\the\AbsoluteTableCount:}%
        \global\CellCount0 %
      }
      \catcode`\:12

5.7 Getting labels right
------------------------

The fotex.xmt file defines the behaviour of ``<fo:block>``. The action
depends on the context. The action, when entering the block can be
``\FOListBlock`` inside a list, ``\FOOutputBlock`` (inside output) or
``\FOBoxedBlock`` in a table, or ``\FONormalBlock``. We modified the
code of this command `(complete source
here) <raweb3.html#hack-normalblock>`__.

The essential modification is to move the ``\FOlabel`` after
``\FOvspacebefore``. Thus, in case of page break, the label is near the
text.

.. container:: ltx-source

   ::

      \AtBeginDocument{%
      \def\FONormalBlock{%
        \let\@x\relax
        \ifnum\FOTableNesting>0
          ...
        \else
          \ifnum\FOinList>0
            \FOlabel
            ...
          \else
            ...
            \par
             %\FOlabel (deleted here) 
            \Quadding
            \ifFOBlockGrab
              \FOBoxedBlock{\linewidth}%
            \else
              \FOBorderTop
              \ifdim\FOpaddingbefore>\z@
               \vskip\FOpaddingbefore
              \fi
              \FOvspacebefore
              ...
            \fi
            ...
          \fi
          \FOlabel % added here 
          \FOSetFont{normal}%
        \fi
      \@x
      }
      }

The argument of ``\FOgeneratePage`` is the expansion of ``\FOformat``.
If it is, say ``A.``, an A followed by a dot, the result will be
``\@Alph{\c@page}.``, with a dot after the page number.

The ``\thepage`` command is defined as
``\csname @arabic\endcsname \c@page``, and this looks like the
``\yFOlabel`` command.

.. container:: ltx-source

   ::

      %\def\FOgeneratePage#1#2\@null{\csname Format-#1\endcsname{\c@page}#2}
      \def\xFOgeneratePage#1#2\@null{\yFOlabel#1#2}
      \def\yFOlabel#1{\csname Format-#1\endcsname{\c@page}}

The macro ``\xFOlabel`` is the same as the original ``\FOlabel`` except
that ``\yFOlabel`` is not expanded: The purpose of ``\protected@write``
is to inhibit premature expansion of ``\thepage``. Since the code does
not use ``\thepage``, lots of reference in the table of contents are
wrong.

.. container:: ltx-source

   ::

      \def\xFOlabel{%
       \ifx\@empty\FOid\else
        \@bsphack
        \protected@write\@mainaux{\let\yFOlabel\relax}%
          {\string\newlabel{\FOid}{{}{\expandafter\xFOgeneratePage
                  \FOformat\@null}{}{\FOid}{}}}%
        \@esphack
        \hyper@@anchor{\FOid}{\relax}%
        \global\let\FOid\@empty
       \fi
      }

5.8 The title page
------------------

If you say ``\ra@atxy(70mm,174mm){xx}``, then xx is typeset in a box,
shifted by 70mm horizontally and 174mm vertically, and added to the box
``\ra@atxybox``.

.. container:: ltx-source

   ::

      \newbox\ra@atxybox
      \def\ra@atxy(#1,#2)#3{\global\setbox\ra@atxybox=\hbox
       {\unhbox\ra@atxybox
        \vtop to 0pt{\kern #2\hbox to 0pt{\kern #1\relax #3\hss}\vss}}}

The idea is to put the content of the ``\ra@atxybox`` box at the origin.
We have to modify the ``\output`` routine, and the easiest way is to
change ``\@texttop``, which does nothing (it could be used to implement
``\raggedtop``). The expansion is some material that is put at upper
left corner of the page, before headings are added. This means that we
have to shift the material, inserting some kerns. Note that
``\@themargin`` is correct only if the page is odd, or if left and right
margins are the same. The logo appears on only one page, because we kill
``\@texttop``. Note: The raweb.cls file inserts a logo on a given page
by adding ``\setbox255=\vbox{\@usemyatxy \unvbox255}`` in front of the
``\output`` routine. The ``\@usemyatxy`` command is similar to the
command given here.

.. container:: ltx-source

   ::

      \def\ra@useatxy{{%
        \let\@themargin\oddsidemargin
        \vtop to 0pt{\kern-\headsep \kern-\topmargin \kern-\headheight
                     \kern-1in \kern-\voffset
          \hbox to 0pt{\kern-\@themargin \kern-1in \kern-\hoffset
          \unhbox\ra@atxybox \hss}\vss}}%
          \global\let\@texttop\relax}

| We give here two similar functions. The first one is for the Raweb, it
  is a reference to the English page, and the second is for Research
  Reports. In the URL, en is replaced by fr, and THEME is spelled as
  THÈME. The effect of this command is to insert, just above the logo,
  the value of the theme, with a rule on each side. The ``\vfil`` is for
  vertical centering of the title. The 8cm is obtained by trial and
  error. The ``\firstchar`` command is now useless. We show show here
  the two versions of the Logo: French and English. As you can see, they
  are not exactly the same.
| |Logo Ra2003|---|Logo Ra2002|

.. container:: ltx-source

   ::

      \def\foratheme#1{\vskip8cm \vfil
        \ra@atxy(74mm,175mm) {\hbox to 70mm{%
             \hrulefill\hspace{8mm}
               \def\firstchar##1##2\relax{##1##2} % ducon
                 \href{http://www.inria.fr/recherche/equipes/listes/%
            theme_\firstchar#1\relax.en.html}{THEME \uppercase{#1}}%
                   \hspace{8mm}\hrulefill}}}
      \def\forrtheme#1{...}

This puts the logo at the right place in case of a Inria Research or
Technical Report. Digits seem randomly chosen: you would expect both
logos to be of the same size, inserted at the origin, with a width of
210mm.

.. container:: ltx-source

   ::

      \def\forrinria{%
       {\def\tmp{RR}%
         \ifx\tmp\ra@type\ra@atxy(1.05cm,1.625cm){\includegraphics[width=23.1cm]%
              {rap-rech}}%
                    \else\ra@atxy(0.5cm,1.325cm){\includegraphics[width=19.2cm]%
              {rap-tech}\fi}}}

This command is used to put the Raweb logo (depending on the year) and
the Inria logo on the front page. This code is awful: the text INRIA
etc. has a width of 128mm, and is at 39mm from one border and 43 from
the other one. The ``\vfil`` is for vertical alignment of the text that
follows (name of the team etc).

.. container:: ltx-source

   ::

      \def\foinria{%
        \ra@atxy(7.8cm,2.5cm){\includegraphics[width=5.7cm]{Logo-INRIA-couleur}}%
        \ra@atxy(55mm,173mm){\includegraphics{LogoRA\ra@year}}%
       \setbox0\hbox to 14cm{%
           \noindent\hskip3cm\hfill
           {\fontencoding{T1}\fontfamily{ptm}\fontseries{m}%
         \fontshape{n}\fontsize{10pt}{12pt}\selectfont
           \href{http://www.inria.fr}{INSTITUT NATIONAL DE RECHERCHE EN INFORMATIQUE %
              ET EN AUTOMATIQUE}}%
            \hskip-5cm\hfill}%
        \null\vskip0.7cm \leavevmode\hskip-3.5cm\box0\null\vskip2cm\vfil}

We invented ``<cleardoublepage/>``. Its effect is to make the first page
of text appear on a right page (the text starts on a odd page; in fact
it starts on page one, because we use the adequate
``<fo:page-sequence>`` element. Of course, the problem could be solved
by putting the table of contents at the end of the document.

.. container:: ltx-source

   ::

      \XMLelement{cleardoublepage}
       {} {\cleardoublepage} {}

This is another element we have to add, because we do not know how to
express this in xslt-fo: We want a rule just below the page headings.
This produces a box of width zero, with a rule of the width of the page
that will be below the text that follows.

.. container:: ltx-source

   ::

      \XMLelement{pagestylehrule}
       {} {\hbox to0pt{\rule[-1ex]{\textwidth}{.03cm}\hss}} {}

5.9 Math and images
-------------------

There is a PerlScript names extract-math.pl, that tries to convert
MathML into images. The document to be converted is
`here <raweb1.html#extract-math>`__. This converts to 5 images: image
one=\ |mathimage 1|, image two=\ |mathimage 2|, image three=\ |mathimage
3|, image four=\ |mathimage 4|, and image five=\ |mathimage 5|.

The idea is to use some code from latex2html.

.. container:: ltx-source

   ::

      \XMLelement{formula}
       {\XMLattribute{id}{\XML@formid}{none}}
       {\@inlinemathA{\XML@formid}}
       {\@inlinemathZ}

There is no need to redefine brackets, because in the current version,
nothing is in display. The argument of this procedure is the number of
the image (the \`id' attribute of the XML element). We open a box,
containing a rule, and the content of the element.

.. container:: ltx-source

   ::

      \newbox\sizebox
      \def\@inlinemathA#1{%
        \gdef\[{$\displaystyle}\gdef\]{$} % hack...
        \xdef\@mathenv{#1}%
        \adjustnormalsize \newpage\clearpage
        \setbox\sizebox=\hbox\bgroup\kern.05em
        \vrule height1.5ex width0pt }

This is a hack defined by latex2html. Is everything needed?

.. container:: ltx-source

   ::

      \AtBeginDocument{
      \let\realnormalsize=\relax
      \def\adjustnormalsize{%
        \def\normalsize{\mathsurround=0pt \realnormalsize
         \parindent=0pt\abovedisplayskip=0pt\belowdisplayskip=0pt}%
        \def\phantompar{\csname par\endcsname}%
        \normalsize}
      }

Vertical alignment is done as follows: the baseline is either the bottom
or the center. That is, if the depth of the box is not zero, we add a
vrule with the same height and depth.

.. container:: ltx-source

   ::

      \def\@centerinlinemath{%
        \dimen1=\ifdim\ht\sizebox<\dp\sizebox \dp\sizebox\else\ht\sizebox\fi
        \advance\dimen1by.5pt \vrule width0pt height\dimen1 depth\dimen1 
       \dp\sizebox=\dimen1\ht\sizebox=\dimen1\relax}

This is done at the end of the math formula. The log file will contain
lines of the form *l2hSize :1:8.0pt::8.0pt::94.54239pt*. The Perl script
reads these data from the log file, and calls another Perl script:
/usr/bin/perl /usr/local/latex2html/bin/pstoimg -type png -tmp tmpdir
-discard -interlace -antialias -depth 1 -scale 1.4 -geometry 94x16
-margins 62,41 -crop abls -transparent -out math_image_1.png
tmpdir/images001

.. container:: ltx-source

   ::

      \def\@inlinemathZ{%
        \egroup\expandafter\ifdim\dp\sizebox>0pt %
        \expandafter\@centerinlinemath\fi
        \typeout{l2hSize %
         :\@mathenv:\the\ht\sizebox::\the\dp\sizebox::\the\wd\sizebox.}
        \hbox{\vrule width.1em\kern-.05em\vtop{\vbox{%
        \kern.1em\kern0.6 pt\hbox{\hglue.17em\copy\sizebox\hglue0.6 pt}}\kern.3pt%
        \ifdim\dp\sizebox>0pt\kern.1em\fi \kern0.6 pt%
        \ifdim\hsize>\wd\sizebox \hrule depth1pt\fi}}%
        \ifdim\ht\sizebox<\vsize 
            \ifdim\wd\sizebox<\hsize\expandafter\hfill\fi \expandafter\vfill
            \else\expandafter\vss\fi
        \clearpage
      }

Now, sixty lines of hack. Complete code
`here <raweb3.html#hack-item>`__. Translation of ``fo:list-item-label``
calls ``\savebox{\ItemBox}{#1}`` just before ``\item[#1]``. This code is
executed again here. I don't remember why (the ``\ItemBox`` is only used
here).

.. container:: ltx-source

   ::

      \def\jg@item[#1]{%
        \if@noparitem
          \@donoparitem
        \else
          \if@inlabel ...  \fi
          \ifhmode ...     \fi
          \if@newlist ...    \fi
          \global\@inlabeltrue
        \fi
        \global\everypar{ ... }
        \if@noitemarg ... \fi
        \savebox{\ItemBox}{#1}% Added JG
        \sbox\@tempboxa{\makelabel{#1}}%
        \global\setbox\@labels\hbox{ use \@tempboxa here... }
        \ignorespaces}

Last minutes hacks. Some actions must be done after all packages have
been loaded. Some other symbols are defined, or redefined.

.. container:: ltx-source

   ::

      define characters
      \AtBeginDocument{
        \@namedef{Gin@rule@.eps}#1{{eps}{.eps}{#1}}
        \global\let\FOlabel\xFOlabel
        \let\NoTableSetup\myNoTableSetup

        \let\downslopeellipsis\ddots
        \mathchardef\Rightarrow="3229 
         more characters here

        \def\truestate{\models}
        \let\@texttop\ra@useatxy
        \let\XURL\relax
        \errorcontextlines=1000
        \selectlanguage{english}
        \let\@item\jg@item
        \expandafter\let\csname E/:\XMLNS@fo:basic-link\endcsname\patched@basiclink
      }

      \def\L@fr{\selectlanguage{french}}
      \def\L@FR{\selectlanguage{french}}

5.10 The fotex.cfg file
-----------------------

The file looks like this. Some lines are commented: they define
quantities unused by the Raweb. Elements hrule and vfill are obsolete?
useless? (I don't remember). Switching to french is valid only for a
French document. The two commands ``\foratheme`` and ``\foinria`` are
defined in the file raweb-cfg.sty.

.. container:: ltx-source

   ::

      \frenchspacing
      \selectlanguage{french}

      \DeclareNamespace{fo}{http://www.w3.org/1999/XSL/Format}

      \XMLelement{fo:RATHEME}
        {}
        {\xmlgrab}
        {\foratheme{#1}}

      % \XMLelement{fo:RRTHEME} ...

      \XMLelement{fo:INRIA}
        {\XMLattribute{year}{\ra@@year}{2001}}
        {}{\xdef\ra@year{\ra@@year}\foinria}

      % \XMLelement{fo:RRINRIA} ...

      \XMLelement{hrule} {} {\par\hrule\par} {}
      \XMLelement{vfill} {} {\vfill} {}

.. |Logo Ra2003| image:: /img/LogoRA2003.png
.. |Logo Ra2002| image:: /img/LogoRA2002.png
.. |mathimage 1| image:: /img/math_image_1.png
   :class: vc
.. |mathimage 2| image:: /img/math_image_2.png
   :class: vc
.. |mathimage 3| image:: /img/math_image_3.png
   :class: vc
.. |mathimage 4| image:: /img/math_image_4.png
   :class: vc
.. |mathimage 5| image:: /img/math_image_5.png
   :class: vc

----

docs/raweb_examples.rst
-----------------------

==============
RAWeb examples
==============

Example of RAWeb source file
============================

Example of a raweb source file. This file is an extract from the RAWEB
of the miaou project. The syntax for the \`composition' module has
changed in 2006.

.. container:: ltx-source

   ::

      001 \documentclass{ra2003}
      002 \usepackage{amsfonts}
      003 \usepackage{amsmath}
      004 \theme{4a}
      005 \isproject{YES} % \isproject{OUI} works also
      006 \projet{MIAOU}{Miaou}{Math�matiques et 
           Informatique de l'Automatique et de l'Optimisation pour l'Utilisateur}
      007 \UR{\URSophia\URFuturs}

      009 \def\CC{{\mathbb C}}
      010 \newcommand{\etc}{etc}
      011 \def\corresp{manager}

      013 \declaretopic{abc}{Topic abc}
      014 \declaretopic{def}{Topic def}

      016 \begin{document}


      019 \maketitle
      020 \nocite{*}

      022 \begin{module}{composition}{en-tete}{}

      024 \begin{catperso}{Head of project team}
      025 \pers{Laurent}{Baratchart}[DR INRIA]
      026 \end{catperso}

      028 \begin{catperso}{Vice-head of project team}
      029 \pers{Juliette}{Leblond}[CR INRIA]
      030 \end{catperso}

      032 \begin{catperso}{Administrative assistant}
      033 \pers{France}{Limouzis}[AI INRIA, partial time in the project]
      034 \end{catperso}

      036 \begin{catperso}{Staff member}
      037 \pers{Jos�}{Grimm}[CR INRIA]
      038 \end{catperso}

      040 \begin{catperso}{Ph. D. Students}
      041 \pers{David}{Avanessoff}[Fellow, INRIA]
      042 \pers{Alex}{Bombrun}[Since November, 1st]
      043 \pers{Moncef}{Mahjoub}[Co-advised, ENIT Tunis 
            (in France in February, March, October, November)]
      044 \end{catperso}
      045 \end{module}

      047 \begin{module}{presentation}{presentation}{}
      048 \begin{moreinfo}
      049 The project was terminated June the 30th, 2003. 
      050 A proposal for a new project named APICS has been submitted to the steering
      051 comittee of Inria Sophia Antipolis.
      052 \end{moreinfo}

      054 The Team develops effective methods for modelling, identification and control
      055 of dynamical systems.

      057 \subsubsection*{Research Themes}
      058 \begin{itemize}
      059 \item Meromorphic and rational approximation in the complex domain,
      060   application to identification of transfer functions  and matrices as well as
      061   singularity detection for 2-D Laplace operators. Development of 
      062 %the hyperion
      063   software for frequency domain identification and synthesis of transfer
      064   matrices.  
      065 \item Control and structure of non-linear systems: continuous stabilization,
      066   non-linear transformations (linearization, classification). 
      067 \end{itemize}

      069 \subsubsection*{International and industrial partners}

      071 \begin{itemize}
      072 \item Industrial collaborations with Alcatel-Space, \etc
      073 \item Exchanges with CWI CNR (Italy), \etc
      074 \item The project is involved in a NATO Collaborative Linkage Grant \etc
      075 \end{itemize}
      076 \end{module}


      079 \begin{module}[def]{fondements}{identif}{Identification and deconvolution}
      080 Let us first introduce  the subject of Identification in some generality.

      082 Abstracting in the form 
      083 of mathematical equations the behavior of a phenomenon is
      084 a step called \emph{modeling}. It typically serves two purposes: the first
      085 is to describe the phenomenon with minimal complexity for some specific 
      086 purpose,
      087 the second is to \emph{predict} its outcome. \etc


      090 \subsubsection{Analytic approximation of incomplete boundary data}
      091 \label{dida-mero}
      092 \label{filtrescnes}
      093 \label{didactique-approx-rat-mat}
      094 \begin{participants}
      095 \pers{Laurent}{Baratchart},
      096 \pers{Jos�}{Grimm},
      097 \pers{Birgit}{Jacob}[University of Leeds (GB)],
      098 \pers{Juliette}{Leblond},
      099 \pers{Jean-Paul}{Marmorat}[CMA, �cole des Mines],
      100 \pers{Jonathan}{Partington},
      101 \pers{Fabien}{Seyfert}
      102 \end{participants}

      104 \begin{motscle}
      105 meromorphic approximation, frequency-domain identification,
      106 extremal problems
      107 \end{motscle}

      109 \etc, so that a prototypical Problem is:

      111 {\sl ($P$)~~Let $p \geq 1$, $N \geq 0$, $K$ be an arc of the unit circle $T$, 
      112   $f \in L^p(K)$, $\psi \in L^p(T \setminus K)$ and $M>0$;
      113   find a function  $g \in H^p + R_N$ such that 
      114   $\|g - \psi\|_{L^p(T \setminus K)} \leq M$ and such that $g - f$ 
      115   is of minimal norm in  $L^p(K)$ under this constraint.}

      117 Problem ($P$) is an extension to the meromorphic case, and to incomplete data,
      118 of classical analytic extremal problems (obtained
      119 by setting $K=T$ and $N=0$), that generically go under the name
      120 \textit{bounded extremal problems}. 
      121 These have been introduced and intensively studied by the Team, 
      122 \cite{blpprep} and ~\footcite{partII}. 

      124 \subsubsection{Scalar rational approximation}
      125 \label{didactique-approx-rat-scal}
      126 \begin{participants}
      127 \pers{Laurent}{Baratchart},
      128 \pers{Reinhold}{K�stner},
      129 \pers{Juliette}{Leblond},
      130 \pers{Martine}{Olivi},
      131 \pers{Edward}{Saff},
      132 \pers{Herbert}{Stahl},
      133 \pers{Franck}{Wielonsky}
      134 \end{participants}

      136 \begin{motscle}
      137 rational approximation, critical point, orthogonal polynomials
      138 \end{motscle}
      139 \etc.
      140 \begin{equation}
      141 \label{crit}
      142 \left\|f - \frac{p_m}{q_n} \right\|_{L^2(d \mu)} 
      143 \end{equation}
      144 where, by definition, 
      145 \[
      146 \|g\|_{L^2(d \mu)}^2=\frac{1}{2\pi} \int_{-\pi}^{\pi}|g(e^{i\theta})|^2
      147 d\mu(\theta),
      148 \]

      150 \etc

      152 If one introduces now as a new variable the rational matrix $R$ defined by
      153 \[
      154 R=\left(\begin{array}{cc}
      155 L            &  H \\
      156 0            &   I_m
      157 \end{array} \right)^{-1}
      158 \]
      159 and if $T$ stands for the first block-row, 
      160 normalizing the variance of the noise to be identity, the maximum likelihood
      161 estimator  is asymptotically equivalent, when the sample size increases, 
      162 to the minimization of
      163 \begin{equation}
      164 \label{defLL}
      165 \|T\|_{\Lambda}^2={\bf Tr}\left\{\frac{1}{2\pi}
      166 \int_{0}^{2\pi}T(e^{i\theta})\,
      167 d\Lambda(\theta)\,T^*(e^{i\theta})\right\},
      168 \end{equation}
      169 where $\Lambda$  is the spectral measure  of the process $(y~u)^t$ 
      170 (which positive and matrix-valued)
      171 and where  ${\bf Tr}$ indicates the trace. 

      173 \subsubsection{Continuous stabilization}
      174 Stabilization by continuous state feedback \etc

      176 \paragraph{Periodic stabilisation of non-linear systems.}
      177 It is known that \etc

      179 \paragraph{Control Lyapunov functions.}
      180 Lyapunov functions  are \etc
      181 \end{module}

      183 \begin{module}{domaine}{chapeau}{}
      184 The activity of the team focuses on two bottom lines, namely \etc
      185 \end{module}

      187 \begin{module}{}{dom-fissures}{Geometric inverse problems 
      188 for the Laplacian}
      189 \begin{participants}
      190 \pers{Laurent}{Baratchart}
      191 \end{participants}

      193 \begin{motscle}   % non destructive
      194 inverse problem, Laplace equation, non destructive control, tomography
      195 \end{motscle}

      197 Localizing cracks, \etc
      198 \end{module}


      201 \begin{module}{domaine}{resonn}{Identification and design of resonant systems}
      202 \begin{motscle}
      203 telecommunications, multiplexing, filtering device, hyperfrequency, surface waves
      204 \end{motscle}
      205 \end{module}

      207 \begin{module}[abc]{domaine}{spatial}{Spatial mechanics}
      208 \etc
      209 \end{module}


      212 \begin{module}[def]{domaine}{optique}{Non-linear Optics}
      213 \etc
      214 \end{module}


      217 \begin{module}{international}{domaine}{plat}{Transformations and equivalence of non-linear systems}

      219 \begin{participants}
      220 \pers{Laurent}{Baratchart},
      221 \pers{Jean-Baptiste}{Pomet},
      222 \pers{David}{Avanessoff}
      223 \end{participants}

      225 \begin{motscle}
      226 path planning, mobile cybernetics,  identification, {(max,plus) algebra}
      227 \end{motscle}
      228 \etc
      229 \end{module}

      231 \begin{module}{logiciels}{hyperion}{The hyperion software}

      233 \begin{participants}
      234 \pers{Jos�}{Grimm}[\corresp],
      235 \pers{Fabien}{Seyfert},
      236 \pers{Franck}{Wielonsky}
      237 \end{participants}
      238 \etc
      239 \end{module}

      241 \begin{module}{logiciels}{logi-tralics}{The Tralics software}

      243 \begin{participant}
      244 \pers{Jos�}{Grimm}[\corresp]
      245 \end{participant}
      246 \etc. \nocite{tralics-eurotex}
      247 \end{module}

      249 \begin{module}{logiciels}{RARL2}{The RARL2 software}
      250 \begin{participant}
      251 \pers{Jean-Paul}{Marmorat},
      252 \pers{Martine}{Olivi}[\corresp]
      253 \end{participant}

      255 RARL2 (R�alisation interne et Approximation Rationnelle L2) is a software for
      256 rational approximation (see module \ref{didactique-approx-rat-mat}). Its web
      257 page is
      258 \htmladdnormallink{\url{http://www-sop.inria.fr/miaou/RARL2/rarl2.html}}
      259 {http://www-sop.inria.fr/miaou/RARL2/rarl2.html}.
      260 \end{module}

      262 \begin{module}{logiciels}{RGC}{The RGC software}


      265 \begin{participants}
      266 \pers{Fabien}{Seyfert},
      267 \pers{Jean-Paul}{Marmorat}
      268 \end{participants}

      270 The RGC software \etc
      271 \end{module}

      273 \begin{module}{logiciels}{PRESTO-HF}{PRESTO-HF}
      274 \begin{participant}
      275 \pers{Fabien}{Seyfert}
      276 \end{participant}

      278 PRESTO-HF: a toolbox dedicated to lowpass parameter identification for
      279 hyperfrequency filters
      280 \htmladdnormallink{\url
            {http://www-sop.inria.fr/miaou/Fabien.Seyfert/Presto_web_page/presto_pres.html}}
      281 {http://www-sop.inria.fr/miaou/Fabien.Seyfert/Presto_web_page/presto_pres.html}
      282 \etc

      284 \end{module}

      286 \begin{module}{resultats}{tralics}{Tralics: a Latex to XML Translator}

      288 The main philosophy of Tralics is to have the same parser as \TeX, but the
      289 same semantics as \LaTeX. This means that commands like \verb+\chardef+, 
      290 \verb+\catcode+, \verb+\ifx+, \verb+\expandafter+, \verb+\csname+, etc.,
      291 that are not described in the \LaTeX\ book and not implemented in translators
      292 like latex2html, tth, h�v�a, etc., are recognised by Tralics. This year we
      293 added constructions like \verb=\endlinechar=, \verb=\read=,
      294 \verb=\uppercase=, \verb=\endinput=, which are less used, and a bit tricky. 
      295 Note that a construction like \verb=\ifdim\wd0>0pt\fi= is recognised by the
      296 parser, but there is no way to change the size of the box number zero, so that
      297 the test is always false. 

      290 For more information, see the
      300 \htmladdnormallink{Tralics web page}{http://www-sop.inria.fr/miaou/tralics/}.

      302 \begin{figure}
      303 \includegraphics[width=15cm]{xml-route}
      304 \label{xml-route}
      305 \caption{A slide that explains how the raweb operates. Rectangular boxes contain
      306   tools, diamond-shape boxes are style sheets, and ellipses contain language
      307   names; the name XML is in a double ellipse, it is the central object. The
      308   Perl script that handles the math formulas is not shown here;  it uses tools
      309   borrowed from latex2html.}
      310 \end{figure}

      312 \end{module}

      314 \begin{module}{resultats}{Couplages-Algebrique}
          {Parametrizations  of matrix-valued lossless functions}
      315 \etc
      316 \end{module}

      318 \begin{module}{resultats}{martine2}{The mathematics of Surface Acoustic Wave filters}
      319 \etc
      320 \end{module}

      322 \begin{module}[abc]{contrats}{cnes}{Contract ABCD-EFGH-INRIA}

      324 Contract \no 1 03 E 2145% this number is OK

      326 In the framework of a contract that links  ABCD, EFGH and Inria, 
      327 whose objective is \etc the work of Inria has been
      328 \begin{itemize}
      329 \item \etc see module \ref{filtrescnes},
      330 \item \etc  (see module  \moduleref{MIAOU}{resultats}{Couplages-Algebrique}),
      331 \item modeling and \etc, see module \ref{filtrescnes}.
      332 \end{itemize}
      333 In this contract, we promised version 1 of our software to both partners.
      334 This contract has been renewed in 2003.
      335 \end{module}


      338 \begin{module}{contrats}{aspi-c}{Contract Company Somename (Cannes)}

      340 Contract \no 1 01 E 0736.

      342 This contract started in 2001, for three years. 
      343 The objective is \etc
      344 \end{module}

      346 \begin{module}{contrats}{c-marcoussis}{Contract OtherName}

      348 Contract \no 1 02 E 0327.
      349 This was a one year contract, that ended formally in February, 2003.
      350 \begin{description}
      351 \item[Subject.] Objective was \etc
      352 \item[Outcome.] We have contributed to \etc
      353 \end{description}
      354 \end{module}




      359 \begin{module}{resultats}{nat}{Scientific Committees}

      361 L. Baratchart is member of the editorial board of \textit{Computational
      362 Methods in Function Theory}.

      364 \end{module}

      366 \begin{module}{international}{nationale}{National Actions}

      368 Together with project-teams Caiman and Odyss�e
      369 (INRIA-Sophia Antipolis, ENPC), the University of Nice (J.A. Dieudonn� lab.), 
      370 CEA, CNRS-LENA (Paris), and a few French hospitals, we are part of the
      371 national action \textbf{ACI Masse de donn�es �~OBS-CERV~�}, 2003-2006 (inverse
      372 problems, EEG).

      374 The \textbf{region PACA} (Provence Alpes C�te d'Azur) is partially supporting
      375 the post-doctaral stay of Per Enquist until May, 2004. We also obtained a (modest) grant from
      376 the region for exchanges with SISSA Trieste (Italy), 2003-2004.

      378 \end{module}

      380 \begin{module}{international}{cee}{Actions  Funded by the EC}
      381 The Team \etc
      382 The Team is member of the \textbf{TMR network}
      383 \emph{European Research Network on System Identification} (ERNSI), see
      384 \htmladdnormallink{\url{http://www.cwi.nl/~schuppen/ernsi/ernsihp.html}}
            {http://www.cwi.nl/~schuppen/ernsi/ernsihp.html}.
      385 This formally ended in February. A new proposal of a Research Training Network
      386 (RTN) has been submitted to the EC.

      388 The team obtained a \textbf{Marie Curie EIF} (Intra European Fellowship)
      389 FP6-2002-Mobility-5-502062, for 24 months (2003-2005). This finances Mario
      390 Sigalotti's post-doc.

      392 The Team is a member of the  \textbf{Marie Curie multi-partner training site}
      393 \emph{Control Training Site}, number HPMT-CT-2001-00278, 2001-2005. See
      394 \htmladdnormallink{\url{http://www.supelec.fr/lss/CTS/}}{http://www.supelec.fr/lss/CTS/}.

      396 The project is member of Working Group Control and System Theory
      397 of the \textbf{ERCIM} consortium, see
      398 \htmladdnormallink{\url{http://www.ladseb.pd.cnr.it/control/ercim/control.html}}
               {http://www.ladseb.pd.cnr.it/control/ercim/control.html}.
      399 \end{module}

      401 \begin{module}{international}{monde}{Extra-european International Actions}
      402 \textbf{NATO CLG} (Collaborative Linkage Grant), PST.CLG.979703, 
      403 �~Constructive approximation and inverse diffusion problems~�, with
      404 Vanderbilt Univ. (Nashville, USA) et le LAMSIN-ENIT (Tunis, Tu.), 2003-2005.
      405 \end{module}

      407 \begin{module}{international}{accueil}{Exterior research visitors}
      408 \iffalse
      409 Ceci est un test de moduleref:
      410 compo\moduleref{MIAOU}{composition}{}
      411 presen\moduleref{MIAOU}{presentation}{}
      412 fonde\moduleref{MIAOU}{fondements}{}
      413 dom\moduleref{MIAOU}{domaine}{}
      414 logici\moduleref{MIAOU}{logiciels}{}
      415 resu \moduleref{MIAOU}{resultats}{}
      416 resu \moduleref{MIAOU}{contrats}{}
      417 resu \moduleref{MIAOU}{international}{}
      418 resu \moduleref{MIAOU}{diffusion}{}
      419 logi-tra\moduleref{MIAOU}{logiciels}{tralics}
      420 \fi
      421 1=\ref{crit}, 2=\ref{xml-route}, 3=\moduleref{MIAOU}{fondements}{} 
         4=\moduleref{MIAOU}{fondements}{identif} 5=\ref{filtrescnes}

      423 In addition to the ``Scientific advisors'' and to the ``Visiting scientists''
      424 listed in section \moduleref{MIAOU}{composition}{}, 
      425 the following scientists visited us in 2003. 
      426 \begin{itemize}
      427 \item Mohamed Jaoua (Lamsin-ENIT, Tunis).
      428 \item Herbert Stahl (TU Berlin).
      429 \item \etc
      430 \end{itemize}
      431 \end{module}

      433 \begin{module}{diffusion}{dif-ens}{Teaching}

      435 \begin{description}
      436 \item [Courses] \ 
      437   \begin{itemize}
      438   \item D. Avanessoff \etc
      439   \item L. Baratchart, \etc
      440   \item J. Leblond \etc
      441   \end{itemize}
        
      443 \item [Trainees] \ 
      444   \begin{itemize}
      445   \item Antoine Chaillet, \etc
      446   \end{itemize}

      448 \item[Ph.D. Students] \ 
      449   \begin{itemize}
      450   \item David Avanessoff, �~Lin�arisation \etc~� 
      451    (dynamic linearization \etc)
      452   \item Fehmi Ben Hassen, <<~Localisation \etc~>>, 
      453   \item Alex Bombrun, \etc
      454 \end{itemize}
      455 \item[Ph.D. thesis defended] \ 
      456 \begin{itemize}
      457 \item Reinhold K�stner, \etc
      458 \end{itemize}
      459 \end{description}

      461 L. Baratchart was (president|rapporteur|examinateur)\footnote{Rayer les
      462   mentions inutiles}
      463  of the Thesis  of X and Y
      464 and Z\footnote{Remplacer les lettres par des noms}.

      466 \end{module}

      468 \begin{module}{diffusion}{dif-anim}{Community service}

      470 L. Baratchart is a member of the  ``bureau'' of the CP
      471 (Comit� des Projets) of INRIA-Sophia Antipolis.
      472 \end{module}

      474 \begin{module}{diffusion}{dif-conf}{Conferences and workshops}
      475 \begin{glossaire}\glo{A}{B\par C}\glo{A1}{B1\par C1}\end{glossaire}

      477 Talks, courses, sessions, software demonstrations at the
      478 CNRS-INRIA summer school ``Harmonic analysis and rational approximation: their
      479 r\^oles in signals, control and dynamical systems theory'',
      480 Porquerolles, september. 
      481 \htmladdnormallink{\url{http://www-sop.inria.fr/miaou/anap03/index.en.html}}
      482 {http://www-sop.inria.fr/miaou/anap03/index.en.html}

      484 J. Grimm gave a talk about Tralics at Eurotex 2003 (Brest)
      485 \end{module}


      488 \loadbiblio
      489 \end{document}

Example of bibtex file miaou2003.bib
====================================

.. container:: ltx-source

   ::

      @InProceedings{tralics-eurotex,
        author =   {Jos� Grimm},
        title =    {Tralics, a {\LaTeX} to XML Translator},
        booktitle =    {Proceedings of Eurotex},
        year =     2003
      }


      @InProceedings{seyfertIMS2003,
         author={F. Seyfert and J.-P. Marmorat and L. Baratchart 
             and S. Bila and J. Sombrin},
         title={Extraction of Coupling Parameters For Microwave Filters: 
           Determination of a Stable Rational Model from Scattering Data},
         journal={Proceedings of the International Microwave Symposium, 
             Philadelphia},
         year={2003}
      }



      @Misc{brevet,
        author =   {{European patent No. 03292257.7-}},
        note =     {Title: ``wavelength converter''. 
            Applicant/proprietor: Alcatel. Inventors: B. Lavigne, O. Leclerc, 
            J.-P. Moncelet, A. Bombrun, F. Seyfert, J.-B. Pomet},
        month =    sep,
        year =     2003,
        howpublished = {European patent office}
      }

      @PhdThesis{TheseReinhold,
        author =   {K�stner, Reinhold},
        title =    {Asymptotic Zero Distribution of Orthogonal 
            Polynomials with respect to
            Complex Measures having Argument of Bounded Variation},
        school =   {Universit� de Nice},
        year =     2003,
        month =    apr
      }

      @Article{blpprep,
        author =     {L. Baratchart and J. Grimm and J. Leblond and
                        J. R. Partington},
        title =      {Approximation and interpolation in $H^2$: Toeplitz
                        operators, recovery problems and error bounds},
        journal =    {Integral Equations and Operator Theory},
       year =        2003,
        volume =     45,
      pages={269--299}
      }

      @TechReport{Avan-Bar-Pom03rr,
        author =   {Avanessoff, D. and Baratchart, L. and Pomet, J.-B.},
        title =    {Sur l'int�grabilit� (tr�s) formelle d'une partie des
                        �quations de la platitude des syst�mes de contr�le},
        institution =  {INRIA},
        year =     2003,
        number =   5045,
        type =     {Rapport de recherche},
        month =    dec,
        url =      {http://www.inria.fr/rrrt/rr-5045.html}
      }

      @TechReport{Bara-Chy-Pom03,
        author =   {Baratchart, Laurent and Chyba, Monique and Pomet,
                        Jean-Baptiste},
        title =    {On the Grobman-Hartman theorem for control systems},
        institution =  {INRIA},
        year =     2003,
        type =     {Rapport de recherche},
        number =   5040,
        month =    dec,
        note={submitted to J. of differential equations},
        url =      {\rrrt{rr-5040}}
      }


      Bibtex standard entry types
      Tralics complains if the year is not 2003. 
      The note field is always optional
      An URL field is always accepted.

      @Article{std1,
        author =   {Mittelbach, Frank and Michel Goossens},
        title =    {An article from a journal or magazine},
        journal =      {Journal},
        year =     {2003},
        OPTkey =   {},
        volume =   {opt-volume},
        number =   {opt-number},
        pages =    {opt-pages},
        month =    {opt-month},
        note =     {The note},
      }

      @Book{std2,
        author =   {Mittelbach, Frank and Michel Goossens},
        ALTeditor =    {Give author or editor},
        title =    {A book with an explicit publisher},
        publisher =    {The Publisher},
        year =     {2003},
        volume =   {opt-volume},
        OPTnumber =    {volume or number},
        series =   {opt-series},
        address =      {opt-address},
        edition =      {opt-edition},
        month =    {opt-month},
        note =     {The note},
      }

      @Booklet{std3,
        title =    {A work that is printed and bound, but without a named
        publisher or sponsoring institution},
        author =   {Optional Author},
        howpublished = {opt-howpublished},
        address =      {Address of Publisher},
        month =    {opt-month},
        year =     {2003},
        note =     {The note},
      }

      @InBook{std4,
        ALTauthor =    {Give author or editor},
        editor =   {Mittelbach, Frank and Michel Goossens},
        title =    {A part of a book, e.g. a chapter, section,  or whatever
         and/or a range of pages},
        chapter =      {4321},
        publisher =    {A Publisher},
        year =     {2003},
        volume =   {opt-volume},
        OPTnumber =    {volume or number},
        series =   {opt-series},
        type =     {opt-type},
        address =      {opt-address},
        edition =      {opt-edition},
        month =    {opt-month},
        pages =    {123--125},
        note =     {The note},
      }

      @InCollection{std5,
        author =   {Mittelbach, Frank and Michel Goossens},
        title =    {A part of a book having its own title},
        booktitle =    {The title of the book},
        pages =    {opt-pages},
        publisher =    {Publisher of the paper},
        year =     {2003},
        editor =   {Optional Editor and His Family},
        volume =   {opt-volume},
        OPTnumber =    {volume or number},
        series =   {opt-series},
        type =     {opt-type},
        chapter =      {opt-chapter},
        address =      {Optional Address},
        edition =      {opt-edition},
        month =    {opt-month},
        note =     {The note},
      }

      @InProceedings{std6,
        author =   {Mittelbach, Frank and Michel Goossens},
        title =    {An article in a conference proceedings},
        booktitle =    {Title of the proceedings},
        pages =    {opt-pages},
        year =     {2003},
        editor =   {One Editor and His Family},
        volume =   {opt-volume},
        OPTnumber =    {volume or number},
        series =   {opt-series},
        address =      {Optional Address},
        month =    {opt-month},
        organization = {Optional Organization of the Conference},
        publisher =    {Optional Publisher},
        note =     {The note},
      }

      @Manual{std7,
        title =    {Technical documentation},
        author =   {Optional Author},
        organization = {Optional Organization},
        address =      {Optional Address},
        edition =      {opt-edition},
        month =    {opt-month},
        year =     {2003},
        note =     {The Note},
      }


      @MastersThesis{std8,
        author =   {Mittelbach, Frank and Michel Goossens},
        title =    {A master's thesis},
        school =   {School of the thesis},
        year =     {2003},
        type =     {Optional Type},
        address =      {Optional Address},
        month =    {opt-month},
        note =     {The note},
      }

      @Misc{std9,
        author =   {Optional Author},
        title =    {Use this when nothing else fits.
        {A} warning will be issued if all optional fields are empty
        (i.e. the entire field is empty)},
        howpublished = {opt-howpublished},
        month =    {opt-month},
        year =     {2003},
        note =     {The note},
      }


      @PhdThesis{std10,
        author =   {Mittelbach, Frank},
        title =    {A {Ph.D.} thesis},
        school =   {School},
        year =     {2003},
        type =     {optional type},
        address =      {Optional Address},
        month =    {opt-month},
        note =     {The note},
      }


      @Proceedings{std11,
        title =    {Conference proceedings},
        year =     {2003},
        editor =   {Optional Editor},
        volume =   {opt-volume},
        OPTnumber =    {volume or number},
        series =   {optional series},
        address =      {Optional Address},
        month =    {opt-month},
        organization = {Optional Organization},
        publisher =    {Optional Publisher},
        note =     {The note},
      }

      @TechReport{std12,
        author =   {Mittelbach, Frank and Michel Goossens},
        title =    {A report published by a school or other institution,
            usually numbered within a series},
        institution =  {The institution},
        year =     {2003},
        type =     {optional-type},
        number =   {optional-number},
        address =      {Optional Address},
        month =    {opt-month},
        note =     {The note},
      }

      @Unpublished{std13,
        author =   {Mittelbach, Frank and Michel Goossens},
        title =    {A document having an author and title, but not formally published},
        note =     {The note},
        month =    {opt-month},
        year =     {2003},
      }

Example of bibtex file miaou_foot2003.bib
=========================================

.. container:: ltx-source

   ::

      @Article{lswprep,
        author =       {J. Leblond and E.B. Saff and F. Wielonsky},
        title =        {Weighted {$H_2$} rational approximation and consistency
                        properties},
        journal =      {Numerische Mathematik},
        volume =   90,
        number =   3,
        pages =    {521-554},
      xxurl= {http://dx.doi.org/10.1007/s002110100281},
      doi={10.1007/s002110100281},
      year =       2002
      }


      @InProceedings{O-CDC,
        author =   {Marmorat, Jean-Paul and Olivi, Martine and Hanzon, B. and Peeters, R},
        title =    {Matrix rational $H^2$-approximation: a state-space approach using Schur
      parameters},
        booktitle =    {41st IEEE Conf. on Decision and Control},
        year =     2002,
        address =  {Las Vegas (USA)},
        month =    dec,
        doi="10.1137/S089547980139371X"
      }

      @InProceedings{PHO-MTNS,
        author =   {Peeters, R and Hanzon, B. and Olivi, Martine},
        title =    {On a recursive state-space method for discrete-time $H^2$-approximation},
        booktitle =    {MTNS 2002},
        year =     2002,
        address =  {Notre-Dame (USA)},
        month =    aug,
        doi = "10.1137/S0895479899359539",
      }


      @article{partII,
        author =   {L. Baratchart and J. Leblond},
        title =    {Hardy approximation to {$L^p$} functions on subsets of the
                        circle with $1 \leq p < \infty$},
        journal =  {Constructive Approximation},
        year =     1998,
        volume =   14,
        pages =    {41-56}
      }

Example of bibtex file miaou_refer2003.bib
==========================================

.. container:: ltx-source

   ::

      @Article{BO1,
        author =   {L. Baratchart and M. Olivi},
        title =    {Critical points and error rank in best $H^2$ matrix rational
                        approximation of fixed McMillan degree},
        journal =  {Constructive Approximation},
        volume =   14,
        year =     1998,
        pages =    {273-300}
      }

      @Article{lo,
        author =   {J. Leblond and M. Olivi},
        title =    {Weighted {$H^2$} approximation of transfer functions},
        journal =  "Math. of Control, Signals \& Systems (MCSS)",
        year =     1998,
        volume =   11,
        pages =    {28-39},
      }

      @article{fo,
        author =   {P. Fulcheri and M. Olivi},
        journal =  "SIAM J. on Control \& Optim.",
        title =    {Matrix rational $H^2$-approximation:~a gradient algorithm
                        based on Schur analysis},
        volume =   36,
        year =     1998,
        pages =    {2103-2127}
      }

      @TechReport{RTCNES,
        author =   {L. Baratchart and J. Grimm and J. Leblond and M. Olivi and
                        F. Seyfert and F. Wielonsky},
        title =    {Identification d'un filtre hyperfr\'equence par
                        approximation dans le domaine complexe},
        institution =  {Inria},
        year =     1998,
        type =         {Rapport technique},
        number =   {RT-219},
      url= {http://www.inria.fr/rrrt/rt-0219.html}
      }
      @article{papiercarthage,
        author =   {L. Baratchart and J. Leblond and F. Mandr�a and E.B. Saff},
        title =    {How can meromorphic approximation help to solve some 2D
                        inverse problems for the Laplacian?},
        journal =  {Inverse Problems},
        year =     1999,
        volume =   15,
        pages =    {79--90}
      }

      @article{bco,
        author =   {L. Baratchart and M. Cardelli and M. Olivi},
        title =    {Identification and rational {$L^2$} approximation: a
                        gradient algorithm},
        journal =  {Automatica},
        publisher =    {Pergamon Press},
        volume =   27,
        year =     1991,
        pages =    {413-418}
      }

      @Article{BW,
        author =   {L. Baratchart and F. Wielonsky},
        title =    {Rational approximation in the real {H}ardy space {$H_{2}$}
                        and {S}tieltjes integrals: a uniqueness theorem},
        journal =  {Constructive Approximation},
        VOLUME =   9,
        YEAR =     1993,
        PAGES =    {1-21}
      }

      @Article{BSW,
        author =   "L. Baratchart and E. B. Saff and F. Wielonsky",
        title =    "A criterion for uniqueness of a critical point in {$H^2$}
                        rational approximation",
        journal =  "Journal d'Analyse",
        year =     1996,
        volume =   70,
        pages =    "225-266"
      }

      @ARTICLE{Pome92scl,
        AUTHOR =   {J.-B. Pomet},
        JOURNAL =  "Syst. \& Control Lett.",
        PAGES =    {147-158},
        TITLE =    {Explicit Design of Time-Varying Stabilizing Control Laws for
                        a Class of Controllable Systems without Drift},
        VOLUME =   {18},
        YEAR =     {1992}
      }

      @ARTICLE{Pome97cocv,
        AUTHOR =   {Jean-Baptiste Pomet},
        JOURNAL =  "Control, Optimization, and the Calculus of Variations
                        (COCV)",
        MONTH =    jun,
        url =      {http://www.edpsciences.com/cocv/},
        PAGES =    {151-230},
        TITLE =    {On Dynamic Feedback Linearization of Four-dimensional Affine
                        Control Systems with Two Inputs},
        VOLUME =   {2},
        YEAR =     {1997}
      }

XML generated by extractmath
============================

.. container:: ltx-source

   ::

      <?xml version='1.0' encoding='iso-8859-1'?>
      <!DOCTYPE fo:root SYSTEM '/user/grimm/home/cvs/raweb//dtd/raaux.dtd'>
      <fo:root xmlns:fo='http://www.w3.org/1999/XSL/Format'
          xmlns:fotex='http://www.tug.org/fotex'
          xmlns:m='http://www.w3.org/1998/Math/MathML'>
      <fo:block>
      <formula id='1'><math xmlns='http://www.w3.org/1998/Math/MathML'>
       <mrow><mo>&Verbar;</mo><mi>g</mi><mo> -</mo>
       <mi>&psi;</mi><msub><mo>&Verbar;</mo> <mrow>
       <msup><mi>L</mi> <mi>p</mi> </msup><mrow>
       <mo>(</mo><mi>T</mi><mo>&setminus;</mo><mi>K
       </mi><mo>)</mo></mrow></mrow> </msub><mo>&le;</mo>
       <mi>M</mi></mrow></math></formula>

      <formula id='2'><math xmlns='http://www.w3.org/1998/Math/MathML'><msub>
       <mfenced open='&Verbar;' close='&Verbar;'><mi>f</mi><mo>-</mo>
       <mfrac><msub><mi>p</mi> <mi>m</mi> </msub> <msub>
       <mi>q</mi> <mi>n</mi> </msub></mfrac></mfenced> 
       <mrow><msup><mi>L</mi> <mn>2</mn> </msup>
       <mrow><mo>(</mo><mi>d</mi><mi>&mu;</mi><mo>)</mo></mrow></mrow> </msub></math></formula>

      <formula id='3'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <mo>&Verbar;</mo><mi>g</mi><msubsup><mo>&Verbar;</mo>
        <mrow><msup><mi>L</mi> <mn>2</mn> </msup><mrow>
       <mo>(</mo><mi>d</mi><mi>&mu;</mi><mo>)</mo>
       </mrow></mrow> <mn>2</mn> </msubsup><mo>=</mo><mfrac>
       <mn>1</mn> <mrow><mn>2</mn><mi>&pi;</mi></mrow>
       </mfrac><msubsup><mo>&int;</mo> <mrow><mo>-</mo>
       <mi>&pi;</mi></mrow> <mi>&pi;</mi> </msubsup>
       <mrow><mo>|</mo><mi>g</mi><mo>(</mo></mrow>
       <msup><mi>e</mi> <mrow><mi>i</mi><mi>&theta;</mi>
       </mrow> </msup><mrow><mo>)</mo></mrow><msup>
       <mo>|</mo> <mn>2</mn> </msup><mrow><mi>d</mi>
       <mi>&mu;</mi><mo>(</mo><mi>&theta;</mi>
      <mo>)</mo><mo>,</mo></mrow></mrow></math></formula>

      <formula id='4'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <mi>R</mi><mo>=</mo><msup><mfenced open='(' close=')'>
       <mtable><mtr><mtd><mi>L</mi></mtd><mtd><mi>H</mi>
       </mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd>
       <msub><mi>I</mi> <mi>m</mi> </msub></mtd></mtr>
       </mtable></mfenced> <mrow><mo>-</mo><mn>1</mn></mrow> </msup></mrow></math></formula>

      <formula id='5'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
       <mo>&Verbar;</mo><mi>T</mi><msubsup><mo>&Verbar;</mo>
        <mi>&Lambda;</mi> <mn>2</mn> </msubsup><mo>=</mo>
       <mrow><mi mathvariant='bold'>T</mi><mi mathvariant='bold'>r</mi>
       </mrow><mfenced open='&lbrace;' close='&rbrace;'><mfrac><mn>1</mn>
        <mrow><mn>2</mn><mi>&pi;</mi></mrow></mfrac><msubsup>
       <mo>&int;</mo> <mn>0</mn> <mrow><mn>2</mn>
       <mi>&pi;</mi></mrow> </msubsup><mrow><mi>T</mi>
       <mo>(</mo></mrow><msup><mi>e</mi> <mrow><mi>i</mi>
       <mi>&theta;</mi></mrow> </msup><mrow><mo>)</mo>
       <mspace width='0.166667em'/><mi>d</mi><mi>&Lambda;</mi>
       <mo>(</mo><mi>&theta;</mi><mo>)</mo><mspace width='0.166667em'/>
       </mrow><msup><mi>T</mi> <mo>*</mo> </msup><mrow>
       <mo>(</mo></mrow><msup><mi>e</mi> <mrow><mi>i</mi>
       <mi>&theta;</mi></mrow> </msup><mrow><mo>)</mo>
       </mrow></mfenced>
       <mo>,</mo></mrow></math></formula>
      </fo:block>
      </fo:root>

Result of conversion of miaou2003.tex by tralics -ps
====================================================

.. container:: ltx-source

   ::

      \documentclass{raweb}
      \let\xloadbiblio\loadbiblio
      \let\loadbiblio\relax\let\maketitle\relax\usepackage{amsfonts}
      \usepackage{amsmath}

      \def\CC{{\mathbb C}}
      \newcommand{\etc}{etc}
      \def\corresp{manager}


      \begin{document}
      \def\RAprojet{MIAOU}
      \def\RAprojetlow{miaou}
      \def\RAprojetlatex{Miaou}
      \def\RAprojetfull{Math�matiques et Informatique de l'Automatique et de l'Optimisation pour l'Utilisateur}
      \RAstartprojet{num}{1}{\RAprojetlatex}{\RAprojetfull}{Sophia Antipolis --- Futurs}
      \mytableofcontents


      \maketitle
      \nocite{*}
      \loadbiblio
      \def\RAmysection{composition}
      \section{\choseRAsection{1}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{0}{MIAOU}{1}{en-tete}{}
      \RAlabel{MIAOU@composition@en-tete}


      \begin{catperso}{Head of project team}
      \pers{Laurent}{Baratchart}[DR INRIA]
      \end{catperso}

      \begin{catperso}{Vice-head of project team}
      \pers{Juliette}{Leblond}[CR INRIA]
      \end{catperso}

      \begin{catperso}{Administrative assistant}
      \pers{France}{Limouzis}[AI INRIA, partial time in the project]
      \end{catperso}

      \begin{catperso}{Staff member}
      \pers{Jos�}{Grimm}[CR INRIA]
      \end{catperso}

      \begin{catperso}{Ph. D. Students}
      \pers{David}{Avanessoff}[Fellow, INRIA]
      \pers{Alex}{Bombrun}[Since November, 1st]
      \pers{Moncef}{Mahjoub}[Co-advised, ENIT Tunis (in France in February, March, October, November)]
      \end{catperso}
      \def\RAmysection{presentation}
      \section{\choseRAsection{2}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{0}{MIAOU}{2}{presentation}{}
      \RAlabel{MIAOU@presentation@presentation}

      \begin{moreinfo}
      The project was terminated June the 30th, 2003. 
      A proposal for a new project named APICS has been submitted to the steering
      comittee of Inria Sophia Antipolis.
      \end{moreinfo}

      The Team develops effective methods for modelling, identification and control
      of dynamical systems.

      \subsubsection*{Research Themes}
      \begin{itemize}
      \item Meromorphic and rational approximation in the complex domain,
        application to identification of transfer functions  and matrices as well as
        singularity detection for 2-D Laplace operators. Development of 
      %the hyperion
        software for frequency domain identification and synthesis of transfer
        matrices.  
      \item Control and structure of non-linear systems: continuous stabilization,
        non-linear transformations (linearization, classification). 
      \end{itemize}

      \subsubsection*{International and industrial partners}

      \begin{itemize}
      \item Industrial collaborations with Alcatel-Space, \etc
      \item Exchanges with CWI CNR (Italy), \etc
      \item The project is involved in a NATO Collaborative Linkage Grant \etc
      \end{itemize}
      \def\RAmysection{fondements}
      \section{\choseRAsection{3}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{2}{MIAOU}{3}{identif}{Identification and deconvolution}
      \RAlabel{MIAOU@fondements@identif}

      Let us first introduce  the subject of Identification in some generality.

      Abstracting in the form 
      of mathematical equations the behavior of a phenomenon is
      a step called \emph{modeling}. It typically serves two purposes: the first
      is to describe the phenomenon with minimal complexity for some specific 
      purpose,
      the second is to \emph{predict} its outcome. \etc


      \subsubsection{Analytic approximation of incomplete boundary data}
      \label{dida-mero}
      \label{filtrescnes}
      \label{didactique-approx-rat-mat}
      \begin{participants}
      \pers{Laurent}{Baratchart},
      \pers{Jos�}{Grimm},
      \pers{Birgit}{Jacob}[University of Leeds (GB)],
      \pers{Juliette}{Leblond},
      \pers{Jean-Paul}{Marmorat}[CMA, �cole des Mines],
      \pers{Jonathan}{Partington},
      \pers{Fabien}{Seyfert}
      \end{participants}

      \begin{motscle}
      meromorphic approximation, frequency-domain identification,
      extremal problems 
      \end{motscle}

      \etc, so that a prototypical Problem is:

      {\sl ($P$)~~Let $p \geq 1$, $N \geq 0$, $K$ be an arc of the unit circle $T$, 
        $f \in L^p(K)$, $\psi \in L^p(T \setminus K)$ and $M>0$;
        find a function  $g \in H^p + R_N$ such that 
        $\|g - \psi\|_{L^p(T \setminus K)} \leq M$ and such that $g - f$ 
        is of minimal norm in  $L^p(K)$ under this constraint.}

      Problem ($P$) is an extension to the meromorphic case, and to incomplete data,
      of classical analytic extremal problems (obtained
      by setting $K=T$ and $N=0$), that generically go under the name
      \textit{bounded extremal problems}. 
      These have been introduced and intensively studied by the Team, 
      \cite{blpprep} and ~\footcite{partII}. 

      \subsubsection{Scalar rational approximation}
      \label{didactique-approx-rat-scal}
      \begin{participants}
      \pers{Laurent}{Baratchart},
      \pers{Reinhold}{K�stner},
      \pers{Juliette}{Leblond},
      \pers{Martine}{Olivi},
      \pers{Edward}{Saff},
      \pers{Herbert}{Stahl},
      \pers{Franck}{Wielonsky}
      \end{participants}

      \begin{motscle}
      rational approximation, critical point, orthogonal polynomials
      \end{motscle}
      \etc.
      \begin{equation}
      \label{crit}
      \left\|f - \frac{p_m}{q_n} \right\|_{L^2(d \mu)} 
      \end{equation}
      where, by definition, 
      \[
      \|g\|_{L^2(d \mu)}^2=\frac{1}{2\pi} \int_{-\pi}^{\pi}|g(e^{i\theta})|^2
      d\mu(\theta),
      \]

      \etc

      If one introduces now as a new variable the rational matrix $R$ defined by
      \[
      R=\left(\begin{array}{cc}
      L            &  H \\
      0            &   I_m
      \end{array} \right)^{-1}
      \]
      and if $T$ stands for the first block-row, 
      normalizing the variance of the noise to be identity, the maximum likelihood
      estimator  is asymptotically equivalent, when the sample size increases, 
      to the minimization of
      \begin{equation}
      \label{defLL}
      \|T\|_{\Lambda}^2={\bf Tr}\left\{\frac{1}{2\pi}
      \int_{0}^{2\pi}T(e^{i\theta})\,
      d\Lambda(\theta)\,T^*(e^{i\theta})\right\},
      \end{equation}
      where $\Lambda$  is the spectral measure  of the process $(y~u)^t$ 
      (which positive and matrix-valued)
      and where  ${\bf Tr}$ indicates the trace. 

      \subsubsection{Continuous stabilization}
      Stabilization by continuous state feedback \etc

      \paragraph{Periodic stabilisation of non-linear systems.}
      It is known that \etc

      \paragraph{Control Lyapunov functions.}
      Lyapunov functions  are \etc
      \def\RAmysection{domaine}
      \section{\choseRAsection{4}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{1}{MIAOU}{4}{chapeau}{}
      \RAlabel{MIAOU@domaine@chapeau}

      The activity of the team focuses on two bottom lines, namely \etc
      \RAstartmodule{1}{MIAOU}{4}{dom-fissures}{Geometric inverse problems  for the Laplacian}
      \RAlabel{MIAOU@domaine@dom-fissures}

      \begin{participants}
      \pers{Laurent}{Baratchart}
      \end{participants}

      \begin{motscle}   % non destructive
      inverse problem, Laplace equation, non destructive control, tomography
      \end{motscle}

      Localizing cracks, \etc
      \RAstartmodule{1}{MIAOU}{4}{resonn}{Identification and design of resonant systems}
      \RAlabel{MIAOU@domaine@resonn}

      \begin{motscle}
      telecommunications, multiplexing, filtering device, hyperfrequency, surface waves
      \end{motscle}
      \RAstartmodule{1}{MIAOU}{4}{spatial}{Spatial mechanics}
      \RAlabel{MIAOU@domaine@spatial}

      \etc
      \RAstartmodule{2}{MIAOU}{4}{optique}{Non-linear Optics}
      \RAlabel{MIAOU@domaine@optique}

      \etc
      \RAstartmodule{1}{MIAOU}{4}{plat}{Transformations and equivalence of non-linear systems}
      \RAlabel{MIAOU@domaine@plat}


      \begin{participants}
      \pers{Laurent}{Baratchart},
      \pers{Jean-Baptiste}{Pomet},
      \pers{David}{Avanessoff}
      \end{participants}

      \begin{motscle}
      path planning, mobile cybernetics,  identification, {(max,plus) algebra}
      \end{motscle}
      \etc
      \def\RAmysection{logiciels}
      \section{\choseRAsection{5}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{1}{MIAOU}{5}{hyperion}{The hyperion software}
      \RAlabel{MIAOU@logiciels@hyperion}


      \begin{participants}
      \pers{Jos�}{Grimm}[\corresp],
      \pers{Fabien}{Seyfert},
      \pers{Franck}{Wielonsky}
      \end{participants}
      \etc
      \RAstartmodule{1}{MIAOU}{5}{logi-tralics}{The Tralics software}
      \RAlabel{MIAOU@logiciels@logi-tralics}


      \begin{participant}
      \pers{Jos�}{Grimm}[\corresp]
      \end{participant}
      \etc. \nocite{tralics-eurotex}
      \RAstartmodule{1}{MIAOU}{5}{RARL2}{The RARL2 software}
      \RAlabel{MIAOU@logiciels@RARL2}

      \begin{participant}
      \pers{Jean-Paul}{Marmorat},
      \pers{Martine}{Olivi}[\corresp]
      \end{participant}

      RARL2 (R�alisation interne et Approximation Rationnelle L2) is a software for
      rational approximation (see module \ref{didactique-approx-rat-mat}). Its web
      page is
      \htmladdnormallink{\url{http://www-sop.inria.fr/miaou/RARL2/rarl2.html}}
      {http://www-sop.inria.fr/miaou/RARL2/rarl2.html}.
      \RAstartmodule{1}{MIAOU}{5}{RGC}{The RGC software}
      \RAlabel{MIAOU@logiciels@RGC}



      \begin{participants}
      \pers{Fabien}{Seyfert},
      \pers{Jean-Paul}{Marmorat}
      \end{participants}

      The RGC software \etc
      \RAstartmodule{1}{MIAOU}{5}{PRESTO-HF}{PRESTO-HF}
      \RAlabel{MIAOU@logiciels@PRESTO-HF}

      \begin{participant}
      \pers{Fabien}{Seyfert}
      \end{participant}

      PRESTO-HF: a toolbox dedicated to lowpass parameter identification for
      hyperfrequency filters
      \htmladdnormallink{\url{http://www-sop.inria.fr/miaou/Fabien.Seyfert/Presto_web_page/presto_pres.html}}
      {http://www-sop.inria.fr/miaou/Fabien.Seyfert/Presto_web_page/presto_pres.html}
      \etc

      \def\RAmysection{resultats}
      \section{\choseRAsection{6}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{1}{MIAOU}{6}{tralics}{Tralics: a Latex to XML Translator}
      \RAlabel{MIAOU@resultats@tralics}


      The main philosophy of Tralics is to have the same parser as \TeX, but the
      same semantics as \LaTeX. This means that commands like \verb+\chardef+, 
      \verb+\catcode+, \verb+\ifx+, \verb+\expandafter+, \verb+\csname+, etc.,
      that are not described in the \LaTeX\ book and not implemented in translators
      like latex2html, tth, h�v�a, etc., are recognised by Tralics. This year we
      added constructions like \verb=\endlinechar=, \verb=\read=,
      \verb=\uppercase=, \verb=\endinput=, which are less used, and a bit tricky. 
      Note that a construction like \verb=\ifdim\wd0>0pt\fi= is recognised by the
      parser, but there is no way to change the size of the box number zero, so that
      the test is always false. 

      For more information, see the
      \htmladdnormallink{Tralics web page}{http://www-sop.inria.fr/miaou/tralics/}.

      \begin{figure}
      \includegraphics[width=15cm]{xml-route}
      \label{xml-route}
      \caption{A slide that explains how the raweb operates. Rectangular boxes contain
        tools, diamond-shape boxes are style sheets, and ellipses contain language
        names; the name XML is in a double ellipse, it is the central object. The
        Perl script that handles the math formulas is not shown here;  it uses tools
        borrowed from latex2html.}
      \end{figure}

      \RAstartmodule{1}{MIAOU}{6}{Couplages-Algebrique}{Parametrizations  of matrix-valued lossless functions}
      \RAlabel{MIAOU@resultats@Couplages-Algebrique}

      \etc
      \RAstartmodule{1}{MIAOU}{6}{martine2}{The mathematics of Surface Acoustic Wave filters}
      \RAlabel{MIAOU@resultats@martine2}

      \etc
      \RAstartmodule{1}{MIAOU}{6}{nat}{Scientific Committees}
      \RAlabel{MIAOU@resultats@nat}


      L. Baratchart is member of the editorial board of \textit{Computational
      Methods in Function Theory}.

      \def\RAmysection{contrats}
      \section{\choseRAsection{7}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{0}{MIAOU}{7}{cnes}{Contract ABCD-EFGH-INRIA}
      \RAlabel{MIAOU@contrats@cnes}


      Contract \no 1 03 E 2145% this number is OK

      In the framework of a contract that links  ABCD, EFGH and Inria, 
      whose objective is \etc the work of Inria has been
      \begin{itemize}
      \item \etc see module \ref{filtrescnes},
      \item \etc  (see module  \moduleref{MIAOU}{resultats}{Couplages-Algebrique}),
      \item modeling and \etc, see module \ref{filtrescnes}.
      \end{itemize}
      In this contract, we promised version 1 of our software to both partners.
      This contract has been renewed in 2003.
      \RAstartmodule{0}{MIAOU}{7}{aspi-c}{Contract Company Somename (Cannes)}
      \RAlabel{MIAOU@contrats@aspi-c}


      Contract \no 1 01 E 0736.

      This contract started in 2001, for three years. 
      The objective is \etc
      \RAstartmodule{0}{MIAOU}{7}{c-marcoussis}{Contract OtherName}
      \RAlabel{MIAOU@contrats@c-marcoussis}


      Contract \no 1 02 E 0327.
      This was a one year contract, that ended formally in February, 2003.
      \begin{description}
      \item[Subject.] Objective was \etc
      \item[Outcome.] We have contributed to \etc
      \end{description}
      \def\RAmysection{international}
      \section{\choseRAsection{8}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{0}{MIAOU}{8}{nationale}{National Actions}
      \RAlabel{MIAOU@international@nationale}


      Together with project-teams Caiman and Odyss�e
      (INRIA-Sophia Antipolis, ENPC), the University of Nice (J.A. Dieudonn� lab.), 
      CEA, CNRS-LENA (Paris), and a few French hospitals, we are part of the
      national action \textbf{ACI Masse de donn�es �~OBS-CERV~�}, 2003-2006 (inverse
      problems, EEG).

      The \textbf{region PACA} (Provence Alpes C�te d'Azur) is partially supporting
      the post-doctaral stay of Per Enquist until May, 2004. We also obtained a (modest) grant from
      the region for exchanges with SISSA Trieste (Italy), 2003-2004.

      \RAstartmodule{0}{MIAOU}{8}{cee}{Actions  Funded by the EC}
      \RAlabel{MIAOU@international@cee}

      The Team \etc
      The Team is member of the \textbf{TMR network}
      \emph{European Research Network on System Identification} (ERNSI), see
      \htmladdnormallink{\url{http://www.cwi.nl/~schuppen/ernsi/ernsihp.html}}{http://www.cwi.nl/~schuppen/ernsi/ernsihp.html}.
      This formally ended in February. A new proposal of a Research Training Network
      (RTN) has been submitted to the EC.

      The team obtained a \textbf{Marie Curie EIF} (Intra European Fellowship)
      FP6-2002-Mobility-5-502062, for 24 months (2003-2005). This finances Mario
      Sigalotti's post-doc.

      The Team is a member of the  \textbf{Marie Curie multi-partner training site}
      \emph{Control Training Site}, number HPMT-CT-2001-00278, 2001-2005. See
      \htmladdnormallink{\url{http://www.supelec.fr/lss/CTS/}}{http://www.supelec.fr/lss/CTS/}.

      The project is member of Working Group Control and System Theory
      of the \textbf{ERCIM} consortium, see
      \htmladdnormallink{\url{http://www.ladseb.pd.cnr.it/control/ercim/control.html}}{http://www.ladseb.pd.cnr.it/control/ercim/control.html}.
      \RAstartmodule{0}{MIAOU}{8}{monde}{Extra-european International Actions}
      \RAlabel{MIAOU@international@monde}

      \textbf{NATO CLG} (Collaborative Linkage Grant), PST.CLG.979703, 
      �~Constructive approximation and inverse diffusion problems~�, with
      Vanderbilt Univ. (Nashville, USA) et le LAMSIN-ENIT (Tunis, Tu.), 2003-2005.
      \RAstartmodule{0}{MIAOU}{8}{accueil}{Exterior research visitors}
      \RAlabel{MIAOU@international@accueil}

      \iffalse
      Ceci est un test de moduleref:
      compo\moduleref{MIAOU}{composition}{}
      presen\moduleref{MIAOU}{presentation}{}
      fonde\moduleref{MIAOU}{fondements}{}
      dom\moduleref{MIAOU}{domaine}{}
      logici\moduleref{MIAOU}{logiciels}{}
      resu \moduleref{MIAOU}{resultats}{}
      resu \moduleref{MIAOU}{contrats}{}
      resu \moduleref{MIAOU}{international}{}
      resu \moduleref{MIAOU}{diffusion}{}
      logi-tra\moduleref{MIAOU}{logiciels}{tralics}
      \fi
      1=\ref{crit}, 2=\ref{xml-route}, 3=\moduleref{MIAOU}{fondements}{} 4=\moduleref{MIAOU}{fondements}{identif} 5=\ref{filtrescnes}

      In addition to the ``Scientific advisors'' and to the ``Visiting scientists''
      listed in section \moduleref{MIAOU}{composition}{}, 
      the following scientists visited us in 2003. 
      \begin{itemize}
      \item Mohamed Jaoua (Lamsin-ENIT, Tunis).
      \item Herbert Stahl (TU Berlin).
      \item \etc
      \end{itemize}
      \def\RAmysection{diffusion}
      \section{\choseRAsection{9}}
      \RAlabel{MIAOU@\RAmysection@}

      \RAstartmodule{0}{MIAOU}{9}{dif-ens}{Teaching}
      \RAlabel{MIAOU@diffusion@dif-ens}


      \begin{description}
      \item [Courses] \ 
        \begin{itemize}
        \item D. Avanessoff \etc
        \item L. Baratchart, \etc
        \item J. Leblond \etc
        \end{itemize}
        
      \item [Trainees] \ 
        \begin{itemize}
        \item Antoine Chaillet, \etc
        \end{itemize}

      \item[Ph.D. Students] \ 
        \begin{itemize}
        \item David Avanessoff, �~Lin�arisation \etc~� 
         (dynamic linearization \etc)
        \item Fehmi Ben Hassen, <<~Localisation \etc~>>, 
        \item Alex Bombrun, \etc
      \end{itemize}
      \item[Ph.D. thesis defended] \ 
      \begin{itemize}
      \item Reinhold K�stner, \etc
      \end{itemize}
      \end{description}

      L. Baratchart was (president|rapporteur|examinateur)\footnote{Rayer les
        mentions inutiles}
       of the Thesis  of X and Y
      and Z\footnote{Remplacer les lettres par des noms}.

      \RAstartmodule{0}{MIAOU}{9}{dif-anim}{Community service}
      \RAlabel{MIAOU@diffusion@dif-anim}


      L. Baratchart is a member of the  ``bureau'' of the CP
      (Comit� des Projets) of INRIA-Sophia Antipolis.
      \RAstartmodule{0}{MIAOU}{9}{dif-conf}{Conferences and workshops}
      \RAlabel{MIAOU@diffusion@dif-conf}

      \begin{glossaire}\glo{A}{B\par C}\glo{A1}{B1\par C1}\end{glossaire}

      Talks, courses, sessions, software demonstrations at the
      CNRS-INRIA summer school ``Harmonic analysis and rational approximation: their
      r\^oles in signals, control and dynamical systems theory'',
      Porquerolles, september. 
      \htmladdnormallink{\url{http://www-sop.inria.fr/miaou/anap03/index.en.html}}
      {http://www-sop.inria.fr/miaou/anap03/index.en.html}

      J. Grimm gave a talk about Tralics at Eurotex 2003 (Brest)
      \section{\choseRAsection{10}}
      \xloadbiblio
      \bibliography{miaou2003}
      \end{document}

----

docs/raweb_cfg.rst
------------------

Parts of the raweb-cfg file
===========================

Ampersand hacks
~~~~~~~~~~~~~~~

The intend of this code is for insertion of & in an URL. Only the x260A
line is used.

.. container:: ltx-source

   ::

      \expandafter\def\csname grimmentitiesx26\endcsname{\string&}
      \expandafter\def\csname grimmentities38\endcsname{\string&}
      \expandafter\def\csname grimmentities9738\endcsname{\string&}
      \expandafter\def\csname grimmentitiesx260A\endcsname{\string&}
      \expandafter\def\csname grimmentities amp\endcsname{\string&}

Commands added for efficiency.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\utfeightaz@jg@int{\noexpand\utfeightaz\noexpand}
      \def\utfeightb@jg@int#1#2{\noexpand\utfeightb#1\string#2}
      \def\utfeightc@jg@int#1#2#3{\noexpand\utfeightc#1\string#2\string#3}
      \def\utfeightd@jg@int#1#2#3#4{\noexpand\utfeightd#1\string#2\string#3\string#4}
      \def\utfeightb@jg@#1#2{#1\string#2}
      \def\utfeightc@jg@#1#2#3{#1\string#2\string#3}
      \def\utfeightd@jg@#1#2#3#4{#1\string#2\string#3\string#4}
      \def\utfeightaz@jg@int{\noexpand\utfeightaz\noexpand}
      \def\utfeightb@jg@int#1#2{\noexpand\utfeightb#1\string#2}
      \def\utfeightc@jg@int#1#2#3{\noexpand\utfeightc#1\string#2\string#3}
      \def\utfeightd@jg@int#1#2#3#4{\noexpand\utfeightd#1\string#2\string#3\string#4}

Commands modified for efficiency.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

We use ``\let\foo\bar`` instead of ``\def\foo{...}``, because it is more
efficient.

.. container:: ltx-source

   ::

      \def\utfeight@protect@chars{%
        \let\utfeightax\string
        \let\utfeightay\string
        \let\utfeightaz\string
        \let\utfeightb\utfeightb@jg@
        \let\utfeightc\utfeightc@jg@
        \let\utfeightd\utfeightd@jg@}

We are here in a group where ampersand and less-than are active chars.

.. container:: ltx-source

   ::

      \gdef\utfeight@protect@internal{%
        \let\utfeightax\noexpand
        \let\utfeightay\noexpand
        \let\utfeightaz\utfeightaz@jg@int
        \let<\relax\let&\relax
        \let\utfeightb\utfeightb@jg@int
        \let\utfeightc\utfeightc@jg@int
        \let\utfeightd\utfeightd@jg@int}

String declarations (of the form jg@xxx)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \XMLstring\jg@lt<>&lt;</>
      \XMLstring\jg@gt<>&gt;</>
      \XMLstring\jg@accgrave<>`</>
      \XMLstring\jg@accdddot<>&#x20DB;</>
      \XMLstring\jg@accddddot<>&#x20DC;</>
      \XMLstring\jg@lbra<>&#x2329;</>
      \XMLstring\jg@rbra<>&#x232A;</>
      \XMLstring\jg@verbar<>&#x2016;</>
      \XMLstring\jg@Verbar<>&#8214;</>
      \XMLstring\jg@lfloor<>&#x230A;</>
      \XMLstring\jg@rfloor<>&#x230B;</>
      \XMLstring\jg@lceil<>&#x2308;</>
      \XMLstring\jg@rceil<>&#x2309;</>
      \XMLstring\jg@lmoustache<>&#x23B0;</>
      \XMLstring\jg@rmoustache<>&#x23B1;</>
      \XMLstring\jg@lgroup<>&#x3014;</>
      \XMLstring\jg@rgroup<>&#x3015;</>
      \XMLstring\jg@uparrow<>&#x2191;</>
      \XMLstring\jg@Uparrow<>&#x21D1;</>
      \XMLstring\jg@downarrow<>&#x2193;</>
      \XMLstring\jg@Downarrow<>&#x21D3;</>
      \XMLstring\jg@updownarrow<>&#x2195;</>
      \XMLstring\jg@Updownarrow<>&#x21D5;</>
      \XMLstring\jg@OverBrace<>&#xFE37;</>
      \XMLstring\jg@UnderBrace<>&#xFE38;</>
      \XMLstring\jg@OverBar<>&#xAF;</>
      \XMLstring\jg@UnderBAr<>&#x332;</>

String declarations (of the form att@xxx)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \XMLstring\att@true<>true</>
      \XMLstring\att@false<>false</>
      \XMLstring\att@mtd@left<>left</>
      \XMLstring\att@mtd@right<>right</>
      \XMLstring\att@mtd@center<>center</>
      \XMLstring\att@none<>none</>
      \XMLstring\att@dzero<>0</>
      \XMLstring\att@done<>1</>
      \XMLstring\att@dtwo<>2</>
      \XMLstring\att@l<>l</>
      \XMLstring\att@r<>r</>
      \XMLstring\att@t<>t</>
      \XMLstring\att@b<>b</>
      \XMLstring\att@lt<>lt</>
      \XMLstring\att@lb<>lb</>
      \XMLstring\att@rt<>rt</>
      \XMLstring\att@rb<>rb</>
      \XMLstring\att@tl<>tl</>
      \XMLstring\att@bl<>bl</>
      \XMLstring\att@tr<>tr</>
      \XMLstring\att@br<>br</>
      \XMLstring\att@mathml@bold<>bold</>
      \XMLstring\att@mathml@sansserif<>sans-serif</>
      \XMLstring\att@mathml@tt<>monospace</>
      \XMLstring\att@mathml@rm<>rm</>
      \XMLstring\att@BLOCK<>block</>
      \XMLstring\att@PREFIX<>prefix</>
      \XMLstring\att@EQUATION<>equation</>

Hacking function for accent-over
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\jg@bindings{%
         \def\texttildelow {\global\let\jg@cur@acc\jg@tilde@acc}%
      %   \def\textasciimacron {\global\let\jg@cur@acc\jg@cur@accB}%
         \def\textasciicaron {\global\let\jg@cur@acc\jg@check@acc}%
         \def\u{\global\let\jg@cur@acc\jg@breve@acc}%
         \def\hat##1{\global\let\jg@cur@acc\jg@hat@acc}%
         \def\dot##1{\global\let\jg@cur@acc\jg@dot@acc}%
         \def\mathring##1{\global\let\jg@cur@acc\jg@ring@acc}%
         \def\textasciidieresis{\global\let\jg@cur@acc\jg@ddot@acc}%
         \let\JGG@orig@rarrow\rightarrow
         \let\JGG@orig@larrow\leftarrow
         \def\rightarrow{\global\let\jg@cur@acc\jg@overRarrow@acc}%
         \def\leftarrow{\global\let\jg@cur@acc\jg@overLarrow@acc}%
         \def\textoverbrace{\global\let\jg@cur@acc\overbrace}
         \def\textunderbrace{\global\let\jg@cur@acc\underbrace}
         \def\textasciiacute{\global\let\jg@cur@acc\acute}
         \def\textasciimacron{\global\let\jg@cur@acc\overline}
         \def\ring{\global\let\jg@cur@acc\mathring}
      }

Hacking function for accent-under
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\jg@ubindings{%
      \let\JGG@orig@rarrow\rightarrow
      \let\JGG@orig@larrow\leftarrow
         \def\texttildelow {\global\let\jg@cur@acc\jg@tilde@acc}%
         \def\textasciimacron {\global\let\jg@cur@acc\underline}%
         \def\textasciicaron {\global\let\jg@cur@acc\jg@check@acc}%
         \def\u{\global\let\jg@cur@acc\jg@breve@acc}%
         \def\hat##1{\global\let\jg@cur@acc\jg@hat@acc}%
         \def\dot##1{\global\let\jg@cur@acc\jg@dot@acc}%
         \def\textasciidieresis{\global\let\jg@cur@acc\jg@ddot@acc}%
         \let\JGG@orig@rarrow\rightarrow
         \let\JGG@orig@larrow\leftarrow
         \def\rightarrow{\global\let\jg@cur@acc\jg@underRarrow@acc}%
         \def\leftarrow{\global\let\jg@cur@acc\jg@underLarrow@acc}%
         \def\textoverbrace{\global\let\jg@cur@acc\overbrace}
         \def\textunderbrace{\global\let\jg@cur@acc\underbrace}
         \def\jgunderline{\global\let\jg@cur@acc\underline}
      }

Unused implementatin of frac.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\s@frac#1#2{\frac{\scriptstyle#1}{\scriptstyle#2}}
      \def\ss@frac#1#2{\frac{\scriptscriptstyle#1}{\scriptscriptstyle#2}}

      \def\unusedxml@implement@frac#1#2{%
       \ifx\XML@scriptlevel\att@none 
        \ifx\XML@linethickness\att@true\frac{#1}{#2}%
        \else \genfrac{}{}\XML@linethickness{}{#1}{#2}\fi
       \else
          \ifx\XML@scriptlevel\att@dzero
            \ifx\XML@linethickness\att@true\dfrac{#1}{#2}%
            \else \genfrac{}{}\XML@linethickness{0}{#1}{#2}\fi
          \else
            \ifx\XML@scriptlevel\att@done
               \ifx\XML@linethickness\att@true\tfrac{#1}{#2}%
               \else \genfrac{}{}\XML@linethickness{1}{#1}{#2}\fi
            \else
             \ifx\XML@linethickness\att@true\ss@frac{#1}{#2}%
             \else \genfrac{}{}\XML@linethickness{2}{#1}{#2}\fi
            \fi
          \fi
       \fi}

hack \\item
~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\jg@item[#1]{%
        \if@noparitem
          \@donoparitem
        \else
          \if@inlabel
            \indent \par
          \fi
          \ifhmode
            \unskip\unskip \par
          \fi
          \if@newlist
      % removed this test 2000/11/05. always put in topsep.
      %      \if@nobreak
      %        \@nbitem
      %      \else
              \addpenalty\@beginparpenalty
              \addvspace\@topsep
              \addvspace{-\parskip}%
      %      \fi
          \else
            \addpenalty\@itempenalty
            \addvspace\itemsep
          \fi
          \global\@inlabeltrue
        \fi
        \global\everypar{%
          \@minipagefalse
          \global\@newlistfalse
          \if@inlabel
            \global\@inlabelfalse
            {\setbox\z@\lastbox
             \ifvoid\z@
               \kern-\itemindent
             \fi}%
            \box\@labels
            \penalty\z@
          \fi
          \if@nobreak
            \global\@nobreakfalse
            \clubpenalty \@M
          \else
            \clubpenalty \@clubpenalty
            \global\everypar{}%
          \fi}%
        \if@noitemarg
          \@noitemargfalse
          \if@nmbrlist
            \refstepcounter\@listctr
          \fi
        \fi
       \savebox{\ItemBox}{#1}% Added JG
        \sbox\@tempboxa{\makelabel{#1}}%
        \global\setbox\@labels\hbox{%
          \unhbox\@labels
          \hskip \itemindent
          \hskip -\labelwidth
          \hskip -\labelsep
          \ifdim \wd\@tempboxa >\labelwidth
            \box\@tempboxa
          \else
            \hbox to\labelwidth {\unhbox\@tempboxa}%
          \fi
          \hskip \labelsep}%
        \ignorespaces}

hack \\FONormalBlock
~~~~~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \AtBeginDocument{%
      \def\FONormalBlock{%
        \let\@x\relax
        \ifnum\FOTableNesting>0
         \ifx\FOtextalign\att@centered
             \centering
         \fi
         \let\@x\relax
         \FOSetFont{normalblock}%
         \vrule height \f@baselineskip depth \z@ width \z@ 
        \else
          \ifnum\FOinList>0
            \FOlabel
            \ifFOListInnerPar\par\FOvspacebefore\fi
            \ifx\FOwhitespace\att@pre\obeyspaces\obeylines\fi
            \ifx\FOwhitespacecollapse\att@false\obeyspaces\fi
            \ifx\FOwrapoption\att@nowrap\obeylines\fi
          \else
            \ifx\FObreakbefore\att@page
              \let\tempID\FOid
              \penalty -\@M
              \let\FOid\tempID
            \else
              \ifx\FObreakbefore\att@oddpage
              \let\tempID\FOid
              \penalty -\@M
              \ifodd\c@page\else\BlankPage\newpage\fi
              \let\FOid\tempID
              \fi
            \fi
            \par
             %      \FOlabel (deleted) 
            \Quadding
            \ifFOBlockGrab
              \FOBoxedBlock{\linewidth}%
            \else
              \FOBorderTop
              \ifdim\FOpaddingbefore>\z@
               \vskip\FOpaddingbefore
              \fi
              \FOvspacebefore
              \parindent\FOtextindent
              \advance\leftskip by  \FOpaddingstart
              \advance\leftskip by  \FOmarginleft
              \advance\rightskip by \FOpaddingend
              \advance\rightskip by \FOmarginright
            \fi
      %      \par
            \ifx\FOwhitespace\att@pre\obeyspaces\obeylines\fi
            \ifx\FOwhitespacecollapse\att@false\obeyspaces\fi
            \ifx\FOwrapoption\att@nowrap\obeylines\fi
          \fi
            \FOlabel %moved this [jg] 
          \FOSetFont{normal}%
        \fi
      \@x
      }
      }

hack open fence
~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\jg@hacko{%
        \ifx\XML@fenceopen\jg@lt\let\XML@fenceopen\langle\fi
        \ifx\XML@fenceopen\jg@lbra\let\XML@fenceopen\langle\fi
        \ifx\XML@fenceopen\jg@gt\let\XML@fenceopen\rangle\fi
        \ifx\XML@fenceopen\jg@rbra\let\XML@fenceopen\rangle\fi
        \ifx\XML@fenceopen\jg@verbar\let\XML@fenceopen\|\fi
        \ifx\XML@fenceopen\jg@Verbar\let\XML@fenceopen\|\fi
        \ifx\XML@fenceopen\jg@lfloor\let\XML@fenceopen\lfloor\fi
        \ifx\XML@fenceopen\jg@rfloor\let\XML@fenceopen\rfloor\fi
        \ifx\XML@fenceopen\jg@lceil\let\XML@fenceopen\lceil\fi
        \ifx\XML@fenceopen\jg@rceil\let\XML@fenceopen\rceil\fi
        \ifx\XML@fenceopen\jg@lmoustache\let\XML@fenceopen\lmoustache\fi
        \ifx\XML@fenceopen\jg@rmoustache\let\XML@fenceopen\rmoustache\fi
        \ifx\XML@fenceopen\jg@lgroup\let\XML@fenceopen\lgroup\fi
        \ifx\XML@fenceopen\jg@rgroup\let\XML@fenceopen\rgroup\fi
        \ifx\XML@fenceopen\jg@uparrow\let\XML@fenceopen\uparrow\fi
        \ifx\XML@fenceopen\jg@downarrow\let\XML@fenceopen\downarrow\fi
        \ifx\XML@fenceopen\jg@Uparrow\let\XML@fenceopen\Uparrow\fi
        \ifx\XML@fenceopen\jg@Downarrow\let\XML@fenceopen\Downarrow\fi
        \ifx\XML@fenceopen\jg@updownarrow\let\XML@fenceopen\updownarrow\fi
        \ifx\XML@fenceopen\jg@Updownarrow\let\XML@fenceopen\Updownarrow\fi
      }

hack close fence
~~~~~~~~~~~~~~~~

.. container:: ltx-source

   ::

      \def\jg@hackc{%
        \ifx\XML@fenceclose\jg@gt\let\XML@fenceclose\rangle\fi
        \ifx\XML@fenceclose\jg@rbra\let\XML@fenceclose\rangle\fi
        \ifx\XML@fenceclose\jg@lt\let\XML@fenceclose\langle\fi
        \ifx\XML@fenceclose\jg@lbra\let\XML@fenceclose\langle\fi
        \ifx\XML@fenceclose\jg@verbar\let\XML@fenceclose\|\fi
        \ifx\XML@fenceclose\jg@Verbar\let\XML@fenceclose\|\fi
        \ifx\XML@fenceclose\jg@lfloor\let\XML@fenceclose\lfloor\fi
        \ifx\XML@fenceclose\jg@rfloor\let\XML@fenceclose\rfloor\fi
        \ifx\XML@fenceclose\jg@lceil\let\XML@fenceclose\lceil\fi
        \ifx\XML@fenceclose\jg@rceil\let\XML@fenceclose\rceil\fi
        \ifx\XML@fenceclose\jg@lmoustache\let\XML@fenceclose\lmoustache\fi
        \ifx\XML@fenceclose\jg@rmoustache\let\XML@fenceclose\rmoustache\fi
        \ifx\XML@fenceclose\jg@lgroup\let\XML@fenceclose\lgroup\fi
        \ifx\XML@fenceclose\jg@rgroup\let\XML@fenceclose\rgroup\fi
        \ifx\XML@fenceclose\jg@uparrow\let\XML@fenceclose\uparrow\fi
        \ifx\XML@fenceclose\jg@downarrow\let\XML@fenceclose\downarrow\fi
        \ifx\XML@fenceclose\jg@Uparrow\let\XML@fenceclose\Uparrow\fi
        \ifx\XML@fenceclose\jg@Downarrow\let\XML@fenceclose\Downarrow\fi
        \ifx\XML@fenceclose\jg@updownarrow\let\XML@fenceclose\updownarrow\fi
        \ifx\XML@fenceclose\jg@Updownarrow\let\XML@fenceclose\Updownarrow\fi
      }

All chars
~~~~~~~~~

.. container:: ltx-source

   ::

      \def\pxrfont{\fontencoding{TS1}\fontfamily{pxr}\selectfont}
      \def\cyrfont{\fontencoding{T2A}\fontfamily{cmr}\selectfont}
      \UnicodeCharacter{x1F4}{\ifmmode \acute{G}\else \'{G}\fi}
      \UnicodeCharacter{x1CD}{\ifmmode \check{A}\else \v{A}\fi}
      \UnicodeCharacter{x1CE}{\ifmmode \check{a}\else \v{a}\fi}
      \UnicodeCharacter{x1CF}{\ifmmode \check{I}\else \v{I}\fi}
      \UnicodeCharacter{x1D0}{\ifmmode \check{\imath}\else \v{\i}\fi}
      \UnicodeCharacter{x1D1}{\ifmmode \check{O}\else \v{O}\fi}
      \UnicodeCharacter{x1D2}{\ifmmode \check{o}\else \v{o}\fi}
      \UnicodeCharacter{x1D3}{\ifmmode \check{U}\else \v{U}\fi}
      \UnicodeCharacter{x1D4}{\ifmmode \check{u}\else \v{u}\fi}
      \UnicodeCharacter{x1D5}{\ifmmode \mbox{\={\"{U}}}\else \={\"{U}}\fi}
      \UnicodeCharacter{x1D6}{\ifmmode \mbox{\={\"{u}}}\else \={\"u}\fi}
      \UnicodeCharacter{x1D7}{\ifmmode \mbox{\'{\"{U}}}\else \'{\"{U}}\fi}
      \UnicodeCharacter{x1D8}{\ifmmode \mbox{\'{\"{u}}}\else \'{\"u}\fi}
      \UnicodeCharacter{x1D9}{\ifmmode \mbox{\v{\"{U}}}\else \v{\"{U}}\fi}
      \UnicodeCharacter{x1DA}{\ifmmode \mbox{\v{\"{u}}}\else \v{\"u}\fi}
      \UnicodeCharacter{x1DB}{\ifmmode \mbox{\`{\"{U}}}\else \`{\"{U}}\fi}
      \UnicodeCharacter{x1DC}{\ifmmode \mbox{\`{\"{u}}}\else \`{\"u}\fi}
      \UnicodeCharacter{x1DE}{\ifmmode \mbox{\={\"{A}}}\else \={\"A}\fi}
      \UnicodeCharacter{x1DF}{\ifmmode \mbox{\={\"{a}}}\else \={\"a}\fi}
      \UnicodeCharacter{x1E0}{\ensuremath{\bar{\dot{\mbox{A}}}}}
      \UnicodeCharacter{x1E1}{\ensuremath{\bar{\dot{\mbox{a}}}}}
      \UnicodeCharacter{x1E2}{\ifmmode \mbox{\=\AE}\else \={\AE}\fi}
      \UnicodeCharacter{x1E3}{\ifmmode \mbox{\=\ae}\else \={\ae}\fi}
      \UnicodeCharacter{x1E6}{\ifmmode \check{G}\else \v{G}\fi}
      \UnicodeCharacter{x1E7}{\ifmmode \check{g}\else \v{g}\fi}
      \UnicodeCharacter{x1E8}{\ifmmode \check{K}\else \v{K}\fi}
      \UnicodeCharacter{x1E9}{\ifmmode \check{k}\else \v{k}\fi}
      \UnicodeCharacter{x1EA}{\ifmmode \k{O}\else \k{O}\fi}
      \UnicodeCharacter{x1EB}{\ifmmode \k{o}\else \k{o}\fi}
      \UnicodeCharacter{x1EC}{\ifmmode \bar{\k{O}}\else $\bar{\mbox{\k{O}}}$\fi}
      \UnicodeCharacter{x1ED}{\ifmmode \bar{\k{o}}\else $\bar{\mbox{\k{o}}}$\fi}
      \UnicodeCharacter{x1F0}{\ifmmode \check{j}\else \v{j}\fi}
      \UnicodeCharacter{x1F8}{\`{N}}
      \UnicodeCharacter{x1F9}{\`{n}}
      \UnicodeCharacter{x1FA}{\'{\AA}}
      \UnicodeCharacter{x1FB}{\'{\aa}}
      \UnicodeCharacter{x1FC}{\'{\AE}}
      \UnicodeCharacter{x1FD}{\'{\ae}}
      \UnicodeCharacter{x1FE}{\'{\O}}
      \UnicodeCharacter{x1FF}{\'{\o}}

      \UnicodeCharacter{x200}{{\cyrfont\C A}}
      \UnicodeCharacter{x201}{{\cyrfont\C a}}
      \UnicodeCharacter{x202}{{\cyrfont\f A}}
      \UnicodeCharacter{x203}{{\cyrfont\f a}}
      \UnicodeCharacter{x204}{{\cyrfont\C E}}
      \UnicodeCharacter{x205}{{\cyrfont\C e}}
      \UnicodeCharacter{x206}{{\cyrfont\f E}}
      \UnicodeCharacter{x207}{{\cyrfont\f e}}
      \UnicodeCharacter{x208}{{\cyrfont\C I}}
      \UnicodeCharacter{x209}{{\cyrfont\C \i}}
      \UnicodeCharacter{x20A}{{\cyrfont\f I}}
      \UnicodeCharacter{x20B}{{\cyrfont\f \i}}
      \UnicodeCharacter{x20C}{{\cyrfont\C O}}
      \UnicodeCharacter{x20D}{{\cyrfont\C o}}
      \UnicodeCharacter{x20E}{{\cyrfont\f O}}
      \UnicodeCharacter{x20F}{{\cyrfont\f o}}
      \UnicodeCharacter{x210}{{\cyrfont\C R}}
      \UnicodeCharacter{x211}{{\cyrfont\C r}}
      \UnicodeCharacter{x212}{{\cyrfont\f R}}
      \UnicodeCharacter{x213}{{\cyrfont\f r}}
      \UnicodeCharacter{x214}{{\cyrfont\C U}}
      \UnicodeCharacter{x215}{{\cyrfont\C u}}
      \UnicodeCharacter{x216}{{\cyrfont\f U}}
      \UnicodeCharacter{x217}{{\cyrfont\f u}}
      \UnicodeCharacter{x21E}{\ifmmode \check{K}\else \v{H}\fi}
      \UnicodeCharacter{x21F}{\ifmmode \check{k}\else \v{h}\fi}
      \UnicodeCharacter{x226}{\.A}
      \UnicodeCharacter{x227}{\.a}
      \UnicodeCharacter{x228}{\c E}
      \UnicodeCharacter{x229}{\c e}
      \UnicodeCharacter{x22a}{\={\"O}}
      \UnicodeCharacter{x22b}{\={\"o}}
      \UnicodeCharacter{x22c}{\={\~O}}
      \UnicodeCharacter{x22d}{\={\~o}}
      \UnicodeCharacter{x22e}{\.O}
      \UnicodeCharacter{x22f}{\.o}
      \UnicodeCharacter{x230}{\ensuremath{\bar{\mbox{\.O}}}}
      \UnicodeCharacter{x231}{\ensuremath{\bar{\mbox{\.o}}}}
      \UnicodeCharacter{x232}{\=Y}
      \UnicodeCharacter{x233}{\=y}

      %\UnicodeCharacter{x25A1}{\ensuremath{\Box}}

      \def\CAB#1{\leavevmode\setbox0\hbox{#1}\dimen@\ht0 \advance\dimen@.5ex
      \rlap{\raise\dimen@\hbox{\kern2pt\char11}}#1}
      \def\Ohorn{\mbox{\rlap{\raise1.3ex\hbox{\kern0.55em,}}O}}
      \def\Uhorn{\mbox{\rlap{\raise1.7ex\hbox{\kern0.55em,}}U}}
      \def\ohorn{\mbox{\rlap{\raise1.ex\hbox{\kern0.35em,}}o}}
      \def\uhorn{\mbox{\rlap{\raise1.2ex\hbox{\kern0.33em,}}u}}

      \def\circlebelow#1{\hmode@bgroup \o@lign 
      {\relax #1\crcr \hidewidth \sh@ft {10}\char 6 \hidewidth }\egroup}
      \def\cirbelow#1{\hmode@bgroup \o@lign 
      {\relax #1\crcr \hidewidth \sh@ft {10}\char 2 \hidewidth }\egroup}
      \def\tildebelow#1{\hmode@bgroup \o@lign 
      {\relax #1\crcr \hidewidth \sh@ft {10}\char 3 \hidewidth }\egroup}
      \def\somethingbelow#1#2{\hmode@bgroup \o@lign 
      {\relax #1\crcr \hidewidth \sh@ft {10}\char #2 \hidewidth }\egroup}

      \UnicodeCharacter{x400}{\cyrchar{\`\CYRE}}
      \UnicodeCharacter{x40D}{\cyrchar{\`\CYRI}}
      \UnicodeCharacter{x450}{\cyrchar{\`\cyre}}
      \UnicodeCharacter{x45D}{\cyrchar{\`\cyri}}
      \UnicodeCharacter{x4D0}{\cyrchar{\U\CYRA}}
      \UnicodeCharacter{x4D1}{\cyrchar{\U\cyra}}
      \UnicodeCharacter{x4D2}{\cyrchar{\"\CYRA}}
      \UnicodeCharacter{x4D3}{\cyrchar{\"\cyra}}
      \UnicodeCharacter{x4D6}{\cyrchar{\U\CYRE}}
      \UnicodeCharacter{x4D7}{\cyrchar{\U\cyre}}
      \UnicodeCharacter{x4DA}{\cyrchar{\"\CYRSCHWA}}
      \UnicodeCharacter{x4DB}{\cyrchar{\"\cyrschwa}}
      \UnicodeCharacter{x4DC}{\cyrchar{\"\CYRZH}}
      \UnicodeCharacter{x4DD}{\cyrchar{\"\cyrzh}}
      \UnicodeCharacter{x4DE}{\cyrchar{\"\CYRZ}}
      \UnicodeCharacter{x4DF}{\cyrchar{\"\cyrz}}
      \UnicodeCharacter{x4E2}{\cyrchar{\=\CYRI}}
      \UnicodeCharacter{x4E3}{\cyrchar{\=\cyri}}
      \UnicodeCharacter{x4E4}{\cyrchar{\"\CYRI}}
      \UnicodeCharacter{x4E5}{\cyrchar{\"\cyri}}
      \UnicodeCharacter{x4E6}{\cyrchar{\"\CYRO}}
      \UnicodeCharacter{x4E7}{\cyrchar{\"\cyro}}
      \UnicodeCharacter{x4EA}{\cyrchar{\"\CYROTLD}}
      \UnicodeCharacter{x4EB}{\cyrchar{\"\cyrotld}}
      \UnicodeCharacter{x4EC}{\cyrchar{\"\CYREREV}}
      \UnicodeCharacter{x4ED}{\cyrchar{\"\cyrerev}}
      \UnicodeCharacter{x4EE}{\cyrchar{\=\CYRU}}
      \UnicodeCharacter{x4EF}{\cyrchar{\=\cyru}}
      \UnicodeCharacter{x4F0}{\cyrchar{\"\CYRU}}
      \UnicodeCharacter{x4F1}{\cyrchar{\"\cyru}}
      \UnicodeCharacter{x4F2}{\cyrchar{\H\CYRU}}
      \UnicodeCharacter{x4F3}{\cyrchar{\H\cyru}}
      \UnicodeCharacter{x4F4}{\cyrchar{\"\CYRCH}}
      \UnicodeCharacter{x4F5}{\cyrchar{\"\cyrch}}
      \UnicodeCharacter{x4F8}{\cyrchar{\"\CYRERY}}
      \UnicodeCharacter{x4F9}{\cyrchar{\"\cyrery}}


      \UnicodeCharacter{x1E00}{\circlebelow{A}}
      \UnicodeCharacter{x1E01}{\circlebelow{a}}
      \UnicodeCharacter{x1E02}{\.B}
      \UnicodeCharacter{x1E03}{\.b}
      \UnicodeCharacter{x1E04}{\d B}
      \UnicodeCharacter{x1E05}{\d b}
      \UnicodeCharacter{x1E06}{\b B}
      \UnicodeCharacter{x1E07}{\b b}
      \UnicodeCharacter{x1E08}{\'{\c C}}
      \UnicodeCharacter{x1E09}{\'{\c c}}
      \UnicodeCharacter{x1E0A}{\.D}
      \UnicodeCharacter{x1E0B}{\.d}
      \UnicodeCharacter{x1E0C}{\d D}
      \UnicodeCharacter{x1E0D}{\d d}
      \UnicodeCharacter{x1E0E}{\b D}
      \UnicodeCharacter{x1E0F}{\b d}
      \UnicodeCharacter{x1E10}{\c D}
      \UnicodeCharacter{x1E11}{\c d}
      \UnicodeCharacter{x1E12}{\cirbelow D}
      \UnicodeCharacter{x1E13}{\cirbelow d}
      \UnicodeCharacter{x1E14}{\ensuremath{\grave{\mbox{\=E}}}}
      \UnicodeCharacter{x1E15}{\ensuremath{\grave{\mbox{\=e}}}}
      \UnicodeCharacter{x1E16}{\ensuremath{\acute{\mbox{\=E}}}}
      \UnicodeCharacter{x1E17}{\ensuremath{\acute{\mbox{\=e}}}}
      \UnicodeCharacter{x1E18}{\cirbelow E}
      \UnicodeCharacter{x1E19}{\cirbelow e}
      \UnicodeCharacter{x1E1A}{\tildebelow E}
      \UnicodeCharacter{x1E1B}{\tildebelow e}
      \UnicodeCharacter{x1E1C}{\c{\u E}}
      \UnicodeCharacter{x1E1D}{\c{\u e}}
      \UnicodeCharacter{x1E1E}{\.F}
      \UnicodeCharacter{x1E1F}{\.f}
      \UnicodeCharacter{x1E20}{\=G}
      \UnicodeCharacter{x1E21}{\=g}
      \UnicodeCharacter{x1E22}{\.H}
      \UnicodeCharacter{x1E23}{\.h}
      \UnicodeCharacter{x1E24}{\d H}
      \UnicodeCharacter{x1E25}{\d h}
      \UnicodeCharacter{x1E26}{\" H}
      \UnicodeCharacter{x1E27}{\" h}
      \UnicodeCharacter{x1E28}{\c H}
      \UnicodeCharacter{x1E29}{\c h}
      \UnicodeCharacter{x1E2A}{\somethingbelow H{8}}
      \UnicodeCharacter{x1E2B}{\somethingbelow h{8}}
      \UnicodeCharacter{x1E2C}{\tildebelow I}
      \UnicodeCharacter{x1E2D}{\tildebelow i}
      \UnicodeCharacter{x1E2E}{\'{\"I}}
      \UnicodeCharacter{x1E2F}{\'{\"\i}}
      \UnicodeCharacter{x1E30}{\'K}
      \UnicodeCharacter{x1E31}{\'k}
      \UnicodeCharacter{x1E32}{\d K}
      \UnicodeCharacter{x1E33}{\d k}
      \UnicodeCharacter{x1E34}{\b K}
      \UnicodeCharacter{x1E35}{\b k}
      \UnicodeCharacter{x1E36}{\d L}
      \UnicodeCharacter{x1E37}{\d l}
      \UnicodeCharacter{x1E38}{\d {\=L}}
      \UnicodeCharacter{x1E39}{\d {\=l}}
      \UnicodeCharacter{x1E3A}{\b L}
      \UnicodeCharacter{x1E3B}{\b l}
      \UnicodeCharacter{x1E3C}{\cirbelow L}
      \UnicodeCharacter{x1E3D}{\cirbelow l}
      \UnicodeCharacter{x1E3E}{\'M}
      \UnicodeCharacter{x1E3F}{\'m}
      \UnicodeCharacter{x1E40}{\.M}
      \UnicodeCharacter{x1E41}{\.m}
      \UnicodeCharacter{x1E42}{\d M}
      \UnicodeCharacter{x1E43}{\d m}
      \UnicodeCharacter{x1E44}{\.N}
      \UnicodeCharacter{x1E45}{\.n}
      \UnicodeCharacter{x1E46}{\d N}
      \UnicodeCharacter{x1E47}{\d n}
      \UnicodeCharacter{x1E48}{\b N}
      \UnicodeCharacter{x1E49}{\b n}
      \UnicodeCharacter{x1E4A}{\cirbelow N}
      \UnicodeCharacter{x1E4B}{\cirbelow n}
      \UnicodeCharacter{x1E4C}{\'{\~O}}
      \UnicodeCharacter{x1E4D}{\'{\~o}}
      \UnicodeCharacter{x1E4E}{\"{\~O}}
      \UnicodeCharacter{x1E4F}{\"{\~o}}
      \UnicodeCharacter{x1E50}{\ensuremath{\grave{\mbox{\=O}}}}
      \UnicodeCharacter{x1E51}{\ensuremath{\grave{\mbox{\=o}}}}
      \UnicodeCharacter{x1E52}{\ensuremath{\acute{\mbox{\=O}}}}
      \UnicodeCharacter{x1E53}{\ensuremath{\acute{\mbox{\=o}}}}
      \UnicodeCharacter{x1E54}{\'P}
      \UnicodeCharacter{x1E55}{\'p}
      \UnicodeCharacter{x1E56}{\.P}
      \UnicodeCharacter{x1E57}{\.p}
      \UnicodeCharacter{x1E58}{\.R}
      \UnicodeCharacter{x1E59}{\.r}
      \UnicodeCharacter{x1E5A}{\d R}
      \UnicodeCharacter{x1E5B}{\d r}
      \UnicodeCharacter{x1E5C}{\d{\= R}}
      \UnicodeCharacter{x1E5D}{\d{\= r}}
      \UnicodeCharacter{x1E5E}{\b R}
      \UnicodeCharacter{x1E5F}{\b r}
      \UnicodeCharacter{x1E60}{\.S}
      \UnicodeCharacter{x1E61}{\.s}
      \UnicodeCharacter{x1E62}{\d S}
      \UnicodeCharacter{x1E63}{\d s}
      \UnicodeCharacter{x1E64}{\.{\'S}}
      \UnicodeCharacter{x1E65}{\.{\'s}}
      \UnicodeCharacter{x1E66}{\.{\v S}}
      \UnicodeCharacter{x1E67}{\.{\v s}}
      \UnicodeCharacter{x1E68}{\d{\. S}}
      \UnicodeCharacter{x1E69}{\d{\. s}}
      \UnicodeCharacter{x1E6A}{\.T}
      \UnicodeCharacter{x1E6B}{\.t}
      \UnicodeCharacter{x1E6C}{\d T}
      \UnicodeCharacter{x1E6D}{\d t}
      \UnicodeCharacter{x1E6E}{\b T}
      \UnicodeCharacter{x1E6F}{\b t}
      \UnicodeCharacter{x1E70}{\cirbelow T}
      \UnicodeCharacter{x1E71}{\cirbelow t}
      \UnicodeCharacter{x1E72}{\somethingbelow U{4}}
      \UnicodeCharacter{x1E73}{\somethingbelow u{4}}
      \UnicodeCharacter{x1E74}{\tildebelow U}
      \UnicodeCharacter{x1E75}{\tildebelow u}
      \UnicodeCharacter{x1E76}{\cirbelow U}
      \UnicodeCharacter{x1E77}{\cirbelow u}
      \UnicodeCharacter{x1E78}{\ensuremath{\acute{\mbox{\~U}}}}
      \UnicodeCharacter{x1E79}{\ensuremath{\acute{\mbox{\~u}}}}
      \UnicodeCharacter{x1E7A}{\ensuremath{\ddot{\mbox{\=U}}}}
      \UnicodeCharacter{x1E7B}{\ensuremath{\ddot{\mbox{\=u}}}}
      \UnicodeCharacter{x1E7C}{\~ V}
      \UnicodeCharacter{x1E7D}{\~ v}
      \UnicodeCharacter{x1E7E}{\d V}
      \UnicodeCharacter{x1E7F}{\d v}
      \UnicodeCharacter{x1E80}{\`W}
      \UnicodeCharacter{x1E81}{\`w}
      \UnicodeCharacter{x1E82}{\'W}
      \UnicodeCharacter{x1E83}{\'w}
      \UnicodeCharacter{x1E84}{\"W}
      \UnicodeCharacter{x1E85}{\"w}
      \UnicodeCharacter{x1E86}{\.W}
      \UnicodeCharacter{x1E87}{\.w}
      \UnicodeCharacter{x1E88}{\d W}
      \UnicodeCharacter{x1E89}{\d w}
      \UnicodeCharacter{x1E8A}{\.X}
      \UnicodeCharacter{x1E8B}{\.x}
      \UnicodeCharacter{x1E8C}{\"X}
      \UnicodeCharacter{x1E8D}{\"x}
      \UnicodeCharacter{x1E8E}{\.Y}
      \UnicodeCharacter{x1E8F}{\.y}
      \UnicodeCharacter{x1E90}{\^Z}
      \UnicodeCharacter{x1E91}{\^z}
      \UnicodeCharacter{x1E92}{\d Z}
      \UnicodeCharacter{x1E93}{\d z}
      \UnicodeCharacter{x1E94}{\b Z}
      \UnicodeCharacter{x1E95}{\b z}
      \UnicodeCharacter{x1E96}{\b h}
      \UnicodeCharacter{x1E97}{\" t}
      \UnicodeCharacter{x1E98}{\r w}
      \UnicodeCharacter{x1E99}{\r y}
      \UnicodeCharacter{x1E9B}{\. {\fontencoding{LELA}\selectfont\char'173 }}
      \UnicodeCharacter{x1EA0}{\d A}
      \UnicodeCharacter{x1EA1}{\d a}
      \UnicodeCharacter{x1EA2}{\CAB A}
      \UnicodeCharacter{x1EA3}{\CAB a}
      \UnicodeCharacter{x1EA4}{\'{\^A}}
      \UnicodeCharacter{x1EA5}{\'{\^a}}
      \UnicodeCharacter{x1EA6}{\`{\^A}}
      \UnicodeCharacter{x1EA7}{\`{\^a}}
      \UnicodeCharacter{x1EA8}{\CAB{\^A}}
      \UnicodeCharacter{x1EA9}{\CAB{\^a}}
      \UnicodeCharacter{x1EAA}{\~{\^A}}
      \UnicodeCharacter{x1EAB}{\~{\^a}}
      \UnicodeCharacter{x1EAC}{\d{\^A}}
      \UnicodeCharacter{x1EAD}{\d{\^a}}
      \UnicodeCharacter{x1EAE}{\'{\u A}}
      \UnicodeCharacter{x1EAF}{\'{\u a}}
      \UnicodeCharacter{x1EB0}{\`{\u A}}
      \UnicodeCharacter{x1EB1}{\`{\u a}}
      \UnicodeCharacter{x1EB2}{\CAB{\u A}}
      \UnicodeCharacter{x1EB3}{\CAB{\u a}}
      \UnicodeCharacter{x1EB4}{\~{\u A}}
      \UnicodeCharacter{x1EB5}{\~{\u a}}
      \UnicodeCharacter{x1EB6}{\d{\u A}}
      \UnicodeCharacter{x1EB7}{\d{\u a}}
      \UnicodeCharacter{x1EB8}{\d E}
      \UnicodeCharacter{x1EB9}{\d e}
      \UnicodeCharacter{x1EBA}{\CAB E}
      \UnicodeCharacter{x1EBB}{\CAB e}
      \UnicodeCharacter{x1EBC}{\~E}
      \UnicodeCharacter{x1EBD}{\~e}
      \UnicodeCharacter{x1EBE}{\'{\^E}}
      \UnicodeCharacter{x1EBF}{\'{\^e}}
      \UnicodeCharacter{x1EC0}{\`{\^E}}
      \UnicodeCharacter{x1EC1}{\`{\^e}}
      \UnicodeCharacter{x1EC2}{\CAB{\^E}}
      \UnicodeCharacter{x1EC3}{\CAB{\^e}}
      \UnicodeCharacter{x1EC4}{\~{\^E}}
      \UnicodeCharacter{x1EC5}{\~{\^e}}
      \UnicodeCharacter{x1EC6}{\d {\^E}}
      \UnicodeCharacter{x1EC7}{\d {\^e}}
      \UnicodeCharacter{x1EC8}{\CAB I}
      \UnicodeCharacter{x1EC9}{\CAB \i}
      \UnicodeCharacter{x1ECA}{\d I}
      \UnicodeCharacter{x1ECB}{\d i}
      \UnicodeCharacter{x1ECC}{\d O}
      \UnicodeCharacter{x1ECD}{\d o}
      \UnicodeCharacter{x1ECE}{\CAB O}
      \UnicodeCharacter{x1ECF}{\CAB o}
      \UnicodeCharacter{x1ED0}{\'{\^O}}
      \UnicodeCharacter{x1ED1}{\'{\^o}}
      \UnicodeCharacter{x1ED2}{\`{\^O}}
      \UnicodeCharacter{x1ED3}{\`{\^o}}
      \UnicodeCharacter{x1ED4}{\CAB{\^O}}
      \UnicodeCharacter{x1ED5}{\CAB{\^o}}
      \UnicodeCharacter{x1ED6}{\~{\^O}}
      \UnicodeCharacter{x1ED7}{\~{\^o}}
      \UnicodeCharacter{x1ED8}{\d{\^O}}
      \UnicodeCharacter{x1ED9}{\d{\^o}}
      \UnicodeCharacter{x1EDA}{\ensuremath{\acute{\Ohorn}}}
      \UnicodeCharacter{x1EDB}{\ensuremath{\acute{\ohorn}}}
      \UnicodeCharacter{x1EDC}{\ensuremath{\grave{\Ohorn}}}
      \UnicodeCharacter{x1EDD}{\ensuremath{\grave{\ohorn}}}
      \UnicodeCharacter{x1EDE}{\CAB{\Ohorn}}
      \UnicodeCharacter{x1EDF}{\CAB{\ohorn}}
      \UnicodeCharacter{x1EE0}{\ensuremath{\tilde{\Ohorn}}}
      \UnicodeCharacter{x1EE1}{\ensuremath{\tilde{\ohorn}}}
      \UnicodeCharacter{x1EE2}{\d{\Ohorn}}
      \UnicodeCharacter{x1EE3}{\d{\ohorn}}
      \UnicodeCharacter{x1EE4}{\d U}
      \UnicodeCharacter{x1EE5}{\d u}
      \UnicodeCharacter{x1EE6}{\CAB U}
      \UnicodeCharacter{x1EE7}{\CAB u}
      \UnicodeCharacter{x1EE8}{\ensuremath{\acute{\Uhorn}}}
      \UnicodeCharacter{x1EE9}{\ensuremath{\acute{\uhorn}}}
      \UnicodeCharacter{x1EEA}{\ensuremath{\grave{\Uhorn}}}
      \UnicodeCharacter{x1EEB}{\ensuremath{\grave{\uhorn}}}
      \UnicodeCharacter{x1EEC}{\CAB{\Uhorn}}
      \UnicodeCharacter{x1EED}{\CAB{\uhorn}}
      \UnicodeCharacter{x1EEE}{\ensuremath{\tilde{\Uhorn}}}
      \UnicodeCharacter{x1EEF}{\ensuremath{\tilde{\uhorn}}}
      \UnicodeCharacter{x1EF0}{\d{\Uhorn}}
      \UnicodeCharacter{x1EF1}{\d{\uhorn}}
      \UnicodeCharacter{x1EF2}{\`Y}
      \UnicodeCharacter{x1EF3}{\`y}
      \UnicodeCharacter{x1EF4}{\d Y}
      \UnicodeCharacter{x1EF5}{\d y}
      \UnicodeCharacter{x1EF6}{\CAB Y}
      \UnicodeCharacter{x1EF7}{\CAB y}
      \UnicodeCharacter{x1EF8}{\~ Y}
      \UnicodeCharacter{x1EF9}{\~ y}
      \UnicodeCharacter{x23B0}{\lmoustache}
      \UnicodeCharacter{x23B1}{\rmoustache}
      \UnicodeCharacter{x3014}{\lgroup}
      \UnicodeCharacter{x3015}{\rgroup}
      \UnicodeCharacter{xfe37}{\textoverbrace}
      \UnicodeCharacter{xfe38}{\textunderbrace}

More chars
~~~~~~~~~~

.. container:: ltx-source

   ::


        \UnicodeCharacter{xE3F}{{\pxrfont\textbaht}}
        \UnicodeCharacter{x20A9} {{\pxrfont\textwon}}
        \UnicodeCharacter{x20A6} {{\pxrfont\textnaira}}
        \UnicodeCharacter{x20A4} {{\pxrfont\textlira}}
        \UnicodeCharacter{x20AB} {{\pxrfont\textdong}}
        \UnicodeCharacter{x2036} {\textgravedbl}
        \UnicodeCharacter{x2033} {\textacutedbl}
        \UnicodeCharacter{x2035} {\textasciigrave}
        \UnicodeCharacter{x2032} {\ifmmode '\else \textasciiacute\fi}
        \UnicodeCharacter{x2103} {\textcelsius}
        \UnicodeCharacter{x2020} {\ifmmode \dagger \else \textdagger\fi}
        \UnicodeCharacter{x2021} {\ifmmode \ddagger \else \textdaggerdbl\fi}
        \UnicodeCharacter{x2030} {\textperthousand}
        \UnicodeCharacter{x2031} {{\pxrfont\textpertenthousand}}
        \UnicodeCharacter{x203B} {{\pxrfont\textreferencemark}}
        \UnicodeCharacter{x2045} {{\pxrfont\textlquill}}
        \UnicodeCharacter{x2046} {{\pxrfont\textrquill}}
        \UnicodeCharacter{x211E} {{\pxrfont\textrecipe}}
        \UnicodeCharacter{x2117} {{\pxrfont\textcircledP}}
        \UnicodeCharacter{x2120} {{\pxrfont \textservicemark}}
        \UnicodeCharacter{x212E} {{\pxrfont \textestimated}}
        \UnicodeCharacter{x203D} {{\pxrfont \textinterrobang}}
        \UnicodeCharacter{x2190}{\leftarrow}
        \UnicodeCharacter{x2192}{\ensuremath{\rightarrow}}
        \UnicodeCharacter{x2194}{\ensuremath{\leftrightarrow}}
        \UnicodeCharacter{x21D0}{\Leftarrow}
        \UnicodeCharacter{x21D2}{\Rightarrow}
        \UnicodeCharacter{xF576}{\longleftarrow}
        \UnicodeCharacter{xF577}{\longrightarrow}
        \UnicodeCharacter{xF579}{\Longleftarrow}
        \UnicodeCharacter{xF57A}{\Longrightarrow}

        \UnicodeCharacter{xF57A}{\Longrightarrow}

        \UnicodeCharacter{xF57D}{\longmapsto}
        \UnicodeCharacter{x21A6}{\mapsto}
        \UnicodeCharacter{xF578}{\longleftrightarrow}
        \UnicodeCharacter{xF57B}{\Longleftrightarrow}
      %  \UnicodeCharacter{xE365}{\Longleftrightarrow}
        \UnicodeCharacter{x21D4}{\Leftrightarrow}
        \UnicodeCharacter{x2113}{\ell}
        \UnicodeCharacter{x332}{\jgunderline}
        \UnicodeCharacter{x2663}{\relax\ifmmode\clubsuit\else\ding{168}\fi}
        \UnicodeCharacter{x2661}{\heartsuit}
        \UnicodeCharacter{x2660}{\relax\ifmmode\spadesuit\else\ding{171}\fi}
        \UnicodeCharacter{x2666}{\relax\ifmmode\diamondsuit\else\ding{169}\fi}
        \UnicodeCharacter{x22C1}{\bigvee}
        \UnicodeCharacter{x22C0}{\bigwedge}

        \UnicodeCharacter{x230B}{\rfloor}
        \UnicodeCharacter{x260A}{\&}
        \UnicodeCharacter{x127}{{\fontencoding{LELA}\selectfont\char'070 }}
        \UnicodeCharacter{x14A}{{\fontencoding{LELA}\selectfont\char'055  }}
        \UnicodeCharacter{x14B}{{\fontencoding{LELA}\selectfont\char'075  }}
        \UnicodeCharacter{x135}{{\fontencoding{LELA}\selectfont\^{\char'072 } }}
        \UnicodeCharacter{x17F}{{\fontencoding{LELA}\selectfont\char'173 }}
        \UnicodeCharacter{x260B}{\bindnasrepma}
        \UnicodeCharacter{x5C}{\relax\ifmmode\setminus\else\textbackslash\fi}

----

docs/changelog.rst
------------------

ChangeLog for the Tralics software
==================================

2026-02-23, Version 3.0.0
-------------------------

Bookkeeping with no functional change
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-  Lots of refactoring of the C++ code using ``clang-tidy`` and
   ``clang-format``, making use of some C++17 features (too many changes
   to list, many of them automated)
-  Merging of the various documentation files, reorganization of the
   directory structure to make it more readable
-  Transition to CMake, and automatic run of the tests as part of the
   build
-  Remove a few unused function parameters and some dead code

Changes affecting the output
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-  [2020-02-12] import a
   `patch <https://github.com/softcover/tralics/commit/5164df1cdf978da0e8eb28d38b6e8fd2baf8f47b>`__
   from the SoftCover fork which includes missing refs in links for
   reference (only changes the output if there is an error)
-  [2020-04-21] switch to ``spdlog`` for logging, this changes the
   format and the repartition of the contents, hopefully in a reasonable
   direction
-  [2020-08-14] do not insert an empty attribute pair in
   Parser::T_start_theorem, this changes the output slightly but is cleaner

2015-11-25, Version 2.15.4
--------------------------

-  [2016-01-04] Bug correction in environment ``subequation``
-  [2017-05-26] Added command ``\omitcite``

2015-08-06, Version 2.15.3
--------------------------

- Corrected error message in ``\newcounter`` overflow.
- The Raweb requires no more a ``theme_vals`` entry in the config file.
- Made ``\@firstofone`` expandable.
- Corrected a bug in ``\ra@year`` in non-ra mode.
- What comes after ``\end{document}`` is ignored.
- The last line in the XML file contains only the end of the document element.
- Removed useless code of module check.
- An external program is called for the bibliography only if ``write18`` is enabled.
- Single error signaled in case of ``\newcommand{\foo\bar}{}``.
- Corrected ``\string^^^^1234``.
- Corrected ``\expandafter\string\csname\endcsname``.
- Handles correctly the case ``\escapechar=0``.
- Accepts ``\@gobble{\par}``.
- For many command that read an optional argument, paragraphs are forbidden.
- In case of ``\def\foo#1 #2{}\foo1 2``, both spaces can be replaced by a new line.
- Command ``\newcount`` never allocates register 255.
- Count registers no more used for allocation commands like ``\newcount``.
- Internal: made ``\outer`` tests faster than ``\protected``
- Corrected bug in ``\marks``.
- Simplified ``\message``.
- Corrected error handling in ``\def\foo#1#2{#1}\foo\bad\par`` the second argument gives a runaway; this stops argument scanning and inhibits evaluation of body.
- Indicates a corrects size for virtual files.
- No seg fault for ``\newif~`` or ``\newif\~``.
- Width of minipage read as dimen, not glue; no error anymore in ``\begin{minipage}{2pt plus}abc\end{minipage}``.
- Corrected behavior of newline in detokenize: ``\detokenize{^^J}`` gives a newline character of category code 12.
- Changed ``\meaning\sixt@@n\meaning\@M ;`` yields now ``\char"10\mathchar"2710``.
- Corrected ``\newmuglue``.
- No more element ``<error n='invalid.' l='570' c='no module'/>`` if same raweb sections are empty.
- General cleanup.
- Improved trace for restoring values; corrected printing of mu glue.
- Implemented subequations environment.
- Redesigned math array handling.
- Removed ``array*`` environment.
- Corrected numbering of multline environment.
- Made ``\nonumber`` a synonym of ``\notag``.
- Added option ``multi_math_label`` and counter ``\@multi@math@label``.
- No column span attribute for ``\multicolumn{a}{b}{c)`` when ``a=1``.
- One error per extra ``\label`` in math mode.
- Implemented ``\anchorlabel`` in math mode.
- Array preamble ``{>{$} c<{$}}`` works.
- Implemented lots of command for ``LaTeX3``.

2015-01-22, Version 2.15.2
--------------------------

-  corrected a bug in printing the encoding of the transcript file
   (David Binderman).
-  If the save stack holds a font command, this is popped at the end of
   the process (it might be pushed by a global ``\normalfont``).
-  The types of the objects remaining on the save stack is printed on
   the transcript file at the end of the process.
-  [2015-06-24] Support for math symbols added.
-  [2015-07-14] Changed implementation of ``\cline``.
-  Added ``\@sptoken`` to the kernel.
-  New command ``\hlinee`` as extension of ``\hline \cline``; this allow
   to specify the thickness of a rule and its surrounding space in a
   table.
-  Implemented the booktabs package
-  Corrected french translation of ``\aparaitre``.
-  Corrected ``\textasciibreve``, ``\textasciicaron``.
-  Corrected a nasty bug that inhibits tags in align environment (or any
   usee defined environment that expands to ``@align``).
-  Implemented ``\XMLcurrentcellid`` ``\XMLcurrentrowid``
   ``\XMLcurrentarrayid``.
-  Removed the obsolete NoTitle hack.
-  Corrected the postprocessing, removing loops in unused XML elements.
-  Corrected ``\vcenter``.
-  Changed ``\xmlemptyelt``.
-  Added a bunch of commands that make access to the XML tree
   (``\XML@fetch``, ``\XML@parent``, ``\XML@insert`` etc (for details,
   see documentation of one of these commands).
-  Added the possibility to use the result of ``\readxml``.
-  No error in ``$\muskip0=\lastskip$``.
-  An error is signaled in ``$a\above-ptb$``.
-  No error is signaled in ``$a\overwithdelims\relax()b$``.
-  There is always a rend attribute in figure, table.
-  No more loss of attributes in
   ``\begin{table} \begin{tabular*}{17pt}[b] {c} y \end{tabular*}\end{table}``.

2013-07-22, Version 2.15.1
--------------------------

-  Removed some unused variables in the code (Julien Schueller).
-  There are no more affiliations in the RA2013 (Marie-Pierre Durollet).
-  Replaced 2007 by current year in The configuration file for the RA is
   ``ra2007.tcf`` or ``ra.tcf``.
-  [2014-03-31] A module cannot start in a paragraph; implicit ``\par``
   added (Marie-Pierre Durollet).

2012-08-31, Version 2.15.0
--------------------------

-  [2013-01-21] Number of pages always inserted in the bibliography.

2012-07-06, Version 2.14.5
--------------------------

-  Added a possibility to specify an XML style sheet.
-  No terminator needed after a display math formula in interactive mode
   (Allen Downey).
-  Sections in raweb mode may be mandatory.

2011-11-07, Version 2.14.4
--------------------------

-  Removed final ``<allowbreak/>`` in url [2012-01-19, V Lefevre].
-  IO encoding easier to understand in the transcript file.
-  Added an option ``-dualmath``, and ``-nomathml`` reverted to old
   meaning.
-  Changed printing of some characters.
-  Extended the four-hat notation to five hats.
-  Implemented a starred version ``\url*``.
-  Added the ``\grabenv`` command.
-  Default output encoding is UTF8.
-  Translation of ``\phi`` is ``phiv`` or ``&#x3D5;`` i.e., ϕ,
   translation of ``\varphi`` also changed.
-  Translation of ``\longmapsfrom`` ``\Longmapsfrom`` ``\longmapsto``
   ``\Longmapsto`` is now ``&#x27FB;`` ``&#x27FD;`` ``&#x27FC;``
   ``&#x27FE;`` giving ⟻ ⟽ ⟼ ⟾ (Heiko Schroeder).

2011-05-02, Version 2.14.3
--------------------------

-  Fixed the font/size/color in ``\footnote``.
-  Allows ``\ChangeElementName{use\_font\_elt}{true}``.
-  Implemented ``\appendix`` in classes.
-  Commands like ``\newpage`` implicitly call ``\par``.
-  Added ``\nouppercase`` and ``\fancypagestyle`` commands in
   ``fancyhdr.plt``
-  Implemented ``\listoftables`` and ``\listoffigures``.
-  Command ``\tableofcontents`` finishes a paragraph and inserts the
   value of ``tocdepth`` counter.
-  Corrected error message in case of bad ``hbox``. Produces a
   ``<merror>`` element.

2011-01-24, Version 2.14.1
--------------------------

-  [bibtex] Added the serial number to the ``bibtex`` sort key .
-  [txmath] Corrected tracing of ``$\hspace{2mm}$``.
-  Improved printing of math tokens in case of fonts.
-  Corrected translation of ``\left`` in ``nomath-2`` mode.
-  Added ``\negmedspace`` ``\negthickspace``.
-  Corrected error message for ``\sin\int`` outside math.
-  Corrected ``\left\updownarrow`` in ``nomathml`` mode.
-  [``amsmath.plt``] Changed definition of ``xxalignat`` and co.
   Corrected the no-mathml translation.
-  No label generated for starred version of align env.
-  Implemented dual mathmode in case ``\@nomathl=-3``.
-  Argument of ``\bibliography`` may contain a trailing bib extension
   (Eric Bischoff).
-  [2011/04/11] Added ``\tableattribute`` env.
-  No error in ``missing_flush`` if buffer contains only of spaces.
-  No error in cases like ``$\mbox{\hspace {2mm}}$``.
-  Implemented ``\bordermatrix``.
-  Improved some error messages.

2008-07-20, Version 2.13.x
--------------------------

-  [2008-07-20, version 2.13.0]
   Fixed ``\end{...}`` if in env that finishes the math.
   Removed SansTitre etc.
   Made ``\ra@jobname`` work in any case.
   Removed printing of Option -year= ignored.
   Added a fifth small size.
   Added ``\@xsetfontsize`` and ``\@xgetfontsize``.
   [2008-09-16] Implemented amsart class.
   Added an ``id-text`` attribute to most anchors.
   Implemented ``\refstepcounter``.
   Implemented ``\notag`` and ``\incr@eqnum``.
   Changed ``\thechapter`` etc in standard classes.
   Replaced ``\stepcounter`` by ``\refstepcounter`` in ra.plt.
   Defined the command ``\AmS``, as well as the ten analogous of
   ``\Hat`` in the amsmath package.
   Created a soul package, moved 4 commands into it.
   Added commands of type ``\labelenumi``.
   Added commands of type ``\p@enumii``.
   Implemented ``\newtheorem*``.
   Hack the case where a theorem starts with a display formula.
   Implemented ``\hdotsfor`` as a line of dots.
   Change which equations are numbered.
   Allow ``\char\``` in text in math.
   Changed ``\stepcounter`` and ``\@killcounter``.
   Fixed a bug in ``\XMLlastid``.
   Added ``\everybibitem``.
   Added ``\XMLgetatt``.
   Re-implemented ``attlisttable``.
   Removed the ``AttListTable`` structure, uses vector instead.
-  [2008-10-03, Version 2.13.1]
   Removed all hacks concerning year field for the raweb.
   [2008-10-16] Added special case of
   ``\ChangeElementName{theorem}{xx}`` when second argument is empty or
   starts with space.
   Fixed a bug: the anchor is always the theorem element, if name is
   empty, then attribute list is copied to the ``<p>`` that follows.
   Changed figure filename handling: ``./`` no more removed.
   Implemented translation of optional argument of divisions and
   ``\caption``. Value put in a ``<alt_head>`` may be changed in config
   via alt_section or alt_caption.
   Fixed translation of ``\bindnasrepma`` from U+260B to U+214B.
   Fixed some math envs (e.g. ``align``), by providing a non-empty
   id-text value.
   Added option -no_float_hack.
   Obsoleted options nobibyearerror and nobibyearmodify.
   Removed parametrisation of raweb topics.
   Use other counters for ``itemize`` than for ``enumerate``.
   Moved the ``\glo`` command and ``glossaire`` env in in ra.plt.
   Fixed translation of ``\quad`` and others in nonmathml mode in
   ``\mbox``.
   Added some Win32 conditionals in ``readline.C``.
   Feature: optional argument in ``enumerate`` does not change the type
   to description.
   Added a label attribute to items in ``enumerate`` env.
   Added ``enumi@hook`` (Brian West).
   Moved ``\labelitemXXX`` from std.clt to the kernel.
   Added a default label, just in case.
   Removed evaluation of font commands in nomathml mode (Mukesh Kumar).
   Added command name of ``\hbox`` in the tree for nomathml mode (Mukesh
   Kumar).
   Removed interpretation of ``\hbox`` in nomathml mode.
   Removed the bibtex warning: You should use {\'e} rather than \\'{e}.
-  [2008-10-27, Version 2.13.3]
   Fixed a bug in ``wrapfigure``.
   Implemented package epigraph.
   Added missing line number in error message for missing close brace.
   Allow expansion of arguments of ``\begin``, ``\end``.
   Improved error handling of ``\def\xx#1{}\begin{\xx}``.
   Changed ``\hspace{2.cm}`` in math mode, result always a dimension in
   pt, works even after ``\mathcode\`.="8000``.
   Implemented package esdiff.
   Implemented full graphics package.
   Implemented optional arg of ``\rotatebox``.
   Implemented colors.
   Implemented commands like ``\textsevenoldstyle``.
   Fixed a bug in function ``read_from_file`` (core dump on gcc-3.3.3) .
   Added a ``verse`` environment
   Fixed ``\@latex@error`` and others.
   Moved ``moreinfo`` in a style file.
-  [2008-11-13, Version 2.13.4]
   Allow ``\fbox{\[ x\]}``.
   Allow ``\fbox{\begin{tabular}{c} x & y  \end{tabular}}``.
   At most four digits are read for the year.
-  [2008-11-17, Version 2.13.5]
   Added ``\XMLref``.
   Fixed underscores and hat: these characters are allowed if
   InLoadHandler. OK in ``\XMLaddatt``.
   Removed runaway argument error in use of ``\@reevaluate``.
   Fixed ``\bmod`` (Bouche).
-  [2009-10-05, Version 2.13.6]
   Added ``\XMLref``.
   Added kvoptions, float package.
   Changed ``\ClassError`` to put something in the XML.
   Bug correction detected by compiler. (``Hashtab`` ctor; cmd
   ``ifdefinable``; cmd ``ltfont``).
   Added parentheses as suggested by compiler.
-  **[2009-10-14]**
   Corrected printing of command names like ``&`` in error elements.
   Removed theme if year > 2008 for the RA.
   Thus, file testerr tested with year=2008.
   Added test files for RA2009.
   Added list of fields/entries not to use in the Biblio.
   Changed warning for Lille.
   [2010-03-31] Added a hack for primes in math mode.
   Some math-mode names can be changed.
   Corrected a bug in printing of very large characters.
-  [2010-10-25, Version 2.13.7]
   Input file encoding algorithm improved.
   Corrrected ``new ColSpec::ColSpec (...)`` (thanks to Daniel Simon).

2008-04-21, Version 2.12.x
--------------------------

-  [2008-04-21, version 2.12]
   [2008/04/26] Fixed the bug :literal:`\\mathcode`x="8000$\mbox{x}$`.
   In nomathml mode, ``\relax`` not printed any more.
   Fixed a bug in natbib.plt (Wagner) when ``\cite`` is redefined.
   Added end-of-paragraph before ``\end{thebibliography}``.
-  **[2008-05-18, version 2.12.1]**
   Fixme. Font changes in tables are incorrect...
   Implemented ``\natcite``.
   Changed ``\bibitem``, calls ``\ignorespaces``, produces a bibitem
   element.
   Bug fix: declaration xml_pack_font_att = "true" is honored.
   Changed ``\mathversion{bold}$\mathnormal x$`` to produce bold.
   Implemented tipa package.
   Bug fix ``$\hbox{{\ensuremath{x}y}}$`` is OK .
   Implemented bold math Greek letter (Wagner).
-  **[2008-05-29, version 2.12.2]**
   Newline is OK in ``\zap@space``.
   Changed ``\:`` to medmuskip.
   Use ``<unexpected>`` for junk in table (Wagner).
   Allow any kind of space in text in math (Wagner).
-  **[2008-06-06, version 2.12.3]**
   Implemented ``\formulaattribute`` in no-mathml mode (Vishwakarma).
   Added a ``textype`` attribute for all ``<texmath>`` objects.
   Special commands like ``\tralics@prompt`` added.
   Added raw_bib as command line option.
   Translation of ``\begin{table} \begin{tabular}`` is a tabular.
   (Wagner).
   Fixed default type for masterthesis.
   The ``\calc`` command is mode independent (Vishwakarma).
-  [2008-06-20, version 2.12.4]
   Moved declaration of ``uint`` from ``txvars.h`` to ``tralics.h``
   (Leopard).
   Removed a bibtex error if no author/editor.
   Expansion of ``\u z`` is ``\@unicode@composite {z^^^^0306}`` (T.
   Bouche).
   Commands like ``\bar`` do not look anymore for ``\relax`` (T.
   Bouche).
-  [2008-07-04, version 2.12.6]
   [2008-07-08] Default value of ``\pers`` is ``\persB``.
   Removed restrictions on participants, catperso, etc.
   Distribution comes in two files: ``tralics-src`` and
   ``tralics-extra``.
   Removed use of file ../xml/tralics.sty in test files.
   Removed function ``only_for_module`` and associated statistics.
   Made Tralics less verbose for image info.
   Renamed ``default_year`` to ``ra_year``, associated to ``\ra@year``
   Added two source files ``txra.C`` and ``txconfig.C``.
   Complete redesign of the RA stuff (Tex code in ra.plt ra2008.clt).
   Removed the value field in the ``ParamDataSlot``
   Removed side-effects in ``check_ns::check_section``.
   Biblio inserts ``\csname @href\endcsname`` in case ``\href`` is
   redefined.
   No ``\href`` added if the URL field has ``\rrrt``
   Commented out content of file ``txcheck.C``
   Removed all special hacks for the RA, todo_xml etc.
   Changed ``\XMLaddatt`` : argument fully translated. Special chars
   maybe handled differently.

2007-11-29, Version 2.11.x
--------------------------

-  **[2007-11-29, version 2.11]**
   Changed type of Char 160 to active, as nobreakspace.
   Re-edited ChangeLog.
   [2007-12-05] Removed ``cur_cs``.
   Single ``check_outer_validity`` function.
   Bug fix: invalid token better handled.
   Added the html package; moved some functions there.
   Allow optional star after ``\tableofcontents``.
   Allow underscore in environment names.
-  **[2007-12-06, version 2.11.1]**
   Implemented keyval package and a lot of others.
   Added ``\tralics@split`` and ``\define@key``.
   [fixme] Double sharp in ``\@ifnextchar{}{}``.
   Made utf8x an alias for utf8 in inputenc.
   Added command ``\pop@stack``.
   Added commands ``\@temptokena`` and friends.
   Changed order of assignments in ``\tracingall``.
   Virtual end-of-item added to minipage.
-  **[2007-12-19, version 2.11.2]**
   Split the file ``txparser.C`` in two parts.
   Added ``\@onelevel@sanitize``.
   **[2007-12-22]**
   Renamed ``\filbreak`` (removing one l).
   Added ``\loggingall`` as synonym to ``\tracingall``.
   Moved html tests from file torture to testhtml.
   Implemented ``\listfiles``.
   **[2007-12-26]** Option xml_font_pack_att added in configuration
   files.
   Added commands like ``\fontencoding``, ``\usefont`` ``\selectfont``.
   Added ``\ignorespaces`` after ``\put`` and ``\multiput``.
   New file ``txtrees.h`` added.
   Multiple index added.
   Split file ``tralics.C`` in two parts, ``txtoken2.C`` holds the
   hashtab Ctor.
   Added newline or spaces when printing ``\message``.
   Added ``\@addtoreset``.
   Made ``^^L`` same as ``\outer\par``.
   Fixed ``\noexpand^^L``.
   Added a function ``T_next_arg_local();``.
   Re-implemented allocation mechanism using LaTeX method.
   Made ``\@ifundefined`` expandable.
   Split ``txvars.h`` in two parts, adding ``txcmd.h``.
   Enhanced ``hash_table::is_defined``, sets cur token.
   Added ``get_mac_value``.
   **[2008-01-23, version 2.11.3]**
   Postprocessing of subfigure depends on ``\tralics@use@subfigure``
   (Wagner).
   Corrected silly bug in ``stack::isfloat``.
   Changed status of ``\linewidth`` and ``\columnwidth``.
   **[2008-01-31]** Allow underscore in Team names for the Raweb
   (Durollet).
   Changed the way how the tralic_rc file is found if confdir is given.
-  [2008-02-05, version 2.11.4]
   Command name added to XML result element ``<error>`` in case of
   error.
   [2008-02-07] Bug fix; Brace delimiters were wrong [Umesh
   Vishwakarma].
   Changed the test in ``txpath.h``, using APPLE instead of ppc.
   Added enumeration for special cases in ``parse_args``.
   Made ``foo.xml.tex`` an invalid input file name
   Made ``foo.xml`` a synonym to ``foo.tex`` as input name
   Added options input_file, output_file, log_file.
   Changed basic IO functions.
   Bug fix in ``str_toks11``.
   Space and newline are identical in ``\ifx``.
   Implemented the xkeyval package. Options of ``\usepackage`` may
   contain commands.
-  **[2008-02-18, version 2.11.5]** Reimplemented packages and classes.
   Re-implemented ``filecontents`` environment.
   Capitalised some class names; Xml replaced by Xmlp
   Changed return value of ``get_macro`` to a reference.
   Removed the name of Buffer.
   Renamed ``my_stack`` to ``the_stack``.
   In ``txtitlepage.C``, less global variables.
-  [2008-02-22, version 2.11.6]
   Replaced ``sym_codes`` by ``symcodes``.
   Implemented ``\PackageError`` and the like.
   Implemented ``\ChangeElementName``.
   Setting of ``makefo`` in ``ShellActions::assign`` considered obsolete
   and moved at end of function.
   Fixed the case where options not declared with ``\DeclareOptionX``
   have an equal sign.
   Fixed the case where ``\documentclass`` options have braces when
   scanning doctype.
   Commands like ``\@car`` are non-long.
   Added ``\CheckCommand``.
   Renamed ``parser::define`` as ``parser::mac_define``.
   Package checkend adds an Info item to the XML file.
   Bug fix, command ``\@cons`` changes its arg globally.
   Changed some macros that read argument lists like ``next_opt_arg``.
   Outer check added for ``\@addtoreset`` and other commands that call
   ``\csname`` (ifundefined).
   Removed paragraph hacks for keywords.
   Implemented ``\ifvoid``.
   Fixed a silly bug: arithmetic overflow limits were off by a factor 8;
   (wrong constants).
   You can say ``\hbox{$$x$$}``.
   Made ``\scantokens`` work in interactive mode.
   Moved ``\newblock`` into std.clt.
   Moved some commands to amsmath package.
   Consider carriage-return as unprintable, hence prints as ^^M.
   Changed ``is_big`` so that char U+FFFF is valid on input. (neither
   U+FFFE nor U+FFFF are in the XML output).
   Replaced LaTeX Warning by Tralics Warning.
   Added special marker for Warning, so that ``\@gobble`` works.
   Made ``\stop`` work in interactive mode.
   Fixed a bug in ``add_buffer_to_list``, TL was badly pushed/popped.
   Variable ``name_for_error`` locally reset in expand and translate.
   Error element contains ``name_for_error``, without final space.
   Endline char is ``\r`` in verbatim.
   Error recovery mechanism changed.
   Added a file ``txparser3.C``.
   Mode of ``thebibliography`` changed.
   Implemented ``@nomathml=-2`` mode.
-  [2008-04-04, version 2.11.7]
   Change chapter ids from uidXXX to cidXXX.
   Removed ``stop_on_error`` flag for parse_error.
   No message of the form ``image foo not found`` if foo.png exists.
   Fixed a bug in ``\@reevaluate\foo\bar\gee``.
   Created a virtual file named .tex.
   You can say ``\input{}``.
   Result of ``\read`` is always brace balanced.
   Fixed a bug where ``\thickmuskip==\muskip0``.
   Changed overflow signalling mechanism.
   Removed the global variable ``radix``.
   Moved some global variables into ``main_ns`` namespace.
   Removed variable ``Parser::silent``.
   Replaced all occurences of ``skip_group`` by ``mac_arg``.
-  [2008-04-15, version 2.11.8]
   Removed function ``no_ovf_add``.
   Other arithmetic checks added.
   Removed mu to glue and glue to mu functions.
   Inlined ``cv_mu_to_glue`` and ``cv_glue_to_mu``.
   Changed type of integer in ``SthInternal`` to ``ScaledInteger``.
   Made arith operations members of ``ScaledInteger``.
   Fixed a bug in scale, when division is exact.
   Added restrictions to environment ``catperso``.
   DTD can be given on the command line.
   No directory search for ult file.
   Optional plus in ``\IfFileExists`` and ``\InputIfFileExists``.
   Option param takes one or two arguments.
   No creation of ``foo_.bbl`` if useless.
   Ignore check option in RA2008.
   Removed the fatal error if more than one of check/ps/xml are given.
   Shell variables TRALICSDIR and RAWEBDIR no more looked at.

2007-05-02, Version 2.10.x
--------------------------

-  **[2007-05-02, version 2.10]**
   Added options leftquote and rightquote. Indicate how to translate
   character left and right quote in non-verbatim text mode.
   Feature: if option usequotes is selected, doubles quotes give << or
   >> in French language.
   Feature: Double left quote, and double right quote translated into ”
   and “ (U+201D, U+201C).
   [2007-05-04] Feature: First token of a math expression removed if it
   is ``\relax``.
   [2007-05-17] Feature: More characters allowed in math mode.
   Changed translation of ``\upsilon`` and ``\Upsilon`` is to
   ``&upsilon;`` and ``&Upsilon;``.
   Space added after commands in the output of ``\showthe``,
   ``\showtokens``.
   [2007-06-01] ``\protected`` commands no longer considered as
   ``\outer``.
   Corrected implementation of ``\marks``.
   Made ``\mathbbm`` an alias to ``\mathbm``.
   In math mode :literal:`\\char`\&` produces ``&amp;`` (and not ``&``).
-  **[2007-07-06, version 2.10.1]**
   Feature: *Tralics* counts the number of HDR.
   (Raweb) Feature: It is required that you say if there are HDRs in the
   Raweb.
   (Raweb) Syntax change allows ``\UR{Sophia, Rocquencourt}``.
   (Raweb) Added ``\ResearchCentreList`` as alias to ``\UR``.
   (Raweb) Semantic change: Optional argument \`Location' added between
   \`Lastname' and before \`Catpro' in ``\pers`` in ``catperso``.
   Mandatory for multi-located teams.
   (Raweb) New Location arg can have a default value.
   (Raweb) Feature: File apics2007.ult not loaded when compiling the ra.
   (Raweb) Feature: When *Tralics* generates a tex file for the RA
   (option -ps), it uses latin1 as encoding.
   (Raweb) Feature: Team and section titles printed using terminal
   encoding.
   Bug fix: Tralics should works again for RA 2005 (bibliography).
-  [2007-07-16, version 2.10.2]
   (Raweb) Feature: ``\TeamHasHdr`` is optional. (request by
   Vercoustre).
   (Raweb) Feature. Removed ``all``, ``none`` as optional argument for
   Location argument in ``\pers``.
-  [version 2.10.3]
   New implementation for ra2007. Details follow. Nothing has changed if
   producing postscript, or testing the thing.
   File hyperref.cfg no more constructed because data not remembered.
   (Raweb) Feature: You cannot say ``\UR{\RCSophia}``.
   (Raweb) Bug fix: Commands from config file not inserted when
   producing PS.
   Feature: tralics --help: Order of options changed.
   Redefinition of ``\not`` in amsmath.plt removed.
   Feature: Html attribute no more computed for modules in RA2007.
   Feature: No restriction on module names (only uniqueness required).
   Bug fix: ``buffer::slash_separated`` does ``advance()`` in case of
   success.
   Feature: In the config file, themes can be given using uppercase
   letters.
   Changed error signaling for the raweb in some cases.
-  [version 2.10.4, 2007-07-23]
   Bug fix: No error in case ``\global\relax\def\foo{}`` (following a
   remark by Charpentier).
   Added ``fullsection_vals`` as replacement for ``section_vals``.
   Change: section titles defined by config file are put in the XML.
   Changed DTD to raweb7.dtd.
   Allow multiline variables in a config file.
   Added automatical call to ``\rawebstartdocument``.
   Change: Command ``\url`` adds ``<allowbreak>``.
   [version 2.10.5, 2007-08-02]
   Feature: Variable ``hacknotitle`` set to false by ``run_simple_ra``.
   Feature: Implicit group added whenever ``T_arg1`` is called.
   Function ``T_arg1*`` inlined (title was not printed on the tty).
   Removed option hacknotitle from the command list.
-  [version 2.10.6, 2007-09-27]
   Changed exit status of readline to 1.
   Change: No ``<allowbreak>`` added at the end of URL.
   Re-implemented ``\ensuremath`` as a macro (Req. Connexions).
   Bug fix. Added some code to raweb-uni.sty that redefines color (code
   commented out in pdftex.def for version 1.40).
   Added a -V, -verbose-doc option.
   Change trace of ``\let\oe\OE``.
   Re-implemented ``\MakeUppercase``, ``\MakeLowercase``. Case change
   commands allowed in Math mode. (connexions)
   Bug fix in lc/uc pair for ``\NG``.
   Feature allows ``$\mbox{(\ref{x})}=\eqref{x}$``.
   Bug fix: Command ``\ensuremath``, wrong placement of ``\relax``.
-  [version 2.10.7, 2007-11-03]
   (txmain) Bug fix. Year flag better checked.
   (txmain) Feature: Main file argument of Tralics can contain slashes.
   Bug fix. End verbatim algorithm changed.
   Bug fix. Better trace in case of too many errors.
   Bug fix. Labels were lost in nomathl mode.
   New feature. textcase package implemented
   [2007-11-09](txbib) Silly bug in ``find_lower_case``. (Wagner)
   (txbib) Feature: something like ``@book(foo,...}`` works.
-  [version 2.10.8, 2007-11-12]
   Feature: On the fly encoding implemented.
   Feature: Changed ``\protect`` to ``\relax``.
   (txmath) Bugfix. ``M_cv1`` handles ``\le`` the same as ``=``.
   (txmath) Feature: implemented the fencing algorithm.
   Bug fix. Wagner's math examples produce symmetric operators.
   New Command ``\tracingmath`` controls verbosity of the LBR algorithm.
   Feature: Math trace holds ^^J instead of newline.
   Added ``\@curmathfont``.
-  **[version 2.10.9, 2007-11-21]**
   Removed general purpose tokens from math trace.
   Implemented special active math characters.
   Implemented Package braket.
   Error recovery enhanced in math mode.
   (txcheck) Bug fix, if multi-line data has to be parsed.
   Bug fix. ``flush_buffer`` added at start of ``\citation`` (MP
   Durollet).

2006-10-26, Version 2.9.x
-------------------------

-  **[2006-10-26, version 2.9]**
   Corrected implementation of ``\chardef`` in math; added ``\chardef``.
   Feature: Ignore ``\vskip2cm`` and ``\vspace{2cm}`` in math mode.
   Feature: No space after ``\ifdim``, in the transcript of +scandimen
   for \\ifdim >12.0pt.
   Bug fix: Correct unit in the transcript of ``\mkern3mu``.
   Added Bibtex extensions.
   Bug fix: Tilda added if empty verbatim line.
-  **[2006-11-14, version 2.9.1]**
   Bug fix: It is possible to insert underscore in file names defined by
   ``\InputIfFileExists`` (T. Bouche).
   Bug fix: confusion between masterthesis and mastersthesis in
   ``make_names`` (T. Bouche).
   Bug fix: Switch 'IUCLC' removed in function ``set_termio``, because
   it does not work on Mac and testing whether we are on a mac is
   non-trivial. (Pb signaled by David Pichardie).
-  **[2006-11-28, version 2.9.2]**
   Feature: OS type is printed on the log file, works correctly on
   macintel (N. Roussel).
-  **[2006-12-10, version 2.9.3]**
   (txbib) Bug fix: second argument of ``make_new_entry`` was ignored
   (Theo Papadopoulo).
   Feature: In the raweb case, apics_all2006.bib is read (if it exists)
   instead of apics2006.bib, apics_refer2006.bib, apics_foot2006.bib.
   Bug fix: Additional fields are also copied in crossref.
   Feature ``foot_prefix`` is now useless in biblio.
   [2007-01-04] (txclasses) Bug fix, babel options were empty.
   [2007-01-14] Bug fix: Spaces normalized in ``\index``.
   [2007-01-17] Bug fix: Underscore chars allowed in team name (Laurent
   Pierron).
   [2007-01-29] Added math commands ``\triangleq\Cap\Cup``.
   Changed ``\allowbreak``.
   Added ``\m@th``.
   [2007-02-11] Added Configuration mfenced_separator_val="foo"
   Added option -(no)math_variant.
   You can say: tralics -param foo bar.
   Feature: There are 15 math fonts, corresponding to the 13 MathML
   variants. (plus normal and upright). In nomathml mode, they are
   hacked.
   Change: the name in a ``math`` is a C++ string instead of char*; it
   holds the first argument of a ``\mathbox``.
   Added ``\mathci \mathcn \mathcsymbol``.
   Change: you can say ``\mathmi[foo][bar]{gee}``, translates to
   ``<mi foo='bar'>gee</foo>``.
   Feature: Parses :literal:`\\char`\$` the same as ``\chardef`` in math
   mode.
   Feature: A single ``<mn>`` element is created for a sequence of
   digits
   [2007-02-16] Feature: Space character allowed in an environment name.
   Feature: Font size commands allowed in ``$x\mbox{\small$y$}z$``.
   Bug fix: char U+0327 is not special in math mode, since it's not
   ASCII. Use ``\times``.
   Feature: Translation of ``\right.`` is empty delimiter unless
   -compatibility mode.
   Bug fix of ``\let\A B $\A$`` dumps no core any more.
   Math mode change: ``\vskip`` converted into ``\vspace``, although
   this is useless.
   Change: No space in translation of ``A \\[2mm] B``.
   Bug fix. In math mode ``\end{foo}`` inserts a closing brace only if
   the begin inserted an opening brace (i.e., not if the begin was
   created outside math mode). Bug signaled by Thierry Bouche.
-  [2007-02-18, version 2.9.4]
   Improved the test when opening a file.
   Option bad_minus added
   Bug fix: In the case ``$1^23$`` the superscript is 2 (T. Bouche).
   Bug fix in ``math_p::find_paren2``; a group is big if it contains a
   big element. Gives better placement of ``<mrow>``.
   Added ``\mathfontproperty``.
   Added ``\colon`` as ``<mo lspace='0'>:</mo>``.
   Changed ``\def\root#1\of{\@root}``.
   Corrected translation of ``\widehat`` (invalid character code).
   Added ``\operatornamewithlimits``.
   Added ``\qopname``.
   Added: you can say ``$\left/ !\right\backslash$``.
   Changed implementation of ``\mathop...\limits``.
   Bug fix: Translation of ``$\big(xy$`` was empty.
   Bug fix: Translation of ``$\big(x\big\}$`` has mfenced, because
   ``\{\}`` converted to ``\lbrace\rbrace``.
   Bug fix: less-than and greater-than behave like ``\langle, \rangle``.
   Feature: Exchanged execution order of cv3 and cv4; this gives big
   delimiters in ``$\bigl(\sum \bigr )^2$``.
   Bug fix: Math style computation corrected: Exercise 17.15 gives
   correct answer.
   Bug fix: Boolean ``\ifinner`` gives correct answer in math mode.
   Bug fix: Command ``\pmod`` produces inserts 18mu or 8mu of space
   depending on the mode (display or not).
   Bug fix: Translation of ``\iff`` the same as ``\Leftrightarrow``.
   Changed translation of ``$\rm x\bf 2$``.
   Added ``\@Vert``, that is the same character as ``\parallel``, using
   this as delimiter. All delimiters work now.
   Change: ``\overbrace\underbrace`` produce a large operator that can
   have limits.
   Fixed translation of ``$\mathmo{<=}$``.
   Added ``\phantom``.
   Change: Automatic position of mrows: not in case open big close, but
   in case Big open close.
   Added:
   ``\ImaginaryI,\ExponentialE,\DifferentialD, \InvisibleTimes,     \ApplyFunction,\InvisibleComma``.
   Added ``\cellattribute\rowattribute``.
   Bug fix: Multline environment: all equations are in display style,
   first and last are correctly handled.
   Added ``\tag`` and variants.
   Added environment ``gather``; commands ``\xleftarrow \xrightarrow``
   optional argument added.
   Added
   ``\lvert \lVert \rvert \Rvert \cfrac \accentset     \undertilde \overleftrightarrow \underleftrightarrow   \arrowvert \bracevert \Arrowvert``;
   and a lot of other commands also.
   Bug fix: Xmatrix was wrong for X=b, B or V!.
   Implemented commutative diagrams.
   Added ``\scanupdown``; needed for ``\sideset``.
   Feature: phi and varphi swapped.
   Bug fix: Width of normal space in math mode changed from 6pt to 4pt.
   Changed definition of prime character.
   Changed definition of ``\asymp`` , is now asympeq, U+224D.
   Allow font changes in text in math.
   Allow commands like ``\hfill`` for horizontal placement of fractions
   or arrays.
   Phantom and smash hard-coded.
   Sideset command hard-coded.
-  [2007/04/28] ``\relax`` commands retained in the math tree.
   Mathfonts are groups now.
   Added option nozerowidthelt.
   Commands ``\begingroup \endgroup`` allowed in math mode and used for
   font switch.

2006-08-01, Version 2.8.x
-------------------------

-  **[2006-08-01, version 2.8]**
   Change in readline: ``killbuf`` is a string, ``history`` a vector of
   string
   Static functions are now in a namespace.
-  [2006-08-06, version 2.8.1]
   Moved interpretation of config data in ``tralics.C``.
   Added a file ``txaccent.C`` that handles all accents.
   Change: expansion of ``\a'`` is ``\'``.
   Change: use ``\tracingmacros``, for showing expansion of accents.
   Change double accent implementation. You can say ``\a'{\a^e}``; error
   messages could be Error in accent, command = \\'\^, Cannot put this
   accent on letter i.
   Change: If interactive, read config only if given as parameter.
   Changed again the algo for finding config file. Default value can be
   set in the Makefile. Otherwise in a new file ``txpath.h``.
   Changed the file mktar. Now the tar contains a directory.
-  **[2006-08-08, version 2.8.2]**
   Change. You can say ``$\S$``, not ``$\textsection$`` (both are valid
   in future versions).
   Changed expansion of ``\o\ae\aa\th\dh``, and uppercase version, to
   characters. They are allowed in math mode.
   Added ``\caps \hl \st \so \ul``. Use same method as
   ``\textsuperscript``.
   Commands like ``\ier`` do not produce an entity anymore. Rather than,
   they are like ``\textsuperscript{er}\xspace``.
   Added commands ``\list, \endlist, \usecounter``.
-  **[2006-08-09, version 2.8.3]**
   Added ``\@item``, like ``\item``, but replaces label by an attribute.
   Changed at-sign char to be letter while reading config file.
   Config file allows ``\let\item\@item``.
   Bug fix for ``\xmlelt{}{-}``.
   Added concept of xx.clt, xx.plt, xx.ult.
   Added an optional star after
   ``\input, \include, \InputIfFileExists``.
   Changed ``\usepackage{foo,bar}`` to be the same as
   ``\usepackage{foo}`` and ``\usepackage{bar}``.
   Bug fix: ``correct_type`` is now implicit for macros.
   Bug fix: Inserted missing ``flush_buffer`` in ``cst2_cmd``, like
   ``\ieme``.
-  **[2006-08-15, version 2.8.4]**
   Change: Transcript file says date= 2006/01/02 03:04:05.
   Implemented ``filecontents`` environment.
   Bug fix ``\InputIfFileExists`` has three args.
   Feature: file foo.ult loaded only if document class exists.
   Added new file ``txclass.C``.
   Bug fix ``\newenvironment{foo}[2]{}{#1}`` now invalid.
   Feature: All calls to ``file_exists`` are traced.
   Name change: ``Buffer, att_list``: renamed ``add`` to ``push_back``;
   ``buf  << bf_reset`` is the same as ``buf.reset()``.
   Feature: Star after ``\chapter`` etc is handled. Default star in
   book, outside main matter
   Added ``\toplevelsection``.
   You can say: tralics apics2006 -config=../confdir/ra.tcf (bug
   signaled by M.P. Durollet)
   Added count register ``\notrivialmath``.
   implemented index mechanism.
   Bug fix: Array preamble accepts rlc of category other.
   Bug fix: Verbatim numbering OK now.
   Bug fix: Array preamble accepts a char declared ShortVerb.
   Option -nostraightquotes added.
   Bug fix: Implicit ``\noindent`` after ``\item[]``.
   Feature: Attlist number 3, 4, 5 reserved for index, TOC, biblio.
   Added ``\thanks`` as an alias to ``\footnote``.
-  **[2006-09-04, version 2.8.5]**
   Change: command ``\textasciicircum`` produces char U+2303.
   Change: Option -notrivial-math is the default, option trivial-math
   added.
   Bug fix: Tables in a tabular OK now. There will be an attribute
   ``rend``, with value display or tabular, instead of none.
   Added ``\anchor``
   Bug fix: Command ``\@arabic`` ok.
   Feature: Section titles in the transcript file.
   Bug fix: Leaders are OK now.
-  **[2006-09-09, version 2.8.6]**
   Feature: Three values possible for the second argument of
   ``read_a_file``.
   Feature: Main file not immediately converted, but later.
   Change: All files are converted into UFT8 internal.
   Change: The number 256 appears in a single include file.
   Change: The number 257 replaced by ``special_relax``.
   Change: The number 255 appears no more in a C file.
   Changed retval of ``cmd_chr::char_val`` to integer from character.
   Use ``relax_code`` instead of ``subtypes(256)``.
   Changed ``Str_hash`` realloc step size to 10000 instead of 1000.
   Replaced constant 100 by ``xml_offset`` in ``txmath.C``.
   Change: ``^^^^abcd`` does not put the character back in the buffer,
   but in ``unread_char``, saved by ``push_input_stack``.
   Hash table size increased plus info in case of abort.
   Feature: argument of ``\newif`` must start with if.
   Replaced calls to ``hash_find`` by ``locate``.
   Changed retval of ``get_a_new_line`` to a vector of characters,
   instead of a buffer. This is saved by ``push_input_stack``.
   Feature: Value of ``\endlinechar`` can be zero.
   Feature: Compilation date now in XML file.
   Feature: Meaning of ``log_or_tty`` changed.
   Hack: Version number changed to 2.9 for the examples.
   Change: Removed leadingpart, leadingsection from documentclass
   options. Use ``\toplevelsection`` command instead.
   Removed ``\cite@type`` ; is now in natbib.plt; ``\cite@@type`` added
   as hook.
   Bibtex scanner: ``author="\{\"x"`` is interpreted as a Latex string
   with three tokens. Result is always balanced.
   bibliography: ``all_entries`` is a vector of pointers. Makes life
   easier.
   Removed interactive_bib option.
   Changed four hat parsing again. Input buffer is converted to Unicode
   characters in a vector.
   More calls to ``scan_left_brace_and_bi``, which has been redefined.
   Feature: Option confdir=foo is OK as 3 shell tokens.
   Change: Use of == in tpa assignments
   Feature: img file not created if no images exists.
   Bug fix: second ``\ignorespaces`` added in ``\item``.
   Bug fix: ``\index``, @ can be letter or other.
   Feature: all symbols of latexsym are now implemented.
   Added ``\wlog``.
   Bug fix: Relax scanning: ``\frac{foo}\x`` is ok, if ``\x`` is a user
   defined command.
   Added ``\pageref``.
   Change: ``candimen`` replaces 18mu by 10pt.
   Removed ``\zerospace``.
   Changed ``\enspace``.
   Buf fix: Print # not ## in case of error in ``insert_token0``.
-  [2006-09-09, version unchanged]
   Implemented some e-TeX extensions; Change tracing for
   ``\tracingassigns``.
   Reimplemented ``conditions`` as vector.
   Changed current font to ``tenrm``.

2006-04-01, Version 2.7
-----------------------

-  [**2006-04-02, version 2.7**]
   Bibtex modifications. There is a field that contains the current year
   as an integer. 0 means missing, -1 means unparsable. If 2 chars
   given, then 06 is replaced by 2006, 96 by 1996.
   An error is signaled in a refer; if the year is 0, -1, cur-year,
   greater than cur-year; the entry is moved into the year section.
   Some braces are removed when sorting.
   Change: Finding profile on mac changed.
-  [**2006-06-12, version 2.7a**]
   Fixed ``\unskip``.
   Added ``\mathfrak``.
   Added ``\@addml``.
   Added ``\operatorname \DeclareMathOperator``.
-  [**2006-06-14, version 2.7b**]
   Changed ``\keywords`` to undefined by default. It is too dangerous to
   use the environment as a command.
   Added ``\choose \shoveleft \shoveright``.
   Added environments ``multline aligned``.
   Added ``\@firstoftwo`` and ``\@secondoftwo`` (in LaTeX syntax),
   ``\@ifbempty`` ``\@iftempty`` (in C++).
-  [**2006-06-14, version 2.7p4**]
   Trying to print characters in ``no_mode`` is no more a fatal error;
   the mode is changed to ``argument_mode``.
   Bug fix: if foo is empty, ``\input{foo}``, *Tralics* crashes.
   Bug in push/pop input stack fixed; ``cur_input_stack`` is now a
   vector. Double pop avoided by checking the length. Name of
   file/virtual file added.
   If you say -noentnames, there are no more entity names, math mode
   also. Otherwise, generate ``&straightepsilon;`` and ``&varepsilon;``
   instead of ``&#x3F5;`` and ``&#x3B5;``.
   Easy part of bootstrap code is now written in C++.
   Reevaluate uses ``lines.split_string``, comments are ok now.
-  [**2006-07-05, version 2.7p6, 2006-07-14, last patch for v2.7**]
   Added lots of functions in file ``txcommands.C``, so that each case
   in the big switch has less the 5 lines.
   Changed Raweb structure: removed some tests in ``txcheck.C``.
   Added ``\@setmode``.
   Changed production of keywords in the hyperref.cfg file.
   Changed the semantics of the ``\pers`` command.
   Changed biblio for the raweb.
   (raweb) Config file: ra is no more the first type. Clean up.
   (raweb) New argument for *Tralics* distinguish_refer_in_rabib
   Concept of tcf file added; all config files converted to tcf
   Changed directory structure of *Tralics*.
   UTF8 output is possible now.
   Removed all 8bit characters in configurations files.
   Removed all 8bit characters in the C++ sources.
   Added ra.tcf, tralics_rc has now a single type.
   Cleanup in ``txcommands.C``. A big table is used instead of a
   function for ``cst1_cmd``.
   ``\guillemotlet`` and ``\guillemotright`` produce a single character
   in this table.
-  [**2006-07-23**]
   Following files added:
   ``txio.C   tximage.h, txscaled.h, txid.h, txeqtb.h, txfp.h, txio.h, txstats.h,    txpost.h, txcond.h, txatt.h, txhash.h, txxml.h, txtokenlist.h, txarray.h``
   ``tralics.h`` contains no class definitions any more.
   Removed one global variable in ``txarray``.
   ``att_list`` is essentially a vector.
   Simplified logic of ``T_par1``.
   Converted ``line_ptr`` in a list.
   Renamed Language as att_language in config file.
   [raweb] Removed default for theme_vals, affiliation_vals,
   profession_vals, section_vals, ur_vals. Fatal error if missing.
   (raweb) Function ``sans_titre`` hacked.
   Option -hacknotitle added.
   rahandler: uses tralicsdir instead of rawebdir.
   Everything that was in the the old rawebdir now copied in the Tralics
   dir.
   Option distinguish_refer_in_rabib is true by default.
   (raweb) Implemented ``\refercite`` for the two latex classes.
   Removed ``temp_list`` data structure.
   Re-implemented ``token_list`` as a normal list.
   Re-implemented math lists also.
   Added classes ``math_f`` and ``math_q``; removed three calls to
   'abort'.
   Added two files ``txmath1.C`` and ``txmath1.h``.
   Use ``#xab;`` notation for math chars.
   Added function ``buffer::add_int16ent``.
   Added function ``buffer::real_utf8``. The only function that produces
   chars.
   Bug fix: Translation of ``$\hbox{é<}$`` is now OK.
   Bug fix: in nomathml mode, ``$\hbox{$x$}$`` is ok.
   Added ``end_all_input_code`` command code. Now ``\end{document}`` is
   the real end.
   Fixed tralics foo -confdir=../confdir.
   No delay for the ``\addattributestodocument`` for DocAttrib.

2005-08-10, Version 2.6
-----------------------

-  [**2005-08-09, version 2.6**]
-  [**2005-09-05, version 2.6pl1**]
   Wrong topics.
   Bug fix: Transcript file truncated in case ``\mathchardef\Xc=3``
   (signaled by Sebastian Öblom).
-  [**version 2.6pl2**]
   Bug fix: ``\cline`` did not work correctly, because a carriage return
   was added between cells, and it was expected that only cells appear
   in a row.
-  [**version 2.6pl3**]
   Bug fix: math_type of ``\models`` was wrong (misplaced close paren).
-  [**version 2.6pl4**]
   Bug fix: Path of config file wrongly computed. (signaled by J.P.
   Talpin).
-  [**version 2.6pl5**]
   Added a test that the file name is lower case only in raweb mode.
   [2006-01-13] Bug fix: CSS says that 3.cm is not a valid dimension.
   Thus the figure env produces 3.0cm
   [2006-01-25] New: ``\#`` allowed in Math mode.
-  [**2006-01-30, version 2.6pl7** ]
   [txbib] Empty crossref ignored. Better debug otherwise.
   Empty glossaire is an error.

2005-07-11, Version 2.5
-----------------------

-  [**2005-07-11, version 2.5 (pl1)**]
   Bug fix: ``\bibitem[foo]{bar}``.
   Change: Bibtex is booted twice now.
   Change: ``\begin{thebibliography}`` enters vmode.
   Change: Empty part and junior value not printed for ``\bpers``.
   Change: The ``\cititem`` command leaves the mode unchanged.
   Change: ``\bpers`` gives only 1 error: should occur in bibliographic
   mode only.
   Change: *Tralics* is less verbose in silent mode.
   Bug fix: ``"\par`` works now in German.
   Configuration file identification dump changed.
   Change: ``\FPseed`` is an integer reference.
-  [**2005/07/25**]
   Math environment always traced.
   Fixed ``\mathop{\rm sin}``.
   Fixed ``$\ttfamily xy$``.
   Config file in source.
   Changed algorithm for finding configuration file.
   Fixed ``\indent\noindent``, is a no-op.
   Changed value of ``\quad`` outside math and of ``~`` inside math.
   Added some commands.
-  [**version 2.5pl7**]
   Changed paragraph hacking.
   (raweb) Configuration changed: composition\* says: no topics in
   compo.
   An error is signaled in case of scanint overflow (!!).
   Added ``\nocentering``.
   Added escape_char in cases like : ``\let\foo\bar \show\foo``.
   Countdef and Co are traced.

2004-11-30, Version 2.4
-----------------------

-  [**2004-11-30, version 2.4**]
   Bug fix: Underscore characters OK in ``\psfig{file=...}``.
   Outer tokens are forbidden in a lot of situations.
   Added ``\verbprefix`` and ``\verbatimprefix``
   Changed translation of ``$\epsilon \varepsilon$`` to
   ``&#x3F5; &#x3B5;`` (bug signaled by Fabrice Rastello).
-  [**version 2.4pl1**]
   No space between parenthesis and ``\footcite``.
   Calls to ``\newcount`` always logged.
-  [**2004-12-06, version 2.4 (pl2)**]
   Bug fix. ``\the\catcode\the\count@``.
   Macros are printed as \\Bar=macro: #1#->#1.
   [2004-12-21] Bug fix: Active ampersand produces ampersand (Gregoire
   Malandain).
   Changed printing of latex macros with optional argument as
   \\fooiv=opt \\long macro: bar#2#3->Seen#1#2#3.
-  [**2005-01-22, version 2.4 (pl4)**]
   Bug fix: ``\leavevmode`` added before ``\cite`` (M.P. Durollet).
   raweb-cfg.sty: Handling of array modified.
   Bug fix in ``\multicolumn``.
   Three ``\aftergroup`` commands added for implementing thinlines and
   thicklines.
   Fixed a bug; confusion between ``np_line_thickness`` and
   ``np_linethickness``.
   Added ``\XMLaddatt``.
   Bug Fix. In math mode, ``\hspace{...}`` did not work with newline as
   space because ``the_toks()`` uses category code 12. Newline now
   replaced by space. [D. Talay]
   Biblio strings read via ``fetch_name``...
   New biblio implemented.
-  [**2005-02-10, version 2.4 (pl5)**]
   xmltex: ``<mrow>`` implemented as a group.
   Translation ``${x_y}_z$``, the result contains a ``<mrow>``.

2004, fall, Version 2.3
-----------------------

-  [**version 2.3**]
   [raweb] Removed abstract and body environment.
-  [**2004-10-30 version 2.3 pl2**]
   Line number indicated in case of bad end verbatim.
   Space allowed before ``\end{verbatim}``.
   Added ``\mathattribute``.
-  [**version 2.3pl3**]
   [raweb] You can say ``\bibliography{miaou2003.refer+refer}``.
   Removed the message unexpandable command in expand? \\cl@section.
-  [**version 2.3pl5**]
   Bug fix. After ``\def\cs AB#1{}``, the log file contains a space
   after the CS name.
   Bug fix for ``\long\outer\def``.
   Change: You can use environments with one letter.
   Bug fix: ``scan_opt_arg`` removed braces twice.
   Bug fix: ``\par`` tokens are now forbidden in non-``\long`` commands
   (they are a allowed in system defined commands).
   Implementation of ``\long\outer`` changed.
-  [**version 2.3pl6**]
   Fixed a bug with ``last_att_list`` and ``realloc`` (bug signaled by
   Emmanuel Thomé).
   Fixed a bug for option -find_words.
   Signal error in case ``\def\foo{#0}``.

2004, summer, version 2.2
-------------------------

-  [**version 2.2**]
   Trace changed. You will see {end-group character }}.
-  [**version 2.2(pl1)**]
   In case of errors, whole usage not always shown.
   [raweb] Changed handling of ``\maketitle`` and ``\loadbiblio``.
   Option -debug does the right thing.
   Added utf8 mode for input.
   Bug fix in option -noundefmac.
   Corrected bug in ``T_twoints``.
-  [**version 2.2(pl3)**]
   Moved ``mu_glue`` in the glue table.
   Improved tracing for registers.
   Improved tracing for ``\divide``.
-  [**2004-09-08, version 2.2pl4**]
   Bug in ``\footnote{\url{~}}`` corrected.
   Changed ``\href``, added ``\Href``.
   ``\mathmn\mathmo \mathmi`` added.
-  [**version 2.2pl6**]
   Instead of rahandler.pl, you can use any other software.
   Avoids creating a transcript file for a non-existing input.
   Made ``math::convert_this_to_string()`` public.
-  [**version 2.2pl7**]
   Replaced the Copyright notice by CeCILL.

2004-05-14, version 2.1
-----------------------

-  [**version 2.1a, 2004-05-14**]
   Bug fix ``{\def\relax{0}\edef\foo{\ifnum0=0\fi}}``.
   Details added.
   Change: ``undef_cmd`` is now ``max_command +1``, and
   ``\if\undef\undef\fi`` complains.
   Bug fixed in ``\romannumeral``.
   Bug fixed in ``\ifmmode``.
   Typo in mstyle.
-  [**2004-05-28**]
   [raweb] Removed check of ``\moduleref`` in ``txcheck.C``.
   [raweb] Removed check of ``\input`` in ``txcheck.C``.
   [raweb] Commands ``\loadbiblio`` and ``\maketitle`` are made
   ``\relax`` by txcheck, and are no more removed.
   The name of ``\caption`` in a figure can be parameterized by
   xml_scaption_name.
-  [**2004-05-01, version 2.1c**]
   There is a perl script, called rahandler.pl that calls latex, and
   other external processes.
   Bug fix: ``math::mk_space`` generates a proper object.
   Change: ``mc_table`` is a list of XML objects.
   All math elements are proper math objects.
   And no buffer needed for math boot.
   File ``tralics_rc`` is now under CVS, in the tralics dir.
   Underscore allowed in bibliography name.
   There is a ``\ignorespaces`` after ``\begin{document}``.
   Made example 8-2-28 work.
   [raweb] Removed the ``\typeprojet`` command.
   [raweb] Removed the ``\debugfalse`` command.
   Implemented ``\Box\dddot\ddot\mathcircle``.
   Different names in config file for ``figure`` and ``graphic``.
   Corrected ``\dfrac``.
   Implemented ``\bmod \mod \pmod \pod``.
   Corrected ``\textbullet``.
   New feature. Fonts changes generate attributes, or elements.
   ``\sc`` and ``\fsc`` use the same font.
-  [**2004-07-08**]
   Bug fix. ``\newcommand\bar{}`` defines the command, even after error.
   Bug fix. Adding two positive dimensions gives always a positive
   result (even in case of overflow).
   Added ``\date``.
   Added ``\dag\ddag``.
   Replaced entity ``&ZeroWidthSpace;`` by ``&#x200B;``.
   Removed function ``my_abort()``.
-  [**2004-07-14**]
   Fixed ``\FPeval``.
   Added ``\parbox``.
   Removed useless stuff from ``txmain.C``.

2004-02-27, Version 2.0
------------------------

-  **[2004-02-27]**
   Implemented mathstyle.
   Bug fix. ``\genfrac`` chooses the right style.
   Added ``\penalty``.
   Bug fix: All tokens are printed OK now.
   Added a -silent option.
   Split ``txmath.C`` into two parts.
   **[2004-03-01]** Renamed ``Main`` and ``Project`` classes.
   UR lists can be configured.
   Removed ``array_info::~array_info()``, because of bugs.
   Bug fix: ``\string~`` is OK.
   Added ``\mkern \mskip``.
-  **[2004-03-09]**
   [Raweb] Sections are no more hard coded.
   Added ``\lastbox``.
   Added file ``txstring.h``; data structure ``istring`` added.
   [Raweb] Removed hacks for the presentation section.
   Removed ``math_dimen_attrib``.
   Corrected hash code of null string.
   Added a class ``user_param``.
   Changed buffer size to 256.
-  [**2004-03-08**]
   The default is not to construct the word list.
   Reordered name-positions in alphabetic order.
   Bug fix in ``token::tex_is_digit``.
   Silly bug in ``\count@=222\ifodd\count@ 1 \else 2\fi``.
   Added ``\hrule\vrule``.
   Change: ``\begin{document}`` is more restricted.
   Fixed ``\MakeUppercase{\i\j}``.
   Moved ``handling_ra`` in ``user_param``.
   Added a ``cstu_cmd`` code, in order to reduce number of ``cst1_cmd``.
   Added some Unicode characters between U+0180 and U+0233, those
   between U+1E00 and U+1EFF.
-  [**2004-03-16**]
   Bug fix in ``eqnarray`` column specs.
   Change. ``\char256`` is now printed as &#x100;.
   Added ``\lgroup\rgroup\lmoustache\rmoustache``.
   Fix. ``\setcounter{foo}{-1}\alph{foo}`` says something more sensible
   than Counter too large.
   Bug fix. ``parser::T_twoints`` calls scanint, not scan_dimen.
   Change. ``\xmlemptyelt`` does not start a paragraph.
   Removed things like ``alph_code+10``.
   Change in ``latex_ctr``: fully expandable (includes ``\arabic``,
   ``\@alph``, ...).
   Implemented ``\frame \dashbox``.
   Bug fix. ``\unnumberedverbatim`` has no effect on ``Verbatim``.
   Added ``\unhbox`` etc.
-  [**2004-03-16**]
   Bug correction in ``scan_int_digs`` : In the case of ``\box{123}``
   only one error is signaled.
   Added ``\showlists``.
   Bug fix: ``\showthe`` and ``\showbox`` print to transcript and tty.
   Added a name to every buffer (for debug). Reduced the default size of
   a buffer to 128.
   Added ``\OR\AND\NOT\isundefined`` in if-then-else.
   Removed one of the splitter buffers.
   Added ``\newtoks``.
-  [**2004-04-05**]
   Removed ``in_biblio_key``.
   Removed ``noparindent``.
   Added some ``\every...`` commands.
   Bug fix: ``\everydisplay\everymath`` dumped core.
   Removed ``finish_string``, buffer is always 0-terminated.
-  [**2004-04-05**]
   Modified the ``xml`` class. Is a pointer, with a vector.
   Change. ``parser::get_x_token`` returns a bool.
   Added function ``parser::T_newline``.
   Always check before adding an attribute to a list.
   Removed Parameter #1 of ``scan_something_internal`` .
   Bug fix ``\dimen0=\wd1`` is ok.
   Added option ``q`` in titlepage.
   Bug fix. ``\newtheorem*{problem}{Problem}`` is OK now.
   Titlepage hook added.
   Bug fix ``\let\foo#\def\A\foo1\foo2{\foo1}``.
   You may see: \\renewenvironment: cannot define \\xxx.
   You cannot say ``\newcounter{AA}\newcounter{AA}``.

2003-09, Version 1.9
--------------------

-  [**Version 1.9b** date unknown]
   New includes ``txparser.h txtoken.h txfonts.h txlogger.h``.
   ``#include<stdio.h>`` is now in ``tralics.h``.
   ``lex_type`` in now unused.
   ``old_catcodes`` moved into ``Parser``.
   ``verbatim_chars`` moved into ``Parser``.
   ``token_to_list`` is now useless.
   ``Token::val`` is private.
   ``Token::Token(int)`` is now explicit.
   Added a new option that avoids year errors in the bibliography.
   Add a new class ``log_or_tty``.
   If the option -verbose is not used, then (not done) is not printed.
   ``\show\foo`` gives: \\foo=macro: #1\bar ->x{} (à la TeX without
   \\n).
   ``\show`` upgraded.
   ``\show`` prints also in the log file.
   Correction of: There was no image image.
   No ``<biblio/>`` if biblio is empty.
   The name of the ``.bib`` file is in the ``_bbl``.
   Better error message in the case of ``\a{}`` and ``\a{toto}``.
   ``\meaning`` works as in TeX.
   Correction of a bug in ``\SaveVerb \UseVerb``.
-  [**Version 1.9c**, date unknown]
   ``\font\foo=cmr10 at 30pt \show\foo`` works.
   Don't start in RA mode if standard or no ``\documentclass``.
   Corrected a bug in ``see_tex_ext`` (forgotten ``finish_string``).
   String stats: the sum of ``String+string`` is printed.
   *Tralics* stops after 1000 errors.
   Removed ``Main::initialised``.
   Replacement of ``bauteurs`` and ``bediteur`` by ``bauthors`` and
   ``beditors``.
   If I do ``\bibitem``, I do not add it to the rest.
   Some functions in ``txbib.h`` are private.
   ``version_string`` moved to file ``txmain.C``.
-  [**Version 1.9d, 2003-09-20**]
   Added option -configfile.
   [fp_num::div]: n can be negative.
   Removed some commas and semi-colons so as to remove warnings on sun
   like
   "txbuffer.C", line 1265: Error: Cannot use const char\* to initialize
   char*.
   "txbuffer.C", line 524: Warning: k hides the same name in an outer
   scope.
   ``Buffer::convert`` replaced by ``Buffer::convert_to_str() const``.
   Removed implicit conversion from ``Buffer`` to ``String`` then
   ``string``.
   ``Buffer::the_characters()`` renamed to ``Buffer::c_str()``.
   Removed all calls to ``sprintf``.
   ``Buffer::see_something`` argument is a ``const String[]``, without
   backslash.
   Missing comma added in ``bad_commands1``.
   bug correction: missing ``finish_string`` in ``Buffer::see_year``.
   bug correction: missing ``finish_string`` in
   ``bibentry::numeric_label``.
-  [**Version 1.9e, 2003-10-06**]
   Removed ``Buffer::insert_braced()`` (same as ``add_braced``).
   Message \\begin catperso (ligne 27) ... \\end xcatperso replaced by
   \\begin{catperso} (line 27) ... \\end{xcatperso}.
   ``read_a_file`` and ``read_a_file_spec``: same function.
   ``module::sec_string`` is useless.
   Removed:
   ``rc_space, convert_dim_to_space, a_dim_to_pt, convert_dim``.
   Removed tests for ``\def, \let, \newif`` etc.
   Instead of: They were 1 Sanstitre handled there is now: There was 1
   NoTitle handled.
   [**2003-10-10**]
   [bibtexerr]: seeing a } changes the error type.
   Added a field ``file_name`` in ``line_ptr``.
   Added a line number in the error messages of bibtex.
   Dynamic memory in ``txmath.C``.
   ``Parser::math_argument`` replaced by ``before_mac_arg()``; watch for
   differences as in ``$a\hbox{}b$``.
   [**2003-10-15**]
   Bibtex error messages start with Error and end with a period.
   ``\c{C}`` is ok.
   In the case of error: too many commas and empty name, the string is
   printed.
   Errors detected while reading a bibtex file are better handled.
   The log starts with: Trace of tralics XX for file YY (XX= version
   number).
   [array_info]: fields are private.
   The ``attributes`` table is dynamic. The size was 10000 (5993 for
   Sosso).
   Correction of bug (idem).
   Supression of XML stats if tralics -ps.
   Bug in ``do_indexing``.
   tralics -check executes ``do_indexing``, prints nothing.
   tralics -check does not create files \_modules, \_delcbis etc.
   Added some const in the files.
-  [**version 1.9i, 2003-10-16**]
   Added constant ``level_zero`` and ``level_one``.
   Anonymous ``enum`` changed to ``name_positions``.
   Functions ``push_level`` and ``pop_level`` take another argument.
   Strange errors for
   ``$$\begin{array}{cc}\mbox{\begin{tabular}{r|cc}...``.
   Renamed ``Parser::thebuf`` to ``Parser::unprocessed_xml``.
   For ``Stack::push1``, second arg is a ``name_positions``, first arg
   is optional.
   For ``Stack::newid0``, arg is a ``name_position``.
   For ``Parser::T_arg1``, ``Parser::T_arg1_opt``: second arg is a
   ``name_positions``.
   Added ``Parser::nT_next_arg()``, ``Parser::nT_next_optarg()``.
   In ``txpost.C``: removed code dealing with ``mylabel``.
   Renamed ``st_pos_foo`` into ``sp_foo``.
   Removed ``Stack:add_att_to_last(string,string)``.
   Renamed ``Parser::buffer`` to ``Parser::input_buffer``.
   Re-implemented ``str_hash::find`` .
   [**2003-10-22**]
   Added a new file ``txfonts.C``.
   Function ``Parser::get_token`` returns a boolean: true if invalid.
   Added some tests...
   Functions made private in ``txmath.h``.
   Idem for ``xmlaction``.
   Bug correction: ``\typeprojet`` : ``\localisation`` is obsolete.
   ``Buffer::get_wptr()`` replaced by ``Buffer::length()``.
   Special hack for macros like ``\empty``.
   Some equivalents are defined at level one.
   [**2003-10-23**]
   Field ``math::name`` defaults to empty string, not null pointer
   (avoids core dump in ``scan_math_aux``).
   Bug in ``math::handle_mbox`` fixed.
   Instead of: Label multiply defined apprentissage2 we have : Label
   'apprentissage2' multiply defined (first use line 625).
   Instead of: undefined label track-arche we have : undefined label
   \`track-arche' (first use at line 748).
   No more Strange keywords cha\^{\i}nes.
   Removed final dot in keywords.
   This is a valid keyword: ``c{\oe}ur``.
   Implemented ``\oldstylenums`` like ``\textsuperscript`` and
   ``\textsubscript``.
   Implemented ``\linebreak`` and ``\nolinebreak`` as no-op with
   optional argument.
   *Tralics* counts lines properly for Unix, Mac and Windows.
   If you say ``EDITOR = {A. Drouin & G. Eude & J.Robert}`` you get an
   error of the form bad syntax in author or editor name.
-  [**version 1.9j, 2003-10-24**]
   Added special hack for empty macros everywhere.
   Better error message for ``\addtolength{toto}{2cm}``.
   Same for ``\addtolength{\toto}{2cm}``.
   This is an error now:
   ``\setlength{2}{4cm},        \addtolength{x}{3cm}``.
   Corrected error message for ``\DefineShortVerb{a}``.
   Command ``\ifeof`` works now.
   ``{\escapechar=-1 \string\foo}`` gives ``foo``.
   Implemented ``\openout``, ``\write`` and ``\closeout``.
   *Tralics* signals unterminated ``\if`` conditions.
   This is ok: ``\iffalse \FPiflt{1}{2} \fi \toto \fi``.
   Evaluating ``$\undef$`` generates an understandable message.
   Evaluating ``$a^b^c$`` gives now : double superscript.
-  [**version 1.9k, 2003-10-30**]
   Added a missing ``flush_buffer()`` in ``\bibitem``.
   Command ``\newline`` invalid in table.
   Function ``T_bibitem`` was completely wrong...
   Attribute ``rowspan`` replaced by ``columnspan`` in math tables.
   Added a use_all_sizes option.
   [**2003-10-30**]
   Split file ``txparser.C`` into two parts. ``txscan.C`` is a new file.
   There is an indication in the log file whenever *Tralics*
   opens/closes a file.
   Commands ``\input`` and ``\endinput`` are fully expanded.
   Calls ``\input{foo}`` and ``\input foo`` are OK.
   Implicit call of ``save_the_state`` for ``\input`` (needed for
   ``\input A\input B``).
   Functions ``\openin`` and ``\closein`` are always traced, but only
   sometimes on the tty.
   Call :literal:`\\catcode `\A=9` works now.
   Function ``get_token`` completely rewritten.
   [print_mods]: ``this_line`` is never zero.
   Added a ``Stats`` object that collects a lot of statistics.
-  [**Version 1.9l, 2003-11-14**]
   Replaced ``scan_four_bit_ints`` by 3 functions.
   Implemented DOI (Digital Object Identifier).
   Added a -utf8, -latin1 option.
   ``\the\par`` generates the same error as in TeX.
   Use anonymous namespace instead of static variable.
   Removed ``xmlstats``...
   Added more Ctor to ``xml_action``.
   [**2003-12-10**]
   Made ``clines``, ``math_p_aux``, ``math_elt``, ``token_elt``,
   ``cond_aux`` subclasses of other classes.
   Corrected a bug for multi ``\UR``.
-  [**Version 1.9m, 2003-12-10**]
   ``\>`` has now the value ``\medmuskip``.
   ``\, \> \: \!``: same values as in MathML TR.
   ``$\bigl[\frac{1}{a^2}\bigr[$`` works.
   ``$\ensuremath{\cal} X$`` yields \\\ ``cal``.
   ``\RAsection`` calls ``leave_h_mode``.
   Corrected bug ``\begin{module}...text\end{module}``.
   Added ``\underleftarrow \underrightarrow``.
   ``\linebreak, \nolinebreak \pagebreak \nopagebreak`` -> ok.
   ``\urlfont`` and ``url_font`` in ``.tralics_rc``.
   ``xmlelement`` environment changed.
   Bug correction in ``\AtBeginDocument``.
   No spaces from bootstrap code.
-  [**version 1.9n, 2003-12-16**]
   Quotes :literal:`\``foo''` -> gives the word foo.
   You can use ``\begin{split}``.
   Added ``\tfrac`` as alternative to ``\frac`` and ``\dfrac``.
   Added ``\genfrac#1#2#3#4#5``.
   Added ``\DeclareRobustCommand``.
   Script placement of ``\lim_{x=0}`` and ``\sin^2(x)`` not the same.
   Use of a ``mstyle`` element, according to MathML standards.
   Bug in ``\underset``.
-  [**version 1.9o, 2003-12-22**]
   Character ``~`` is now active, expands to ~ of catcode 12.
   If \\\ ``def\foo#1 #2{}``, then a newline is a separator between
   ``#1`` and ``#2``.
   Added ``\bye``, same as ``\endinput``.
-  [**version 1.9p, 2004-01-09**]
   Some corrections on long arrows.
   Scope: ``\paragraph{\bf foo}`` : only foo is in \\\ ``bf``.
-  [**version 1.9q, 2004-01-09**]
   Added a space after the label of subfigure.
   Replaced type ``Token`` by ``token``.
   Replaced type ``Stack`` by ``stack``, and ``stack`` by ``my_stack``.
   Replaced type ``Modes`` by ``mode``.
   Replaced type ``Parser`` by ``parser``.
   Added classes ``eqtb_dim``, ``save_aux_dim``, and ``eqtb_dim_table``.
   Changed Copyright miaou/apics.
   Made nested environments work.
   Added ``\let\verbatimfont\tt\let\verbatimnumberfont\small``.
   Changed ``\unitlength`` to an internal dimension.
   Added ``\textheight=427pt``, ``\textwidth=570pt``
   Make ampersand in url work: they are like ``\char9738`` (signaled by
   Alain Giraud).
   Added ``remove_last_space()`` for ``\multicolumn``.
   Changed: Braces in math argument.
-  [**2004-01-15**]
   Changed ``\pers`` to use ``\@pers``.
   Change: ``\pers{a}{b}[c ]`` trailing space removed.
   Added ``\tralicsversion``.
   Bug: ``scan_int`` at end of token list pushes back an invalid token.
   Change ``\setcounter{bar}{17}`` gives Unknown counter \`bar'.
   Added a feature that counts cr-lf as two characters for Windows. So
   that the number of bytes printed is what claimed.
   Added trace of ``\loop``.
   Seeing a closing brace does not call ``flush_buffer()``; call done
   only by ``save_aux_font::unsave``.
   Bug in ``trace_if`` fixed. Fct ``if_serial`` moved from ``parser``
   class to ``condition``.
-  [**2004-01-22**]
   Changed ``array_info``, it holds two vectors : u and v.
   Renamed class ``Buffer`` as ``buffer``.
   Added support for German.
   Change: ``flush_buffer`` does not create a useless XML element.
   Made code of ``\par`` and Co clearer.
   Entities: *Tralics* may output &#xA0; instead of &nbsp;.
   This prints OK: ``\expandafter\show\csname^^I^^85^^97\endcsname``.
   Bug: :literal:`\\catcode`\^^I` does not change the catcode of space.
   First cell in table does not start with space.
   Bug: ``\dj\DJ`` is OK now.
-  [**2004-01-24**]
   Commands added for ``\=t\=T\=h\=H`` etc.
   Correction to: \`Seeing a closing brace does not call
   ``flush_buffer()``;' needed also in by ``save_aux_boxend::unsave``.
   Changed the type of math chars between 192 and 256.
   Corrected translation of ``\'i\"E``.
   Added some characters.
   Added ``\texteuro``.
   Change: ``\glo`` does not enter no_mode unless it was in this mode.
   Better debug in case of abort() because of no-mode.
   Added ``\newdimen\itemsep`` in the preamble.
-  [**version 1.9t, 2004-01-30**]
   Bug fixed in ``check_for_alias_type``.
   Bug fixed: ``\url{#}`` is ok, because # is active, bound to \\# (MPD
   for compsys).
   Bug in ``evaluate_now`` fixed.
   Titlepage works as explained in the Doc.
-  [**2004-02-02**]
   Bug fixed in ``\endinput``.
   Added option -notrivialmath.
   Titlepage hacked a bit. Made things more general.
   Added a semi-colon after ``see_image``.
   Language attribute name in main element is defined in the config
   file.
   Added ``\include``.
   Fixed: ``\end{module}`` restores the mode (v,h etc).
   Recoded the ``minipage`` environment.
   Bug fix: ``minipage`` sets locally centering to 0.
   New feature. Commands ``\makebox`` ``\framebox`` : pos argument
   handled.
   Bug fix: Underscore char in file name are allowed.
   Bug fix: ``\usepackage[canadien,german,austrian]{babel}``.
   Added variable ``in_load_handler`` for the problem of underscore in
   file names.
   Bug fix: ``\fbox{\includegraphics{../../tralics/TEST/a_b.eps}}``.
   Added variable ``cur_file_name``. Used for errors.
   Bug in ``\centering`` fixed.
   Added ``\scalebox{}{}``.
   Implemented ``\tabular*``.
   In the interactive case, ``\stop`` switches to non-interactive.
   Added option -shell-escape.
   Added Zapf Dingbats.
   Added various symbols from textcomp:
   ``\textcelsius \textwon  \textnaira \textlira \textflorin \textdong    \textperthousand \textpertenthousand \trextreferencemark \textdagget     \textdaggerdbl \textgravedbl \textacutedbl \textasciigrave \textasciiacutex   \textlquill \textrquill \textohm \textmho \textnumero \textcircledP    \textrecipe  \textservicemark \textestimated \textbullet \textinterrobang``.
-  [**2004-02-10**]
   Added a new file ``txcommands.C``.
   Added a new data structure: ``cmd_chr``.
   No more ~ of catcode 12.
   Removed some useless code.
   Re-implemented the stack.
   Change: ``att_list::add`` : does nothing if value is zero.
   Spaces are not logged in vertical mode.
   Removed ``xml::xml(string,int,bool)``.
   Removed ``buffer::array_spec2``.
   Removed ``att_list::array_spec0``.
   Added ``\newcolumntype``.
   Change: ``\cline`` allowed only after ``\\``.
   Re-implemented array. ``>{\large\bfseries 2}l <{y}|`` is now Ok. Thus
   ``\cr`` is added somewhere. Even at end of table.
   Removed useless ``xml::finish_tabular()``.
-  [**2004-02-14**]
   Reimplemented ``\multicolumn``.
   Bug fix with ``isframe("cell")``.
   Added parameterisation code. Corrected bugs.
   Added ``\let\par\@empty`` in a table, particip and catperso.
   Added a new file: ``txarray.C``.
   Spaces at end of cell removed.
   Bug fix: ``\includegraphics[height=.3\textheight]{...}``.
   Removed ``parser::pack``. Some const added.
   Removed ``no_for_eof`` hack.
   Ordered ``txparser.h`` in alphabetic order, and put everything
   private if possible.
   Added option footnotehack.
   Fix. ``stack::add_nl()`` adds a newline only if there is none.
   Replaced ``buffer::remove_last_nl()`` by ``stack::remove_last_space``
   used instead. This removes all spaces before a ``</p>``.
   Optional argument of ``\makebox`` is implemented.
   Bug fix in ``scan_glue``.
-  [**2004-02-19**]
   Changed default compilation mode. it is non-ra. dft defaults to 3.
   The list of themes is no more hard-coded.
   Bug fix ``$\hspace*{}1cm$``.
   Bug fix. ``\vskip\vskip`` call scan_glue 3 times. Thus
   ``find_special_scaled`` is useless, removed.
   Added ``\bigskip``, same as ``\vskip12pt``.
   Added ``\ignorespaces``.
   Bug fix: ``\vdots`` outside math.
   Marks added.
   Added ``\arc\bigcircle\closecurve\curve\scaleputtagcurve``.
   Added ``token_list_to_att``.
   Bug fix ``\begin{minipage}{\dimension}...``.
-  [**2004-02-24**]
   Implemented ``\newtheorem``.
   Removed special hack for verbatim parsing.
   Added ^^^^ABCD support.
   Changed the token organisation.
   Moved SH out of the stack.

2003, Version 1.8
-----------------

-  [date unknown] Bug in ``mem_alloc`` of ``titlepage::check_size``.
   Removed error message command code=17 in case of undefined
   command/environment.
   More explicit warnings.
   More realistic implementation of ``\write-1``.
   Added space in message restoringinteger value.
   ``\end{document}`` calls ``\endinput``.
   Changed the log.
   Only one ``push_par``.
   Added a function ``ok_for_label``.
   Removed ``label_arg``, it is useless now.
   Removed a fatal error.
   Added ``\AtBeginDocument \AtEndDocument``.
   Renamed ``xxx_val_type`` as ``it_xxx``.
   Renamed ``xxx_del`` as ``del_xxx``.
   Renamed ``xxx_mode`` as ``mode_xxx``.
   All command names finish with ``_cmd.``.
   Removal of global variables : ``cur_level``, ``unexpected_seen_hi``,
   ``global_in_url``.
   Added ``\AddAttToLast*``.
-  [**2003-06-18**]
   Added support for Topics.
   Replaced amac by miaou.
   Changed a little the banner.
-  **[Version 1.8b, 2003-06-18]**
   Functions ``mk_acc``, ``fetch_accent`` put in class ``Parser``.
   These functions are private.
   Changed the names of the section.
   Raweb sections names now in cls file.
   Details. Renamed ``hashtab::boot()`` as ``hashtab::hashtab()``.
   Some functions are private.
   Some functions are const.
   Added a class for macros, named ``mactab``.
   Replaced some ``ostring`` by ``string``.
   Removed ``hashtab::new_math``.
   Removed ``math_table`` from ``hashtab``.
   Added ``ctoken::ctoken(stoken)``.
   Removed function ``Parser::the_catcode``.
   Added class ``save_catcode``.
   Removed ``error_stack`` and ``tmp_error_stack``, and changed the
   error mechanism.
   Everything printed on the tty is also printed on the log file.
   Removed function ``fiche_ur``.
   Removed command ``\localisation``.
   Removed ``nb_sec2_mods``.
   Replaced ``nouveau module`` by ``new module``.
   Value of pdftitle is now Activity report.
   Removed references to ``lg_file``.
   [checked_stat] Some data are private.
   ``modlist`` is now a vector, ``cur_module`` is current module.
   ``\project`` is an alias for ``\projet``.
   Team instead of projet in all messages.
   Removed a goto.
   Variable ``ref_list`` is now a vector.
   ``logger_ctl`` removed (was useless) and printed a useless 0.
   The ``short_name`` attribute of module is machine generated.
   Added ``short_module`` name as new argument to
   ``Parser::T_start_ramodule``.
   [modname] File miaou_contrats_FT becomes miaou_module33.tex.
   Removed class ``module_list_item``.
   ``\begin{module}[]{domaine}{chapeau}{}`` is OK.
   Corrected a bug in ``Buffer::check_moduleref``.
   Variable ``the_projetval`` is now a field of ``main_data``.
   Variable ``the_env`` is now a vector.
   Changed the algo for printing the moreinfo stuff.
   Variable ``themod_cher`` is now a vector.
   Variable ``all_heads`` is a vector.
   Added option -noxmlerror.
   ``hyperref.cfg`` contains Team or Project-Team.
-  [ **Version 1.8f** date unknown]
   Removed the ``Main::signal_error()`` function.
   Removed ``main_data::fatal_err``, added ``bad3``, changed ``bad1``.
   No more ``tmp_int_to_string``.
   Funny bug: :literal:`{\catcode`\é=7 ééab}` was wrong (double bug).
   Removed ``print_token``.
   Added ``void Buffer::add(scaled_int V, glue_spec unit)``.
   Another bug corrected.
   File ``txbib.C`` changed.
   ``cite:gaujal-jcss??`` not transformed to ``cite:gaujal-jcss--``.
   Removed ``Buffer::normalise()``.
   Variable ``job_name`` is in ``main_data``. Printed in case of error.
   Printing of Fatal_error for every fatal message on ``log_and_tty``.
   No more ``concat``.
   Function ``double_hat`` and 2 other ones replaced by a single
   function.
   Call to ``flush_buffer`` in case of error.
   Bug corrected in ``is_verbatim_end``.
   [special_hash]: two ``vector<string>``. It's easier.
   ``\includegraphics[=foo,clip=]{...}`` OK.
   ``\escapechar=-1`` does something sensible.
   Replacement of ``string_table`` by ``vector<string>``.
   Use a vector in ``pack_matcher`` and other bug corrections.
   New class ``arith`` that contains ``radix`` and ``error`` and
   functions.
   Variable ``the_save_stack`` is a vector.
   Overflow in counter is no more fatal.
   Modified ``read_mac_body`` and ``read_delimited`` in order to share .
   Guillemets and space.
   Working on FP.
   Added some missing math symbols.
   [token_list]: new methods ``front``, ``back``, ``push_front``,
   ``push_back``, ``pop_front``, ``pop_back``.
   End-of-line character is now carriage return, not line-feed.
   ``T_arg1`` takes 2 arguments.
   Lots of elements have a name that can be changed.
   Type ``Token`` is now a class.
   Moved ``make_catcodes`` into ``tralics.C``.
   Renamed ``oparen_code`` etc to ``oparen_cmd``.
   Moved all global tokens into the ``hash_table``.
   ``\verb`` is now in translate, not expand.
   ``\par`` is allowed in a caption (like in a footnote).
   ``\usepackage[french,english]{babel}`` is OK.
   Implemented tex fonts...
   Removed all ``stoken`` and ``ctoken``.
   Added: ``\read \openin \closein``.
   ``Parser::get_token()`` instead of ``Parser::get_next()``.
   ``\textfont scriptfont \scriptscriptfont`` ok.
   tralics /toto/titi.tex generates an error, rather than trying to open
   w/toto/titi.tex.
   ``\fnsymbol`` is OK.
   All variables ``st_pos_XXX`` in ``str_hash``.
   Replaced ``stack.get_mode()==mode_v`` by ``stack.in_v_mode()``.
   Spaces are now traced.
   Init messages sent to ``log_and_tty``.
   Figure ``./foo/bar.ps`` transforms into ``foo/bar.ps``.
   Message: \\~{} is the wrong way to put a tilde in an URL.

2002-12, Version 1.7
--------------------

-  [date unknown]
   In bibtex, if the citation is numeric, optional argument in the alpha
   key.
   Partial handling of ``\begin`` inside comments.
   ``\catcode160=10``. Said otherwise, nonbreakspace is considered as a
   normal space.
   Message duplicate field ignored becomes duplicate field \`note'
   ignored, in the case of a note.
   ``\href{toto}{\url{titi}}`` gives two errors unexpected element hi,
   invalid url value. the first message becomes: unexpected font change
   tt. if the second is printed, it will be you should perhaps use
   \\href{\url{x}}{y} instead of \\href{y}{\url{x}}.
   ``editor = "\textsc{toto}"`` in the biblio gives unexpected font
   change sc. maybe you confused Publisher with Editor.
   Bug corrections: ``\c{c}`` OK in a bibname; ``\v{c}`` OK ; ``\a'{e}``
   OK.
   Some new commands:
   ``\sharp \natural \flat \oval \updownarrow \thinspace``.
   Message Module name already seen replaced by Module name \`result'
   already seen.
   ``$_$`` give no memory fault but Math formula should not finish with
   \_
   Calling tralics -all works.
-  **[Version 1.7a, 2002-12-20]**
   ``\htmladdnormallinkfoot{x}{\url{y}}`` works.
   ``\label{foo-bar}`` and ``\label{foo+bar}`` are now distinct.
   Bug correction ``\begin{table}\begin{tabular}...`` is OK.
   Order of bibliographic references is not hard-coded.
   ``\includegraphics{foo:bar}`` is OK...
   Corrected a bug in the date (first month=0).
   Bug in simplemath (``$x$=$y$`` gave y=y).
   Bug in bibtex crossref management (copy of wrong thing).
   ``read_config_file`` : is OK now.
   *Tralics* accepts now empty input files.
   bug in etal....
   bug in ``\epsfig 3pt`` translated to ``3fil``.
   bug in ``\pers{...}{...}[{\sc xx}]`` strange scope.
   missing attribute, in last cell of a tabular.
   added ``\leavevmode`` before ``\begin{tabular}``.
   Problems with tables.
   ``\footcite`` puts a space before.

Version 1.6
-----------

-  [date unknown]
   Implementation of
   ``\@ifundefined, \@ifstar, \@ifnextchar, \typeout``.
   Added option interactivemath. This prints the formulas on the the
   screen. No file is read.
   Instead of a message like Undefined command \\eta; command code = 157
   you get Math only command \\eta. Missing dollar not inserted.
   Definition of ``\begin{sloppypar} ... \end{sloppypar}``.
   In an url, ``\~`` is converted to a ``~``.
   In an url, ``_`` is of catcode 13, and not 11, it is defined to be
   identical to ``\_``. (problem of ``toto\_titi_tata``).
   Definition of ``\epsfbox``.
   A construction like :literal:`$7^{\mbox{\scriptsize \it i\`{e}me}}$`
   works. It is like ``7\ieme``.
   Added ``\P``, it is like ``¶``.
   Added
   ``\line \put \bezier \qbezier \vector     \thicklines \thinlines \dashlike \drawline  \dotteline``.
   ``\begin{minipage}[][][]{} ... \end{minipage}`` is translated.
   Implementation of ``\begin{xmlelement} ... \end{xmlelement}``.
-  **Version 1.6b** [date unknown]
   Implementation of ``\hbox, \vbox, \xbox`` etc.
   Silly bug ``\def\foo\xbox{\foo}{}`` loops without end.
   Correction of bugs in a token list.
   Bug in ``<<~`` : superfluous space.
   Bug in ``\medskip\par\noindent``.
   Added ``\mbox, \fbox, \makebox, \framebox`` with the syntax of
   ``picture``.
   Added the ``picture`` environment.
   Added ``comment`` environnement.
   If the final brace ``\end{module}`` is missing *Tralics* does not say
   : Unexpected end of file but indicates the line containing the
   ``\end``.
   If you say ``\htmladdnormallink{toto}(titi)`` (parentheses instead of
   braces) the error will be: Invalid URL value.
-  **Version 1.6c** [date unknown]
   Bug correction: the second ``\par`` in ``\par toto \par titi`` was
   ignored (synchronisation problem).
   Added ``\let\debugfalse\relax``.
   Instead of putting the biblio in ``toto.bbl``, I put it in ``toto_.bbl``.
   Bug of ``\{`` and ``\}`` in math mode, not completely handled.
   Bug of ``\item[{\bf x}]``; braces disappear.
   Bug of ``\begin{Verbatim} [numbers=true]``; the test of optional
   argument is strange.
   Bug of ``\,`` among others in math mode; there is an unwanted
   ``<mo>``.
   Bug: editeur twice in case of @conference.
   Bug of ``\newcount{toto}[titi]``, the ``\let\cl@toto\@empty`` did
   ignore the reference count.
   Other bug in the biblio.
   ``$$toto$$titi`` inserts a ``\par\noindent``.
   If you say ``\newcommand{\Athapascan0}{ok}`` the error message will
   be Attempt to define: \\Athapascan 0, Error signaled at line 188:
   Only one token allowed in argument list.
   ``\moduleref[1539]{PROJET}{section}{module}`` is an error, because I
   don't know how to translate into English (Everybody knows Marignan
   1515).
-  **Version 1.6d** [date unknown]
   Implementation of ``\dotsc \dotsb \dotsi \dotsm`` it's like
   ``\dots``.
   ``\geqslant, \leqslant`` ok.
   [raweb-cfg.sty] ``\ell`` works fine.
   Added\ ``\let\href\htmladdnormallink``.
   ``\not=`` and ``\not\in`` work.
   [rawebfo.xsl] added ``separateur.objet`` in citation/xref.
   Problem of ``\href{\url{&}}{&}`` This is accepted by the translator,
   but conversion to Pdf fails.
   Environment ``cases`` implemented.
   [raweb-cfg.sty] problem with ``\item`` : bullet non centered if TeX
   decides to start a new page because of the \\penalty of the \\item.
   *Tralics* signals an error if a) you say ``\label{x} \label{x}``, b)
   you say ``\ref{x}`` without the associated ``\label``, c) you say
   ``\ref`` and the label disappears [thanks JB Pomet].
   ``a\over b`` gives ``<mfrac>`` rather than a ``<mover>`` [pb. I.
   Vatton].
   Added namespaces in math elements.
   Order of biblio references changed.
   Implementation of
   ``\input, \endinput, \IfFileExists, \InputIfFileExists``.
   Bug corrections: in ``\small``, nothing happened; in
   ``\setbox3=\hbox{}``, assignment was local;
   ``{\large \hbox{\small x}}`` gave an empty ``<large>`` in the hbox.
   ``\newcommand\foo{\begin{latexonly}...`` calls abort, instead of
   memory fault (project Trec).
   Some ``(Sans titre)`` disappear, other become ``(Sans Titre)``.

Version 1.5
-----------

-  [date unknown]
   ``\hspace`` allowed in maths. For instance ``$I\hspace{-0.1cm}R^n$``;
   Not bad in Pdf, not recognized by amaya.
   The file wmachin.cfg is not created if invalid (following a mail of
   Vincent Lefèvre).
   *Tralics* looks at the shell variable ``TRALICSDIR`` before
   ``RAWEBDIR``.
   *Tralics* copies catalog.src in catalog in the current working dir
   replacing ``source_directory`` by whatever needed (catalog.src is a
   new file, to be added in the package).
   ``\includegraphics{toto.ps}``, ``\includegraphics{a.b.c}`` are
   translated into ``<graphics file='toto'/> <graphics file='a.b.c'/>``.
   Correction of a silly bug for the Sharp Team.
   A second one.
   The error message Non character found in environment name: becomes
   Non-character found in \\includegraphics.
   (For the Sharp Team). Added a new error message that reads Things
   like {\'{}} are a bit strange (they use it for an apostrophe).
   Implementation of ``\uppercase``, \\\ ``lowercase``,
   ``\MakeUppercase``, ``\MakeLowercase``.
   Add/test of the commands
   ``\oe\OE\o\O\ae\AE\dh\DH\dj\DJ\l\L\ng\NG\ss\SS\th\TH`` (``\ng``,
   ``\NG`` do not work, ``\dj`` is strange).
   Problem ``\oe`` does not work in HTML.
   ``\mbox{\sc Vasy}`` is translated as ``{\sc Vasy}``.
   ``\begin{quote} ... \end{quote}`` is OK.
   Idem with ``flushleft`` and ``flushright``.
   ``\raggedleft`` ``\raggedright`` OK. (must modify rawebhtml.xsl and
   rawebfo.xsl).
   ``\begin{wrapfigure}{x}{y} ... \end{wrapfigure}`` is handled as
   ``\begin{figure}[x] ... \end{figure}``. (putting a figure near some
   text works only if somebody checks that the layout is OK).
   Silly bug. You should not see something like Checked 1 keyword env
   with 14 keywords (13 unique) because there are 15 words, all
   different.
   ``\ensuremath{\alpha}`` works.
   ``$\ensuremath{\beta}$`` puts too many braces, but there are other
   functions that do the same. Must correct this one day.


----

docs/cmds (Tralics-specific commands only)
------------------------------------------


----

docs/cmds/doc-a.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-addattributetoindex:

\\AddAttToIndex (Tralics command)
---------------------------------

If you say ``\AddAttToIndex[idx-name]{att-name}{att-val}``, this will
add an attribute pair to the index named idx-name, of the form
``att-name='att-val'``; see `\\index <doc-i.html#indexplus>`__ for an
example. An alternate name is ``\addattributetoindex``.

.. _cmd-addattributestodocument:

\\AddAttToDocument (Tralics command)
------------------------------------

The ``\AddAttToDocument`` command takes two arguments A and B. It adds
``A='B'`` to the attribute list of the document element. It is the same
as ``\XMLaddatt[1]{A}{B}``. Alternate names are
``\addattributetodocument`` or ``\addattributestodocument``. See
```\XMLaddatt`` <doc-x.html#cmd-XMLaddatt>`__.

.. _cmd-AddAttToCurrent:

\\AddAttToCurrent (Tralics command)
-----------------------------------

The ``\AddAttToCurrent`` command takes two arguments A and B. It adds
``A='B'`` to the attribute list of the current element. See the
```xmlelement`` <doc-x.html#cmd-xmlelement>`__ environment.
``\AddAttToCurrrent{X}{Y}`` is the same as ``\XMLaddatt{X}{Y}``. See
```\XMLaddatt`` <doc-x.html#cmd-XMLaddatt>`__.

.. _cmd-AddAttToLast:

\\AddAttToLast (Tralics command)
--------------------------------

The ``\AddAttToLast`` command takes two arguments A and B. It adds
``A='B'`` to the attribute list of the element created latest. See the
```xmlelement`` <doc-x.html#cmd-xmlelement>`__ environment. Note that
``\AddAttToLast{X}{Y}`` is the same as
``\XMLaddatt[\the\XMLlastid]{X}{Y}``. See
```\XMLaddatt`` <doc-x.html#cmd-XMLaddatt>`__.

.. _cmd-addnl:

\\@addnl (Tralics command)
--------------------------

This command inserts a new line character in the XML tree.

.. _cmd-anchor:

\\anchor (Tralics command)
--------------------------

The ``\anchor`` command defines an anchor. (see syntax below, under
``\anchorlabel``). Its translation is
``<anchor id='uid13' id-text='17'/>``, unless the current element is an
anchor. When you say ``\label{foo}`` the label is remembered with its
anchor, when you say ``\ref{foo}``, a reference to the anchor is
generated. By default an anchor is associated to each section, figure,
table, footnote, item, formula, etc, and the ``\anchor`` command is
generally useless. In *Tralics* anchors are characterized by their id (a
unique string is used instead of xx), and there is a table that
associates the name ``foo`` and the id. At the end of the document, an
error is signalled for missing anchors. Since version 2.13.2, each
anchor has an id-text. If the anchor comes from, say an equation, the
id-text is the value of ``\theequation`` (after the equation counter has
been updated). A unique number is used in the case of ``\anchor``,
unless an optional argument is given.

When the XML document is converted to HTML or pdf, or whatever, the
translation of the ``\ref`` is in general the following: the element
referenced to by the id is fetched, and used to produce a value, for
instance the section number, the figure number, the footnote number,
etc. In general, the number of predecessors are counted.

In the case of ``\pageref{foo}``, you expect to see the page number
where the label is defined; in LaTeX, this is achieved as follows: each
label prints a line in the aux file, with two items: the first contains
the value used by ``\ref``, and the second the value used by
``\pageref`` (namely the page number). Two passes are required for the
compilation. More information is printed if you use the hyperref
package, because links can be active; in some cases, this does not work
well, because the anchor is not on the same page as the label.

The effect of ``\index{bar}`` is the following: add an anchor to the
current point, and construct a sorted index at the end of the document
with a reference to the anchor. Traditionally, this is a ``\pageref``
(if the word is referenced more than once on the same page, only a
single page number is shown). In *Tralics*, an active link is created.
You could write the ``\index`` command using TeX macros (the non-trivial
point is how to sort; it is not guaranteed that the ordering is the same
as that of the makeindex program). For this reason, you can use
``\anchor`` and ``\pageref``.

We recommend to put the label as near as possible to the anchor. This is
mainly because the scope of the anchor is not well defined; in LaTeX,
the value used by ``\pageref`` is, as said above, the page number of the
page containing the label, but ``\ref`` uses the content of a macro
(that is local to the current environment). Additional parameters used
by hyperref behave in a similar way. Equation numbers and the like are
globally incremented. In *Tralics*, anchors are local to the current
element. For instance, if you start a figure (via ``\begin{figure}``),
an anchor is created, it becomes the current anchor, until you close the
figure element via ``\end{figure}``. This anchor is independent of any
``\caption`` present in the environment or elsewhere.

.. _cmd-anchorlabel:

\\anchorlabel (Tralics command)
-------------------------------

This command essentially behaves like ``\anchor`` followed by
``\label``. Both commands ``\anchor`` and ``\anchorlabel`` take an
optional argument, preceded by an optional star; ``\anchorlabel`` takes
a mandatory argument. See example below. Each call increments a counter.
Assume that the counter is 17. This will be the default value of the
optional argument. Each anchor has a unique id, of the form uid13. If
the last constructed XML element is not an anchor, then ``\anchor`` will
construct ``<anchor id='uid13'   id-text='17'/>``, and the next label
will refer to this element. If the last constructed XML element is an
anchor, no new anchor is created (example on the first line). If the
command is followed by a star, the two attributes
``id='uid13' id-text='17'`` will be added to the current XML element (in
the example below, the paragraphs). In a previous version, you say
``\ref{aid17}`` and it worked; this feature has been removed since it is
has to know the number 17, and the code is commented out; on the other
hand ``\anchorlabel`` creates a label that points to this anchor. Note
that the scope of the anchor is limited to the current element. For
instance ``\label{zz}`` is out of scope. *Tralics* generates no error,
but uses uid1 in this case. If you remove the percent characters on the
first line, the translation will be the same, except that the section
will create a ``<div0 id-text='1' id='cid1'>`` element, which will
become the anchor of ``\label{zz}``.

.. container:: ltx-source

   ::

      %%  \section{aaa}
      xx \anchor[foo]\anchor[foo2]\\label{a}
      yy \anchor*[bar]\label{b}
      \ref{a}\ref{b} %\ref{aid1}

      zz\label{zz}\ref{zz}\anchor

      xx \anchorlabel{a2}
      yy \anchorlabel*[bar]{b2}
      \ref{a2}\ref{b2}%\ref{aid2}

.. container:: xml_out

   ::

      <p id-text='bar' id='uid2'>xx <anchor id-text='foo' id='uid1'/>
      yy 
      <ref target='uid1'/><ref target='uid2'/></p>
      <p>zz<ref target='uid1'/><anchor id-text='4' id='uid3'/></p>
      <p id-text='bar' id='uid5'>xx <anchor id-text='5' id='uid4'/>
      yy 
      <ref target='uid4'/><ref target='uid5'/></p>

Since version 2.15.4, *Tralics* refuses to put an equation number to
math formulas introduced by ``$``, ``$$``, ``\[``,
``\begin{equation*)``, etc. In this case, you can use ``\anchorlabel``;
this will add an anchor to the ``<formula>`` element. On the other hand
``\anchorlabel*`` is allowed anywhere (and more than once) in every math
formula. The anchor should be associated to the current MathML element,
but this is not yet possible, so an empty ``<mrow>`` serves as anchor.
The command ``\anchor`` is illegal in math mode.

.. container:: ltx-source

   ::

      $x\anchorlabel{l1}$
      \[x\anchorlabel[a2]{l2}\]
      \[ \frac{x\anchorlabel*[num]{l3}}{x\anchorlabel*[den]{l4}}  \]
      \ref{l1}\ref{l2}\ref{l3}\ref{l4}

.. container:: xml_out

   ::

      <p>
        <formula id-text='1' id='uid1' type='inline'>
          <math xmlns='http://www.w3.org/1998/Math/MathML'>
            <mi>x</mi></math>
        </formula>
      </p>
      <formula id-text='a2' id='uid2' type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mi>x</mi>
        </math>
      </formula>
      <formula type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mfrac>
            <mrow><mi>x</mi><mrow id-text='num' id='uid3'/></mrow>
            <mrow><mi>x</mi><mrow id-text='den' id='uid4'/></mrow>
          </mfrac>
        </math>
      </formula>
      <p noindent='true'><ref target='uid1'/><ref target='uid2'/><ref target='uid3'/><ref target='uid4'/></p>

.. _cmd-aparaitre:

\\aparaitre (Tralics command)
-----------------------------

The ``\aparaitre`` command translates into ``à paraître`` or
``to appear`` depending on the current language.


----

docs/cmds/doc-b.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-bauthors:

\\bauthors, \\beditors (Tralics command)
----------------------------------------

The two commands ``\bauthors`` and ``\beditors`` translate their
argument, and put the result is a element of the same name. See
```\citation`` <doc-c.html#cmd-citation>`__ for details. These commands
are produced when translating the bibliography, in this case the
argument is a list of ``\bpers`` commands.

.. _cmd-begintheorem:

\\@begintheorem
---------------

Private Tralics command.

.. _cmd-bibitem-empty:

\\bibitem@empty (Tralics command)
---------------------------------

You can say ``\bibitem@empty{foo}``, this will signal an error because
the command has been withdrawn.

.. _cmd-bpers:

\\bpers (Tralics command)
-------------------------

This command is used for an author or editor in a bibliography. It takes
one optional and four required arguments (first name, initials,
particle, last name, junior name). For an example, see
```\citation`` <doc-c.html#cmd-citation>`__. Here the arguments of the
command are ``\bpers[David]{D.}{}{Carlisle}{}``, from the database value
'David Carlisle'. The translation is a ``<bpers>`` element, with five
attributes (in the case of particle and junior, no attribute is created
if the field is empty, so that the effective number of attributes is
between three and five). An example is
``<bpers prenom='D.'  nom='Carlisle' prenomcomplet='David'/>``.


----

docs/cmds/doc-c.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-cellattribute:

\\cellattribute (Tralics command)
---------------------------------

If you say ``\cellattribute{columnalign}{left}``, this adds the
attribute pair ``columnalign='left'`` to the current cell. The command
can be used only in math mode; you should not use this command outside a
table (or a construction like the align environment that produces a
table). For an example of use, see
```\mathattribute`` <doc-m.html#cmd-mathattribute>`__.

.. _cmd-changeelementname:

\\ChangeElementName (Tralics command)
-------------------------------------

The default translation of ``\pagereref{here}`` has the form
``<ref target='uid2' rend='page'/>`` You can change it to
``<Ref target='uid2' rend='Page'/>`` by either adding a declaration in
the configuration file (the first three lines shown here produce the
same effect):

.. container:: ltx-source

   ::

      xml_ref_name="Ref"
      xml_ref="Ref"
      elt_ref="Ref"
      att_page="Page"

or by adding a declaration in the source file, as shown here. There is
no prefix such as 'elt or 'att'. The starred version changes the
attribute name, the unstarred one changes the element name.

.. container:: ltx-source

   ::

      \ChangeElementName{ref}{Ref}
      \ChangeElementName*{page}{Page}

There are are items in the configuration file that do not start with one
of those prefixes; the value cannot be changed in the TeX file. In some
cases, setting a value in the configuration file is equivalent to
specifying an argument to the Tralics program, in this case the behavior
is explained in `Options of the tralics command <raweb.html#options>`__,
otherwise follow links.

-  The values lang_fr and lang_en can be used to change the value of the
   language attribute of the main element, in case it is used.
-  The value distinguish_refer_in_rabib must be true, false, yes or no;
   it is specific to the raweb, you can use an option (with the same
   name) to the program instead.
-  The effect of entity_names="foo" is the same as calling the program
   with option entnames=foo
-  The effect of alternate_item=true/false is to change the ``\item``
   command, see `\\@item <doc-i.html#cmd-at-item>`__.
-  The effect of url_font is to provide a default value for
   ```\urlfont`` <doc-u.html#cmd-url-font>`__.
-  The effect of everyjob is to set
   ```\everyjob`` <doc-e.html#cmd-everyjob>`__.
-  The effect no_footnote_hack=true/false is to modify the behavior of
   ```\footnote`` <doc-f.html#cmd-footnote>`__.
-  The effect use_font_elt=true/false use_all_sizes=true/false
   pack_font_att=true/false is to modify the translation of font
   changing commands like ```\rm`` <doc-r.html#cmd-rm>`__, see also
   ```\fontencoding`` <doc-f.html#cmd-ltfont>`__.
-  The effect of bibtex_fields=L and bibtex_extensions=L is to extend
   the list of bibliography fields or entry types with values from the
   space-separated list L.
-  The effect mfenced_separator_val="value" is to add
   ``separators='value'`` as attribute pair in a ``<mfenced/>`` element.
   Special case: if value is NONE, no attribute is added, if value is
   mrow, then a ``<mrow/>`` element is added to the math formula so that
   separators become useless.
-  Setting theme_vals, ur_vals, section_vals, fullsection_vals,
   affiliation_vals, profession_vals is meaningful only in Raweb mode,
   and modifying the values is only allowed for the Raweb Team. See
   `Configuration file for the raweb <raweb.html#conffile>`__ for
   details.
-  The effect of mml_font_normal ="foo" is to change the name of the
   normal math font in no-MathMl mode; there are 15 such fonts, see
   `math fonts <doc-m.html#cmd-mmlfont>`__ for details.
-  Setting makefo, makehtml, checkxml, makepdf, makedvi, dvitops,
   generatedvi, generateps is obsolete.

.. _cmd-citation:

\\citation (Tralics command)
----------------------------

The ``\citation`` command is used by *Tralics* to start a bibliographic
reference. In general, the command is created by *Tralics* from a bib
file. Let's consider this reference to the MathML Web page.

.. container:: ltx-source

   ::

      @Misc{mathml2,
        author =  {David Carlisle and 
                   Patrick Ion and
                   Robert Miner and
                   Nico Poppelier},
        title =    {Mathematical Markup Language (MathML) Version 2.0},
        howpublished = {http://www.w3.org/TR/MathML2/},
        year =     {2001},
      }

It will be translated by *Tralics* into this piece of LaTeX code.

.. container:: ltx-source

   ::

      \citation{CIMP01}{cite:mathml2}{bid4}{year}{misc}
      \bauthors{\bpers[David]{D.}{}{Carlisle}{}
        \bpers[Patrick]{P.}{}{Ion}{}\bpers[Robert]{R.}{}{Miner}{}
         \bpers[Nico]{N.}{}{Poppelier}{}}
      \cititem{btitle}{Mathematical Markup Language (MathML) Version 2.0}
      \cititem{bhowpublished}{http://www.w3.org/TR/MathML2/}
      \cititem{byear}{2001}
      \endcitation

The ``\citation`` command takes 5 parameters. The first argument is the
printed key. This is computed by *Tralics* as the initials of the
authors, plus two digits of the year (in some cases, it can be a number,
from one to N). The next argument is the cite key (note that
``\cite{foo}`` wants a citation with ``cite:foo``). The next argument is
a unique ID (*Tralics* uses ``bid`` plus an integer). Then comes a
string that is used for the Raweb (`year' is the default, but it can be
\`foot' or \`refer'). The last argument is a string (*Tralics* uses the
bibtex type of the entry). After this fifth argument, there can be an
optional argument that is ignored. The translation of ``\citation`` is a
``<citation>`` element with all the arguments as attributes. Here is the
translation of the previous entry.

.. container:: xml_out

   ::

      <citation from='year' key='CIMP01' id='bid4' userid='cite:mathml2' type='misc'>
      <bauteurs><bpers prenom='D.'  nom='Carlisle' prenomcomplet='David'/>
        <bpers prenom='P.' nom='Ion'  prenomcomplet='Patrick'/>
        <bpers prenom='R.' nom='Miner' prenomcomplet='Robert'/>
        <bpers prenom='N.' nom='Poppelier'  prenomcomplet='Nico'/>
        </bauteurs>
      <btitle>Mathematical Markup Language (MathML) Version 2.0</btitle>
      <bhowpublished>http://www.w3.org/TR/MathML2/</bhowpublished>
      <byear>2001</byear>
      </citation>

.. _cmd-citepunct:

\\citepunct (Tralics command)
-----------------------------

This command is used as separator for citations. Its default value is
comma-space.

.. _cmd-citeone:

\\cite@one (Tralics command)
----------------------------

The ``\cite@one{X}{Y}{Z}`` command is an internal command for citations.
There are three arguments: type, ref and text. The translation is a
single ``<cit>`` element. The value of the element is a ``<ref>``
element, whose ``target`` attribute points to an element created by the
``\citation`` command, according to the type and ref arguments (see also
`2.8.3 Bibliography and the raweb <raweb.html#rabib3>`__). Its value is
the translation of the text argument. In the case where the type is
“foot”, then ``rend='foot'`` is added to the attribute list of the
``<cit>`` element.

.. _cmd-citesimple:

\\cite@simple (Tralics command)
-------------------------------

Translation of ``\cite@simple{Knuth}`` is ``<ref target='xx'/>``.

.. _cmd-citetype:

\\cite@type, \\cite@@type (Tralics command)
-------------------------------------------

If ``\cite@@type`` is defined, it should be a command without arguments,
whose translation is only text; this text is added by ``\cite@one`` to
the attribute list of the current element, with name 'type'. [What
follows applies to version before 2.12.1] In the file natbib.plt v1.0,
we defined ``\def\cite@type#1#2{{\def \cite@@type {#1} \cite{#2}}}``,
and ``\def\citeyear{\cite@type{year}}``. Thus, ``\citeyear`` is like
``\cite``, but it takes no optional argument. Each ``<cit>`` element has
the attribute ``type='year'``.

.. _cmd-cititem:

\\cititem (Tralics command)
---------------------------

The ``\cititem`` command takes two arguments, the first is a character
string, that should be a valid XML element name, the second argument is
the content of this element; for usage, see
```\citation`` <doc-c.html#cmd-citation>`__. The translation of
``\cititem{foo}{bar}`` is ``<foo>bar</foo>``. The command is allowed
only in bibtex mode (say, inside a ``citation`` environment). However,
if ``\cititem-foo`` is defined (and not ``\relax``), this command is
called with argument ``bar``, and can be used, whatever the context.


----

docs/cmds/doc-e.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-endcitation:

\\endcitation (tralics command)
-------------------------------

This command is used to finish a citation, see
```\citation`` <doc-c.html#cmd-citation>`__.

.. _cmd-endsec:

\\endsec (tralics command)
--------------------------

If you say ``\endsec{\section}``, the effect is to end the current
section. The argument can be one of:
``\part \chapter \section  \subsection \subsubsection \paragraph \subparagraph``,
anything else (included an empty argument) is replaced by ``\part``. No
new section is started.

.. _cmd-endtheorem:

\\@endtheorem
-------------

Private Tralics command.

.. _cmd-everybibitem:

\\everybibitem (Tralics command)
--------------------------------

When you say ``\everybibitem{\foo\bar}``, the token list ``\foo\bar`` is
inserted whenever *Tralics* produces a new bibliography item, namely
after ``\bibitem`` and ``\citation``.

.. _cmd-everyxbox:

\\everyxbox (tralics command)
-----------------------------

You can say ``\everyxbox={\foo\bar}``. After that, the token list
``\foo\bar`` is inserted in the input stream whenever a ``\xbox`` is
created (just after the open brace has been read). See
```\everyhbox`` <doc-e.html#cmd-everyhbox>`__ for an example. See
`scantoks <doc-s.html#fct-scantoks>`__ for the syntax.


----

docs/cmds/doc-f.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-f:

\\f (tralics command)
---------------------

The command ``\f`` produces an inverted breve accent. Example.

.. container:: ltx-source

   ::

      \f A \f a \f E \f e \f I \f i \f O \f o \f R \f r \f U \f u

The translation is

.. container:: xml_out

   ::

      &#514; &#515; &#518; &#519; &#522; &#523; 
      &#526; &#527; &#530; &#531; &#534; &#535;

Preview |f accent|, HTML characters: Ȃ ȃ Ȇ ȇ Ȋ ȋ Ȏ ȏ Ȓ ȓ Ȗ ȗ.

.. _cmd-footcite:

\\footcite (Tralics command)
----------------------------

The ``\footcite`` command is like ``\cite`` except that the ``<cit>``
elements have a ``rend='foot'`` attribute. Moreover, *Tralics* adds the
``footcite`` prefix instead of the ``cite`` prefix before the citation
key (it is designed for use with a second bibliography data base, as is
the case in the RaWeb). See ```\cite`` <doc-c.html#cmd-cite>`__.

The argument of ``\footcite`` is a sequence of citations. Each one is
handled by the ``\cite@one`` command; If more than one citation are
given, they are separated by the evaluation of ``\footcitesep``; the
first one is preceded by the evaluation ``\footcitepre``.

.. _cmd-footcitepre:

\\footcitepre (Tralics command)
-------------------------------

People generally say ``Text\footcite{blah}``, like
``Text\footnote{blah}``, without any space, because ``\footcite`` is
assume to produce a footnote; but this is not always the case; for this
reason, the command ``\footcitepre`` is evaluated before insertion of
the XML element associated to the citation. The default behavior is the
following: if the last object on the XML tree is a normal or
non-breaking space, nothing happens; otherwise, if the object is not an
opening parenthesis, a space will be added.

.. _cmd-footcitesep:

\\footcitesep (Tralics command)
-------------------------------

The ``\footcitesep`` is added between two citations in a ``\footcote``.
The expansion is comma-space.


----

docs/cmds/doc-g.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-grabenv:

\\grabenv (Tralics command)
---------------------------

Inside an environment, you can say ``\grabenv\foo``; in this case,
*Tralics* will collect all tokens until finding the end of the
environment, and put them (globally) in the command ``\foo``. In the
following example, the last line produces two errors, because because
``\grabenv`` is not followed by a valid command name and is outside an
environment.

.. container:: ltx-source

   ::

      \newenvironment {simple}{A}{B} 
      \newenvironment {grab}{C}{D\grabbed} 

      Test grabenv
      \begin{grab}x\grabenv\grabbed \begin{simple}yz\end{simple}t\end{grab}
      \grabbed=\grabenv.OK

.. container:: xml_out

   ::

      Test grabenv
      CxDAyzBt
      AyzBt=<error n='\grabenv' l='180' c='bad definition'/><error n='\grabenv' l='180' c='\grabenv must be used in an environment'/>OK.


----

docs/cmds/doc-h.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-hlinee:

\\hlinee (Tralics command)
--------------------------

The ``\hlinee`` command is an extension of ``\hline``, and ``\cline``;
it takes four arguments ``spec``, ``above``, ``below`` and ``width``.
The first first argument is empty or a range (from 3 to 4 in the example
below); the other arguments are dimensions; the effect is to add a rule
of the given width to the cells specified by the range on the current
row (or to the row, if no range is given). The user may indicate that
there is some space below or above the rule. The command should be given
at the start of the table or after a ``\\``, in which case there will be
a top rule on the first row, or a bottom rule otherwise; moreover, there
will be an attribute indicating the width, in the form
``border-top-width='3pt'`` or ``border-bottom-width='3pt'``. Note the
special hack; when looking for a rule, *Tralics* expands the next
command; if it has the form ``\@ifnextchar wAB``, the command is
evaluated, replaced by one of A and B, and the result is checked again.

.. container:: ltx-source

   ::

      \begin{tabular}{llll}
      \hlinee{}{}{}{5pt} a&b&c&d\\\hlinee{}{}{}{6pt} \hlinee{3-4}{}{}{7pt}
      \end{tabular}

      \begin{tabular}{llll}
      \hlinee{}{1pt}{2pt}{5pt} a&b&c&d\\\hlinee{}{3pt}{4pt}{6pt} \hlinee{3-4}{-1pt}{-2pt}{7pt}
      \end{tabular}

.. container:: xml_out

   ::

      <table rend='inline'><row border-bottom-width='6.0pt' bottom-border='true' border-top-width='5.0pt' top-border='true'>
      <cell halign='left'>a</cell>
      <cell halign='left'>b</cell>
      <cell border-bottom-width='7.0pt' bottom-border='true' halign='left'>c</cell>
      <cell border-bottom-width='7.0pt' bottom-border='true' halign='left'>d</cell>
      </row></table>

      <table rend='inline'><row bottom_rule_space_below='4.0pt'
          bottom_rule_space_above='3.0pt' border-bottom-width='6.0pt'
          bottom-border='true' top_rule_space_below='2.0pt' top_rule_space_above='1.0pt'
          border-top-width='5.0pt' top-border='true'>
      <cell halign='left'>a</cell>
      <cell halign='left'>b</cell>
      <cell bottom_rule_space_below='-2.0pt' bottom_rule_space_above='-1.0pt' 
          border-bottom-width='7.0pt' bottom-border='true' halign='left'>c</cell>
      <cell bottom_rule_space_below='-2.0pt' bottom_rule_space_above='-1.0pt' 
         border-bottom-width='7.0pt' bottom-border='true' halign='left'>d</cell>
      </row></table>


----

docs/cmds/doc-i.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-ifempty:

\\@ifbempty \\@iftempty (Tralics commands)
------------------------------------------

These two commands take 3 arguments, L, A, B they evaluate A if L is
empty, and B otherwise. The command ``\@ifbempty`` removes blank spaces
in its first argument; the command ``\@iftempty`` does nothing special,
it could be defined as

.. container:: ltx-source

   ::

      \long \def \@iftempty#1{%
        \ifx @#1@%
        \expandafter \@firstoftwo \else
        \expandafter \@secondoftwo \fi
      }

The two commands ``\@firstoftwo`` and ``\@secondoftwo`` are implemented
in Tralics version v2.7 (the code is trivial, see below); thanks to the
``\expandafter`` they are evaluated after the ``\fi``, this allows
arguments A and B to be commands that read some arguments. The
definition that follows comes from amsart, it matches the semantics of
the *Tralics* command ``\@ifbempty`` (which is more efficient, since it
uses a C++ command for testing that the token list contains only
spaces).

.. container:: ltx-source

   ::

      \let\@xp=\expandafter
      \def\@firstoftwo#1#2{#1}
      \def\@secondoftwo#1#2{#2}

      \long\def\@ifempty#1{\@xifempty#1@@..\@nil}
      \long\def\@xifempty#1#2@#3#4#5\@nil{%
        \ifx#3#4\@xp\@firstoftwo\else\@xp\@secondoftwo\fi}

The behavior of this code is the following. We take the first argument,
append two at-sign characters, two dots, and a special token, then read
everything up to the special token. You lose if the special token
appears in the argument. Otherwise, the first token is discarded, the
test is: are the two tokens after the first at-sign the same. Case one,
the argument is empty: we discard the first at-sign, compare the two
dots, and the test is true. Case two: there is no at-sign in the first
argument, the test compares the at-sign and the dot, the test is false.
Case three: there is an at-sign in the argument, and the result may be
unexpected. Notice that category codes have to match; the at-sign in
``\@xifempty`` has category letter (otherwise the command name is
illegal), so the macro has the correct behavior if it contains normal
(non-letter) at-sign characters.

Note that when the outer macro calls the inner one, a pair of braces can
be removed, so that, if the argument is ``{ }``, only the space is
transmitted, and then ignored when the inner macro looks for the first
argument (since this is an undelimited argument).

.. _cmd-InputClass:

\\InputClass (Tralics extension)
--------------------------------

You can use commands like ``\DeclareOption``, this adds an option to the
current class or package, and the command has no effect outside a class
or package. If you say ``\InputClass{foo}``, *Tralics* will input the
file foo.clt, and the content is considered to be part of the current
class file.

.. _cmd-insertbibliohere:

\\insertbibliohere (Tralics command)
------------------------------------

This command defines a location in the XML tree where *Tralics* will
insert the bibliography. For details see section `2.8
Bibliography <raweb.html#rabib>`__ of the raweb documentation.

.. _cmd-at-item:

\\@item, \\@@item (Tralics command)
-----------------------------------

The ``\item`` command is normally bound to ``\@@item`` but can be
changed to ``\@item``, either by using ``\let`` in the tex file or
alternate_item="true" in the configuration file. The difference lies in
the translation of the optional argument

The default rule is: an optional argument to the ``\item`` command
produces a ``<label>`` element, and in a list, you should either use no
optional argument, or provide an optional argument for every item. If
you change ``\item`` to ``\@item``, this gives the following behavior:
an optional argument produces a ``label`` attribute, and translation of
``\item`` is always a single element. This forbids using math formulas
in the optional argument (for instance ``\item[$\bullet$]`` won't work).

A rule of thumb is: optional arguments are useless for ``itemize``,
mandatory for ``description``, and automatic for ``enumerate``. Here
automatic means: the labels a, b, c may be computed by *Tralics*, the
XML to HTML converter, or the web browser, or whatever. These labels
were not computed by early versions of *Tralics*. In the current
version, in the case of ``description``, the label is computed (unless
explicitly given), and produces an attribute (this means that using
``\fnsymbol`` for producing the label will produce an error, since it
generates math expressions). The command ``\enumi@hook`` (its name
depends on the enumeration level) is executed (if defined) at the start
of the environment. In the example that follows it adds an attribute to
the current element (the list). Note that the hook is executed after
``\@itemlabel`` has been redefined to ``\theenumi``, it can locally
redefine this variable.

.. container:: ltx-source

   ::

      \makeatletter
      \let\item\@item
      \newcounter{Ctr}
      \def\enumii@hook{\AddAttToCurrent{list-counter}{Roman}}
      \begin{list}{(\theCtr)}{HEY!\usecounter{Ctr}}

      \item[a] bla bla
      \item ble ble 
      \item blu blu
      \begin{enumerate}
      \item e1
      \item e2
      \def\@itemlabel{[\theenumi]}
      \item e3
      \item
      \begin{enumerate}\def\@itemlabel{[\theenumi,\theenumii]}
      \item i1 
      \item i2 
      \item[foo] i3 
      \item i4
      \end{enumerate}
      \item e5
      \end{enumerate}
      \item bli bli
      \end{list}

Translation

.. container:: xml_out

   ::

      <list type='description'><p>HEY!</p>
        <item id-text='1' id='uid11' label='a'><p noindent='true'>bla bla</p>
        </item>
        <item id-text='2' id='uid12' label='(2)'><p noindent='true'>ble ble</p>
        </item>
        <item id-text='3' id='uid13' label='(3)'>
        <p noindent='true'>blu blu</p>
        <list type='ordered'>
          <item id-text='1' id='uid14' label='(1)'><p noindent='true'>e1</p>
          </item>
          <item id-text='2' id='uid15' label='(2)'><p noindent='true'>e2</p>
          </item>
          <item id-text='3' id='uid16' label='[3]'><p noindent='true'>e3</p>
          </item>
          <item id-text='4' id='uid17' label='[4]'>
            <list list-counter='Roman' type='ordered'>
              <item id-text='4a' id='uid18' label='[4,a]'><p noindent='true'>i1</p>
              </item>
              <item id-text='4b' id='uid19' label='[4,b]'><p noindent='true'>i2</p>
              </item>
              <item id-text='4c' id='uid20' label='foo'><p noindent='true'>i3</p>
              </item>
              <item id-text='4d' id='uid21' label='[4,d]'><p noindent='true'>i4</p>
              </item>
            </list>
            </item>
            <item id-text='5' id='uid22' label='[5]'><p noindent='true'>e5</p>
            </item>
        </list>
        </item>
        <item id-text='4' id='uid23' label='(4)'><p noindent='true'>bli bli</p>
        </item>
      </list>


----

docs/cmds/doc-m.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-mathattribute:

\\mathattribute (Tralics command)
---------------------------------

The ``\mathattribute`` command can only be used in math mode. It takes
two arguments X and Y and adds X=Y to the attribute list of the last
constructed XML element. (See also ```mathmo`` <#cmd-mathmo>`__ and
```\@nomathml`` <doc-n.html#cmd-nomathml>`__). Example. The following
command creates an operator that behaves like ``\min``.

.. container:: ltx-source

   ::

      \providecommand\operatorname[1]{%
        \mathmo{#1}%
        \mathattribute{form}{prefix}%
        \mathattribute{movablelimits}{true}%
      }
      \def\Dmin{\operatorname{dmin}}
      $\min _xf(x) >\Dmin _xf(x)$.

Translation

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mrow>
         <msub><mo movablelimits='true' form='prefix'>min</mo> <mi>x</mi> </msub>
         <mrow><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>&gt;</mo></mrow>
         <msub><mo movablelimits='true' form='prefix'>dmin</mo> <mi>x</mi> </msub>
         <mrow><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow>
        </mrow>
       </math>
      </formula>

If your browser supports MathML, you can see the translation
`here <mml_ex.html#math2>`__

There are five other commands, that add an attribute pair to the current
formula, the current math element, the current table, the current row,
or the current cell; the next example shows how to add a tag attribute
to the formula, a background attribute to the math, a color to the
table, a mathvariant attribute to the first row, and to align the first
cell of the last column to the left (default is right align).

.. container:: ltx-source

   ::

      \begin{align}
      \formulaattribute{tag}{8-2-3}
      \thismathattribute{background}{white}
      \tableattribute{color}{black}
      \rowattribute{mathvariant}{bold} x^2 + y^2+100 &=  z^2 \\
      \cellattribute{columnalign}{left}  x^3 + y^3+1 &<  z^3
      \end{align}

Translation; for simplicity we have replaced some cell contents by XY2,
XY3, Z2 and Z3

.. container:: xml_out

   ::

      <formula id-text='mid1' id='uid1' textype='align' type='display' tag='8-2-3'>
        <math xmlns='http://www.w3.org/1998/Math/MathML'  
                  mode='display'  background='white'>
          <mtable displaystyle='true'  color='black'>
            <mtr mathvariant='bold'>
              <mtd columnalign='right'><mrow> XY2</mrow></mtd>
              <mtd columnalign='left'><mrow><mo>=</mo>Z2</mrow></mtd>
            </mtr>
            <mtr>
             <mtd columnalign='left'><mrow>XY3</mrow></mtd>
             <mtd columnalign='left'><mrow><mo>&lt;</mo>Z3</mrow></mtd>
           </mtr>
          </mtable>
        </math>
      </formula>

.. _cmd-mathbox:

\\mathbox (Tralics command)
---------------------------

| The ``\mathbox`` command can only be used in math mode. It takes too
  arguments, A and B, constructs an element named A that contains B; The
  second argument is evaluated inside a group. You can add attributes,
  either by placing ```\mathattribute`` <#cmd-mathattribute>`__ after
  the command, or by putting the attribute pair between A and B.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathci:

\\mathci (Tralics command)
--------------------------

| The ``\mathci`` command can only be used in math mode. It typesets its
  argument as a ``<ci>`` element. Translation of
  ``$\mathci{xy}\mathrm{ab}\mathmi{cd}$`` is
  ``<ci>xy</ci> <mi> ab </mi>  <mi>cd</mi>``.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathcn:

\\mathcn (Tralics command)
--------------------------

| The ``\mathcn`` command can only be used in math mode. It typesets its
  argument as a ``<cn>`` element. Translation of
  ``\mathcn{12}=13=\mathmn{14}`` is
  ``<cn>12></cn> <mo>=</mo><mn>13></mn> <mo>=</mo><mn>14</mn>``.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathcnothing:

\\mathcnothing (Tralics command)
--------------------------------

| The ``\mathcnothing`` command can only be used in math mode. It
  typesets its argument as a character string element. For instance
  ``$\mathcnothing{123}$`` translates to ``123``. In all other cases,
  digits are replaced by a ``<mn>`` element.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathcsymbol:

\\mathcsymbol (Tralics command)
-------------------------------

| The ``\mathcsymbol`` command can only be used in math mode. It
  typesets its argument as a ``<csymbol>`` element. Translation of
  ``$\mathcsymbol{xy}\sin\mathmo{cd}$`` is
  ``<csymbol>xy</csymbol><mo form='prefix'>sin</mo><mo>cd</mo>``.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathmi:

\\mathmi (Tralics command)
--------------------------

| The ``\mathmi`` command can only be used in math mode. It typesets its
  argument as a ``<mi>`` element. Translation of
  ``$\mathci{xy}\mathrm{ab}\mathmi{cd}$`` is
  ``<ci>xy</ci> <mi> ab </mi>  <mi>cd</mi>``.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathmn:

\\mathmn (Tralics command)
--------------------------

| The ``\mathmn`` command can only be used in math mode. It typesets its
  argument as a ``<mn>`` element. Translation of
  ``\mathcn{12}=13=\mathmn{14}`` is
  ``<cn>12></cn> <mo>=</mo><mn>13></mn> <mo>=</mo><mn>14</mn>``. This
  can be useful if you want ``1.2`` to be considered as a number, rather
  than two numbers separated by a dot operator.
| |See...| See also ```mathmo`` <#cmd-mathmo>`__.

.. _cmd-mathmo:

\\mathmo (Tralics command)
--------------------------

The ``\mathmo`` command can only be used in math mode. It typesets its
argument as a ``<mo>`` element. Only characters are allowed in the
argument. Use :literal:`\\char`\$` if you a dollar character.
Translation of ``$\mathcsymbol{xy}\sin\mathmo{cd}$`` is
``<csymbol>xy</csymbol><mo form='prefix'>sin</mo><mo>cd</mo>``.

[obsolete remark: Outside math mode, you can say
``\xmllatex{\&\#x125;}{}``, and this allows you to access every Unicode
character. It is invalid in math mode; you cannot use ``\mathchar"125``
either. But you can use ``\mathmo{\&\#x125;}``, the result is a ``<mo>``
element.] There is still the possibility to insert an unescaped
amperesanr characater in the XML tree, by makei it of category code
letter. In all other cases the translation of an ampersand character,
:literal:`\\char`\&` or :literal:`\\char`&`, is an ampersand character.

Example.

.. container:: ltx-source

   ::

      %{\lccode`A=`&\lowercase{\xdef\amp{A}}}  % Standard definition of \amp 
      $\mathmi{\amp\#x3B1;} \mathmn{\amp alpha;} \mathmo{\amp\#945;}$
      $é\char`\é ^^^^abcd\char`\^^^^abcd\&\#\amp$

Translation

.. container:: xml_out

   ::

      <formula type='inline'>
       <math xmlns='http://www.w3.org/1998/Math/MathML'>
        <mrow><mi>&#x3B1;</mi><mn>&alpha;</mn><mo>&#945;</mo></mrow>
       </math>
      </formula>
      <formula type='inline'>
        <math xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow><mi>é</mi><mi>é</mi><mi>&#xABCD;</mi><mi>&#xABCD;</mi>
           <mo>&amp;</mo><mo>#</mo><mo>&</mo>
          </mrow>
       </math>
      </formula>

The commands ``\mathmn``, ``\mathmi``, ``\mathmo``, ``\mathci``,
``\mathcn``, ``\mathcsymbol`` ``\mathcnothing`` and ``\mathbox`` take
some optional arguments (in the case of ``\mathbox``, there are given
after the element name). If an odd number of optional arguments are
given, the last one is discarded. If the remaining arguments are A1, V1,
A2, V2, etc, then A1=V1, A2=V2, etc, is added to the attribute list of
the element. This example shows how to produce a complex number using
MathML content markup.

.. container:: ltx-source

   ::

      $\mathbox{cn}[type][complex-cartesian][id][id13]
        {\mathcnothing{3}\mathbox{sep}{}\mathcnothing{4}}$

Translation

.. container:: xml_out

   ::

      <formula type='inline'>
        <math xmlns='http://www.w3.org/1998/Math/MathML'>
          <cn id='id13' type='complex-cartesian'>3<sep/>4</cn>
        </math>
      </formula>

The following table was created by using ``\mathmo`` on all Unicode
characters between 2100 and 214B. Some glyphs are missing. |mathmo|

.. _cmd-multimathlabel:

\\multi@math@label (Tralics internal counter)
---------------------------------------------

There is a special counter ``\multi@math@label``, whose value is
normally zero; it is set to 1, when *Tralics* is called with the option
-multi_math_label. Consider the following example.

.. container:: ltx-source

   ::

      \def\theequation{\thesection.\arabic{equation}}
      \begin{equation}e=mc^2\label{x}\end{equation} \eqref{x}
      \begin{equation}e=mc^2\tag{EQ}\label{y}\end{equation} \eqref{y}

The translation of the second line is given below. The main object is a
``<formula>`` element, that has some attributes: one that says that it
should be typeset set in display math mode (note that the math element
has the same attribute), one that says that is an “equation” (this is
the name of the TeX environment); it has a unique id (``uid1``), that is
the target of the ``<ref>`` element constructed by the ``\eqref``
command; there is finally a ``id-text`` attribute, whose value is the
*current label*. This is some quantity that depends on the context (we
assume here that the formula is in the first section, so that outside
the formulas, the current label is the section number, namely 1). In the
formula, it is the value generated by ``\refstepcounter{equation}``.
Since ``\p@equation`` is undefined, it is the value of
``\theequation>``. The translation of the second equation is similar.
The effect of the ``\tag`` command is just to insert
``\qquad\mathrm{(EQ)}`` to the right of the equation. This produces two
additional lines, shown below. One could say ``\tagasattribute``; this
has as effect to insert ``tag='(EQ)'`` as attribute pair to the main
element. See `\\tag <doc-t.html#cmd-tag>`__ for details.

.. container:: xml_out

   ::

      <formula id-text='1.1' id='uid1' textype='equation' type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow>
            <mi>e</mi>
            <mo>=</mo>
            <mi>m</mi>
            <msup><mi>c</mi> <mn>2</mn> </msup>
          </mrow>
        </math>
      </formula>
      <p noindent='true'>(<ref target='uid1'/>)</p>
      ...
            <mspace width='2.em'/>
            <mrow><mo>(</mo><mi> EQ </mi><mo>)</mo></mrow>
      ...

The following example is wrongly translated by *Tralics*. This produces
a set of two equations with an alignment point. The ``<math>`` contains
a table, with two columns, the first is right-aligned, the second is
left-aligned. In principle each row is numbered. The value of the
equation counter is 3 (note that LaTeX decrements the equation counter
whenever it sees ``\tag`` or ``\notag``, but not *Tralics*). In this
example, the equation counter is incremented one, but the *current
label* is defined locally in the first cell of the table, hence lost. So
the formula has attributes ``id-text='1' id='uid4'``. The expectation is
that ``\ref{a}`` and ``\ref{b}`` point to the first and second row, and
that the *printed value* is the number of the equation and “foo”
respectively. Here, by *printed value*, we mean some text that can be
used in a translation of the reference into HTML or Pdf as content of
the anchor; for us this is the ``id-text`` associated to the ``id``. It
happens that the first label points to the formula, and the second
provokes an error: Label will be lost: b.

.. container:: ltx-source

   ::

      \begin{align}
      a&b \label{a} \\
      c&d \tag{foo}\label{b}
      \end{align}

Let's consider what happens when the counter ``\multi@math@label`` is
non-zero, or the option -multi_math_label has been used. (we assume that
the value of the equation counter is 4). The translation is exactly as
above, except for some environments like ``align``. These environments
have a starred version, wich is unnumbered; in this case, ``\label``,
and ``\tag`` should not be used. One each row, there should be at most
one label, at most one tag (otherwise, you will get an error message of
the form Multiple \\tag vv on row 3 of the formula or Multiple \\abel uu
on row 3 of the formula). The command ``\notag`` is interpreted as: do
not increment the equation counter. It is ignored if either a tag or a
label is given. If no tag is given, and either there is a label or
``\notag`` is omitted, then the equation counter is incremented; this
will create a *current label* (in the example, it will be ``1.5``) which
is memorized (*Tralics* behaves as if it had seen ``\tag{1.5}``). If a
tag is present, it will add two attribute pairs (for instance
``id-text='1.5'    id='uid5'``) to the current row; if moreover a label
is present, this will become the anchor of the label.

.. container:: xml_out

   ::

      <formula textype='align' type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mtable displaystyle='true'>
            <mtr id-text='1.5' id='uid5'>
              <mtd columnalign='right'><mi>a</mi></mtd>
              <mtd columnalign='left'><mi>b</mi></mtd>
            </mtr>
            <mtr id-text='foo' id='uid6'>
              <mtd columnalign='right'><mi>c</mi></mtd>
              <mtd columnalign='left'><mi>d</mi></mtd>
            </mtr>
          </mtable>
        </math>
      </formula>

Consider now the following example (LaTeX Companion, 8-2-25). There are
8 rows; the equation number is incremented for rows 1, 6, and 8. The
second equation has no tag. Equations 3 and 4 have the same tag, which
is a star in math mode; in particular, a ``\ref`` to one of these
equations typesets the same as ``$*$``; the equation number is enclosed
in parentheses, except for a starred version of ``\tag``. In *Tralics*
you do not see the parentheses, so that there is no difference between
``\tag`` and ``\tag*``. Moreover, the dollar signs are ignored
(arbitrary objects can be used in LaTeX, but a character string is
required in *Tralics*). Consider now row 5. When the ``\tag`` is
evaluated, the XML element corresponding to the first row is not yet
constructed, ``\label{eq:A1}`` is not yet evaluated, and ``\ref``
translates to an empty ``<ref>`` element; the attribute pair
``target='uid9'`` is added at the very end of the job (in some cases,
this could be done earlier). We are in trouble: when *Tralics* converts
the argument of ``\tag`` into a string, there is no way to modify the
string by inserting later on the value 1.8 of the attribute ``id-text``
of the element whose ``id`` is the ``target`` so created (LaTeX solves
the problem by storing information in auxiliary files, and the file has
to be compiled at least twice). Note that the hyperref packages creates
an anchor for each label. A symbolic reference of the anchor is stored
in the auxiliary file. It could be ``equation.1.4`` or ``AMS.11``; there
is a hyperlink of the ``\ref`` part of the ``\tag`` to the first
equation. For this reason ``\ref`` is disabled while evaluation the tag.
However, when line 8 is reached, ``\theequation`` produces the correct
result.

.. container:: ltx-source

   ::

      \begin{align}
        x^2+y^2 &= z^2 \label{eq:A1}           \\
        x^3+y^3 &= z^3 \notag                  \\
        x^4+y^4 &= r^4 \tag{$*$}               \\
        x^5+y^5 &= r^5 \tag*{$*$}              \\
        x^6+y^6 &= r^6 \tag{\ref{eq:A1}$'$}    \\
            A_1 &= N_0 (\lambda ; \Omega')
                   - \phi ( \lambda ; \Omega') \\
            A_2 &= \phi (\lambda ; \Omega')
                   \, \phi (\lambda ; \Omega)
                   \tag*{ALSO (\theequation)}  \\
            A_3 &= \mathcal{N} (\lambda ; \omega)
      \end{align}

Translation. In order to reduce space, we replaced cells by locations of
the form R3C2 (row 3, column 2).

.. container:: xml_out

   ::

      <formula textype='align' type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mtable displaystyle='true'>
            <mtr id-text='1.8' id='uid9'> R1C1 R1C2</mtr>
            <mtr> R2C1 R2C2 </mtr>
            <mtr id-text='*' id='uid10'> R3C1 R3C2 </mtr>
            <mtr id-text='*' id='uid11'>R4C1 R4C2</mtr>
            <mtr id-text='eq:A1&apos;' id='uid12'>R5C1 R5C2</mtr>
            <mtr id-text='1.9' id='uid13'> R6C1 R6C2</mtr>
            <mtr id-text='ALSO (1.9)' id='uid14'> R7C1 R7C2</mtr>
            <mtr id-text='1.10' id='uid15'>  R8C1 R8C2</mtr>
          </mtable>
        </math>
      </formula>

Note: Assume that you use the options -nomathml or -dualmath, or modify
the value of the counter ``\@nomathml``. In such a case, *Tralics*
constructs a variant, a ``<texmath>`` object. This can be output as part
of the ``<formula>`` or may replace it. For instance, the translation of
the first equation could be
``<texmath id-text='1.1' id='uid1'   textype='equation' type='display'>e=mc^2</texmath>``;
the translation of the second equation is similar, but the content is
now ``e=mc^2\qquad \mathrm {(EQ)}``. In the case of the third equation,
if ``\multi@math@label`` is non-zero, the translation will be
``<texmath textype='align' type='display'>   a&amp;b  \\ c&amp;d  </texmath>``.
As you can see, the element has no ``id`` attribute, and since it
contains only text, there is no such attribute at all; both labels are
lost. Moreover, the ``<texmath>`` has no id-text.


----

docs/cmds/doc-n.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-nocentering:

\\nocentering (Tralics command)
-------------------------------

Switches to the default mode, that is not centering, nor flush left, not
flush right, nor quotation. (see also
```\centering`` <doc-c.html#cmd-centering>`__)

.. _cmd-nomathsw:

\\@nomathswi, \\@nomathswii (Tralics commands)
----------------------------------------------

In the case where ``\@nomathml=-3`` (see above) Tralics reads a math
formula, expanding all commands; the resulting list is then converted
twice as an XML expression. A font switch like ``\mathrm`` is
interpreted as ``\mml@font@normal``. A special marker is inserted in the
list, preventing this token to appear in the result. More generally,
what follows ``\@nomathswi`` appears only in the ``<math>`` object, and
what follows ``\@nomathswii`` appears only in ``<texmath>`` object. This
mechanism is used whatever the value of ``\@nomathml``. Example

.. container:: ltx-source

   ::

      $a \@nomathswi{xy} b \@nomathswii{zt} c$ 

Here are the translation when the variable ``\@nomathml`` is 0, -1, and
-3.

.. container:: xml_out

   ::

      <formula type='inline'>
        <math xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow><mi>a</mi><mrow><mi>x</mi><mi>y</mi></mrow><mi>b</mi><mi>c</mi></mrow> 
        </math>
      <texmath textype='inline' type='inline'>a  b {zt} c</texmath>
      </formula>
      <formula type='inline'>
        <math xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow><mi>a</mi><mrow><mi>x</mi><mi>y</mi></mrow><mi>b</mi><mi>c</mi></mrow>
        </math>
        <texmath>a  b {zt} c</texmath>
      </formula>

Other example. Assume that you want to create a command ``\varPi`` which
is the upper case equivalent of ``\varpi``. This command should have the
same translation as ``\Pi``, but should be presented as ``\varPi`` in
no-mathml mode. Here is a possible definition. Note that "what follows
``\@nomathswii``" was a list in the previous example, and braces are
kept in the XML; here is the expansion of ``\noexpand``, thus a control
sequence name.

.. container:: ltx-source

   ::

      \def\varPi{\@nomathswi\Pi \@nomathswii\noexpand\varPi}
      $a+\varPi$

Here are the translation when the variable ``\@nomathml`` is -3.

.. container:: xml_out

   ::

      <formula type='inline'>
        <math xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow><mi>a</mi><mo>+</mo><mi>&Pi;</mi></mrow>
        </math>
        <texmath>a+\varPi </texmath>
      </formula>


----

docs/cmds/doc-o.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-omitcite:

\\omitcite [Tralics command]
----------------------------

The effect of ``\omitcite{something}`` is to omit the reference given as
arguemnt from the bibliography. It is useful in the case of
``\nocite{*}``. For further details, see the omitcite.tex file is the
Tralics sources.


----

docs/cmds/doc-p.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-pers:

\\pers, \\persA, \\persB (Tralics command for the raweb)
--------------------------------------------------------

**Warning:** These commands are not defined by *Tralics* but by the
raweb package; your mileage may vary. You say
``\pers {Don} {Knuth} [author of TeX]`` inside a participant environment
and
``\pers {Donald} {Knuth} [Stanford] {Scientist} {American} [author of TeX]     [PHD]``
in the composition section. Brackets denote optional arguments. Between
the first to arguments, you can insert a particle like ``[de]``. In such
a case, the particle is merged with the name that follows. A special
hack is applied: a footnote in the second argument is removed, and the
footnote text is moved to the optional argument (the one containing
\`author of TeX'). Initial and final spaces are removed from the first
and last name. In the first case ``\pers`` is bound to ``\persA``, and
in the second case it is ``\persB``. Two auxiliary macros are involved
``\@persA`` and ``\@persB`` that take three and seven arguments (the get
the arguments after merging the particle, and footnote hacking).

The ``\persA`` command takes two arguments, first name and last name,
with an optional argument between them (a particle), and an optional
argument after the name (info). Example

.. container:: ltx-source

   ::

      \begin{catperso}{List of Very Important Persons}
      % \makeatletter
      % \def\@persA#1#2#3{\xbox{pers}{\xbox{firstname}{#1}%
      %  \xbox{lastname}{#2}\xbox{info}{#3}}}
      \let\pers\persA
      \pers{Jean}[de la]{Fontaine}
      \pers{Donald}{Knuth}[author of \TeX]
      \pers{  Leslie  }{Lamport}
      \pers{Jose}{Grimm \footnote{No footnote here}}
      \end{catperso}

This is the translation:

.. container:: xml_out

   ::

      <catperso><head>List of Very Important Persons 1</head>
      <pers prenom='Jean' nom='de la Fontaine'/>
      <pers prenom='Donald' nom='Knuth'>author of <TeX/></pers>
      <pers prenom='Leslie' nom='Lamport'/>
      <pers prenom='Jose' nom='Grimm'>No footnote here</pers>
      </catperso>

If we uncomment the first few lines, we can change the presentation

.. container:: xml_out

   ::

      <catperso><head>List of Very Important Persons 1</head>
      <pers><firstname>Jean</firstname><lastname>de la Fontaine</lastname><info/>
      </pers><pers><firstname>Donald</firstname><lastname>Knuth</lastname>
        <info>author of <TeX/></info>
      </pers><pers><firstname>Leslie</firstname><lastname>Lamport</lastname><info/></pers
      ></catperso>

In the section that describes the team, the ``\pers`` command is bound
to ``\persB``. The syntax is:

-  a required argument, the first name of the person,
-  an optional argument, the particle,
-  a required argument, the last name of the person,
-  an optional argument, the effective research centre,
-  a required argument, the professional category of the person,
-  a required argument, the organization of the person,
-  an optional argument, the info field,
-  and an optional argument, the HDR flag.

Example
``\pers {Rose} {Dieng-Kuntz} [Sophia] {Scientist} {Inria} [1956-2008, Research Director] [yes]``.
The process is the same as for a normal ``\persA``, there is some
preprocessing then the auxiliary macro is called. We show here the
preprocessing by redefining the auxiliary macro.

.. container:: ltx-source

   ::

      \begin{catperso}{List of Very Important Persons 2}
      \makeatletter
      \renewcommand\@persB[7][]{\xbox{pers}{\xbox{firstname}{#2}\xbox{lastname}{#3}%
      \xbox{localisation}{#1}\xbox{main-interest}{#4}\xbox{nationality}{#5}%
      \xbox{info}{#6}\xbox{hdr}{#7}}\@addnl}
      \pers{Jean}[de la]{Fontaine}{Tales}{French}[][phd]
      \pers{Donald}{Knuth}{Math}{American}[ author of \TeX]
      \pers{Leslie}{Lamport }{Computer Science}{American}
      \pers{Jose}{Grimm \footnote{No footnote here}}[Sophia]{Inria}{French}[funny text
      \end{catperso}

Translation

.. container:: xml_out

   ::

      <catperso><head>List of Very Important Persons 2</head>
      <pers><firstname>Jean</firstname><lastname>de la Fontaine</lastname>
         <localisation/><main-interest>Tales</main-interest>
         <nationality>French</nationality><info/><hdr>phd</hdr>
      </pers>
      <pers><firstname>Donald</firstname><lastname>Knuth</lastname>
         <localisation/><main-interest>Math</main-interest>
         <nationality>American</nationality><info>author of <TeX/></info><hdr/>
      </pers>
      <pers><firstname>Leslie</firstname><lastname>Lamport</lastname>
         <localisation/><main-interest>Computer Science</main-interest>
         <nationality>American</nationality><info/><hdr/>
      </pers>
      <pers><firstname>Jose</firstname><lastname>Grimm</lastname>
        <localisation>Sophia</localisation><main-interest>Inria</main-interest>
        <nationality>French</nationality><info>No footnote here, funny text</info>
        <hdr/>
      </pers>
      </catperso>

The command ``\persB`` checks the three optional parameters
(localisation, affiliation, and profession). See
`\\tralics@find@config <doc-t.html#cmd-tralicsfindconfig>`__ for how the
macro can extract information from the configuration file. For instance,
if the configuration file contains a line of the form affiliation_vals
="Inria//Cnrs//University//", then only Inria, Cnrs and University can
be used. The same holds for the profession, and research centers (the
list of valid fields for the Raweb is given on the Web page of the
Raweb). If *Tralics* is translating the activity report, a list of
research centres is given at the start of the document as in
``\UR{Sophia, Rocquencourt}``. For each person you have to indicate
which center it belongs to, this must be an element of the argument of
``\UR`` (you can omit the argument in case the list has a single
element). Otherwise, an error is signaled. Note: there may be special
cases: if the argument is ``+Rennes``, it will be replaced by ``Rennes``
and the check is omitted, if the argument is ``=Sophia``, this will
provide a default value for remaining persons. Example:

.. container:: ltx-source

   ::

      \pers {Jean B}{Dupond}[Lyon]{these}{Dec}[Ok][not yet]
      \pers {Jean A}{Dupond}[Sophia]{Chercheur}{CNRS}[Ok][not yet]
      \pers {Jean B}{Dupond}[+Lyon]{Ingenieur}{INRIA}[Ok][not yet]
      \pers {Jean C}{Dupond}[=Paris]{Other}{IBM}[Ok]
      \pers {Jean D}{Dupond}{Enseignant}{Other}[Ok][not yet]

The translation is the following

.. container:: xml_out

   ::

      <pers prenom='Jean B' nom='Dupond' affiliation='Dec' profession='these' 
         hdr='not yet' research-centre='Lyon'>Ok</pers>
      <pers prenom='Jean A' nom='Dupond' affiliation='CNRS' profession='Chercheur'
         hdr='not yet' research-centre='Sophia'>Ok</pers>
      <pers prenom='Jean B' nom='Dupond' affiliation='INRIA' profession='Ingenieur' 
         hdr='not yet' research-centre='+Lyon'>Ok</pers>
      <pers prenom='Jean C' nom='Dupond' affiliation='IBM' profession='Other' 
         research-centre='=Paris'>Ok</pers>
      <pers prenom='Jean D' nom='Dupond' affiliation='Other' profession='Enseignant' 
         hdr='not yet'>Ok</pers>


----

docs/cmds/doc-r.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-rajobname:

\\ra@jobname (Tralics command)
------------------------------

This is like ``\jobname``, but in a case like ``foo/bar/gee13``, the
final digits are removed, as well as the directory part. Hence, the
result is ``gee`` (all characters are of category code 12).

.. _cmd-RAlabel:

\\RAlabel (Tralics command)
---------------------------

The obsolete command ``\RAlabel`` reads one argument and does nothing
with it.

.. _cmd-rastartprojet:

\\RAstartprojet (Tralics command)
---------------------------------

This command is not implemented anymore.

.. _cmd-rayear:

\\ra@year (Tralics command)
---------------------------

The expansion of the command ``\ra@year`` is the value of the RA year.
This is 2001 if you invoke *Tralics* with the option year=2001. This is
also 2001 if no option is given and current date is between May 2001 and
April 2002. This is also 2000 if you translate the activity report of
year 2000, case where the file name must be of the form foo2000.tex, and
the document class must be ``ra2000``. It is an error if the year option
is given and does not match the raweb extension; in non-raweb mode, the
year option is ignored if not a number.

.. _cmd-reevaluate:

\\@reevaluate (Tralics command)
-------------------------------

When you say ``\@reevaluate\foo\bar{gee}``, then commands ``\foo`` and
``\bar`` are called with ``gee`` as argument, as in
``\def\@reevaluate#1#2#3{#1{#3}#2{#3}}``. The trick is that you can
change category code in the arguments. For details see `the
titlepage <titlepage.html#reevaluate>`__ documentation.

.. _cmd-refercite:

\\refercite (Tralics command)
-----------------------------

This is an extension of the ``\cite`` command, explained in in section
`2.8 Bibliography <raweb.html#rabib>`__ of the raweb. The commands
``\refercite{foo}`` and ``\refercite[bar]{foo}`` are equivalent to
``\cite[refer][]{foo}`` and ``\cite[refer][bar]{foo}``.

.. _cmd-rrrt:

\\rrrt (Tralics command)
------------------------

The command ``\rrrt{foo}`` is a short-hand for
``\href{http://www.inria.fr/rrrt/foo.html}``.


----

docs/cmds/doc-s.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-scanupdown:

\\@scanupdown (Tralics command)
-------------------------------

This command takes four arguments, for instance
``\@scanupdown\foo{aa}{bb}{^x_y}``. The last argument should consist in
an optional exponent and index (arguments two and three give default
values). The first command is applied to the index and exponent. For
instance, the previous expression expands to ``\foo{y}{x}``. [Note:
description corrected 2015-10-05]. If no ``x`` is given, then ``aa`` is
used instead, if no ``y`` is given then ``bb`` is used instead. The
order of exponent/index is irrelevant. A prime sign is allowed as
exponent.

.. _cmd-setmathchar:

\\setmathchar (Tralics command)
-------------------------------

If you say ``\setmathchar5 6 7``, you change the behavior of character 6
in font 5 to 7. See
```\mathfontproperty`` <doc-m.html#cmd-mathfontproperty>`__ for an
example. (See `scanint <doc-s.html#fct-scanint>`__ for details of
integer scanning). Instead of the integer 5, you can give a fontname,
for instance ``\mml@font@fraktur``, or ``\mathbf``. Instead of the
integer 6, you can give a character like :literal:`\`\x`; note that any
integer between 0 and 127 is accepted, but the value is used only if it
represents a letter (upper case, or lower case). After the second
integer, there is an equals, followed by a value, that *Tralics*
translates and converts and stores in a table (assignment is global). If
you say ``\the\setmathchar5 6``, you will get the value stored in this
table, as a sequence of characters (of category code 12, as usual).

Note. The expansion of ``\the\font`` is a token list, and you can say
``\edef\foo{\the\font}``; the same holds for ``\setmathchar`` and
``XMLbox@name``. You cannot put this in a token list via
``\everypar=\font``. You must first put the result in a macro, then say
``\toks0=\expandafter{\foo}``.

.. _cmd-setmode:

\\@setmode (Tralics command)
----------------------------

The command ``\@setmode 16`` sets the current mode to some mode. The
argument is scanned as a number (see
`scanint <doc-s.html#fct-scanint>`__), values outside the range 0-6 are
replaced by 0. Other values correspond to argument mode (0), or
horizontal mode (1), or vertical mode (2), no mode (3), bibliographic
mode (4), array mode (5), mathmode (6). Do not use this command if you
do not understand the consequences. In a case like
``1\@setmode 2 \space3 4 5\par``, there is no space between 1 and 3,
because we are vertical mode, horizontal mode is entered when the the
digit 3 is seen. In a case like ``1\@setmode 4 \space3 4 5\par`` there
is no space at all since they are ignored in bib mode. The ``\par``
command is ignored as well, so you had better to add ``\@setmode 1`` or
enclose everything in group.

.. _cmd-showxmlA:

\\show@xmlA, \\show@xmlB (Tralics commands)
-------------------------------------------

These two commands show the value of certain inner quantities; see
section `manipulating the XML tree <doc-x.html#manipulate>`__ for
examples.


----

docs/cmds/doc-t.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-ct:

\\T (Tralics command)
---------------------

The command ``\T`` produces a tilde under accent. Example.

.. container:: ltx-source

   ::

      \T E \T e \T I \T i \T U \T u

The translation is the list of following characters Ḛ ḛ Ḭ ḭ Ṵ ṵ

.. container:: xml_out

   ::

      &#7706; &#7707; &#7724; &#7725; &#7796; &#7797;

.. _cmd-tableattribute:

\\tableattribute (Tralics command)
----------------------------------

If you say ``\tableattribute{color}{black}``, this adds the attribute
``color='black'`` to the current table. The command can be used only in
math mode; you should not use this command outside a table (or a
construction like the align environment that produces a table). For an
example of use, see
```\mathattribute`` <doc-m.html#cmd-mathattribute>`__.

.. _cmd-tag:

\\tag (Special Tralics command)
-------------------------------

The ``\tag`` command is in general used to modify the printing of
equations numbers; as no such number is printed by *Tralics*, something
unusual has to be done. We discuss here one solution; there is an
alternative, see `multi-math-label <doc-m.html#cmd-multimathlabel>`__.
Adding the tag value as an attribute to the formula is not a solution
since a formula may have more than one tag. We first discuss some
auxiliary commands

The command ``\@y@tag`` takes one argument and adds it as value of the
attribute ``tag`` of the current math formula. The command ``\y@tag``
takes one argument, and translates it with some space before. The
command ``\@x@tag`` and ``\x@tag`` are similarly defined, but
parenthesis are added around the argument. The commands are defined in
the kernel as

.. container:: ltx-source

   ::

      \def\@x@tag#1{\formulaattribute{tag}{(#1)}}
      \def\@y@tag#1{\formulaattribute{tag}{#1}}
      \def\x@tag#1{\qquad\mathrm{(#1)}}
      \def\y@tag#1{\qquad\mathrm{#1}}

The idea now is that ``\tag{foo}`` is the same as ``\x@tag{foo}``.
However you could say ``\tag{\ref{xx}$'$}``, and if the label "xx"
refers to equation "(3)", you expect it to be ``\qquad(\mathrm3')``,
where the prime has the usual interpretation in math mode. For this
reason, dollars signs as removed. This does not always work. In fact
*Tralics* inserts ``\@xtag`` in the case of ``\tag`` and ``\@ytag`` in
the case of ``\tag*``.

You can make ``\@xtag`` equivalent to ``\@x@tag`` and ``\@ytag``
equivalent to ``\@y@tag``. In this case, ``\tag{foo}`` sets the
attribute ``tag='(foo)'`` of the current math formula, and
``\tag*{$*$}`` sets it as ``tag='*'`` (note that the ``\ref`` wil
provoke an error in this case). You can make the commands equivalent to
``\x@tag`` or ``\y@tag``, this will typeset ``(foo)`` or ``*``.

The command ``\@xtag`` takes one argument, say ``foo`` and pushes
``\x@tag{foo}`` to the end of the current math list. If the command is
called twice, with arguments foo and bar, the result will be
``\x@tag{foo,bar}``. The command ``\@ytag`` is similar. If you use both
``\@xtag`` and ``\@ytag``, the result will be ``\y@tag`` (said
otherwise: ``\tag*{a}\tag{b}`` is the same as ``\tag*{a,b}``). So, the
default behaviour is to merge all tags, and interpret them later one.
Note that you can refine ``\@x@tag`` if you like.

The Tralics implementation of the amsmath package provides three ways to
customize tags. The command ``\tagatcurpos`` redefines ``\@xtag`` to be
``\x@tag``. This means that ``\tag{$*$}`` is the same as ``\qquad(*)``.
The command ``\tagatendofformula`` defines ``\@xtag`` and ``\x@tag`` as
explained above (this is the default behavior). This means that
``\tag{$*$}`` is the same as ``\qquad(*)``, but pushed to the right end
of the formula. The command ``\tagasattribute`` defines ``\@xtag`` as
explained above, and ``\x@tag`` to be ``\@x@tag``. This means that
``\tag{$*$}`` puts ``(*)`` on the attribute list of the formula. Example

.. container:: ltx-source

   ::

      \[ a \tag{b} c \tag{*}\]\par
      \tagasattribute
      \[ a \tag{b} c \tag{*}\]\par
      \tagatcurpos
      \[ a \tag{b} c \tag{*}\]\par

Translation

.. container:: xml_out

   ::

      <formula type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow>
            <mi>a</mi><mi>c</mi>
            <mspace width='2.em'/><mo>(</mo><mi>b</mi><mo>,</mo><mo>*</mo><mo>)</mo>
          </mrow>
        </math>
      </formula>
      <formula type='display' tag='(b,*)'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow><mi>a</mi><mi>c</mi></mrow>
        </math>
      </formula>
      <formula type='display'>
        <math mode='display' xmlns='http://www.w3.org/1998/Math/MathML'>
          <mrow>
            <mi>a</mi>
            <mspace width='2.em'/><mo>(</mo><mi>b</mi><mo>)</mo>
            <mi>c</mi>
            <mspace width='2.em'/><mo>(</mo><mo>*</mo><mo>)</mo>
          </mrow>
        </math>
      </formula>

.. _cmd-toappear:

\\toappear (Tralics command)
----------------------------

The command translates into ``à paraître`` or ``to appear`` depending on
the current language.

.. _cmd-toplevelsection:

\\toplevelsection (Tralics command)
-----------------------------------

If you say ``\toplevelsection{\foo}``, and if ``\foo`` is a sectioning
command, it is assumed to be the highest sectionning command (otherwise
the command is ignored). For instance, the report class says
``\toplevelsection{\chapter}``, this means that the translation of
``\chapter`` is ``div0``, and ``\section`` is ``div1``. As a
consequence, ``\part`` is the same as ``\chapter``. The default is
``\section``. The book class has ``\toplevelsection{\part}``.

.. _cmd-tralicsfindconfig:

\\tralics@find@config, \\tralics@get@config (Tralics command)
-------------------------------------------------------------

Assume that the current configuration file holds a line of the form:
foo_vals="A1/B1/C1//X1/x1". This is an assignment to a variable whose
name is terminated by \_val. In this case an association list is
constructed, which can be accessed by two macros. The list associates B1
to A1, x1 to X1, it associates C1 to itself (there are no empty values).
Spaces before and after the slash signs are ignored; if you reallly want
initial or final spaces in keys or value, insert a backslash before
them; do the same if you want a slash in a key or value. Note that the
effect of foo_vals="+A2/B2" is to append the pair A2=B2 to the current
value of foo. Note also that, if the list name starts with a lower case
letter, then Other/Other is appended to the end.

The command ``\tralics@find@config`` takes one argument, its expansion
is the association list (see example below, there is an equals sign
between the key and the value, a comma between key/value pairs; the dot
at the end of the line is inserted by the ``\show`` command), and
``\tralics@get@config`` takes two argument, and expands to the value
associated to the key. This is a token list, formed a characters of
category code 12, except for space (code 5), letter, and @ (code 11).

.. container:: tty_out

   ::

      \edef\foo{\tralics@find@config{foo}}\show\foo
        \foo=macro: ->A1=B1,C1=C1,X1=x1,Other=Other.
      \edef\foo{\tralics@get@config{foo}{A1}}\show\foo
        \foo=macro: ->B1.
      \edef\foo{\tralics@get@config{foo}{C1}}\show\foo
        \foo=macro: ->C1.
      \tralics@get@config{foo}{B1}
        Error signaled at line 40 of file testclass.tex:
        Illegal value 'B1' for foo
        Use one of: A1 C1 X1 Other.
      \tralics@get@config{foobar}{B1}
        Error signaled at line 42 of file testclass.tex:
        Configuration file does not define foobar.

.. _cmd-makelabel:

\\tralics@makelabel (Tralics command)
-------------------------------------

The effect of ``\tralics@makelabel{foo}`` is the same as
``\edef\@currentlabel{\p@foo\thefoo}``. However, the current label is
stored in a character string, not in a command. If you say
``\tralics@makelabel*{foo}``, this adds an anchor to the current XML
element.

.. _cmd-tralicspopsection:

\\tralics@pop@section (Tralics command)
---------------------------------------

.. _cmd-tralicspushsection:

\\tralics@push@section (Tralics command)
----------------------------------------

The command ``\tralics@pop@section`` terminates the current RA section.
It indicates the end of the current ``\paragraph``, ``\subsection``,
``\section`` etc. It terminates even ``\chapter`` and ``\part``,
although these commands are not assumed to be in the Raweb. On the other
hand ``\tralics@push@section{mysec}`` start a new section. If the
configuration file defines xml_rasection to foo, this given an element
``<foo name='mysec'>``; if the empty string is given instead of foo, the
result is ``<mysec>`` In any case, a label named ``section:mysec`` is
defined.

.. _cmd-tralicsversion:

\\tralicsversion (Tralics command)
----------------------------------

The ``\tralicsversion`` command returns the version number of *Tralics*,
as a token list; each token in the list has category code 12. A
construction like ``\edef\foo{\tralicsversion}`` may put \`2.1' into
``\foo``.


----

docs/cmds/doc-u.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-unnumberedverbatim:

\\unnumberedverbatim (Tralics command)
--------------------------------------

After the ``\unnumberedverbatim`` command is issued, lines produced by
the ```verbatim`` <doc-v.html#env-verbatim>`__ are no more preceded by a
line number.


----

docs/cmds/doc-v.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-cv:

\\V (Tralics command)
---------------------

The command ``\V`` produces a check under accent. Example.

.. container:: ltx-source

   ::

      \V D \V d \V E \V e \V L \V l \V N \V n \V T \V t \V U \V u

Translation is the following sequence of characters Ḓ ḓ Ḙ ḙ Ḽ ḽ Ṋ ṋ Ṱ ṱ
Ṷ ṷ

.. container:: xml_out

   ::

      &#7698; &#7699; &#7704; &#7705; &#7740; &#7741; &#7754; 
      &#7755; &#7792; &#7793; &#7798; &#7799;


----

docs/cmds/doc-x.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-xbox:

\\xbox (Tralics command)
------------------------

In TeX, you can construct boxes that have a type (vertical or
horizontal), and you can try to modify the size, see
```\vbox`` <doc-v.html#cmd-vbox>`__. In *Tralics*, ``\vbox {xx}`` is the
same as ``\xbox{}{xx}``. This creates an anonymous element containing
``xx``. If you say ``\xbox{a}{xx}``, then the box is named a. The
example below shows that assignments inside the second argument are
local to the group.

.. container:: ltx-source

   ::

      \xbox{foo}{\let\FOO=xA\xbox{bar}{\let\FOO=yB\FOO} C\FOO}

Translation:

.. container:: xml_out

   ::

      <foo>A<bar>By</bar> Cx</foo>

| You can say: ``\setbox13=\xbox{foo}{\large x}``. This will put the XML
  element into box 13, and you can use it later.
| |See...| See ```\pers`` <doc-p.html#cmd-pers>`__ for an example of
  use. See also the ```xmlelement`` <doc-x.html#cmd-xmlelement>`__
  environment. **Note:** Not every character string is a valid XML name,
  and *Tralics* does not check for it.

.. _cmd-xsetfontsize:

\\@xfontsize (Tralics internal integer)
---------------------------------------

In *Tralics*, since version 2.13.1, there are eleven font sizes, named,
starting with the smaller, ``\Tiny``, ``\tiny``, ``\SMALL``, ``\Small``,
``\small``, ``\normalsize`` ``\large``, ``\Large``, ``\LARGE``,
``\huge`` and ``\Huge``. The commands ``\scriptsize`` and
``\footnotesize`` are aliases for ``\SMALL`` and ``\Small``. The current
font size can be changed by setting the integer ``\@xfontsize``. This
allows two additional sizes TINY and HUGE. The example below shows how
to implement commands ``\larger`` and ``\smaller``. Note that by default
*Tralics* translates ``{\large x}`` and ``{\Large x}`` in the same way,
but in the example below, y is in normal size.

.. container:: ltx-source

   ::

      \newcommand{\smaller}[1][1]{\larger[-#1]}
      \newcommand{\larger}[1][1]{%
        \count@\@xfontsize \advance\count@#1\relax
        \@xfontsize \count@}
      {\large x\smaller y\smaller z}{\Large w\smaller x\smaller y}

.. _cmd-XMLaddatt:

\\XMLaddatt (Tralics command)
-----------------------------

The ``\XMLaddatt`` command takes as arguments an optional star, an
optional number, an attribute name, an attribute value. It puts the
attribute pair on the XML element defined by the number. If the number
is not given, the current element will be used; this is the same as
specifying ``\XMLcurrentid`` as number. If a star is used, you can
overwrite an existing attribute pair. **Note**: There is currently no
check on the name; in particular using space, equal sign, quotes,
greater than, may result in illegal (unparsable) XML code. The command
``\XMLgetatt`` takes as arguments an optional number and an attribute
name; its expansion is the value associated to the name of the XML
element defined by the number (all characters but space are of category
code 12). Example:

.. container:: ltx-source

   ::

      {\everyxbox{Vest}
      \setbox0=\xbox{foo}{1\xbox{bar}{2} %
         \XMLaddatt[\XMLlastid]{x}{1}\XMLaddatt[\XMLcurrentid]{y}{2}\XMLaddatt{y}{22}3%
         \edef\values{x=\XMLgetatt[\XMLlastid]{x}, y=\XMLgetatt{y}, z=\XMLgetatt{z}.}%
         \show\values}
      \showbox0
      }
      {\everyxbox{West}
      \setbox0=\xbox{foo}{1\xbox{bar}{2} %
      \XMLaddatt*[\XMLlastid]{x}{1}\XMLaddatt*[\XMLcurrentid]{y}{2}\XMLaddatt*{y}{4}3%
         \edef\values{x=\XMLgetatt[\XMLlastid]{x}, y=\XMLgetatt{y}, z=\XMLgetatt{z}.}%
         \show\values}
      \showbox0
      }

The following will be printed on the screen.

.. container:: tty_out

   ::

      \values=macro: ->x=1, y=2, z=..
      Box 0: <foo y='2'>Vest1<bar x='1'>Vest2</bar> 3</foo>
      \values=macro: ->x=1, y=4, z=..
      Box0: <foo y='4'>West1<bar x='1'>West2</bar> 3</foo>

The main XML element has *ID* number one, the bibliography has number
three, the table of contents has number four, the index has number five,
the glossary has number six. Never use number two.

If the attribute name is empty, the element name is used instead of the
attribute value. Thus the expansion of ``\XMLgetatt{}`` is the name of
the current element; and ``\XMLaddatt*{}{foo}`` changes it to foo (the
star is mandatory here). In some cases no element is associated to the
number. For instance, you cannot use this mechanism to get or change the
bibliography name. Example

.. container:: ltx-source

   ::

      \setbox0\xbox{José}{Box is named \XMLgetatt{}\XMLaddatt*{}{bar}}
      \showbox0
      %prints: Box0: <bar>Box is named José</bar>

.. _cmd-xmlcomment:

\\xmlcomment (Tralics command)
------------------------------

This command reads an argument and puts it as a cmment in the XML tree.
For instance ``\xmlcomment{abc and d}`` produces ``<!--abc and d-->``.

.. _cmd-xmlcopyA:

\\XML@copyA, \\XML@copyB (Tralics command)
------------------------------------------

Whenever *Tralics* expects a box, you can use these commands; the result
is a full copy of one the two special box registers xmlA and xmlB. See
section `manipulating the XML tree <#manipulate>`__ for examples.

.. _cmd-xmlcurrentid:

\\XMLcurrentid (Tralics internal integer)
-----------------------------------------

Expansion of ``\the\XMLcurrentid`` is the *ID* of the current XML
element. This *ID* can be used as optional argument for the
```\XMLaddatt`` <#cmd-XMLaddatt>`__ command. Using the command outside a
context where a number is read yields the error *Read only variable
\\XMLcurrentid* since you cannot modify the *ID* of an element.

.. _cmd-xmlcurrencellid:

\\XMLcurrentcellid \\XMLcurrentrowid \\XMLcurrentarrayid (Tralics internal integer)
-----------------------------------------------------------------------------------

These commands expand to the *ID* of the current cell row or table, to
zero if there is no such thing. Same comments as for
``\the\XMLcurrentid`` above. Note:
``\xbox{cell}{\the \XMLcurrentcellid}`` translates to ``<cell>0</cell>``
because the element is not a cell.

.. container:: ltx-source

   ::

       \begin{tabular}{}
        \xbox{foo}{\XMLaddatt[\XMLcurrentcellid]{a}{b}}
      \end{tabular}

Translation

.. container:: xml_out

   ::

      <table rend='inline'><row><cell a='b'><foo/></cell>
      </row></table>

.. _cmd-XMLfetch:

\\XML@fetch (Tralics command)
-----------------------------

This function reads an integer, say *N*, and puts in a special location
xmlA the XML element whose *ID* is *N*. See section `manipulating the
XML tree <#manipulate>`__ for examples.

.. _cmd-XMLget:

\\XML@get, \\XML@set, \\XML@delete, \\XML@insert (Tralics command)
------------------------------------------------------------------

These four commands read an integer, say *N*. The first command puts in
xmlB the child of index *N* of xmlA. The second command replaces the
child of index *N* of xmlA by xmlB, the third command erases it; the
last inserts xmlB before the child of index *N* of xmlA. These command
may signal an error when scanning the integer, but not after that. In
the case of ``\XML@get``, if *N* is out of bounds (in particulatr if
xmlA is void), then xmlB will be void. For the other command, nothing
happens if xmlA is void or *N* is negative, or out of bounds. If *N* is
the number of children of xmlA then ``\XML@insert`` inserts xmlB at the
end. The two commands ``\XML@set`` and ``\XML@insert`` always use a deep
copy of xmlB. In the example below ``\copy0`` is like ``\box0``, except
that the content is not erased; in particular nothing is copied. The
important point is that ``\XML@insert2`` makes a copy. The resulting XML
is ``<foo>bargee<foo>bargee</foo></foo>``. See section `manipulating the
XML tree <#manipulate>`__ for more examples.

.. container:: ltx-source

   ::

      \setbox0\xbox{foo}{bar}\copy0
      \XML@setA\copy0
      \XML@setB\hbox{gee}
      \XML@insert1
      \XML@moveAB
      \XML@insert2 

.. _cmd-XMLgetatt:

\\XMLgetatt (Tralics command)
-----------------------------

This command returns the value of an attribute. See
```\XMLaddatt`` <#cmd-XMLaddatt>`__.

.. _cmd-xmlmoveAB:

\\XML@moveAB, \\XML@moveBA, \\XML@sawpAB (Tralics command)
----------------------------------------------------------

*Tralics* has two special registers xmlA and xmlB. These commands copy
xmlA in xmlB, xmlB in xmlA, or swap the values. See section
`manipulating the XML tree <#manipulate>`__ for examples.

.. _cmd-XMLsolvecite:

\\XMLsolvecite (Tralics command)
--------------------------------

The ``\XMLsolvecite[xid][type]{key}`` command takes two optional
argument and a required argument. A star is allowed after the command
name. The call ``\bibitem[ign]{key}`` is the same as
``\par \leavevmode \xbox{bibitem}{\XMLaddatt{bib-key}{ign}} \XMLsolvecite*[][]{key}``.

If the optional type is \`year' or \`refer', it will be replaced by an
empty one (note that 'refer' is the same as 'year' only in some cases,
for details see section `2.8 Bibliography <raweb.html#rabib>`__ of the
raweb documentation). Two quantities are computed by *Tralics*, an eid,
and a bid. The bid becomes the value of the ``id`` attribute of the
element numbered eid, as in ``\XMLaddatt[xid]{id}{bid25}``, see the
description of `\\XMLaddatt <#cmd-XMLaddatt>`__ for details; in
particular the current XML element is used if the first optional
argument is omitted or if its value is empty.

The bid is the same as the value of the ``target`` attribute for the
citation ``\cite[type][]{key}``, (see
```\cite`` <doc-c.html#cmd-cite>`__ for an example). For every cite, a
solvecite is required. This might be done by calling bibtex, as
``\bibitem`` solves a citation. If *Tralics* is used, it generates some
``\cititem`` and solves everything. But you can also use
``\XMLsolvecite`` directly. If you say ``\cite[foo][]{key}``, then
``\XMLsolvecite*[][foo]{key}`` solves the entry; however, if there is no
such entry to solve, then the first entry with value 'foo', whatever the
type is solved. This is the expected behavior for ``\bibitem``. If no
star is given, this allows you to put a cite command after its target.

It is an error if the entry is already solved (because the cite element
has a unique target) or if the element has an id (because ids are
unique). In the case of a ``\bibitem``, the element that gets an id is
in general the ``<p>`` element that comes from the ``\leavevmode``.

Example. The translation of
``\xbox{bibitem}{\XMLsolvecite[][foot]{toto}{key1}}`` could be
``<bibitem id='bid0'>key1</bibitem>``

.. _cmd-xmlelt:

\\xmlelt (Tralics command)
--------------------------

The translation of ``\xmlelt{foo}{bar}`` is ``<foo>bar</foo>``. See also
```\xbox`` <doc-x.html#cmd-xbox>`__ whose syntax is more or less the
same. However, ``\xmlelt`` starts a new paragraph, if needed, while
``\xbox`` is independent of the mode.

.. _cmd-xmlemptyelt:

\\xmlemptyelt (Tralics command)
-------------------------------

The translation of ``\xmlemptyelt{foo}`` is ``<foo/>``. This command
does not start a paragraph. Use ``\xmlelt{foo}{}`` or
``\leavevmode\xmlemptyelt{foo}`` if needed.

.. _cmd-xmllatex:

\\xmllatex (Tralics command)
----------------------------

This command is defined in tralics.sty as
``\newcommand\xmllatex[2]{#2}``. Said otherwise, it takes two arguments,
and ignores the first one. However *Tralics* ignores the second
argument, and handles only the first.

In the first argument, commands are not expanded, but replaced by their
names. Said otherwise, ``\foo`` is replaced by ``foo``, this is not
interesting; however ``\<\&\>`` is replaced by ``<&>``. If you do not
care, this might generate invalid XML. In the example that follows, we
define a command ``\strok``. You can apply it to the letters d, h, l, t
(uppercase and lower case), the result is a character entity defined in
the isolat2.ent file. We also give an example that shows how to put a
double accent on a character.

.. container:: ltx-source

   ::

      \def\entity#1{\xmllatex{\&#1;}{}}
      \def\strok#1{\entity{#1strok}}
      \def\Han{Hàn Th\xmllatex{&\#x1ebf;}{\'{\^e}} Thành}

      \Han\ designed \xmllatex{\pdf\<TeX/\>}{}. \l\ and \strok{l}.\\
      In Tralics version 2, you can say Th{\'{\^e}}

The resulting XML is the following.

.. container:: xml_out

   ::

      <p>Hàn Th&#x1ebf; Thành designed pdf<TeX/>. &#x142; and &lstrok;.</p>
      <p noindent='true'>In Tralics version 2, you can say Th&#x1EBF;</p>

Preview: |example of xmllatex|

.. _cmd-xmlparent:

\\XML@parent (Tralics command)
------------------------------

This puts in the special register xmlB the parent of xmlA. Since you can
manipulate the XML tree as you like, it may happen that the element has
no parent, or more than one (case where the first parent in the list is
returned). In case of failure, the result is void. See section
`manipulating the XML tree <#manipulate>`__ for examples. The example
contains a math formula, with an ex and an alpha inside a ``<mi>``
element. We explain how to fetch the alpha entity and put it in place of
the ex. Now, there are three elements that have the alpha entity as
child (because there is bold alpha). The ``\XML@parent`` command finds
neither of them, since it ignores all elements created at boot-strap
code.

.. _cmd-xmlsetA:

\\XML@setA, \\XML@\setB (Tralics command)
-----------------------------------------

These two commands behave like ``\setbox0``, this means that they read a
box, but the result is stored in one of two special box registers, xmlA
and xmlB. See section `manipulating the XML tree <#manipulate>`__ for
examples.

.. _cmd-xtag:

\\x@tag, \\@xtag (Tralics commands)
-----------------------------------

Internal commands used for equation numbering, see
```\tag`` <doc-t.html#cmd-tag>`__.

.. _manipulate:

Manipulation of the XML tree
----------------------------

*Tralics* (since version 2.15.3) provides some commands to manipulate
the XML tree it constructs. In order to make sure that the result
remains a tree, a complete copy of some objects has to be made; the
copies may be avoided by using one of the two pointers xmlA and xmlB.
One can get the name of an element; however ``\XMLname \hbox{...}`` is
difficult to implement and a bit strange: this creates a box, gets its
name, then discards the box (but the box is never destroyed). For this
reason, you can fetch only the name of a box register or one of xmlA or
xmlB.

You can say ``\XML@moveAB``, ``\XML@moveBA`` and ``\XML@swapAB``. The
effect is to copy xmlA into xmlB, or xmlB into xmlA or to swap these two
quantities. You can say ``\XML@copyA`` or ``\XML@copyB``. What you get
is a complete copy of xmlA or xmlB; you can put it in a register as
``\setbox0 \XML@copyA``. You can use ``\XML@setA`` or ``\XML@setB``,
this will read a box and put it into xmlA or xmlB. Example
``\XML@setA\box0`` put box register zero into xmlA. You can say
``\XML@A@id``; this returns the unique *ID* of xmlA. You can say
``\count0=\XML@A@id``, or ``\ifnum 0<\XML@A@id   good \else  bad\fi``.
There is also ``\XML@B@id``. You can say ``\XML@A@size``; this returns
the size of xmlA. The value is -1 in case xmlA is void, and -2 in case
xmlA is not an element.

You can say ``\XML@fetch``; this reads an integer N and puts in xmlA the
XML element whose *ID* is N. If no element is found, a void element is
used (you can use ``\XML@A@id`` to check the result). You can say
``\XML@parent``. This puts in xmlB an element whose child is xmlA, if
such an object exists; an empty box otherwise. You can say
``\XML@insert``, ``\XML@delete``, ``\XML@set`` or ``\XML@get``. These
commands read an integer N. In the case of "get", the N-th child of xmlA
is put in xmlB; in the case of "delete", it is deleted; in the case of
"put" it is replaced by a copy of xmlB, and in the case of "insert", a
copy is inserted before the element at position N; Nothing is done if
xmlA has not at least N children; except that , in the case of "insert",
N can be the size, in the case, the insert is after the last element.

We give here an example of how these commands can be used. In blue we
show what *Tralics* prints on the terminal.

.. container:: ltx-source

   ::

      before
      \xbox{foo} {  b \xbox{bar}{s \global\count0=\XMLlastid} c }
      after
      $x= \alpha^2$
      \count1=\XMLcurrentid
      \showthe\count0 \showthe\count1
      \show: 1124
      \show: 1122

At the end of the compilation *Tralics* may print someting like
*Attribute list search 1529(1509) found 1083 in 1132 elements (1120 at
boot)* . This means the total number of elements created was 1132, and
1120 elements were created at bootstrap time (the other numbers are
statistic about attributes of these elements). The commands
``\XML@fetch`` and ``\XML@parent`` do not consider these elements. For
some strange reason, the first element created after bootstrap is
``<thepage/>``, then comes the main element, then a paragraph, the *ID*
of this paragraph is in ``\count1``; after that comes ``<foo>`` and
``<bar>`` (which *ID* is in ``\count0``), this is followed by the math
formula. Consider now

.. container:: ltx-source

   ::

      \makeatletter
      \XML@fetch\count1
      %\show@xmlA
      \showthe\XML@A@size
      \show: 4
      \XML@fetch\count0
      \show@xmlA
      xmlA: <bar>s </bar>
      \XML@parent
      \show@xmlB
      xmlB: <foo> b <bar>s </bar> c </foo>

The commented line explains one how could look at the element with *ID*
1122 (this the paragraph); it has four children; two pieces of text,
``<foo>`` and the math formula.

Let's swap xmlA and xmlB, fetch the *ID* of xmlA (this should be 1123),
modify the attribute list, and show A again

.. container:: ltx-source

   ::

      \XML@swapAB \count2=\XML@A@id 
      \XMLaddatt[\count2]{mayatt}{myval}
      \show@xmlA 
      xmlA: <foo myatt='myval'> b <bar>>s </bar> c </foo>

Let's get the parent of xmlA, and the children of index 3, then 0 then 0
(this is a ``<mrow>`` element with three children, a letter, an equals
signs and a square. We store in count4 the *ID* of the row, then take
the square, then the alpha. We put the alpha in a box register, then
inset a copy of it in the XML tree. Note that the size is now 6, as one
of the previous line inserted a space after the math formula.

.. container:: ltx-source

   ::

      \XML@parent \XML@moveBA \XML@get3  \XML@swapAB \XML@get0 %
      \XML@swapAB \XML@get0 \count4=\XML@B@id 
      \XML@swapAB \XML@get2 \XML@swapAB \XML@get0 
      \show@xmlB \setbox0=\XML@copyB \showbox0  \copy0 %
      xmlB: <mi>&alpha;</mi>
      Box0: <mi>&alpha;</mi>
      \copy0 \XML@fetch\count1\showthe\XML@A@size
      \XML@fetch\count1\showthe\XML@A@size
      \show: 6

The *Tralics* distribution contains a file with a single line of code:
``Hello, world!``. Let's compile it into hello.xml, and read this file.
If this succeeds, then the content of the file will be in xmlA. As you
can see, *Tralics* created an element called ``root``, with seven sons.
These are, in order, the XML declaration, a newline character, the
DOCTYPE declaration, a newline character, a comment indicating the
*Tralics* version and compilation date, a newline character, and the
real content of the file. If we ask for the *ID* of the element, we get
the values shown below. Here zero means that the XML element is a
character string; minus one means that it is a comment, minus two that
it is a declaration (for instance the DOCTYPE), minus three a processing
instruction and minus four that it is void ( this means that
``\XML@get7`` failed).

.. container:: ltx-source

   ::

      \readxml{hello.xml}\showthe\XML@A@size\showthe\XML@A@name
      \show: 7
      \show: root
      \XML@get0 \showthe\XML@B@id
      \show: -3
      \XML@get1 \showthe\XML@B@id 
      \show: -0
      \XML@get2 \showthe\XML@B@id 
      \show: -2
      \XML@get4 \showthe\XML@B@id
      \show: -1
      \XML@get7 \showthe\XML@B@id 
      \show: -4

There is a possibility to specify the name of the main element (see
`this documentation <titlepage.html>`__), generally based on the current
document class; since our document lacks a ``\documentclass``
declaration, the name will be ``unknown``. You can put the name into a
macro, and compare it with something (so you could do something with the
first child that has a given name); note that the name is formed of
characters of category code 12, so you have to use the ``\detokenize``
trick. For some reason, the first child of the main element is a newline
character; the second one is ``<p>Hello,   world!</p>``, with a newline
character (since there was one in the original file). We close the
current paragraph and insert the element in the current XML tree.

.. container:: ltx-source

   ::

      \XML@get6 \showthe\XML@B@name
      \show: unknown
      \edef\pfoo{\detokenize{unknown}}
      \edef\foo{\the\XML@B@name} \ifx\foo\pfoo\else \ooups\fi 
      \XML@swapAB \XML@get1 \show@xmlB  \par\XML@copyB 
      xmlB: <p>Hello, world!
      </p>

Let's do something with box0. We put it in xmlA via its *ID*. We add an
attribute list, copy it in box1, then modify the attribute list of the
copy. We give some examples of box manipulations.

.. container:: ltx-source

   ::

      \XML@fetch\XMLbox@id0 \show@xmlA
      xmlA: <mi>&alpha;</mi>
      \XMLaddatt[\XMLbox@id0]{att-name}{att-val0}
      \setbox1=\XML@copyA \leavevmode\copy1
      \XMLaddatt*[\XMLbox@id1]{att-name}{att-val1}%
      \XML@setB\hbox{E1}\XML@insert0
      \XML@setB\hbox{E3}\XML@insert2
      \XML@setB\hbox{E2}\XML@set1 
      \show@xmlA 
      xmlA: <mi att-name='att-val0'>E1E2E3</mi>

Let's do something with box1. We put it in xmlA via a box assignment
(note that ``\copy1`` could also have been used). We put the content of
the box in box0, then erase it. So, the XML tree will contain an empty
``mi`` element. Then we come back to the box whose *ID* is in count4.
This is the ``<mrow>``; now we replace the first child of the first
child by the content of box0.

.. container:: ltx-source

   ::

      \XML@setA\box1 \show@xmlA \showbox1
      mlA: <mi att-name='att-val1'>&alpha;</mi>
      Box 1: empty.
      \XML@get0 \setbox0=\XML@copyB \XML@delete0
      \XML@fetch\count4 \XML@get0 \XML@swapAB 
      \XML@setB\box0 \XML@set0

This is now the translation

.. container:: xml_out

   ::

      <?xml version='1.0' encoding='UTF-8'?>
      <!DOCTYPE unknown SYSTEM 'unknown.dtd'>
      <!-- Translated from latex by tralics 2.15.3, date: 2015/07/29-->
      <unknown>
      <p>before
      <foo myatt='myval'> b <bar>s </bar> c </foo>
      after
      <formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'>NL
      <mrow><mi>α</mi><mo>=</mo><msup><mi>α</mi>NL
      <mn>2</mn> </msup></mrow></math></formula>

      <mi att-name='att-val0'>E1E2E3</mi></p>
      <p>Hello, world!
      </p><p><mi att-name='att-val1'/></p></unknown>

.. |See...| image:: /img/AR.png
.. |example of xmllatex| image:: /img/img_64.png

----

docs/cmds/doc-y.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-yearcite:

\\yearcite (Tralics command)
----------------------------

This is an extension of the ``\cite`` command, explained in section `2.8
Bibliography <raweb.html#rabib>`__ of the raweb. The commands
``\yearcite{foo}`` and ``\yearcite[bar]{foo}`` are equivalent to
``\cite[year][]{foo}`` and ``\cite[year][bar]{foo}``. They are also
equivalent to ``\cite[][]{foo}`` and ``\cite[][bar]{foo}``.

.. _cmd-ytag:

\\y@tag, \\@ytag (Tralics commands)
-----------------------------------

Internal commands used for equation numbering, see
```\tag`` <doc-t.html#cmd-tag>`__.

----

docs/cmds/doc-z.rst
~~~~~~~~~~~~~~~~~~~

.. _cmd-zapspace:

\\zap@space, \\zap@fl@space (Tralics commands)
----------------------------------------------

The ``\zap@space`` command removes all spaces in its argument. The end
of the argument is marked by a space followed by ``\@empty``. *Tralics*
defines ``\zap@fl@space``, a macro with normal syntax, that removes only
initial and final spaces. In the example that follows, blue lines is
what *Tralics* shows.

.. container:: ltx-source

   ::

      \def\includeonly#1{\edef \@partlist {\zap@space#1  \@empty}}
      \def\remove@fl@space#1#2{%
      \expandafter\def\expandafter #1\expandafter {\zap@fl@space{#2}}}
      \def\foo{foo}
      \includeonly{ bar \foo}
      \remove@fl@space\gee{ \empty\space Hello World }
      \show\@partlist
      % \@partlist=macro: ->barfoo.
      \show\gee
      % \gee=macro: ->\empty \space Hello World.


----

docs/tralics.bib
----------------


@misc{Grimm2003,
  title = {Tralics, a {{LaTeX}} to {{XML}} Translator},
  author = {Grimm, José},
  year = {2003},
  address = {{Brest}},
  file = {/Users/vincent/Zotero/storage/3LYEG4AU/Grimm - Tralics, a LaTeX to XML translator.pdf},
  language = {en}
}

@article{Grimm2003a,
  title = {Tralics, a {{LaTeX}} to {{XML}} Translator},
  author = {Grimm, José},
  year = {2003},
  volume = {24},
  pages = {12},
  abstract = {In this paper we describe Tralics, a LATEX to XML translator. A previous version of the software (written in Perl) was used to obtain the Pdf version of Inria’s "Rapport d’Activité" for year 2001. The current version of the software (written in C++) is used for both the HTML and Pdf version for the year 2002: the XML generated by Tralics is conforming to a local DTD, similar to the TEI; it was converted to Pdf via pdfTEX and the xmltex package, and the HTML via a xslt processor.},
  file = {/Users/vincent/Zotero/storage/FMG7VYNA/Grimm - 2003 - Tralics, a LaTeX to XML translator.pdf},
  journal = {TUGboat},
  language = {en},
  number = {3}
}

@techreport{Grimm2005,
  title = {Tralics, a {{LaTeX}} to {{XML}} Translator, {{Part I}}},
  author = {Grimm, José},
  year = {2005},
  institution = {{INRIA}},
  abstract = {In this paper we describe Tralics, a LATEX to XML translator. A previous version of the software (written in Perl) was used to obtain the Pdf version of Inria’s "Rapport d’Activité" for year 2001. The current version of the software (written in C++) is used for both the HTML and Pdf version since year 2002: the XML generated by Tralics is conforming to a local DTD, similar to the TEI; it is converted to Pdf via pdfTEX and the xmltex package, and the HTML via a xslt processor.},
  file = {/Users/vincent/Zotero/storage/AI5MDGPI/Grimm - 2005 - Tralics, a LaTeX to XML translator, Part I.pdf},
  language = {en},
  number = {309}
}

@techreport{Grimm2005a,
  title = {Tralics, a {{LaTeX}} to {{XML}} Translator, {{Part II}}},
  author = {Grimm, José},
  year = {2005},
  institution = {{INRIA}},
  abstract = {In this document we describe Tralics, a LATEX to XML translator, and its application to the Raweb. There are two parts: the first part describes the translator, the second part the tools required for the Raweb.},
  file = {/Users/vincent/Zotero/storage/KRE9C6WD/Grimm - 2005 - Tralics, a LaTeX to XML translator, Part II.pdf},
  language = {en},
  number = {310}
}

@techreport{Grimm2007,
  title = {Converting {{LaTeX}} to {{MathML}}: The {{Tralics}} Algorithms},
  shorttitle = {Converting {{LaTeX}} to {{MathML}}},
  author = {Grimm, José},
  year = {2007},
  pages = {16},
  institution = {{INRIA}},
  url = {https://hal.inria.fr/inria-00192610},
  urldate = {2020-05-13},
  abstract = {This paper describes how Tralics converts a sequence characters into a sequence of tokens, into a math list, and finally into a MathML formula. Tokenisation rules are the same as in TeX, the meaning of these tokens is the same as in LaTeX, and can be given in packages. Math formulas are handled in the same spirit as TeX, but construction of the MathML result is not obvious, due to particularities of both TeX and MathML.},
  file = {/Users/vincent/Zotero/storage/V9NFG8LP/Grimm - 2007 - Converting LaTeX to MathML the Tralics algorithms.pdf},
  language = {en},
  number = {6373},
  type = {Report}
}

@techreport{Grimm2007a,
  title = {Producing {{MathML}} with {{Tralics}}},
  author = {Grimm, José},
  year = {2007},
  pages = {88},
  institution = {{INRIA}},
  url = {https://hal.inria.fr/inria-00144566},
  urldate = {2020-05-13},
  abstract = {The purpose of this paper is to show that it is possible to translate almost every mathematical formula from LaTeX syntax to XML. The document you are reading contains a great number of formulas extracted from the TeX book, the LaTeX companion, the MathML recommendation, and translated into XML by Tralics; it is available in Pdf or HTML version. The HTML version was produced using a very simple style sheet; mathematics are left unchanged, and you need a MathML-aware browser, like Firefox, or adequate plugins, and a set of fonts for the symbols or operators. The Pdf version was obtained by use of xmltex (a package by D. Carlisle that makes TeX an XML interpreter), and a great number of modifications to the file mathml2.xmt (that interprets elements in the MathML namespace). All files needed to produce this document are part of the Tralics bundle (version 2.10 or more).},
  file = {/Users/vincent/Zotero/storage/K43E3Z3H/Grimm - 2007 - Producing MathML with Tralics.pdf},
  language = {en},
  number = {6181},
  type = {Report}
}

@article{Grimm2008,
  title = {{Convertir du LaTeX en HTML en passant par XML : Deux exemples d’utilisation de Tralics}},
  shorttitle = {{Convertir du LaTeX en HTML en passant par XML}},
  author = {Grimm, José},
  year = {2008},
  pages = {29--59},
  issn = {1140-9304},
  doi = {10.5802/cg.342},
  url = {http://cahiers.gutenberg.eu.org/fitem?id=CG_2008___51_29_0},
  urldate = {2020-05-13},
  abstract = {This paper demonstrates on two examples how a LATEX document can be converted to HTML using an XML intermediate document. The first example is the Inria’s Activity Report, for which the printed reference (the PDF version) is obtained from the XML. The second example concerns a PHD thesis, whose translation to HTML was undertaken after the defence, and needed some adaptations.},
  file = {/Users/vincent/Zotero/storage/FH7BBFKR/Grimm - 2008 - Convertir du LaTeX en HTML en passant par XML  De.pdf},
  journal = {Cahiers GUTenberg},
  language = {fr},
  number = {51}
}

